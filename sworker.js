var version = "v311"; this.addEventListener("install", function (e) { e.waitUntil(caches.open(version).then(function (e) { return e.addAll([]) })) }), this.addEventListener("fetch", function (e) { "GET" == e.request.method && e.respondWith(caches.match(e.request).then(function (n) { return n || fetch(e.request).then(function (n) { return caches.open(version).then(function (t) { return t.put(e.request, n.clone()), n }) }) })) }), this.addEventListener("activate", function (e) { var n = [version]; e.waitUntil(caches.keys().then(function (e) { return Promise.all(e.map(function (e) { if (-1 === n.indexOf(e)) return caches.delete(e) })) })), this.skipWaiting().then(function () { console.log("nv", version) }) });