var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(n){var x=0;return function(){return x<n.length?{done:!1,value:n[x++]}:{done:!0}}};$jscomp.arrayIterator=function(n){return{next:$jscomp.arrayIteratorImpl(n)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,x,D){n!=Array.prototype&&n!=Object.prototype&&(n[x]=D.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(n,x){this.$jscomp$symbol$id_=n;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:x})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function n(D){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(D||"")+"_"+x++,D)}var x=0;return n}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.asyncIterator;n||(n=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};
$jscomp.iteratorFromArray=function(n,x){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var D=0,H={next:function(){if(D<n.length){var w=D++;return{value:x(w,n[w]),done:!1}}H.next=function(){return{done:!0,value:void 0}};return H.next()}};H[Symbol.iterator]=function(){return H};return H};
$jscomp.polyfill=function(n,x,D,H){if(x){D=$jscomp.global;n=n.split(".");for(H=0;H<n.length-1;H++){var w=n[H];w in D||(D[w]={});D=D[w]}n=n[n.length-1];H=D[n];x=x(H);x!=H&&null!=x&&$jscomp.defineProperty(D,n,{configurable:!0,writable:!0,value:x})}};$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(n){return n?n:function(){return[]}},"es6","es5");
$jscomp.findInternal=function(n,x,D){n instanceof String&&(n=String(n));for(var H=n.length,w=0;w<H;w++){var na=n[w];if(x.call(D,na,w,n))return{i:w,v:na}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(n){return n?n:function(n,D){return $jscomp.findInternal(this,n,D).v}},"es6","es3");$jscomp.polyfill("Math.sign",function(n){return n?n:function(n){n=Number(n);return 0===n||isNaN(n)?n:0<n?1:-1}},"es6","es3");
$jscomp.owns=function(n,x){return Object.prototype.hasOwnProperty.call(n,x)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(n,x){for(var D=1;D<arguments.length;D++){var H=arguments[D];if(H)for(var w in H)$jscomp.owns(H,w)&&(n[w]=H[w])}return n};$jscomp.polyfill("Object.assign",function(n){return n||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(n){var x="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return x?x.call(n):$jscomp.arrayIterator(n)};
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(n){function x(){this.batch_=null}function D(n){return n instanceof w?n:new w(function(V,w){V(n)})}if(n&&!$jscomp.FORCE_POLYFILL_PROMISE)return n;x.prototype.asyncExecute=function(n){if(null==this.batch_){this.batch_=[];var V=this;this.asyncExecuteFunction(function(){V.executeBatch_()})}this.batch_.push(n)};var H=$jscomp.global.setTimeout;x.prototype.asyncExecuteFunction=function(n){H(n,0)};x.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var n=
this.batch_;this.batch_=[];for(var w=0;w<n.length;++w){var x=n[w];n[w]=null;try{x()}catch(xb){this.asyncThrow_(xb)}}}this.batch_=null};x.prototype.asyncThrow_=function(n){this.asyncExecuteFunction(function(){throw n;})};var w=function(n){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var w=this.createResolveAndReject_();try{n(w.resolve,w.reject)}catch(gb){w.reject(gb)}};w.prototype.createResolveAndReject_=function(){function n(n){return function(V){x||(x=!0,n.call(w,V))}}var w=this,
x=!1;return{resolve:n(this.resolveTo_),reject:n(this.reject_)}};w.prototype.resolveTo_=function(n){if(n===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(n instanceof w)this.settleSameAsPromise_(n);else{a:switch(typeof n){case "object":var x=null!=n;break a;case "function":x=!0;break a;default:x=!1}x?this.resolveToNonPromiseObj_(n):this.fulfill_(n)}};w.prototype.resolveToNonPromiseObj_=function(n){var w=void 0;try{w=n.then}catch(gb){this.reject_(gb);return}"function"==
typeof w?this.settleSameAsThenable_(w,n):this.fulfill_(n)};w.prototype.reject_=function(n){this.settle_(2,n)};w.prototype.fulfill_=function(n){this.settle_(1,n)};w.prototype.settle_=function(n,w){if(0!=this.state_)throw Error("Cannot settle("+n+", "+w+"): Promise already settled in state"+this.state_);this.state_=n;this.result_=w;this.executeOnSettledCallbacks_()};w.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var n=0;n<this.onSettledCallbacks_.length;++n)na.asyncExecute(this.onSettledCallbacks_[n]);
this.onSettledCallbacks_=null}};var na=new x;w.prototype.settleSameAsPromise_=function(n){var w=this.createResolveAndReject_();n.callWhenSettled_(w.resolve,w.reject)};w.prototype.settleSameAsThenable_=function(n,w){var x=this.createResolveAndReject_();try{n.call(w,x.resolve,x.reject)}catch(xb){x.reject(xb)}};w.prototype.then=function(n,x){function D(n,w){return"function"==typeof n?function(w){try{H(n(w))}catch(Sa){V(Sa)}}:w}var H,V,wb=new w(function(n,w){H=n;V=w});this.callWhenSettled_(D(n,H),D(x,
V));return wb};w.prototype.catch=function(n){return this.then(void 0,n)};w.prototype.callWhenSettled_=function(n,w){function x(){switch(D.state_){case 1:n(D.result_);break;case 2:w(D.result_);break;default:throw Error("Unexpected state: "+D.state_);}}var D=this;null==this.onSettledCallbacks_?na.asyncExecute(x):this.onSettledCallbacks_.push(x)};w.resolve=D;w.reject=function(n){return new w(function(w,x){x(n)})};w.race=function(n){return new w(function(w,x){for(var H=$jscomp.makeIterator(n),V=H.next();!V.done;V=
H.next())D(V.value).callWhenSettled_(w,x)})};w.all=function(n){var x=$jscomp.makeIterator(n),H=x.next();return H.done?D([]):new w(function(n,w){function V(w){return function(x){na[w]=x;Ra--;0==Ra&&n(na)}}var na=[],Ra=0;do na.push(void 0),Ra++,D(H.value).callWhenSettled_(V(na.length-1),w),H=x.next();while(!H.done)})};return w},"es6","es3");
(function(){function n(m,a,e){this.context=m;this.urlList=a;this.onload=e;this.loadCount=0}function x(m,a,e){a=a.split(".")[0].toLowerCase();Sb[a]=m;!e||e.music&&e.mid!==Q.id||(Ta(a,e.x,e.y,e.k,e.music,e.date),e.date=0)}function D(m){for(var a=m.length,e=0;e<a;k(m[e++]).style.display="none");}function H(){r.pause0();k("playingMenu")||Tb("playingMenu");if(""==k("playingMenu").innerHTML){var m="";"true"===localStorage.nightcycle&&(m="checked");var a="";q.online||(a="<tr><td>"+l.OPTIONS_T_GS+' </td><td><input type="range" id="gameSpeed" value="0"/></td></tr>');
k("playingMenu").innerHTML='<div>\n<ul>\n<li id="backToGame">'+l.MENU_BACK+'</li>\n<li id="saveGame">'+l.ENDGAMEDLG_SAVE+'</li>\n<li id="fullscreenmenu">'+l.FULLSCREEN+'</li>\n<li id="quitButton1">'+l.MENU_QUIT+"</li>\n</ul>\n<table>\n"+a+"\n<tr><td>"+l.ZOOMSPEED+' </td><td><input type="range" id="zoomRange" value="'+localStorage.zoomMult+'"/></td></tr>\n<tr><td>'+l.OPTIONS_T_SS+' </td><td><input type="range" id="scrollRange" value="'+localStorage.scrollSpeed+'"/></td></tr>\n<tr><td>'+l.MP_SETUPMAP_T_DAY+
' </td><td><label class="container"><input id="daynightvalue" type="checkbox" '+m+'><span class="checkmark"></span></label></td>\n</table>\n<div>\n<span>'+l.OPTIONS_T_MV+'</span><br/><input type="range" id="musicRange" value="'+localStorage.musicRange+'"/><br/><br/>\n<form id="musicSelect">\n<input type="radio" name="mversion" value="originalMusic" checked /> Original<br/>\n<input type="radio" name="mversion" value="sharpRain" /> Original - <a href="https://www.youtube.com/user/rainheart666787/featured" target="_blank" rel="noopener noreferrer">Sharp Rain</a> Version<br/>\n<input type="radio" name="mversion" value="originalMusic1" /> Original - Alternative One<br/>\n<input type="radio" name="mversion" value="mute" /> Mute\n</form>\n<br />\n<span>'+
l.OPTIONS_T_SVOL+'</span><br/><input type="range" id="soundRange" value="'+localStorage.soundRange+'"/><br/>\n</div>\n</div>\n';k("quitButton1").onclick=w;k("saveGame").onclick=qf;k("backToGame").onclick=function(){A("playingMenu");r.resume0();oa()};k("daynightvalue").onchange=function(){localStorage.nightcycle=this.checked};k("fullscreenmenu").onclick=Ec;k("musicRange").oninput=function(){yb.gain.value=parseInt(k("musicRange").value)/100;localStorage.musicRange=k("musicRange").value};k("zoomRange").oninput=
function(){localStorage.zoomMult=k("zoomRange").value};k("gameSpeed")&&(k("gameSpeed").onchange=rf);k("scrollRange").oninput=function(){localStorage.scrollSpeed=k("scrollRange").value};k("soundRange").oninput=function(){zb.gain.value=parseInt(k("soundRange").value)/100;localStorage.soundRange=k("soundRange").value};localStorage.favMusic&&(k("musicSelect").mversion.value=localStorage.favMusic);m=k("musicSelect").getElementsByTagName("input");a=0;for(var e=m.length;a<e;a++)m[a].onchange=Q.reset}q.demo&&
A("saveGame")||L("saveGame");k("playingMenu").style.display="block";Da()}function w(){location.href=""}function na(m){C("setup:",m);m.toSend=[];m.orderList=[];var a=Y.roomName;a=a.substr(0,a.length-1);m.id==a&&(m.admin=!0);m.superID=Id(m.id);m.sendDirectly("channelMessage","nehhof",{});C(m.channels.channelMessage);m.channels.channelMessage.onopen=function(){fa.put(m);Ta("attack");Fc(1);C("DATACHANNEL OPEN");setTimeout(function(){C(m);t.admin?(Ua(r.onlADD(0,0,Ub(),m.superID,0),17,"connecting..."),
r.onlineKingdoms(),hb()):m.admin&&(Ua(r.mnameadd(),17,t.name),r.shareName(m.superID))},500)};m.channels.channelMessage.onerror=function(a){C(55,a)}}function V(){k("buttons").innerHTML="";k("gameName").innerHTML=""}function wb(){""==k("Multiplayer").innerHTML&&(k("Multiplayer").innerHTML="<h2>"+l.MAINSCR_MULTI.split("|")[0]+'</h2>\n<button id="createbutton">'+l.MP_SEARCH_CREATE.split("| ")[1]+'</button>\n<button id="refreshButton1" class="refreshButton">'+l.GENERAL_REFRESH+'</button>\n<table id="gameList">\n<tbody>\n<tr><td></td></tr>\n</tbody>\n</table>',
k("refreshButton1").onclick=wb,k("createbutton").onclick=Jd);t.p2p?(oa(),t.p2p.emit("getRooms"),k("returnmenu").style.display="block"):(Y||ca(),ca.func=wb)}function gb(){var m=location,a=m.hash.substr(1);""===a&&(k("returnmenu").style.display="none");if("Room"===m.hash.substr(-4))Gc?Kd():Vb=Kd;else if(Hc[a])if(Gc)Hc[a]();else Vb=Hc[a];else m.hash=""}function xb(m){return g.locateFile?g.locateFile(m,Ea):Ea+m}function Dc(m,a){m||ea("Assertion failed: "+a)}function Hd(m,a,e){var c=a+e;for(e=a;m[e]&&
!(e>=c);)++e;if(16<e-a&&m.subarray&&Ld)return Ld.decode(m.subarray(a,e));for(c="";a<e;){var b=m[a++];if(b&128){var f=m[a++]&63;if(192==(b&224))c+=String.fromCharCode((b&31)<<6|f);else{var h=m[a++]&63;b=224==(b&240)?(b&15)<<12|f<<6|h:(b&7)<<18|f<<12|h<<6|m[a++]&63;65536>b?c+=String.fromCharCode(b):(b-=65536,c+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else c+=String.fromCharCode(b)}return c}function Fd(m){for(var a=0,e=0;e<m.length;++e){var c=m.charCodeAt(e);55296<=c&&57343>=c&&(c=65536+((c&
1023)<<10)|m.charCodeAt(++e)&1023);127>=c?++a:a=2047>=c?a+2:65535>=c?a+3:a+4}var b=a+1;a=Md(b);e=Ic;c=a;if(0<b){b=c+b-1;for(var f=0;f<m.length;++f){var h=m.charCodeAt(f);if(55296<=h&&57343>=h){var d=m.charCodeAt(++f);h=65536+((h&1023)<<10)|d&1023}if(127>=h){if(c>=b)break;e[c++]=h}else{if(2047>=h){if(c+1>=b)break;e[c++]=192|h>>6}else{if(65535>=h){if(c+2>=b)break;e[c++]=224|h>>12}else{if(c+3>=b)break;e[c++]=240|h>>18;e[c++]=128|h>>12&63}e[c++]=128|h>>6&63}e[c++]=128|h&63}}e[c]=0}return a}function Ra(m,
a){0<m%a&&(m+=a-m%a);return m}function Gd(){g.HEAP8=Ic=new Int8Array(la);g.HEAP16=new Int16Array(la);g.HEAP32=pa=new Int32Array(la);g.HEAPU8=ib=new Uint8Array(la);g.HEAPU16=new Uint16Array(la);g.HEAPU32=new Uint32Array(la);g.HEAPF32=new Float32Array(la);g.HEAPF64=new Float64Array(la)}function Sa(m){for(;0<m.length;){var a=m.shift();if("function"==typeof a)a();else{var e=a.func;"number"===typeof e?void 0===a.arg?g.dynCall_v(e):g.dynCall_vi(e,a.arg):e(void 0===a.arg?null:a.arg)}}}function Nd(m){return String.prototype.startsWith?
m.startsWith("data:application/octet-stream;base64,"):0===m.indexOf("data:application/octet-stream;base64,")}function Od(){try{if(g.wasmBinary)return new Uint8Array(g.wasmBinary);if(g.readBinary)return g.readBinary(Na);throw"both async and sync fetching of the wasm failed";}catch(m){ea(m)}}function sf(){return g.wasmBinary||!Ab&&!Va||"function"!==typeof fetch?new Promise(function(m,a){m(Od())}):fetch(Na,{credentials:"same-origin"}).then(function(m){if(!m.ok)throw"failed to load wasm binary file at '"+
Na+"'";return m.arrayBuffer()}).catch(function(){return Od()})}function tf(m){function a(a,m){g.asm=a.exports;Wa--;g.monitorRunDependencies&&g.monitorRunDependencies(Wa);0==Wa&&(null!==Jc&&(clearInterval(Jc),Jc=null),Bb&&(a=Bb,Bb=null,a()))}function e(m){a(m.instance)}function c(a){sf().then(function(a){return WebAssembly.instantiate(a,b)}).then(a,function(a){Fa("failed to asynchronously prepare wasm: "+a);ea(a)})}var b={env:m,global:{NaN:NaN,Infinity:Infinity},"global.Math":Math,asm2wasm:uf};Wa++;
g.monitorRunDependencies&&g.monitorRunDependencies(Wa);if(g.instantiateWasm)try{return g.instantiateWasm(b,a)}catch(f){return Fa("Module.instantiateWasm callback failed with error: "+f),!1}g.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||Nd(Na)||"function"!==typeof fetch?c(e):WebAssembly.instantiateStreaming(fetch(Na,{credentials:"same-origin"}),b).then(e,function(a){Fa("wasm streaming compile failed: "+a);Fa("falling back to ArrayBuffer instantiation");c(e)});return{}}function Pd(){return!!Pd.uncaught_exception}
function Qd(m){try{return vf(m)}catch(a){}}function Cb(){var m=ta.last;if(!m)return jb=0;var a=ta.infos[m],e=a.type;if(!e)return jb=0,m|0;var c=Array.prototype.slice.call(arguments);g.___cxa_is_pointer_type(e);Cb.buffer||(Cb.buffer=wf(4));pa[Cb.buffer>>2]=m;m=Cb.buffer;for(var b=0;b<c.length;b++)if(c[b]&&g.___cxa_can_catch(c[b],e,m))return m=pa[m>>2],a.adjusted.push(m),jb=c[b],m|0;m=pa[m>>2];jb=e;return m|0}function Rd(){return Ic.length}function Sd(){ea()}function Td(m){m=Ra(m,65536);var a=la.byteLength;
try{return-1!==Wb.grow((m-a)/65536)?(la=Wb.buffer,!0):!1}catch(e){return!1}}function kb(m){this.name="ExitStatus";this.message="Program terminated with exit("+m+")";this.status=m}function Kc(m){function a(){if(!g.calledRun&&(g.calledRun=!0,!Lc)){Xb||(Xb=!0,Sa(Mc));Sa(xf);if(g.onRuntimeInitialized)g.onRuntimeInitialized();g._main&&Ud&&g.callMain(m);if(g.postRun)for("function"==typeof g.postRun&&(g.postRun=[g.postRun]);g.postRun.length;)Vd.unshift(g.postRun.shift());Sa(Vd)}}m=m||g.arguments;if(!(0<
Wa)){if(g.preRun)for("function"==typeof g.preRun&&(g.preRun=[g.preRun]);g.preRun.length;)Wd.unshift(g.preRun.shift());Sa(Wd);0<Wa||g.calledRun||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1);a()},1)):a())}}function ea(m){if(g.onAbort)g.onAbort(m);void 0!==m?(Nc(m),Fa(m),m=JSON.stringify(m)):m="";Lc=!0;throw"abort("+m+"). Build with -s ASSERTIONS=1 for more info.";}var Bf=function(){(function(m){"object"===typeof exports&&"undefined"!==typeof module?
module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SimpleWebRTC=m()})(function(){return function b(a,e,c){function f(p,d){if(!e[p]){if(!a[p]){var u="function"==typeof require&&require;if(!d&&u)return u(p,!0);if(h)return h(p,!0);d=Error("Cannot find module '"+p+"'");throw d.code="MODULE_NOT_FOUND",d;}d=e[p]={exports:{}};a[p][0].call(d.exports,function(b){var c=a[p][1][b];
return f(c?c:b)},d,d.exports,b,a,e,c)}return e[p].exports}for(var h="function"==typeof require&&require,d=0;d<c.length;d++)f(c[d]);return f}({1:[function(a,e,c){function b(){}e.exports=function(a,c,e){function f(a,b){if(0>=f.count)throw Error("after called too many times");--f.count;a?(h=!0,c(a),c=e):0!==f.count||h||c(null,b)}var h=!1;e=e||b;f.count=a;return 0===a?c():f}},{}],2:[function(a,e,c){e.exports=function(a,f,c){var b=a.byteLength;f=f||0;c=c||b;if(a.slice)return a.slice(f,c);0>f&&(f+=b);0>
c&&(c+=b);c>b&&(c=b);if(f>=b||f>=c||0===b)return new ArrayBuffer(0);a=new Uint8Array(a);b=new Uint8Array(c-f);for(var h=0;f<c;f++,h++)b[h]=a[f];return b.buffer}},{}],3:[function(a,e,c){e.exports=function(a,f,c){var b,h=f;f={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(c)for(b in c)f[b]=c[b];h?"audio"===h.tagName.toLowerCase()&&(f.audio=!0):h=document.createElement(f.audio?"audio":"video");f.disableContextMenu&&(h.oncontextmenu=function(a){a.preventDefault()});f.autoplay&&(h.autoplay=
"autoplay");f.muted&&(h.muted=!0);!f.audio&&f.mirror&&["","moz","webkit","o","ms"].forEach(function(a){h.style[a?a+"Transform":"transform"]="scaleX(-1)"});h.srcObject=a;return h}},{}],4:[function(a,e,c){function b(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}e.exports=b;b.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*
a);a=0==(Math.floor(10*b)&1)?a-c:a+c}return Math.min(a,this.max)|0};b.prototype.reset=function(){this.attempts=0};b.prototype.setMin=function(a){this.ms=a};b.prototype.setMax=function(a){this.max=a};b.prototype.setJitter=function(a){this.jitter=a}},{}],5:[function(a,e,c){(function(a){c.encode=function(b){b=new Uint8Array(b);var f,c=b.length,e="";for(f=0;f<c;f+=3)e+=a[b[f]>>2],e+=a[(b[f]&3)<<4|b[f+1]>>4],e+=a[(b[f+1]&15)<<2|b[f+2]>>6],e+=a[b[f+2]&63];2===c%3?e=e.substring(0,e.length-1)+"=":1===c%3&&
(e=e.substring(0,e.length-2)+"==");return e};c.decode=function(b){var f=.75*b.length,c=b.length,e=0;"="===b[b.length-1]&&(f--,"="===b[b.length-2]&&f--);var d=new ArrayBuffer(f),u=new Uint8Array(d);for(f=0;f<c;f+=4){var F=a.indexOf(b[f]);var g=a.indexOf(b[f+1]);var v=a.indexOf(b[f+2]);var T=a.indexOf(b[f+3]);u[e++]=F<<2|g>>4;u[e++]=(g&15)<<4|v>>2;u[e++]=(v&3)<<6|T&63}return d}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],6:[function(a,e,c){(function(a){function b(a){for(var b=
0;b<a.length;b++){var f=a[b];if(f.buffer instanceof ArrayBuffer){var c=f.buffer;if(f.byteLength!==c.byteLength){var h=new Uint8Array(f.byteLength);h.set(new Uint8Array(c,f.byteOffset,f.byteLength));c=h.buffer}a[b]=c}}}function c(a,f){f=f||{};var c=new p;b(a);for(var h=0;h<a.length;h++)c.append(a[h]);return f.type?c.getBlob(f.type):c.getBlob()}function d(a,f){b(a);return new Blob(a,f||{})}var p=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder;try{var z=2===(new Blob(["hi"])).size}catch(y){z=
!1}var u;if(u=z)try{u=2===(new Blob([new Uint8Array([1,2])])).size}catch(y){u=!1}var F=p&&p.prototype.append&&p.prototype.getBlob;a=z?u?a.Blob:d:F?c:void 0;e.exports=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],7:[function(a,e,c){var b=[].slice;e.exports=function(a,c){"string"==typeof c&&(c=a[c]);if("function"!=typeof c)throw Error("bind() requires a function");var f=b.call(arguments,2);return function(){return c.apply(a,
f.concat(b.call(arguments)))}}},{}],8:[function(a,e,c){function b(a){if(a){for(var f in b.prototype)a[f]=b.prototype[f];return a}}e.exports=b;b.prototype.on=b.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};b.prototype.once=function(a,b){function f(){c.off(a,f);b.apply(this,arguments)}var c=this;this._callbacks=this._callbacks||{};f.fn=b;this.on(a,f);return this};b.prototype.off=b.prototype.removeListener=
b.prototype.removeAllListeners=b.prototype.removeEventListener=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var f=this._callbacks[a];if(!f)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var c,h=0;h<f.length;h++)if(c=f[h],c===b||c.fn===b){f.splice(h,1);break}return this};b.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),f=this._callbacks[a];if(f){f=f.slice(0);for(var c=
0,e=f.length;c<e;++c)f[c].apply(this,b)}return this};b.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};b.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],9:[function(a,e,c){e.exports=function(a,f){var b=function(){};b.prototype=f.prototype;a.prototype=new b;a.prototype.constructor=a}},{}],10:[function(a,e,c){function b(a){return b.enabled(a)?function(f){f instanceof Error&&(f=f.stack||f.message);var c=new Date,h=c-(b[a]||
c);b[a]=c;f=a+" "+f+" +"+b.humanize(h);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}e.exports=b;b.names=[];b.skips=[];b.enable=function(a){try{localStorage.debug=a}catch(z){}for(var f=(a||"").split(/[\s,]+/),c=f.length,e=0;e<c;e++)a=f[e].replace("*",".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$"))};b.disable=function(){b.enable("")};b.humanize=function(a){return 36E5<=a?(a/36E5).toFixed(1)+
"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=a?(a/1E3|0)+"s":a+"ms"};b.enabled=function(a){for(var f=0,c=b.skips.length;f<c;f++)if(b.skips[f].test(a))return!1;f=0;for(c=b.names.length;f<c;f++)if(b.names[f].test(a))return!0;return!1};try{window.localStorage&&b.enable(localStorage.debug)}catch(f){}},{}],11:[function(a,e,c){e.exports=a("./lib/")},{"./lib/":12}],12:[function(a,e,c){e.exports=a("./socket");e.exports.parser=a("engine.io-parser")},{"./socket":13,"engine.io-parser":24}],13:[function(a,e,c){(function(b){function f(a,
c){if(!(this instanceof f))return new f(a,c);c=c||{};a&&"object"==typeof a&&(c=a,a=null);a&&(a=F(a),c.host=a.host,c.secure="https"==a.protocol||"wss"==a.protocol,c.port=a.port,a.query&&(c.query=a.query));this.secure=null!=c.secure?c.secure:b.location&&"https:"==location.protocol;c.host&&(a=c.host.split(":"),c.hostname=a.shift(),a.length?c.port=a.pop():c.port||(c.port=this.secure?"443":"80"));this.agent=c.agent||!1;this.hostname=c.hostname||(b.location?location.hostname:"localhost");this.port=c.port||
(b.location&&location.port?location.port:this.secure?443:80);this.query=c.query||{};"string"==typeof this.query&&(this.query=v.decode(this.query));this.upgrade=!1!==c.upgrade;this.path=(c.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!c.forceJSONP;this.jsonp=!1!==c.jsonp;this.forceBase64=!!c.forceBase64;this.enablesXDR=!!c.enablesXDR;this.timestampParam=c.timestampParam||"t";this.timestampRequests=c.timestampRequests;this.transports=c.transports||["polling","websocket"];this.readyState=
"";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=c.policyPort||843;this.rememberUpgrade=c.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=c.onlyBinaryUpgrades;this.pfx=c.pfx||null;this.key=c.key||null;this.passphrase=c.passphrase||null;this.cert=c.cert||null;this.ca=c.ca||null;this.ciphers=c.ciphers||null;this.rejectUnauthorized=c.rejectUnauthorized||null;this.open()}var c=a("./transports"),d=a("component-emitter"),p=a("debug")("engine.io-client:socket"),z=a("indexof"),
u=a("engine.io-parser"),F=a("parseuri"),g=a("parsejson"),v=a("parseqs");e.exports=f;f.priorWebsocketSuccess=!1;d(f.prototype);f.protocol=u.protocol;f.Socket=f;f.Transport=a("./transport");f.transports=a("./transports");f.parser=a("engine.io-parser");f.prototype.createTransport=function(a){p('creating transport "%s"',a);var b=this.query,f={},h;for(h in b)b.hasOwnProperty(h)&&(f[h]=b[h]);f.EIO=u.protocol;f.transport=a;this.id&&(f.sid=this.id);return new c[a]({agent:this.agent,hostname:this.hostname,
port:this.port,secure:this.secure,path:this.path,query:f,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})};f.prototype.open=function(){if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))var a=
"websocket";else{if(0==this.transports.length){var b=this;setTimeout(function(){b.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(Oc){this.transports.shift();this.open();return}a.open();this.setTransport(a)};f.prototype.setTransport=function(a){p("setting transport %s",a.name);var b=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;
a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})};f.prototype.probe=function(a){function b(){if(z.onlyBinaryUpgrades){var b=!this.supportsBinary&&z.transport.supportsBinary;F=F||b}F||(p('probe transport "%s" opened',a),B.send([{type:"ping",data:"probe"}]),B.once("packet",function(b){F||("pong"==b.type&&"probe"==b.data?(p('probe transport "%s" pong',a),z.upgrading=!0,z.emit("upgrading",
B),B&&(f.priorWebsocketSuccess="websocket"==B.name,p('pausing current transport "%s"',z.transport.name),z.transport.pause(function(){F||"closed"==z.readyState||(p("changing transport and sending upgrade packet"),v(),z.setTransport(B),B.send([{type:"upgrade"}]),z.emit("upgrade",B),B=null,z.upgrading=!1,z.flush())}))):(p('probe transport "%s" failed',a),b=Error("probe error"),b.transport=B.name,z.emit("upgradeError",b)))}))}function c(){F||(F=!0,v(),B.close(),B=null)}function h(b){var f=Error("probe error: "+
b);f.transport=B.name;c();p('probe transport "%s" failed because of error: %s',a,b);z.emit("upgradeError",f)}function e(){h("transport closed")}function d(){h("socket closed")}function u(a){B&&a.name!=B.name&&(p('"%s" works - aborting "%s"',a.name,B.name),c())}function v(){B.removeListener("open",b);B.removeListener("error",h);B.removeListener("close",e);z.removeListener("close",d);z.removeListener("upgrading",u)}p('probing transport "%s"',a);var B=this.createTransport(a,{probe:1}),F=!1,z=this;f.priorWebsocketSuccess=
!1;B.once("open",b);B.once("error",h);B.once("close",e);this.once("close",d);this.once("upgrading",u);B.open()};f.prototype.onOpen=function(){p("socket open");this.readyState="open";f.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};f.prototype.onPacket=function(a){if("opening"==this.readyState||
"open"==this.readyState)switch(p('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(g(a.data));break;case "pong":this.setPing();break;case "error":var b=Error("server error");b.code=a.data;this.emit("error",b);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else p('packet received with socket readyState "%s"',this.readyState)};f.prototype.onHandshake=function(a){this.emit("handshake",a);
this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};f.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};
f.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};f.prototype.ping=function(){this.sendPacket("ping")};f.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)if(this.callbackBuffer[a])this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);
this.prevBufferLen=0;0==this.writeBuffer.length?this.emit("drain"):this.flush()};f.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};f.prototype.write=f.prototype.send=function(a,b){this.sendPacket("message",a,b);return this};f.prototype.sendPacket=function(a,b,f){"closing"!=
this.readyState&&"closed"!=this.readyState&&(a={type:a,data:b},this.emit("packetCreate",a),this.writeBuffer.push(a),this.callbackBuffer.push(f),this.flush())};f.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){var a=function(){c.once("upgrade",b);c.once("upgradeError",b)},b=function(){c.removeListener("upgrade",b);c.removeListener("upgradeError",b);f()},f=function(){c.onClose("forced close");p("socket closing - telling transport to close");c.transport.close()};this.readyState=
"closing";var c=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?a():f()});else this.upgrading?a():f()}return this};f.prototype.onError=function(a){p("socket error %j",a);f.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};f.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){p('socket close with reason: "%s"',a);var f=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);
setTimeout(function(){f.writeBuffer=[];f.callbackBuffer=[];f.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",a,b)}};f.prototype.filterUpgrades=function(a){for(var b=[],f=0,c=a.length;f<c;f++)~z(this.transports,a[f])&&b.push(a[f]);return b}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./transport":14,
"./transports":15,"component-emitter":8,debug:21,"engine.io-parser":24,indexof:32,parsejson:40,parseqs:41,parseuri:23}],14:[function(a,e,c){function b(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;
this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized}var f=a("engine.io-parser");a=a("component-emitter");e.exports=b;a(b.prototype);b.timestamps=0;b.prototype.onError=function(a,b){a=Error(a);a.type="TransportError";a.description=b;this.emit("error",a);return this};b.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};b.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),
this.onClose();return this};b.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};b.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};b.prototype.onData=function(a){a=f.decodePacket(a,this.socket.binaryType);this.onPacket(a)};b.prototype.onPacket=function(a){this.emit("packet",a)};b.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":8,"engine.io-parser":24}],15:[function(a,
e,c){(function(b){var f=a("xmlhttprequest"),e=a("./polling-xhr"),d=a("./polling-jsonp"),p=a("./websocket");c.polling=function(a){var c=!1,h=!1,p=!1!==a.jsonp;b.location&&(h="https:"==location.protocol,(c=location.port)||(c=h?443:80),c=a.hostname!=location.hostname||c!=a.port,h=a.secure!=h);a.xdomain=c;a.xscheme=h;if("open"in new f(a)&&!a.forceJSONP)return new e(a);if(!p)throw Error("JSONP disabled");return new d(a)};c.websocket=p}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(a,e,c){(function(b){function f(){}function c(a){d.call(this,a);this.query=this.query||{};F||(b.___eio||(b.___eio=[]),F=b.___eio);this.index=F.length;var c=this;F.push(function(a){c.onData(a)});this.query.j=this.index;b.document&&b.addEventListener&&b.addEventListener("beforeunload",function(){c.script&&(c.script.onerror=f)},!1)}var d=a("./polling"),p=a("component-inherit");
e.exports=c;var z=/\n/g,u=/\\n/g,F;p(c,d);c.prototype.supportsBinary=!1;c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);d.prototype.doClose.call(this)};c.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",
b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);this.script=b;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};c.prototype.doWrite=function(a,b){function c(){f();b()}function f(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(Qc){e.onError("jsonp polling iframe removal error",Qc)}try{v=document.createElement('<iframe src="javascript:0" name="'+
e.iframeId+'">')}catch(Qc){v=document.createElement("iframe"),v.name=e.iframeId,v.src="javascript:0"}v.id=e.iframeId;e.form.appendChild(v);e.iframe=v}var e=this;if(!this.form){var h=document.createElement("form"),d=document.createElement("textarea"),p=this.iframeId="eio_iframe_"+this.index,v;h.className="socketio";h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";h.target=p;h.method="POST";h.setAttribute("accept-charset","utf-8");d.name="d";h.appendChild(d);document.body.appendChild(h);
this.form=h;this.area=d}this.form.action=this.uri();f();a=a.replace(u,"\\\n");this.area.value=a.replace(z,"\\n");try{this.form.submit()}catch(Qc){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-inherit":9}],17:[function(a,e,c){(function(b){function c(){}function h(a){u.call(this,
a);if(b.location){var c="https:"==location.protocol,f=location.port;f||(f=c?443:80);this.xd=a.hostname!=b.location.hostname||f!=a.port;this.xs=a.secure!=c}}function d(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;
this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.create()}function p(){for(var a in d.requests)d.requests.hasOwnProperty(a)&&d.requests[a].abort()}var z=a("xmlhttprequest"),u=a("./polling"),F=a("component-emitter"),g=a("component-inherit"),v=a("debug")("engine.io-client:polling-xhr");e.exports=h;e.exports.Request=d;g(h,u);h.prototype.supportsBinary=!0;h.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||!1;a.supportsBinary=
this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;return new d(a)};h.prototype.doWrite=function(a,b){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var c=this;a.on("success",b);a.on("error",function(a){c.onError("xhr post error",a)});this.sendXhr=a};h.prototype.doPoll=function(){v("xhr poll");var a=this.request(),
b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};F(d.prototype);d.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var c=this.xhr=new z(a),f=this;try{v("xhr open %s: %s",this.method,this.uri);c.open(this.method,this.uri,
this.async);this.supportsBinary&&(c.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?c.setRequestHeader("Content-type","application/octet-stream"):c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Pc){}"withCredentials"in c&&(c.withCredentials=!0);this.hasXDR()?(c.onload=function(){f.onLoad()},c.onerror=function(){f.onError(c.responseText)}):c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||1223==c.status)f.onLoad();else setTimeout(function(){f.onError(c.status)},
0)};v("xhr data %s",this.data);c.send(this.data)}catch(Pc){setTimeout(function(){f.onError(Pc)},0);return}b.document&&(this.index=d.requestsCount++,d.requests[this.index]=this)};d.prototype.onSuccess=function(){this.emit("success");this.cleanup()};d.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};d.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};d.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=
c:this.xhr.onreadystatechange=c;if(a)try{this.xhr.abort()}catch(Aa){}b.document&&delete d.requests[this.index];this.xhr=null}};d.prototype.onLoad=function(){try{try{var a=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(Oc){}var b="application/octet-stream"===a?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(Oc){this.onError(Oc)}if(null!=b)this.onData(b)};d.prototype.hasXDR=function(){return"undefined"!==typeof b.XDomainRequest&&!this.xs&&this.enablesXDR};d.prototype.abort=
function(){this.cleanup()};b.document&&(d.requestsCount=0,d.requests={},b.attachEvent?b.attachEvent("onunload",p):b.addEventListener&&b.addEventListener("beforeunload",p,!1))}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-emitter":8,"component-inherit":9,debug:21,xmlhttprequest:20}],18:[function(a,e,c){function b(a){var b=a&&a.forceBase64;if(!z||b)this.supportsBinary=!1;f.call(this,a)}var f=a("../transport"),
h=a("parseqs"),d=a("engine.io-parser");c=a("component-inherit");var p=a("debug")("engine.io-client:polling");e.exports=b;var z=null!=(new (a("xmlhttprequest"))({xdomain:!1})).responseType;c(b,f);b.prototype.name="polling";b.prototype.doOpen=function(){this.poll()};b.prototype.pause=function(a){function b(){p("paused");c.readyState="paused";a()}var c=this;this.readyState="pausing";if(this.polling||!this.writable){var f=0;this.polling&&(p("we are currently polling - waiting to pause"),f++,this.once("pollComplete",
function(){p("pre-pause polling complete");--f||b()}));this.writable||(p("we are currently writing - waiting to pause"),f++,this.once("drain",function(){p("pre-pause writing complete");--f||b()}))}else b()};b.prototype.poll=function(){p("polling");this.polling=!0;this.doPoll();this.emit("poll")};b.prototype.onData=function(a){var b=this;p("polling got data %s",a);d.decodePayload(a,this.socket.binaryType,function(a,c,f){if("opening"==b.readyState)b.onOpen();if("close"==a.type)return b.onClose(),!1;
b.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))};b.prototype.doClose=function(){function a(){p("writing close packet");b.write([{type:"close"}])}var b=this;"open"==this.readyState?(p("transport open - closing"),a()):(p("transport not open - deferring close"),this.once("open",a))};b.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0;
b.emit("drain")};b=this;d.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})};b.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+f.timestamps++);this.supportsBinary||a.sid||(a.b64=1);a=h.encode(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port);a.length&&(a="?"+a);return b+"://"+this.hostname+c+this.path+a}},{"../transport":14,"component-inherit":9,debug:21,
"engine.io-parser":24,parseqs:41,xmlhttprequest:20}],19:[function(a,e,c){function b(a){a&&a.forceBase64&&(this.supportsBinary=!1);f.call(this,a)}var f=a("../transport"),h=a("engine.io-parser"),d=a("parseqs");c=a("component-inherit");var p=a("debug")("engine.io-client:websocket"),z=a("ws");e.exports=b;c(b,f);b.prototype.name="websocket";b.prototype.supportsBinary=!0;b.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent};b.pfx=this.pfx;b.key=this.key;b.passphrase=this.passphrase;
b.cert=this.cert;b.ca=this.ca;b.ciphers=this.ciphers;b.rejectUnauthorized=this.rejectUnauthorized;this.ws=new z(a,void 0,b);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.binaryType="arraybuffer";this.addEventListeners()}};b.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(b){a.onData(b.data)};this.ws.onerror=function(b){a.onError("websocket error",b)}};"undefined"!=typeof navigator&&
/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(b.prototype.onData=function(a){var b=this;setTimeout(function(){f.prototype.onData.call(b,a)},0)});b.prototype.write=function(a){var b=this;this.writable=!1;for(var c=0,f=a.length;c<f;c++)h.encodePacket(a[c],this.supportsBinary,function(a){try{b.ws.send(a)}catch(Aa){p("websocket closed before onclose event")}});setTimeout(function(){b.writable=!0;b.emit("drain")},0)};b.prototype.onClose=function(){f.prototype.onClose.call(this)};b.prototype.doClose=
function(){"undefined"!==typeof this.ws&&this.ws.close()};b.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=+new Date);this.supportsBinary||(a.b64=1);a=d.encode(a);a.length&&(a="?"+a);return b+"://"+this.hostname+c+this.path+a};b.prototype.check=function(){return!!z&&!("__initialize"in z&&this.name===b.prototype.name)}},{"../transport":14,"component-inherit":9,
debug:21,"engine.io-parser":24,parseqs:41,ws:66}],20:[function(a,e,c){var b=a("has-cors");e.exports=function(a){var c=a.xdomain,f=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!c||b))return new XMLHttpRequest}catch(p){}try{if("undefined"!=typeof XDomainRequest&&!f&&a)return new XDomainRequest}catch(p){}if(!c)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(p){}}},{"has-cors":31}],21:[function(a,e,c){function b(){try{var a=localStorage.debug}catch(h){}return a}c=e.exports=
a("./debug");c.log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)};c.formatArgs=function(){var a=arguments,b=this.useColors;a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff);if(!b)return a;b="color: "+this.color;a=[a[0],b,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,d=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(d=e))});a.splice(d,
0,b);return a};c.save=function(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(h){}};c.load=b;c.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};c.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");c.formatters.j=function(a){return JSON.stringify(a)};c.enable(b())},
{"./debug":22}],22:[function(a,e,c){c=e.exports=function(a){function e(){}function h(){var a=+new Date;h.diff=a-(f||a);h.prev=f;f=h.curr=a;null==h.useColors&&(h.useColors=c.useColors());null==h.color&&h.useColors&&(h.color=c.colors[b++%c.colors.length]);var e=Array.prototype.slice.call(arguments);e[0]=c.coerce(e[0]);"string"!==typeof e[0]&&(e=["%o"].concat(e));var d=0;e[0]=e[0].replace(/%([a-z%])/g,function(a,b){if("%%"===a)return a;d++;b=c.formatters[b];"function"===typeof b&&(a=b.call(h,e[d]),e.splice(d,
1),d--);return a});"function"===typeof c.formatArgs&&(e=c.formatArgs.apply(h,e));(h.log||c.log||console.log.bind(console)).apply(h,e)}e.enabled=!1;h.enabled=!0;var d=c.enabled(a)?h:e;d.namespace=a;return d};c.coerce=function(a){return a instanceof Error?a.stack||a.message:a};c.disable=function(){c.enable("")};c.enable=function(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),f=b.length,e=0;e<f;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+
a+"$")))};c.enabled=function(a){var b;var f=0;for(b=c.skips.length;f<b;f++)if(c.skips[f].test(a))return!1;f=0;for(b=c.names.length;f<b;f++)if(c.names[f].test(a))return!0;return!1};c.humanize=a("ms");c.names=[];c.skips=[];c.formatters={};var b=0,f},{ms:38}],23:[function(a,e,c){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
f="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(a){var c=a,e=a.indexOf("["),d=a.indexOf("]");-1!=e&&-1!=d&&(a=a.substring(0,e)+a.substring(e,d).replace(/:/g,";")+a.substring(d,a.length));a=b.exec(a||"");for(var h={},g=14;g--;)h[f[g]]=a[g]||"";-1!=e&&-1!=d&&(h.source=c,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=
!0);return h}},{}],24:[function(a,e,c){(function(b){function f(a,b,f){if(!b)return c.encodeBase64Packet(a,f);var e=new FileReader;e.onload=function(){a.data=e.result;c.encodePacket(a,b,!0,f)};return e.readAsArrayBuffer(a.data)}function e(a,b,c){var f=Array(a.length);c=F(a.length,c);for(var e=function(a,c,e){b(c,function(b,c){f[a]=c;e(b,f)})},d=0;d<a.length;d++)e(d,a[d],c)}var d=a("./keys"),p=a("has-binary"),g=a("arraybuffer.slice"),u=a("base64-arraybuffer"),F=a("after"),y=a("utf8"),v=navigator.userAgent.match(/Android/i),
k=/PhantomJS/i.test(navigator.userAgent),Aa=v||k;c.protocol=3;var l=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},n=d(l),O={type:"error",data:"parser error"},q=a("blob");c.encodePacket=function(a,e,d,h){"function"==typeof e&&(h=e,e=!1);"function"==typeof d&&(h=d,d=null);var p=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&p instanceof ArrayBuffer){if(e){d=a.data;e=new Uint8Array(d);d=new Uint8Array(1+d.byteLength);d[0]=l[a.type];for(a=0;a<e.length;a++)d[a+1]=
e[a];a=h(d.buffer)}else a=c.encodeBase64Packet(a,h);return a}if(q&&p instanceof b.Blob)return e?Aa?a=f(a,e,h):(e=new Uint8Array(1),e[0]=l[a.type],a=new q([e.buffer,a.data]),a=h(a)):a=c.encodeBase64Packet(a,h),a;if(p&&p.base64)return h("b"+c.packets[a.type]+a.data.data);e=l[a.type];void 0!==a.data&&(e+=d?y.encode(String(a.data)):String(a.data));return h(""+e)};c.encodeBase64Packet=function(a,f){var e="b"+c.packets[a.type];if(q&&a.data instanceof q){var d=new FileReader;d.onload=function(){var a=d.result.split(",")[1];
f(e+a)};return d.readAsDataURL(a.data)}try{var h=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(Hg){a=new Uint8Array(a.data);h=Array(a.length);for(var p=0;p<a.length;p++)h[p]=a[p];h=String.fromCharCode.apply(null,h)}e+=b.btoa(h);return f(e)};c.decodePacket=function(a,b,f){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(f)try{a=y.decode(a)}catch(Gg){return O}f=a.charAt(0);return Number(f)==f&&n[f]?1<a.length?{type:n[f],data:a.substring(1)}:
{type:n[f]}:O}f=(new Uint8Array(a))[0];a=g(a,1);q&&"blob"===b&&(a=new q([a]));return{type:n[f],data:a}};c.decodeBase64Packet=function(a,c){var f=n[a.charAt(0)];if(!b.ArrayBuffer)return{type:f,data:{base64:!0,data:a.substr(1)}};a=u.decode(a.substr(1));"blob"===c&&q&&(a=new q([a]));return{type:f,data:a}};c.encodePayload=function(a,b,f){"function"==typeof b&&(f=b,b=null);var d=p(a);if(b&&d)return q&&!Aa?c.encodePayloadAsBlob(a,f):c.encodePayloadAsArrayBuffer(a,f);if(!a.length)return f("0:");e(a,function(a,
f){c.encodePacket(a,d?b:!1,!0,function(a){f(null,a.length+":"+a)})},function(a,b){return f(b.join(""))})};c.decodePayload=function(a,b,f){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,f);"function"===typeof b&&(f=b,b=null);if(""==a)return f(O,0,1);var e="";for(var d,h,p=0,v=a.length;p<v;p++)if(h=a.charAt(p),":"!=h)e+=h;else{if(""==e||e!=(d=Number(e)))return f(O,0,1);h=a.substr(p+1,d);if(e!=h.length)return f(O,0,1);if(h.length){e=c.decodePacket(h,b,!0);if(O.type==e.type&&O.data==e.data)return f(O,
0,1);if(!1===f(e,p+d,v))return}p+=d;e=""}if(""!=e)return f(O,0,1)};c.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));e(a,function(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})},function(a,c){a=c.reduce(function(a,b){b="string"===typeof b?b.length:b.byteLength;return a+b.toString().length+b+2},0);var f=new Uint8Array(a),e=0;c.forEach(function(a){var b="string"===typeof a,c=a;if(b){c=new Uint8Array(a.length);for(var d=0;d<a.length;d++)c[d]=a.charCodeAt(d);
c=c.buffer}b?f[e++]=0:f[e++]=1;a=c.byteLength.toString();for(d=0;d<a.length;d++)f[e++]=parseInt(a[d]);f[e++]=255;c=new Uint8Array(c);for(d=0;d<c.length;d++)f[e++]=c[d]});return b(f.buffer)})};c.encodePayloadAsBlob=function(a,b){e(a,function(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var f=new Uint8Array(a.length),e=0;e<a.length;e++)f[e]=a.charCodeAt(e);a=f.buffer;c[0]=0}f=(a instanceof ArrayBuffer?a.byteLength:a.size).toString();var d=new Uint8Array(f.length+
1);for(e=0;e<f.length;e++)d[e]=parseInt(f[e]);d[f.length]=255;q&&(a=new q([c.buffer,d.buffer,a]),b(null,a))})},function(a,c){return b(new q(c))})};c.decodePayloadAsBinary=function(a,b,f){"function"===typeof b&&(f=b,b=null);for(var e=[],d=!1;0<a.byteLength;){for(var h=new Uint8Array(a),p=0===h[0],v="",u=1;255!=h[u];u++){if(310<v.length){d=!0;break}v+=h[u]}if(d)return f(O,0,1);a=g(a,2+v.length);v=parseInt(v);h=g(a,0,v);if(p)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(Ig){for(p=new Uint8Array(h),
h="",u=0;u<p.length;u++)h+=String.fromCharCode(p[u])}e.push(h);a=g(a,v)}var z=e.length;e.forEach(function(a,e){f(c.decodePacket(a,b,!0),e,z)})}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./keys":25,after:1,"arraybuffer.slice":2,"base64-arraybuffer":5,blob:6,"has-binary":30,utf8:60}],25:[function(a,e,c){e.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty,e;for(e in a)c.call(a,e)&&b.push(e);return b}},
{}],26:[function(a,e,c){function b(a){d.call(this);a=a||{};this.config={chunksize:16384,pacing:0};for(var b in a)this.config[b]=a[b];this.channel=this.file=null}function f(){d.call(this);this.receiveBuffer=[];this.received=0;this.metadata={};this.channel=null}var d=a("wildemitter");a=a("util");a.inherits(b,d);b.prototype.send=function(a,b){var c=this;this.file=a;this.channel=b;var f="number"!==typeof b.bufferedAmountLowThreshold,e=0,d=function(){var h=new window.FileReader;h.onload=function(){return function(h){c.channel.send(h.target.result);
c.emit("progress",e,a.size,h.target.result);a.size>e+h.target.result.byteLength?f?window.setTimeout(d,c.config.pacing):b.bufferedAmount<=b.bufferedAmountLowThreshold&&window.setTimeout(d,0):(c.emit("progress",a.size,a.size,null),c.emit("sentFile"));e+=c.config.chunksize}}(a);var p=a.slice(e,e+c.config.chunksize);h.readAsArrayBuffer(p)};f||(b.bufferedAmountLowThreshold=8*this.config.chunksize,b.addEventListener("bufferedamountlow",d));window.setTimeout(d,0)};a.inherits(f,d);f.prototype.receive=function(a,
b){var c=this;a&&(this.metadata=a);this.channel=b;b.binaryType="arraybuffer";this.channel.onmessage=function(a){c.received+=a.data.byteLength;c.receiveBuffer.push(a.data);c.emit("progress",c.received,c.metadata.size,a.data);c.received===c.metadata.size?(c.emit("receivedFile",new window.Blob(c.receiveBuffer),c.metadata),c.receiveBuffer=[]):c.received>c.metadata.size&&(console.error("received more than expected, discarding..."),c.receiveBuffer=[])}};e.exports={};e.exports.support="undefined"!==typeof window&&
window&&window.File&&window.FileReader&&window.Blob;e.exports.Sender=b;e.exports.Receiver=f},{util:63,wildemitter:65}],27:[function(a,e,c){var b={};e.exports=function(a,c){var f=2===arguments.length,e=f?c:a;if("undefined"===typeof window||"http:"===window.location.protocol){var d=Error("NavigatorUserMediaError");d.name="HTTPS_REQUIRED";return e(d)}if(window.navigator.userAgent.match("Chrome")){var h=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),g=33,y=!window.chrome.webstore;window.navigator.userAgent.match("Linux")&&
(g=35);sessionStorage.getScreenMediaJSExtensionId?chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,function(b){b&&""!==b.sourceId?(a=f&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}},a.video.mandatory.chromeMediaSourceId=b.sourceId,window.navigator.mediaDevices.getUserMedia(a).then(function(a){e(null,a)}).catch(function(a){e(a)})):(b=Error("NavigatorUserMediaError"),
b.name="NotAllowedError",e(b))}):window.cefGetScreenMedia?window.cefGetScreenMedia(function(b){b?(a=f&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},a.video.mandatory.chromeMediaSourceId=b,window.navigator.mediaDevices.getUserMedia(a).then(function(a){e(null,a)}).catch(function(a){e(a)})):(b=Error("cefGetScreenMediaError"),b.name="CEF_GETSCREENMEDIA_CANCELED",
e(b))}):y||26<=h&&h<=g?(a=f&&a||{video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){e(null,a)}).catch(function(a){e(a)})):(h=window.setTimeout(function(){d=Error("NavigatorUserMediaError");d.name="EXTENSION_UNAVAILABLE";return e(d)},1E3),b[h]=[e,f?a:null],window.postMessage({type:"getScreen",id:h},"*"))}else window.navigator.userAgent.match("Firefox")&&
(33<=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10)?(a=f&&a||{video:{mozMediaSource:"window",mediaSource:"window"}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){e(null,a);var b=a.currentTime,c=window.setInterval(function(){a||window.clearInterval(c);if(a.currentTime==b&&(window.clearInterval(c),a.onended))a.onended();b=a.currentTime},500)}).catch(function(a){e(a)})):(d=Error("NavigatorUserMediaError"),d.name="EXTENSION_UNAVAILABLE"))};"undefined"!==typeof window&&
window.addEventListener("message",function(a){if(a.origin==window.location.origin)if("gotScreen"==a.data.type&&b[a.data.id]){var c=b[a.data.id],f=c[1],e=c[0];delete b[a.data.id];""===a.data.sourceId?(a=Error("NavigatorUserMediaError"),a.name="NotAllowedError",e(a)):(f=f||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},f.video.mandatory.chromeMediaSourceId=
a.data.sourceId,window.navigator.mediaDevices.getUserMedia(f).then(function(a){e(null,a)}).catch(function(a){e(a)}))}else"getScreenPending"==a.data.type&&window.clearTimeout(a.data.id)})},{}],28:[function(a,e,c){e.exports=function(){return this}()},{}],29:[function(a,e,c){var b=a("wildemitter"),f;"undefined"!==typeof window&&(f=window.AudioContext||window.webkitAudioContext);var d=null;e.exports=function(a,c){var e=new b;if(!f)return e;c=c||{};var h=c.smoothing||.1,p=c.interval||50,g=c.threshold,
v=c.play;c=c.history||10;var B=!0;d||(d=new f);var k=d.createAnalyser();k.fftSize=512;k.smoothingTimeConstant=h;var l=new Float32Array(k.frequencyBinCount);a.jquery&&(a=a[0]);if(a instanceof HTMLAudioElement||a instanceof HTMLVideoElement){var n=d.createMediaElementSource(a);"undefined"===typeof v&&(v=!0)}else n=d.createMediaStreamSource(a);g=g||-50;n.connect(k);v&&k.connect(d.destination);e.speaking=!1;e.setThreshold=function(a){g=a};e.setInterval=function(a){p=a};e.stop=function(){B=!1;e.emit("volume_change",
-100,g);e.speaking&&(e.speaking=!1,e.emit("stopped_speaking"));k.disconnect();n.disconnect()};e.speakingHistory=[];for(a=0;a<c;a++)e.speakingHistory.push(0);var O=function(){setTimeout(function(){if(B){var a=-Infinity;k.getFloatFrequencyData(l);for(var b=4,c=l.length;b<c;b++)l[b]>a&&0>l[b]&&(a=l[b]);e.emit("volume_change",a,g);b=0;if(a>g&&!e.speaking){for(c=e.speakingHistory.length-3;c<e.speakingHistory.length;c++)b+=e.speakingHistory[c];2<=b&&(e.speaking=!0,e.emit("speaking"))}else if(a<g&&e.speaking){for(c=
0;c<e.speakingHistory.length;c++)b+=e.speakingHistory[c];0==b&&(e.speaking=!1,e.emit("stopped_speaking"))}e.speakingHistory.shift();e.speakingHistory.push(0+(a>g));O()}},p)};O();return e}},{wildemitter:65}],30:[function(a,e,c){(function(b){var c=a("isarray");e.exports=function(a){function f(a){if(!a)return!1;if(b.Buffer&&b.Buffer.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer||b.Blob&&a instanceof Blob||b.File&&a instanceof File)return!0;if(c(a))for(var e=0;e<a.length;e++){if(f(a[e]))return!0}else if(a&&
"object"==typeof a)for(e in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,e)&&f(a[e]))return!0;return!1}return f(a)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{isarray:33}],31:[function(a,e,c){a=a("global");try{e.exports="XMLHttpRequest"in a&&"withCredentials"in new a.XMLHttpRequest}catch(b){e.exports=!1}},{global:28}],32:[function(a,e,c){var b=[].indexOf;e.exports=function(a,c){if(b)return a.indexOf(c);
for(var f=0;f<a.length;++f)if(a[f]===c)return f;return-1}},{}],33:[function(a,e,c){e.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],34:[function(a,e,c){(function(a){function b(a){if(b[a]!==p)return b[a];if("bug-string-char-index"==a)var c=!1;else if("json"==a)c=b("json-stringify")&&b("json-parse");else{var f;if("json-stringify"==a){c=u.stringify;var d="function"==typeof c&&F;if(d){(f=function(){return 1}).toJSON=f;try{d="0"===c(0)&&"0"===c(new Number)&&
'""'==c(new String)&&c(e)===p&&c(p)===p&&c()===p&&"1"===c(f)&&"[1]"==c([f])&&"[null]"==c([p])&&"null"==c(null)&&"[null,null,null]"==c([p,e,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==c({a:[f,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===c(null,f)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==c(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==c(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==c(new Date(-1))}catch(Ga){d=
!1}}c=d}if("json-parse"==a){c=u.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){f=c('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var h=5==f.a.length&&1===f.a[0];if(h){try{h=!c('"\t"')}catch(Ga){}if(h)try{h=1!==c("01")}catch(Ga){}if(h)try{h=1!==c("1.")}catch(Ga){}}}}catch(Ga){h=!1}c=h}}return b[a]=!!c}var e={}.toString,d,p,g="object"==typeof JSON&&JSON,u="object"==typeof c&&c&&!c.nodeType&&c;u&&g?(u.stringify=g.stringify,u.parse=g.parse):u=a.JSON=g||{};var F=new Date(-0xc782b5b800cec);
try{F=-109252==F.getUTCFullYear()&&0===F.getUTCMonth()&&1===F.getUTCDate()&&10==F.getUTCHours()&&37==F.getUTCMinutes()&&6==F.getUTCSeconds()&&708==F.getUTCMilliseconds()}catch(Jg){}if(!b("json")){var y=b("bug-string-char-index");if(!F)var v=Math.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],Aa=function(a,b){return k[b]+365*(a-1970)+v((a-1969+(b=+(1<b)))/4)-v((a-1901+b)/100)+v((a-1601+b)/400)};(d={}.hasOwnProperty)||(d=function(a){var b={};if((b.__proto__=null,b.__proto__={toString:1},b).toString!=
e)d=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a};else{var c=b.constructor;d=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])}}b=null;return d.call(this,a)});var l={"boolean":1,number:1,string:1,undefined:1};var n=function(a,b){var c=0,f,h;(f=function(){this.valueOf=0}).prototype.valueOf=0;var p=new f;for(h in p)d.call(p,h)&&c++;f=p=null;c?n=2==c?function(a,b){var c={},f="[object Function]"==e.call(a),h;for(h in a)f&&
"prototype"==h||d.call(c,h)||!(c[h]=1)||!d.call(a,h)||b(h)}:function(a,b){var c="[object Function]"==e.call(a),f,h;for(f in a)c&&"prototype"==f||!d.call(a,f)||(h="constructor"===f)||b(f);(h||d.call(a,f="constructor"))&&b(f)}:(p="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),n=function(a,b){var c="[object Function]"==e.call(a),f,h;if(h=!c&&"function"!=typeof a.constructor)h=typeof a.hasOwnProperty,h="object"==h?!!a.hasOwnProperty:!l[h];h=
h?a.hasOwnProperty:d;for(f in a)c&&"prototype"==f||!h.call(a,f)||b(f);for(c=p.length;f=p[--c];h.call(a,f)&&b(f));});return n(a,b)};if(!b("json-stringify")){var O={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},q=function(a,b){return("000000"+(b||0)).slice(-a)},r=function(a){var b='"',c=0,f=a.length,e=10<f&&y,d;for(e&&(d=a.split(""));c<f;c++){var h=a.charCodeAt(c);switch(h){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=O[h];break;default:b=32>h?b+("\\u00"+q(2,h.toString(16))):
b+(e?d[c]:y?a.charAt(c):a[c])}}return b+'"'},t=function(a,b,c,f,h,u,g){var F;try{var B=b[a]}catch(Lg){}if("object"==typeof B&&B){var y=e.call(B);if("[object Date]"!=y||d.call(B,"toJSON"))"function"==typeof B.toJSON&&("[object Number]"!=y&&"[object String]"!=y&&"[object Array]"!=y||d.call(B,"toJSON"))&&(B=B.toJSON(a));else if(B>-1/0&&B<1/0){if(Aa){var z=v(B/864E5);for(y=v(z/365.2425)+1970-1;Aa(y+1,0)<=z;y++);for(F=v((z-Aa(y,0))/30.42);Aa(y,F+1)<=z;F++);z=1+z-Aa(y,F);var k=(B%864E5+864E5)%864E5;var T=
v(k/36E5)%24;var l=v(k/6E4)%60;var O=v(k/1E3)%60;k%=1E3}else y=B.getUTCFullYear(),F=B.getUTCMonth(),z=B.getUTCDate(),T=B.getUTCHours(),l=B.getUTCMinutes(),O=B.getUTCSeconds(),k=B.getUTCMilliseconds();B=(0>=y||1E4<=y?(0>y?"-":"+")+q(6,0>y?-y:y):q(4,y))+"-"+q(2,F+1)+"-"+q(2,z)+"T"+q(2,T)+":"+q(2,l)+":"+q(2,O)+"."+q(3,k)+"Z"}else B=null}c&&(B=c.call(b,a,B));if(null===B)return"null";y=e.call(B);if("[object Boolean]"==y)return""+B;if("[object Number]"==y)return B>-1/0&&B<1/0?""+B:"null";if("[object String]"==
y)return r(""+B);if("object"==typeof B){for(a=g.length;a--;)if(g[a]===B)throw TypeError();g.push(B);var za=[];b=u;u+=h;if("[object Array]"==y){F=0;for(a=B.length;F<a;F++)y=t(F,B,c,f,h,u,g),za.push(y===p?"null":y);a=za.length?h?"[\n"+u+za.join(",\n"+u)+"\n"+b+"]":"["+za.join(",")+"]":"[]"}else n(f||B,function(a){var b=t(a,B,c,f,h,u,g);b!==p&&za.push(r(a)+":"+(h?" ":"")+b)}),a=za.length?h?"{\n"+u+za.join(",\n"+u)+"\n"+b+"}":"{"+za.join(",")+"}":"{}";g.pop();return a}};u.stringify=function(a,b,c){var f;
if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==(f=e.call(b)))var d=b;else if("[object Array]"==f){var h={};for(var p=0,u=b.length,g;p<u;g=b[p++],(f=e.call(g),"[object String]"==f||"[object Number]"==f)&&(h[g]=1));}if(c)if("[object Number]"==(f=e.call(c))){if(0<(c-=c%1)){var v="";for(10<c&&(c=10);v.length<c;v+=" ");}}else"[object String]"==f&&(v=10>=c.length?c:c.slice(0,10));return t("",(g={},g[""]=a,g),d,h,v,"",[])}}if(!b("json-parse")){var w=String.fromCharCode,x={92:"\\",
34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},E,C,A=function(){E=C=null;throw SyntaxError();},D=function(){for(var a=C,b=a.length,c,f,e,d,h;E<b;)switch(h=a.charCodeAt(E),h){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return c=y?a.charAt(E):a[E],E++,c;case 34:c="@";for(E++;E<b;)if(h=a.charCodeAt(E),32>h)A();else if(92==h)switch(h=a.charCodeAt(++E),h){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=x[h];E++;break;case 117:f=
++E;for(e=E+4;E<e;E++)h=a.charCodeAt(E),48<=h&&57>=h||97<=h&&102>=h||65<=h&&70>=h||A();c+=w("0x"+a.slice(f,E));break;default:A()}else{if(34==h)break;h=a.charCodeAt(E);for(f=E;32<=h&&92!=h&&34!=h;)h=a.charCodeAt(++E);c+=a.slice(f,E)}if(34==a.charCodeAt(E))return E++,c;A();default:f=E;45==h&&(d=!0,h=a.charCodeAt(++E));if(48<=h&&57>=h){for(48==h&&(h=a.charCodeAt(E+1),48<=h&&57>=h)&&A();E<b&&(h=a.charCodeAt(E),48<=h&&57>=h);E++);if(46==a.charCodeAt(E)){for(e=++E;e<b&&(h=a.charCodeAt(e),48<=h&&57>=h);e++);
e==E&&A();E=e}h=a.charCodeAt(E);if(101==h||69==h){h=a.charCodeAt(++E);43!=h&&45!=h||E++;for(e=E;e<b&&(h=a.charCodeAt(e),48<=h&&57>=h);e++);e==E&&A();E=e}return+a.slice(f,E)}d&&A();if("true"==a.slice(E,E+4))return E+=4,!0;if("false"==a.slice(E,E+5))return E+=5,!1;if("null"==a.slice(E,E+4))return E+=4,null;A()}return"$"},H=function(a){var b,c;"$"==a&&A();if("string"==typeof a){if("@"==(y?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;c||(c=!0)){a=D();if("]"==a)break;c&&(","==a?(a=D(),"]"==
a&&A()):A());","==a&&A();b.push(H(a))}return b}if("{"==a){for(b={};;c||(c=!0)){a=D();if("}"==a)break;c&&(","==a?(a=D(),"}"==a&&A()):A());","!=a&&"string"==typeof a&&"@"==(y?a.charAt(0):a[0])&&":"==D()||A();b[a.slice(1)]=H(D())}return b}A()}return a},G=function(a,b,c){c=I(a,b,c);c===p?delete a[b]:a[b]=c},I=function(a,b,c){var f=a[b],d;if("object"==typeof f&&f)if("[object Array]"==e.call(f))for(d=f.length;d--;)G(f,d,c);else n(f,function(a){G(f,a,c)});return c.call(a,b,f)};u.parse=function(a,b){var c;
E=0;C=""+a;a=H(D());"$"!=D()&&A();E=C=null;return b&&"[object Function]"==e.call(b)?I((c={},c[""]=a,c),"",b):a}}}})(this)},{}],35:[function(a,e,c){function b(a){var b=!0;a.getTracks().forEach(function(a){b="ended"===a.readyState&&b});return b}function f(){if("undefined"===typeof window||!window.navigator.mozGetUserMedia)return!1;var a=window.navigator.userAgent.match(/Firefox\/(\d+)\./);return 50>(a&&1<=a.length&&parseInt(a[1],10))}function d(a){z.call(this);var b=this.config={detectSpeakingEvents:!1,
audioFallback:!1,media:{audio:!0,video:!0},harkOptions:null,logger:u},c;for(c in a)a.hasOwnProperty(c)&&(this.config[c]=a[c]);this.logger=b.logger;this._log=this.logger.log.bind(this.logger,"LocalMedia:");this._logerror=this.logger.error.bind(this.logger,"LocalMedia:");this.localStreams=[];this.localScreens=[];navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||this._logerror("Your browser does not support local media capture.");this._audioMonitors=[];this.on("localStreamStopped",this._stopAudioMonitor.bind(this));
this.on("localScreenStopped",this._stopAudioMonitor.bind(this))}c=a("util");var g=a("hark"),p=a("getscreenmedia"),z=a("wildemitter"),u=a("mockconsole");c.inherits(d,z);d.prototype.start=function(a,c){var f=this,e=a||this.config.media;this.emit("localStreamRequested",e);navigator.mediaDevices.getUserMedia(e).then(function(a){e.audio&&f.config.detectSpeakingEvents&&f._setupAudioMonitor(a,f.config.harkOptions);f.localStreams.push(a);a.getTracks().forEach(function(c){c.addEventListener("ended",function(){b(a)&&
f._removeStream(a)})});f.emit("localStream",a);if(c)return c(null,a)}).catch(function(a){if(f.config.audioFallback&&"NotFoundError"===a.name&&!1!==e.video)e.video=!1,f.start(e,c);else if(f.emit("localStreamRequestFailed",e),c)return c(a,null)})};d.prototype.stop=function(a){this.stopStream(a);this.stopScreenShare(a)};d.prototype.stopStream=function(a){var b=this;a?-1<this.localStreams.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),f()&&this._removeStream(a)):this.localStreams.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});
f()&&b._removeStream(a)})};d.prototype.startScreenShare=function(a,b){var c=this;this.emit("localScreenRequested");"function"!==typeof a||b||(b=a,a=null);p(a,function(a,f){a?c.emit("localScreenRequestFailed"):(c.localScreens.push(f),f.getTracks().forEach(function(a){a.addEventListener("ended",function(){var a=!0;f.getTracks().forEach(function(b){a="ended"===b.readyState&&a});a&&c._removeStream(f)})}),c.emit("localScreen",f));if(b)return b(a,f)})};d.prototype.stopScreenShare=function(a){var b=this;
a?-1<this.localScreens.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),f()&&this._removeStream(a)):this.localScreens.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});f()&&b._removeStream(a)})};d.prototype.mute=function(){this._audioEnabled(!1);this.emit("audioOff")};d.prototype.unmute=function(){this._audioEnabled(!0);this.emit("audioOn")};d.prototype.pauseVideo=function(){this._videoEnabled(!1);this.emit("videoOff")};d.prototype.resumeVideo=function(){this._videoEnabled(!0);
this.emit("videoOn")};d.prototype.pause=function(){this.mute();this.pauseVideo()};d.prototype.resume=function(){this.unmute();this.resumeVideo()};d.prototype._audioEnabled=function(a){this.localStreams.forEach(function(b){b.getAudioTracks().forEach(function(b){b.enabled=!!a})})};d.prototype._videoEnabled=function(a){this.localStreams.forEach(function(b){b.getVideoTracks().forEach(function(b){b.enabled=!!a})})};d.prototype.isAudioEnabled=function(){var a=!0;this.localStreams.forEach(function(b){b.getAudioTracks().forEach(function(b){a=
a&&b.enabled})});return a};d.prototype.isVideoEnabled=function(){var a=!0;this.localStreams.forEach(function(b){b.getVideoTracks().forEach(function(b){a=a&&b.enabled})});return a};d.prototype._removeStream=function(a){var b=this.localStreams.indexOf(a);-1<b?(this.localStreams.splice(b,1),this.emit("localStreamStopped",a)):(b=this.localScreens.indexOf(a),-1<b&&(this.localScreens.splice(b,1),this.emit("localScreenStopped",a)))};d.prototype._setupAudioMonitor=function(a,b){this._log("Setup audio");b=
g(a,b);var c=this,f;b.on("speaking",function(){c.emit("speaking")});b.on("stopped_speaking",function(){f&&clearTimeout(f);f=setTimeout(function(){c.emit("stoppedSpeaking")},1E3)});b.on("volume_change",function(a,b){c.emit("volumeChange",a,b)});this._audioMonitors.push({audio:b,stream:a})};d.prototype._stopAudioMonitor=function(a){var b=-1;this._audioMonitors.forEach(function(c,f){c.stream===a&&(b=f)});-1<b&&(this._audioMonitors[b].audio.stop(),this._audioMonitors.splice(b,1))};e.exports=d},{getscreenmedia:27,
hark:29,mockconsole:37,util:63,wildemitter:65}],36:[function(a,e,c){(function(a){function b(a,b){a.set(b[0],b[1]);return a}function d(a,b){a.add(b);return a}function g(a,b){for(var c=-1,f=a?a.length:0;++c<f&&!1!==b(a[c],c,a););return a}function p(a,b,c,f){var e=-1,d=a?a.length:0;for(f&&d&&(c=a[++e]);++e<d;)c=b(c,a[e],e,a);return c}function z(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(Ng){}return b}function u(a){var b=-1,c=Array(a.size);a.forEach(function(a,f){c[++b]=
[f,a]});return c}function k(a,b){return function(c){return a(b(c))}}function y(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function v(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var f=a[b];this.set(f[0],f[1])}}function T(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var f=a[b];this.set(f[0],f[1])}}function l(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var f=a[b];this.set(f[0],f[1])}}function n(a){this.__data__=new T(a)}function q(a,b,c){var f=a[b];S.call(a,
b)&&(f===c||f!==f&&c!==c)&&(void 0!==c||b in a)||(a[b]=c)}function O(a,b){for(var c=a.length;c--;){var f=a[c][0];if(f===b||f!==f&&b!==b)return c}return-1}function r(a,b){return a&&C(b,J(b),a)}function t(a,b,c,f,e,d,h){var p;f&&(p=d?f(a,e,d,h):f(a));if(void 0!==p)return p;if(!Ga(a))return a;if(e=ra(a)){if(p=I(a),!b)return E(a,p)}else{var u=ca(a),v="[object Function]"==u||"[object GeneratorFunction]"==u;if(ya(a))return x(a,b);if("[object Object]"==u||"[object Arguments]"==u||v&&!d){if(z(a))return d?
a:{};p=L(v?{}:a);if(!b)return D(a,r(p,a))}else{if(!R[u])return d?a:{};p=K(a,u,t,b)}}h||(h=new n);if(d=h.get(a))return d;h.set(a,p);if(!e)var B=c?w(a,J,sa):J(a);g(B||a,function(e,d){B&&(d=e,e=a[d]);q(p,d,t(e,b,c,f,d,a,h))});return p}function w(a,b,c){b=b(a);if(!ra(a)){a=c(a);c=-1;for(var f=a.length,e=b.length;++c<f;)b[e+c]=a[c]}return b}function x(a,b){if(b)return a.slice();b=new a.constructor(a.length);a.copy(b);return b}function A(a){var b=new a.constructor(a.byteLength);(new fa(b)).set(new fa(a));
return b}function E(a,b){var c=-1,f=a.length;for(b||(b=Array(f));++c<f;)b[c]=a[c];return b}function C(a,b,c,f){c||(c={});for(var e=-1,d=b.length;++e<d;){var h=b[e],p=f?f(c[h],a[h],h,c,a):void 0;q(c,h,void 0===p?a[h]:p)}return c}function D(a,b){return C(a,sa(a),b)}function H(a,b){a=a.__data__;var c=typeof b;return("string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function G(a,b){a=null==a?void 0:a[b];b=!Ga(a)||Z&&Z in a?!1:(Yd(a)||
z(a)?ka:W).test(Xa(a));return b?a:void 0}function I(a){var b=a.length,c=a.constructor(b);b&&"string"==typeof a[0]&&S.call(a,"index")&&(c.index=a.index,c.input=a.input);return c}function L(a){"function"!=typeof a.constructor||za(a)?a={}:(a=la(a),a=Ga(a)?ma(a):{});return a}function K(a,c,f,e){var h=a.constructor;switch(c){case "[object ArrayBuffer]":return A(a);case "[object Boolean]":case "[object Date]":return new h(+a);case "[object DataView]":return c=e?A(a.buffer):a.buffer,new a.constructor(c,
a.byteOffset,a.byteLength);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return c=e?A(a.buffer):a.buffer,new a.constructor(c,a.byteOffset,a.length);case "[object Map]":return c=e?f(u(a),!0):u(a),p(c,b,new a.constructor);case "[object Number]":case "[object String]":return new h(a);case "[object RegExp]":return c=
new a.constructor(a.source,U.exec(a)),c.lastIndex=a.lastIndex,c;case "[object Set]":return c=e?f(y(a),!0):y(a),p(c,d,new a.constructor);case "[object Symbol]":return qa?Object(qa.call(a)):{}}}function za(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||V)}function Xa(a){if(null!=a){try{return aa.call(a)}catch(Mg){}return a+""}return""}function Xd(a){var b;if(b=null!=a)b=a.length,b="number"==typeof b&&-1<b&&0==b%1&&9007199254740991>=b;return b&&!Yd(a)}function Yd(a){a=Ga(a)?
ba.call(a):"";return"[object Function]"==a||"[object GeneratorFunction]"==a}function Ga(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function J(a){if(Xd(a)){var b;(b=ra(a))||(b=!!a&&"object"==typeof a&&Xd(a)&&S.call(a,"callee")&&(!na.call(a,"callee")||"[object Arguments]"==ba.call(a)));if(b){b=a.length;for(var c=String,f=-1,e=Array(b);++f<b;)e[f]=c(f);b=e}else b=[];c=b.length;f=!!c;for(var d in a){if(!(e=!S.call(a,d))&&(e=f)&&!(e="length"==d)){e=d;var h=c;h=null==h?9007199254740991:h;
e=!!h&&("number"==typeof e||X.test(e))&&-1<e&&0==e%1&&e<h}e||b.push(d)}a=b}else if(za(a)){d=[];for(b in Object(a))S.call(a,b)&&"constructor"!=b&&d.push(b);a=d}else a=pa(a);return a}function Af(){return[]}function P(){return!1}var U=/\w*$/,W=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,R={};R["[object Arguments]"]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=
R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R["[object Object]"]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0;R["[object Error]"]=R["[object Function]"]=R["[object WeakMap]"]=!1;var M="object"==typeof self&&self&&self.Object===Object&&self;a="object"==typeof a&&a&&a.Object===Object&&a||M||Function("return this")();
var N=(M="object"==typeof c&&c&&!c.nodeType&&c)&&"object"==typeof e&&e&&!e.nodeType&&e;M=N&&N.exports===M;N=Array.prototype;var Q=Function.prototype,V=Object.prototype,Y=a["__core-js_shared__"],Z=function(){var a=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),aa=Q.toString,S=V.hasOwnProperty,ba=V.toString,ka=RegExp("^"+aa.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Q=M?a.Buffer:void 0;
M=a.Symbol;var fa=a.Uint8Array,la=k(Object.getPrototypeOf,Object),ma=Object.create,na=V.propertyIsEnumerable,oa=N.splice;N=Object.getOwnPropertySymbols;Q=Q?Q.isBuffer:void 0;var pa=k(Object.keys,Object),ha=G(a,"DataView"),da=G(a,"Map"),ia=G(a,"Promise"),ja=G(a,"Set");a=G(a,"WeakMap");var ea=G(Object,"create"),ta=Xa(ha),ua=Xa(da),va=Xa(ia),wa=Xa(ja),xa=Xa(a),qa=(M=M?M.prototype:void 0)?M.valueOf:void 0;v.prototype.clear=function(){this.__data__=ea?ea(null):{}};v.prototype["delete"]=function(a){return this.has(a)&&
delete this.__data__[a]};v.prototype.get=function(a){var b=this.__data__;return ea?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):S.call(b,a)?b[a]:void 0};v.prototype.has=function(a){var b=this.__data__;return ea?void 0!==b[a]:S.call(b,a)};v.prototype.set=function(a,b){this.__data__[a]=ea&&void 0===b?"__lodash_hash_undefined__":b;return this};T.prototype.clear=function(){this.__data__=[]};T.prototype["delete"]=function(a){var b=this.__data__;a=O(b,a);if(0>a)return!1;a==b.length-1?b.pop():oa.call(b,
a,1);return!0};T.prototype.get=function(a){var b=this.__data__;a=O(b,a);return 0>a?void 0:b[a][1]};T.prototype.has=function(a){return-1<O(this.__data__,a)};T.prototype.set=function(a,b){var c=this.__data__,f=O(c,a);0>f?c.push([a,b]):c[f][1]=b;return this};l.prototype.clear=function(){this.__data__={hash:new v,map:new (da||T),string:new v}};l.prototype["delete"]=function(a){return H(this,a)["delete"](a)};l.prototype.get=function(a){return H(this,a).get(a)};l.prototype.has=function(a){return H(this,
a).has(a)};l.prototype.set=function(a,b){H(this,a).set(a,b);return this};n.prototype.clear=function(){this.__data__=new T};n.prototype["delete"]=function(a){return this.__data__["delete"](a)};n.prototype.get=function(a){return this.__data__.get(a)};n.prototype.has=function(a){return this.__data__.has(a)};n.prototype.set=function(a,b){var c=this.__data__;if(c instanceof T){c=c.__data__;if(!da||199>c.length)return c.push([a,b]),this;c=this.__data__=new l(c)}c.set(a,b);return this};var sa=N?k(N,Object):
Af,ca=function(a){return ba.call(a)};if(ha&&"[object DataView]"!=ca(new ha(new ArrayBuffer(1)))||da&&"[object Map]"!=ca(new da)||ia&&"[object Promise]"!=ca(ia.resolve())||ja&&"[object Set]"!=ca(new ja)||a&&"[object WeakMap]"!=ca(new a))ca=function(a){var b=ba.call(a);if(a=(a="[object Object]"==b?a.constructor:void 0)?Xa(a):void 0)switch(a){case ta:return"[object DataView]";case ua:return"[object Map]";case va:return"[object Promise]";case wa:return"[object Set]";case xa:return"[object WeakMap]"}return b};
var ra=Array.isArray,ya=Q||P;e.exports=function(a){return t(a,!0,!0)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],37:[function(a,e,c){a="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd time timeEnd trace warn".split(" ");c=a.length;for(var b=function(){},f={};c--;)f[a[c]]=b;e.exports=f},{}],38:[function(a,e,c){function b(a){if(a=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a)){var b=
parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "y":return b*d;case "days":case "day":case "d":return 864E5*b;case "hours":case "hour":case "h":return 36E5*b;case "minutes":case "minute":case "m":return 6E4*b;case "seconds":case "second":case "s":return 1E3*b;case "ms":return b}}}function f(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var d=315576E5;e.exports=function(a,c){c=c||{};return"string"==typeof a?b(a):c.long?f(a,864E5,"day")||
f(a,36E5,"hour")||f(a,6E4,"minute")||f(a,1E3,"second")||a+" ms":864E5<=a?Math.round(a/864E5)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],39:[function(a,e,c){var b=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var c=[],f;for(f in a)b.call(a,f)&&c.push(f);return c};c.values=function(a){var c=[],f;for(f in a)b.call(a,f)&&c.push(a[f]);return c};c.merge=function(a,c){for(var f in c)b.call(c,f)&&(a[f]=c[f]);return a};c.length=
function(a){return c.keys(a).length};c.isEmpty=function(a){return 0==c.length(a)}},{}],40:[function(a,e,c){(function(a){var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,p=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,u=/\s+$/;e.exports=function(f){if("string"!=typeof f||!f)return null;f=f.replace(g,"").replace(u,"");if(a.JSON&&JSON.parse)return JSON.parse(f);if(b.test(f.replace(c,"@").replace(d,"]").replace(p,"")))return(new Function("return "+
f))()}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],41:[function(a,e,c){c.encode=function(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};c.decode=function(a){var b={};a=a.split("&");for(var c=0,e=a.length;c<e;c++){var d=a[c].split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b}},{}],42:[function(a,e,c){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
f="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(a){a=b.exec(a||"");for(var c={},e=14;e--;)c[f[e]]=a[e]||"";return c}},{}],43:[function(a,e,c){function b(){throw Error("setTimeout has not been defined");}function f(){throw Error("clearTimeout has not been defined");}function d(a){if(y===setTimeout)return setTimeout(a,0);if((y===b||!y)&&setTimeout)return y=setTimeout,setTimeout(a,0);try{return y(a,0)}catch(yf){try{return y.call(null,
a,0)}catch(zf){return y.call(this,a,0)}}}function g(a){if(v===clearTimeout)return clearTimeout(a);if((v===f||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(a);try{return v(a)}catch(yf){try{return v.call(null,a)}catch(zf){return v.call(this,a)}}}function p(){l&&n&&(l=!1,n.length?T=n.concat(T):q=-1,T.length&&z())}function z(){if(!l){var a=d(p);l=!0;for(var b=T.length;b;){n=T;for(T=[];++q<b;)n&&n[q].run();q=-1;b=T.length}n=null;l=!1;g(a)}}function u(a,b){this.fun=a;this.array=b}function k(){}a=
e.exports={};try{var y="function"===typeof setTimeout?setTimeout:b}catch(O){y=b}try{var v="function"===typeof clearTimeout?clearTimeout:f}catch(O){v=f}var T=[],l=!1,n,q=-1;a.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];T.push(new u(a,b));1!==T.length||l||d(z)};u.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=k;a.addListener=
k;a.once=k;a.off=k;a.removeListener=k;a.removeAllListeners=k;a.emit=k;a.prependListener=k;a.prependOnceListener=k;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],44:[function(a,e,c){function b(a,b){var c=this,f;d.call(this);a=a||{};a.iceServers=a.iceServers||[];this.enableChromeNativeSimulcast=!1;b&&b.optional&&
window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&b.optional.forEach(function(a){a.enableChromeNativeSimulcast&&(c.enableChromeNativeSimulcast=!0)});this.enableMultiStreamHacks=!1;b&&b.optional&&window.chrome&&b.optional.forEach(function(a){a.enableMultiStreamHacks&&(c.enableMultiStreamHacks=!0)});this.restrictBandwidth=0;b&&b.optional&&b.optional.forEach(function(a){a.andyetRestrictBandwidth&&(c.restrictBandwidth=a.andyetRestrictBandwidth)});this.batchIceCandidates=0;b&&b.optional&&
b.optional.forEach(function(a){a.andyetBatchIce&&(c.batchIceCandidates=a.andyetBatchIce)});this.batchedIceCandidates=[];b&&b.optional&&window.chrome&&b.optional.forEach(function(a){a.andyetFasterICE&&(c.eliminateDuplicateCandidates=a.andyetFasterICE)});b&&b.optional&&b.optional.forEach(function(a){a.andyetDontSignalCandidates&&(c.dontSignalCandidates=a.andyetDontSignalCandidates)});this.assumeSetLocalSuccess=!1;b&&b.optional&&b.optional.forEach(function(a){a.andyetAssumeSetLocalSuccess&&(c.assumeSetLocalSuccess=
a.andyetAssumeSetLocalSuccess)});window.navigator.mozGetUserMedia&&b&&b.optional&&(this.wtFirefox=0,b.optional.forEach(function(a){a.andyetFirefoxMakesMeSad&&(c.wtFirefox=a.andyetFirefoxMakesMeSad,0<c.wtFirefox&&(c.firefoxcandidatebuffer=[]))}));this.pc=new RTCPeerConnection(a,b);this.getLocalStreams="function"===typeof this.pc.getLocalStreams?this.pc.getLocalStreams.bind(this.pc):function(){return[]};this.getSenders="function"===typeof this.pc.getSenders?this.pc.getSenders.bind(this.pc):function(){return[]};
this.getRemoteStreams="function"===typeof this.pc.getRemoteStreams?this.pc.getRemoteStreams.bind(this.pc):function(){return[]};this.getReceivers="function"===typeof this.pc.getReceivers?this.pc.getReceivers.bind(this.pc):function(){return[]};this.addStream=this.pc.addStream.bind(this.pc);this.removeStream=function(a){"function"===typeof c.pc.removeStream?c.pc.removeStream.apply(c.pc,arguments):"function"===typeof c.pc.removeTrack&&a.getTracks().forEach(function(a){c.pc.removeTrack(a)})};"function"===
typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc));this.pc.onremovestream=this.emit.bind(this,"removeStream");this.pc.onremovetrack=this.emit.bind(this,"removeTrack");this.pc.onaddstream=this.emit.bind(this,"addStream");this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded");this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange");this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange");this.pc.onicecandidate=this._onIce.bind(this);
this.pc.ondatachannel=this._onDataChannel.bind(this);this.localDescription={contents:[]};this.remoteDescription={contents:[]};this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1};this.iceCredentials={local:{},remote:{}};for(f in a)this.config[f]=a[f];if(this.config.debug)this.on("*",function(){(a.logger||console).log("PeerConnection event:",arguments)});this.hadRemoteIPv6Candidate=this.hadLocalIPv6Candidate=this.hadRemoteRelayCandidate=this.hadLocalRelayCandidate=this.hadRemoteStunCandidate=
this.hadLocalStunCandidate=!1;this._remoteDataChannels=[];this._localDataChannels=[];this._candidateBuffer=[]}c=a("util");var f=a("sdp-jingle-json"),d=a("wildemitter"),g=a("lodash.clonedeep");c.inherits(b,d);Object.defineProperty(b.prototype,"signalingState",{get:function(){return this.pc.signalingState}});Object.defineProperty(b.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}});b.prototype._role=function(){return this.isInitiator?"initiator":"responder"};b.prototype.addStream=
function(a){this.localStream=a;this.pc.addStream(a)};b.prototype._checkLocalCandidate=function(a){a=f.toCandidateJSON(a);"srflx"==a.type?this.hadLocalStunCandidate=!0:"relay"==a.type&&(this.hadLocalRelayCandidate=!0);-1!=a.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)};b.prototype._checkRemoteCandidate=function(a){a=f.toCandidateJSON(a);"srflx"==a.type?this.hadRemoteStunCandidate=!0:"relay"==a.type&&(this.hadRemoteRelayCandidate=!0);-1!=a.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)};b.prototype.processIce=
function(a,b){b=b||function(){};var c=this;if("closed"===this.pc.signalingState)return b();if(a.contents||a.jingle&&a.jingle.contents){var e=this.remoteDescription.contents.map(function(a){return a.name});(a.contents||a.jingle.contents).forEach(function(a){var d=a.transport||{},h=d.candidates||[],g=e.indexOf(a.name),u=a.name,p=c.remoteDescription.contents.find(function(b){return b.name===a.name}),k=function(){h.forEach(function(a){a=f.toCandidateSDP(a);c.pc.addIceCandidate(new RTCIceCandidate({candidate:a,
sdpMLineIndex:g,sdpMid:u}),function(){},function(a){c.emit("error",a)});c._checkRemoteCandidate(a)});b()};c.iceCredentials.remote[a.name]&&d.ufrag&&c.iceCredentials.remote[a.name].ufrag!==d.ufrag?p?(p.transport.ufrag=d.ufrag,p.transport.pwd=d.pwd,d={type:"offer",jingle:c.remoteDescription},d.sdp=f.toSessionSDP(d.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"incoming"}),c.pc.setRemoteDescription(new RTCSessionDescription(d),function(){k()},function(a){c.emit("error",a)})):c.emit("error",
"ice restart failed to find matching content"):k()})}else{a.candidate&&0!==a.candidate.candidate.indexOf("a=")&&(a.candidate.candidate="a="+a.candidate.candidate);if(this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(a.candidate),b();c.pc.addIceCandidate(new RTCIceCandidate(a.candidate),function(){},function(a){c.emit("error",a)});c._checkRemoteCandidate(a.candidate.candidate);b()}};b.prototype.offer=
function(a,b){var c=this,e=2===arguments.length,d=e&&a?a:{offerToReceiveAudio:1,offerToReceiveVideo:1};b=(b=e?b:a)||function(){};if("closed"===this.pc.signalingState)return b("Already closed");this.pc.createOffer(function(a){var e={type:"offer",sdp:a.sdp};c.assumeSetLocalSuccess&&(c.emit("offer",e),b(null,e));c._candidateBuffer=[];c.pc.setLocalDescription(a,function(){if(c.config.useJingle){var d=f.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"});d.sid=c.config.sid;c.localDescription=d;
d.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(c.iceCredentials.local[a.name]={ufrag:b.ufrag,pwd:b.pwd})});e.jingle=d}e.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkLocalCandidate(a)});c.assumeSetLocalSuccess||(c.emit("offer",e),b(null,e))},function(a){c.emit("error",a);b(a)})},function(a){c.emit("error",a);b(a)},d)};b.prototype.handleOffer=function(a,b){b=b||function(){};var c=this;a.type="offer";if(a.jingle){this.enableChromeNativeSimulcast&&a.jingle.contents.forEach(function(a){"video"===
a.name&&(a.application.googConferenceFlag=!0)});this.enableMultiStreamHacks&&a.jingle.contents.forEach(function(a){if("video"===a.name){var b=a.application.sources||[];if(0===b.length||"3735928559"!==b[0].ssrc)b.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),a.application.sources=b}});if(0<c.restrictBandwidth&&2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name){var e=a.jingle.contents[1];e.application&&e.application.bandwidth&&
e.application.bandwidth.bandwidth||(a.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:c.restrictBandwidth.toString()},a.sdp=f.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"outgoing"}))}a.jingle.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(c.iceCredentials.remote[a.name]={ufrag:b.ufrag,pwd:b.pwd})});a.sdp=f.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"incoming"});c.remoteDescription=a.jingle}a.sdp.split("\r\n").forEach(function(a){0===
a.indexOf("a=candidate:")&&c._checkRemoteCandidate(a)});c.pc.setRemoteDescription(new RTCSessionDescription(a),function(){b()},b)};b.prototype.answerAudioOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},a)};b.prototype.answerBroadcastOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},a)};b.prototype.answer=function(a,b){var c=2===arguments.length;this._answer(c&&a?a:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},
c?b:a)};b.prototype.handleAnswer=function(a,b){b=b||function(){};var c=this;a.jingle&&(a.sdp=f.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"incoming"}),c.remoteDescription=a.jingle,a.jingle.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(c.iceCredentials.remote[a.name]={ufrag:b.ufrag,pwd:b.pwd})}));a.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkRemoteCandidate(a)});c.pc.setRemoteDescription(new RTCSessionDescription(a),function(){c.wtFirefox&&
window.setTimeout(function(){c.firefoxcandidatebuffer.forEach(function(a){c.pc.addIceCandidate(new RTCIceCandidate(a),function(){},function(a){c.emit("error",a)});c._checkRemoteCandidate(a.candidate)});c.firefoxcandidatebuffer=null},c.wtFirefox);b(null)},b)};b.prototype.close=function(){this.pc.close();this._localDataChannels=[];this._remoteDataChannels=[];this.emit("close")};b.prototype._answer=function(a,b){b=b||function(){};var c=this;if(!this.pc.remoteDescription)throw Error("remoteDescription not set");
if("closed"===this.pc.signalingState)return b("Already closed");c.pc.createAnswer(function(a){var e=[];if(c.enableChromeNativeSimulcast&&(a.jingle=f.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"}),2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name)){var d=a.jingle.contents[1].application.sourceGroups||[],h=!1;d.forEach(function(a){"SIM"==a.semantics&&(h=!0)});if(!h&&a.jingle.contents[1].application.sources.length){var p=JSON.parse(JSON.stringify(a.jingle.contents[1].application.sources[0]));
p.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(p);e.push(a.jingle.contents[1].application.sources[0].ssrc);e.push(p.ssrc);d.push({semantics:"SIM",sources:e});e=JSON.parse(JSON.stringify(p));e.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(e);d.push({semantics:"FID",sources:[p.ssrc,e.ssrc]});a.jingle.contents[1].application.sourceGroups=d;a.sdp=f.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),
direction:"outgoing"})}}var u={type:"answer",sdp:a.sdp};c.assumeSetLocalSuccess&&(d=g(u),c.emit("answer",d),b(null,d));c._candidateBuffer=[];c.pc.setLocalDescription(a,function(){if(c.config.useJingle){var e=f.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"});e.sid=c.config.sid;c.localDescription=e;u.jingle=e}c.enableChromeNativeSimulcast&&(u.jingle||(u.jingle=f.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"})),u.jingle.contents[1].application.sources.forEach(function(a,b){a.parameters=
a.parameters.map(function(a){"msid"===a.key&&(a.value+="-"+Math.floor(b/2));return a})}),u.sdp=f.toSessionSDP(u.jingle,{sid:c.sdpSessionID,role:c._role(),direction:"outgoing"}));u.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkLocalCandidate(a)});c.assumeSetLocalSuccess||(e=g(u),c.emit("answer",e),b(null,e))},function(a){c.emit("error",a);b(a)})},function(a){c.emit("error",a);b(a)},a)};b.prototype._onIce=function(a){var b=this;if(a.candidate){if(!this.dontSignalCandidates){a=
a.candidate;var c={candidate:{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex}};this._checkLocalCandidate(a.candidate);var e=f.toCandidateJSON(a.candidate);if(this.eliminateDuplicateCandidates&&"relay"===e.type){var d=this._candidateBuffer.filter(function(a){return"relay"===a.type}).map(function(a){return a.foundation+":"+a.component});var h=d.indexOf(e.foundation+":"+e.component);if(-1<h&&e.priority>>24>=d[h].priority>>24)return}if("max-bundle"===this.config.bundlePolicy&&(d=
this._candidateBuffer.filter(function(a){return e.type===a.type}).map(function(a){return a.address+":"+a.port}),h=d.indexOf(e.address+":"+e.port),-1<h))return;if("require"!==this.config.rtcpMuxPolicy||"2"!==e.component){this._candidateBuffer.push(e);if(b.config.useJingle&&(a.sdpMid||(a.sdpMid=b.pc.remoteDescription&&"offer"===b.pc.remoteDescription.type?b.remoteDescription.contents[a.sdpMLineIndex].name:b.localDescription.contents[a.sdpMLineIndex].name),b.iceCredentials.local[a.sdpMid]||f.toSessionJSON(b.pc.localDescription.sdp,
{role:b._role(),direction:"outgoing"}).contents.forEach(function(a){var c=a.transport||{};c.ufrag&&(b.iceCredentials.local[a.name]={ufrag:c.ufrag,pwd:c.pwd})}),c.jingle={contents:[{name:a.sdpMid,creator:b._role(),transport:{transportType:"iceUdp",ufrag:b.iceCredentials.local[a.sdpMid].ufrag,pwd:b.iceCredentials.local[a.sdpMid].pwd,candidates:[e]}}]},0<b.batchIceCandidates)){0===b.batchedIceCandidates.length&&window.setTimeout(function(){var a={};b.batchedIceCandidates.forEach(function(b){b=b.contents[0];
a[b.name]||(a[b.name]=b);a[b.name].transport.candidates.push(b.transport.candidates[0])});var c={jingle:{contents:[]}};Object.keys(a).forEach(function(b){c.jingle.contents.push(a[b])});b.batchedIceCandidates=[];b.emit("ice",c)},b.batchIceCandidates);b.batchedIceCandidates.push(c.jingle);return}this.emit("ice",c)}}}else this.emit("endOfCandidates")};b.prototype._onDataChannel=function(a){a=a.channel;this._remoteDataChannels.push(a);this.emit("addChannel",a)};b.prototype.createDataChannel=function(a,
b){a=this.pc.createDataChannel(a,b);this._localDataChannels.push(a);return a};b.prototype.getStats=function(){if("function"===typeof arguments[0]){var a=arguments[0];this.pc.getStats().then(function(b){a(null,b)},function(b){a(b)})}else return this.pc.getStats.apply(this.pc,arguments)};e.exports=b},{"lodash.clonedeep":36,"sdp-jingle-json":45,util:63,wildemitter:65}],45:[function(a,e,c){var b=a("./lib/tosdp"),f=a("./lib/tojson");c.toIncomingSDPOffer=function(a){return b.toSessionSDP(a,{role:"responder",
direction:"incoming"})};c.toOutgoingSDPOffer=function(a){return b.toSessionSDP(a,{role:"initiator",direction:"outgoing"})};c.toIncomingSDPAnswer=function(a){return b.toSessionSDP(a,{role:"initiator",direction:"incoming"})};c.toOutgoingSDPAnswer=function(a){return b.toSessionSDP(a,{role:"responder",direction:"outgoing"})};c.toIncomingMediaSDPOffer=function(a){return b.toMediaSDP(a,{role:"responder",direction:"incoming"})};c.toOutgoingMediaSDPOffer=function(a){return b.toMediaSDP(a,{role:"initiator",
direction:"outgoing"})};c.toIncomingMediaSDPAnswer=function(a){return b.toMediaSDP(a,{role:"initiator",direction:"incoming"})};c.toOutgoingMediaSDPAnswer=function(a){return b.toMediaSDP(a,{role:"responder",direction:"outgoing"})};c.toCandidateSDP=b.toCandidateSDP;c.toMediaSDP=b.toMediaSDP;c.toSessionSDP=b.toSessionSDP;c.toIncomingJSONOffer=function(a,b){return f.toSessionJSON(a,{role:"responder",direction:"incoming",creators:b})};c.toOutgoingJSONOffer=function(a,b){return f.toSessionJSON(a,{role:"initiator",
direction:"outgoing",creators:b})};c.toIncomingJSONAnswer=function(a,b){return f.toSessionJSON(a,{role:"initiator",direction:"incoming",creators:b})};c.toOutgoingJSONAnswer=function(a,b){return f.toSessionJSON(a,{role:"responder",direction:"outgoing",creators:b})};c.toIncomingMediaJSONOffer=function(a,b){return f.toMediaJSON(a,{role:"responder",direction:"incoming",creator:b})};c.toOutgoingMediaJSONOffer=function(a,b){return f.toMediaJSON(a,{role:"initiator",direction:"outgoing",creator:b})};c.toIncomingMediaJSONAnswer=
function(a,b){return f.toMediaJSON(a,{role:"initiator",direction:"incoming",creator:b})};c.toOutgoingMediaJSONAnswer=function(a,b){return f.toMediaJSON(a,{role:"responder",direction:"outgoing",creator:b})};c.toCandidateJSON=f.toCandidateJSON;c.toMediaJSON=f.toMediaJSON;c.toSessionJSON=f.toSessionJSON},{"./lib/tojson":48,"./lib/tosdp":49}],46:[function(a,e,c){c.lines=function(a){return a.split("\r\n").filter(function(a){return 0<a.length})};c.findLine=function(a,c,e){for(var b=a.length,f=0;f<c.length;f++)if(c[f].substr(0,
b)===a)return c[f];if(!e)return!1;for(c=0;c<e.length;c++)if(e[c].substr(0,b)===a)return e[c];return!1};c.findLines=function(a,c,e){for(var b=[],f=a.length,d=0;d<c.length;d++)c[d].substr(0,f)===a&&b.push(c[d]);if(b.length||!e)return b;for(c=0;c<e.length;c++)e[c].substr(0,f)===a&&b.push(e[c]);return b};c.mline=function(a){a=a.substr(2).split(" ");for(var b={media:a[0],port:a[1],proto:a[2],formats:[]},c=3;c<a.length;c++)a[c]&&b.formats.push(a[c]);return b};c.rtpmap=function(a){a=a.substr(9).split(" ");
var b={id:a.shift()};a=a[0].split("/");b.name=a[0];b.clockrate=a[1];b.channels=3==a.length?a[2]:"1";return b};c.sctpmap=function(a){a=a.substr(10).split(" ");return{number:a.shift(),protocol:a.shift(),streams:a.shift()}};c.fmtp=function(a){for(var b,c=a.substr(a.indexOf(" ")+1).split(";"),e=[],d=0;d<c.length;d++)b=c[d].split("="),a=b[0].trim(),b=b[1],a&&b?e.push({key:a,value:b}):a&&e.push({key:"",value:a});return e};c.crypto=function(a){a=a.substr(9).split(" ");return{tag:a[0],cipherSuite:a[1],keyParams:a[2],
sessionParams:a.slice(3).join(" ")}};c.fingerprint=function(a){a=a.substr(14).split(" ");return{hash:a[0],value:a[1]}};c.extmap=function(a){a=a.substr(9).split(" ");var b={},c=a.shift(),e=c.indexOf("/");0<=e?(b.id=c.substr(0,e),b.senders=c.substr(e+1)):(b.id=c,b.senders="sendrecv");b.uri=a.shift()||"";return b};c.rtcpfb=function(a){a=a.substr(10).split(" ");var b={};b.id=a.shift();b.type=a.shift();"trr-int"===b.type?b.value=a.shift():b.subtype=a.shift()||"";b.parameters=a;return b};c.candidate=function(a){a=
0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" ");for(var b={foundation:a[0],component:a[1],protocol:a[2].toLowerCase(),priority:a[3],ip:a[4],port:a[5],type:a[7],generation:"0"},c=8;c<a.length;c+=2)"raddr"===a[c]?b.relAddr=a[c+1]:"rport"===a[c]?b.relPort=a[c+1]:"generation"===a[c]?b.generation=a[c+1]:"tcptype"===a[c]&&(b.tcpType=a[c+1]);b.network="1";return b};c.sourceGroups=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c].substr(13).split(" ");b.push({semantics:e.shift(),
sources:e})}return b};c.sources=function(a){for(var b=[],c={},e=0;e<a.length;e++){var d=a[e].substr(7).split(" "),g=d.shift();if(!c[g]){var u={ssrc:g,parameters:[]};b.push(u);c[g]=u}d=d.join(" ").split(":");u=d.shift();d=d.join(":")||null;c[g].parameters.push({key:u,value:d})}return b};c.groups=function(a){for(var b=[],c,e=0;e<a.length;e++)c=a[e].substr(8).split(" "),b.push({semantics:c.shift(),contents:c});return b};c.bandwidth=function(a){a=a.substr(2).split(":");var b={};b.type=a.shift();b.bandwidth=
a.shift();return b};c.msid=function(a){a=a.substr(7);var b=a.split(" ");return{msid:a,mslabel:b[0],label:b[1]}}},{}],47:[function(a,e,c){e.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",
responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],48:[function(a,e,c){var b=a("./senders"),f=a("./parsers"),d=Math.random();c._setIdCounter=function(a){d=a};c.toSessionJSON=function(a,b){var e,d=b.creators||[],h=b.role||"initiator";b=b.direction||"outgoing";
var g=a.split("\r\nm=");for(e=1;e<g.length;e++)g[e]="m="+g[e],e!==g.length-1&&(g[e]+="\r\n");var v=g.shift()+"\r\n",k=f.lines(v);a={};var p=[];for(e=0;e<g.length;e++)p.push(c.toMediaJSON(g[e],v,{role:h,direction:b,creator:d[e]||"initiator"}));a.contents=p;d=f.findLines("a=group:",k);d.length&&(a.groups=f.groups(d));return a};c.toMediaJSON=function(a,e,d){var h=d.creator||"initiator",g=d.role||"initiator",k=d.direction||"outgoing",v=f.lines(a);a=f.lines(e);e=f.mline(v[0]);h={creator:h,name:e.media,
application:{applicationType:"rtp",media:e.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==e.media&&(h.application={applicationType:"datachannel"},h.transport.sctp=[]);var p=h.application,B=h.transport;if(e=f.findLine("a=mid:",v))h.name=e.substr(6);f.findLine("a=sendrecv",v,a)?h.senders="both":f.findLine("a=sendonly",v,a)?h.senders=b[g][k].sendonly:f.findLine("a=recvonly",v,a)?h.senders=b[g][k].recvonly:
f.findLine("a=inactive",v,a)&&(h.senders="none");if("rtp"==p.applicationType){if(e=f.findLine("b=",v))p.bandwidth=f.bandwidth(e);if(e=f.findLine("a=ssrc:",v))p.ssrc=e.substr(7).split(" ")[0];f.findLines("a=rtpmap:",v).forEach(function(a){var b=f.rtpmap(a);b.parameters=[];b.feedback=[];f.findLines("a=fmtp:"+b.id,v).forEach(function(a){b.parameters=f.fmtp(a)});f.findLines("a=rtcp-fb:"+b.id,v).forEach(function(a){b.feedback.push(f.rtcpfb(a))});p.payloads.push(b)});f.findLines("a=crypto:",v,a).forEach(function(a){p.encryption.push(f.crypto(a))});
f.findLine("a=rtcp-mux",v)&&(p.mux=!0);f.findLines("a=rtcp-fb:*",v).forEach(function(a){p.feedback.push(f.rtcpfb(a))});f.findLines("a=extmap:",v).forEach(function(a){a=f.extmap(a);a.senders=b[g][k][a.senders];p.headerExtensions.push(a)});e=f.findLines("a=ssrc-group:",v);p.sourceGroups=f.sourceGroups(e||[]);e=f.findLines("a=ssrc:",v);var z=p.sources=f.sources(e||[]);if(e=f.findLine("a=msid:",v)){var l=f.msid(e);["msid","mslabel","label"].forEach(function(a){for(var b=0;b<z.length;b++){for(var c=!1,
e=0;e<z[b].parameters.length;e++)z[b].parameters[e].key===a&&(c=!0);c||z[b].parameters.push({key:a,value:l[a]})}})}f.findLine("a=x-google-flag:conference",v,a)&&(p.googConferenceFlag=!0)}e=f.findLines("a=fingerprint:",v,a);var n=f.findLine("a=setup:",v,a);e.forEach(function(a){a=f.fingerprint(a);n&&(a.setup=n.substr(8));B.fingerprints.push(a)});e=f.findLine("a=ice-ufrag:",v,a);d=f.findLine("a=ice-pwd:",v,a);e&&d&&(B.ufrag=e.substr(12),B.pwd=d.substr(10),B.candidates=[],f.findLines("a=candidate:",
v,a).forEach(function(a){B.candidates.push(c.toCandidateJSON(a))}));"datachannel"==p.applicationType&&f.findLines("a=sctpmap:",v).forEach(function(a){a=f.sctpmap(a);B.sctp.push(a)});return h};c.toCandidateJSON=function(a){a=f.candidate(a.split("\r\n")[0]);a.id=(d++).toString(36).substr(0,12);return a}},{"./parsers":46,"./senders":47}],49:[function(a,e,c){var b=a("./senders");c.toSessionSDP=function(a,b){var e=b.sid||a.sid||Date.now(),f=b.time||Date.now(),d=["v=0","o=- "+e+" "+f+" IN IP4 0.0.0.0",
"s=-","t=0 0"];e=a.contents||[];var h=!1;e.forEach(function(a){a.application.sources&&a.application.sources.length&&(h=!0)});h&&d.push("a=msid-semantic: WMS *");(a.groups||[]).forEach(function(a){d.push("a=group:"+a.semantics+" "+a.contents.join(" "))});e.forEach(function(a){d.push(c.toMediaSDP(a,b))});return d.join("\r\n")+"\r\n"};c.toMediaSDP=function(a,e){var f=[],d=e.role||"initiator",h=e.direction||"outgoing",g=a.application;e=a.transport;var k=g.payloads||[],y=e&&e.fingerprints||[],v=[];"datachannel"==
g.applicationType?(v.push("application"),v.push("1"),v.push("DTLS/SCTP"),e.sctp&&e.sctp.forEach(function(a){v.push(a.number)})):(v.push(g.media),v.push("1"),0<y.length?v.push("UDP/TLS/RTP/SAVPF"):g.encryption&&0<g.encryption.length?v.push("RTP/SAVPF"):v.push("RTP/AVPF"),k.forEach(function(a){v.push(a.id)}));f.push("m="+v.join(" "));f.push("c=IN IP4 0.0.0.0");g.bandwidth&&g.bandwidth.type&&g.bandwidth.bandwidth&&f.push("b="+g.bandwidth.type+":"+g.bandwidth.bandwidth);"rtp"==g.applicationType&&f.push("a=rtcp:1 IN IP4 0.0.0.0");
e&&(e.ufrag&&f.push("a=ice-ufrag:"+e.ufrag),e.pwd&&f.push("a=ice-pwd:"+e.pwd),y.forEach(function(a){f.push("a=fingerprint:"+a.hash+" "+a.value);a.setup&&f.push("a=setup:"+a.setup)}),e.sctp&&e.sctp.forEach(function(a){f.push("a=sctpmap:"+a.number+" "+a.protocol+" "+a.streams)}));"rtp"==g.applicationType&&f.push("a="+(b[d][h][a.senders]||"sendrecv"));f.push("a=mid:"+a.name);g.sources&&g.sources.length&&(g.sources[0].parameters||[]).forEach(function(a){"msid"===a.key&&f.push("a=msid:"+a.value)});g.mux&&
f.push("a=rtcp-mux");(g.encryption||[]).forEach(function(a){f.push("a=crypto:"+a.tag+" "+a.cipherSuite+" "+a.keyParams+(a.sessionParams?" "+a.sessionParams:""))});g.googConferenceFlag&&f.push("a=x-google-flag:conference");k.forEach(function(a){var b="a=rtpmap:"+a.id+" "+a.name+"/"+a.clockrate;a.channels&&"1"!=a.channels&&(b+="/"+a.channels);f.push(b);if(a.parameters&&a.parameters.length){b=["a=fmtp:"+a.id];var c=[];a.parameters.forEach(function(a){c.push((a.key?a.key+"=":"")+a.value)});b.push(c.join(";"));
f.push(b.join(" "))}a.feedback&&a.feedback.forEach(function(b){"trr-int"===b.type?f.push("a=rtcp-fb:"+a.id+" trr-int "+(b.value?b.value:"0")):f.push("a=rtcp-fb:"+a.id+" "+b.type+(b.subtype?" "+b.subtype:""))})});g.feedback&&g.feedback.forEach(function(a){"trr-int"===a.type?f.push("a=rtcp-fb:* trr-int "+(a.value?a.value:"0")):f.push("a=rtcp-fb:* "+a.type+(a.subtype?" "+a.subtype:""))});(g.headerExtensions||[]).forEach(function(a){f.push("a=extmap:"+a.id+(a.senders?"/"+b[d][h][a.senders]:"")+" "+a.uri)});
(g.sourceGroups||[]).forEach(function(a){f.push("a=ssrc-group:"+a.semantics+" "+a.sources.join(" "))});(g.sources||[]).forEach(function(a){for(var b=0;b<a.parameters.length;b++){var c=a.parameters[b];f.push("a=ssrc:"+(a.ssrc||g.ssrc)+" "+c.key+(c.value?":"+c.value:""))}});(e.candidates||[]).forEach(function(a){f.push(c.toCandidateSDP(a))});return f.join("\r\n")};c.toCandidateSDP=function(a){var b=[];b.push(a.foundation);b.push(a.component);b.push(a.protocol.toUpperCase());b.push(a.priority);b.push(a.ip);
b.push(a.port);var c=a.type;b.push("typ");b.push(c);("srflx"===c||"prflx"===c||"relay"===c)&&a.relAddr&&a.relPort&&(b.push("raddr"),b.push(a.relAddr),b.push("rport"),b.push(a.relPort));a.tcpType&&"TCP"==a.protocol.toUpperCase()&&(b.push("tcptype"),b.push(a.tcpType));b.push("generation");b.push(a.generation||"0");return"a=candidate:"+b.join(" ")}},{"./senders":47}],50:[function(a,e,c){e.exports=a("./lib/")},{"./lib/":51}],51:[function(a,e,c){function b(a,b){"object"==typeof a&&(b=a,a=void 0);b=b||
{};a=f(a);var c=a.source,e=a.id;b.forceNew||b["force new connection"]||!1===b.multiplex?(k("ignoring socket cache for %s",c),b=g(c,b)):(z[e]||(k("new io instance for %s",c),z[e]=g(c,b)),b=z[e]);return b.socket(a.path)}var f=a("./url"),d=a("socket.io-parser"),g=a("./manager"),k=a("debug")("socket.io-client");e.exports=c=b;var z=c.managers={};c.protocol=d.protocol;c.connect=b;c.Manager=a("./manager");c.Socket=a("./socket")},{"./manager":52,"./socket":54,"./url":55,debug:10,"socket.io-parser":57}],52:[function(a,
e,c){function b(a,c){if(!(this instanceof b))return new b(a,c);a&&"object"==typeof a&&(c=a,a=void 0);c=c||{};c.path=c.path||"/socket.io";this.nsps={};this.subs=[];this.opts=c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);this.backoff=new y({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),
jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);this.readyState="closed";this.uri=a;this.connected=[];this.encoding=!1;this.packetBuffer=[];this.encoder=new g.Encoder;this.decoder=new g.Decoder;(this.autoConnect=!1!==c.autoConnect)&&this.open()}a("./url");var f=a("engine.io-client"),d=a("./socket");c=a("component-emitter");var g=a("socket.io-parser"),k=a("./on"),z=a("component-bind");a("object-component");var u=a("debug")("socket.io-client:manager"),F=a("indexof"),
y=a("backo2");e.exports=b;b.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)};b.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id};c(b.prototype);b.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};b.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=
a;return this};b.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};b.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};b.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&
this.backoff.setMax(a);return this};b.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};b.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};b.prototype.open=b.prototype.connect=function(a){u("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;u("opening %s",this.uri);var b=this.engine=f(this.uri,this.opts),c=this;this.readyState="opening";this.skipReconnect=
!1;var e=k(b,"open",function(){c.onopen();a&&a()}),d=k(b,"error",function(b){u("connect_error");c.cleanup();c.readyState="closed";c.emitAll("connect_error",b);if(a){var e=Error("Connection error");e.data=b;a(e)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var h=this._timeout;u("connect attempt will timeout after %d",h);var g=setTimeout(function(){u("connect attempt timed out after %d",h);e.destroy();b.close();b.emit("error","timeout");c.emitAll("connect_timeout",h)},h);this.subs.push({destroy:function(){clearTimeout(g)}})}this.subs.push(e);
this.subs.push(d);return this};b.prototype.onopen=function(){u("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(k(a,"data",z(this,"ondata")));this.subs.push(k(this.decoder,"decoded",z(this,"ondecoded")));this.subs.push(k(a,"error",z(this,"onerror")));this.subs.push(k(a,"close",z(this,"onclose")))};b.prototype.ondata=function(a){this.decoder.add(a)};b.prototype.ondecoded=function(a){this.emit("packet",a)};b.prototype.onerror=function(a){u("error",a);
this.emitAll("error",a)};b.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new d(this,a);this.nsps[a]=b;var c=this;b.on("connect",function(){b.id=c.engine.id;~F(c.connected,b)||c.connected.push(b)})}return b};b.prototype.destroy=function(a){a=F(this.connected,a);~a&&this.connected.splice(a,1);this.connected.length||this.close()};b.prototype.packet=function(a){u("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<
a.length;c++)b.engine.write(a[c]);b.encoding=!1;b.processPacketQueue()}))};b.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};b.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.decoder.destroy()};b.prototype.close=b.prototype.disconnect=function(){this.skipReconnect=!0;this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};
b.prototype.onclose=function(a){u("close");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};b.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();u("will wait %dms before reconnect attempt",
b);this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(u("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(u("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(u("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}};b.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=
!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":53,"./socket":54,"./url":55,backo2:4,"component-bind":7,"component-emitter":8,debug:10,"engine.io-client":11,indexof:32,"object-component":39,"socket.io-parser":57}],53:[function(a,e,c){e.exports=function(a,c,e){a.on(c,e);return{destroy:function(){a.removeListener(c,e)}}}},{}],54:[function(a,e,c){function b(a,b){this.io=a;this.nsp=b;this.json=this;this.ids=0;this.acks={};this.io.autoConnect&&this.open();this.receiveBuffer=
[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0}var f=a("socket.io-parser");c=a("component-emitter");var d=a("to-array"),g=a("./on"),k=a("component-bind"),z=a("debug")("socket.io-client:socket"),u=a("has-binary");e.exports=b;var F={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},y=c.prototype.emit;c(b.prototype);b.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=
[g(a,"open",k(this,"onopen")),g(a,"packet",k(this,"onpacket")),g(a,"close",k(this,"onclose"))]}};b.prototype.open=b.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();return this};b.prototype.send=function(){var a=d(arguments);a.unshift("message");this.emit.apply(this,a);return this};b.prototype.emit=function(a){if(F.hasOwnProperty(a))return y.apply(this,arguments),this;var b=d(arguments),c=f.EVENT;u(b)&&(c=f.BINARY_EVENT);
c={type:c,data:b};"function"==typeof b[b.length-1]&&(z("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),c.id=this.ids++);this.connected?this.packet(c):this.sendBuffer.push(c);return this};b.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};b.prototype.onopen=function(){z("transport is open - connecting");"/"!=this.nsp&&this.packet({type:f.CONNECT})};b.prototype.onclose=function(a){z("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",
a)};b.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case f.CONNECT:this.onconnect();break;case f.EVENT:this.onevent(a);break;case f.BINARY_EVENT:this.onevent(a);break;case f.ACK:this.onack(a);break;case f.BINARY_ACK:this.onack(a);break;case f.DISCONNECT:this.ondisconnect();break;case f.ERROR:this.emit("error",a.data)}};b.prototype.onevent=function(a){var b=a.data||[];z("emitting event %j",b);null!=a.id&&(z("attaching ack callback to event"),b.push(this.ack(a.id)));this.connected?
y.apply(this,b):this.receiveBuffer.push(b)};b.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var e=d(arguments);z("sending ack %j",e);var h=u(e)?f.BINARY_ACK:f.ACK;b.packet({type:h,id:a,data:e})}}};b.prototype.onack=function(a){z("calling ack %s with %j",a.id,a.data);this.acks[a.id].apply(this,a.data);delete this.acks[a.id]};b.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};b.prototype.emitBuffered=function(){var a;
for(a=0;a<this.receiveBuffer.length;a++)y.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};b.prototype.ondisconnect=function(){z("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};b.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};b.prototype.close=b.prototype.disconnect=function(){this.connected&&
(z("performing disconnect (%s)",this.nsp),this.packet({type:f.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this}},{"./on":53,"component-bind":7,"component-emitter":8,debug:10,"has-binary":30,"socket.io-parser":57,"to-array":59}],55:[function(a,e,c){(function(b){var c=a("parseuri"),d=a("debug")("socket.io-client:url");e.exports=function(a,e){var f=a;e=e||b.location;null==a&&(a=e.protocol+"//"+e.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?
e.protocol+a:e.hostname+a),/^(https?|wss?):\/\//.test(a)||(d("protocol-less url %s",a),a="undefined"!=typeof e?e.protocol+"//"+a:"https://"+a),d("parse %s",a),f=c(a));f.port||(/^(http|ws)$/.test(f.protocol)?f.port="80":/^(http|ws)s$/.test(f.protocol)&&(f.port="443"));f.path=f.path||"/";f.id=f.protocol+"://"+f.host+":"+f.port;f.href=f.protocol+"://"+f.host+(e&&e.port==f.port?"":":"+f.port);return f}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{debug:10,parseuri:42}],56:[function(a,e,c){(function(b){var e=a("isarray"),d=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(d(a)){var f={_placeholder:!0,num:c.length};c.push(a);return f}if(e(a)){f=Array(a.length);for(var h=0;h<a.length;h++)f[h]=b(a[h]);return f}if("object"==typeof a&&!(a instanceof Date)){f={};for(h in a)f[h]=b(a[h]);return f}return a}var c=[];a.data=b(a.data);a.attachments=c.length;return{packet:a,buffers:c}};c.reconstructPacket=function(a,
b){function c(a){if(a&&a._placeholder)return b[a.num];if(e(a))for(var f=0;f<a.length;f++)a[f]=c(a[f]);else if(a&&"object"==typeof a)for(f in a)a[f]=c(a[f]);return a}a.data=c(a.data);a.attachments=void 0;return a};c.removeBlobs=function(a,c){function f(a,k,p){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){h++;var u=new FileReader;u.onload=function(){p?p[k]=this.result:g=this.result;--h||c(g)};u.readAsArrayBuffer(a)}else if(e(a))for(u=0;u<a.length;u++)f(a[u],u,a);else if(a&&
"object"==typeof a&&!d(a))for(u in a)f(a[u],u,a)}var h=0,g=a;f(g);h||c(g)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./is-buffer":58,isarray:33}],57:[function(a,e,c){function b(){}function f(a){var b=!1;var e=""+a.type;if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)e+=a.attachments,e+="-";a.nsp&&"/"!=a.nsp&&(b=!0,e+=a.nsp);null!=a.id&&(b&&(e+=",",b=!1),e+=a.id);null!=a.data&&(b&&(e+=","),e+=u.stringify(a.data));l("encoded %j as %s",
a,e);return e}function d(a,b){F.removeBlobs(a,function(a){var c=F.deconstructPacket(a);a=f(c.packet);c=c.buffers;c.unshift(a);b(c)})}function g(){this.reconstructor=null}function k(a){this.reconPack=a;this.buffers=[]}var l=a("debug")("socket.io-parser"),u=a("json3");a("isarray");e=a("component-emitter");var F=a("./binary"),y=a("./is-buffer");c.protocol=4;c.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");c.CONNECT=0;c.DISCONNECT=1;c.EVENT=2;c.ACK=3;c.ERROR=4;c.BINARY_EVENT=
5;c.BINARY_ACK=6;c.Encoder=b;c.Decoder=g;b.prototype.encode=function(a,b){l("encoding packet %j",a);c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?d(a,b):(a=f(a),b([a]))};e(g.prototype);g.prototype.add=function(a){if("string"==typeof a){a:{var b={},e=0;b.type=Number(a.charAt(0));if(null==c.types[b.type])a={type:c.ERROR,data:"parser error"};else{if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var f="";"-"!=a.charAt(++e)&&(f+=a.charAt(e),e!=a.length););if(f!=Number(f)||"-"!=a.charAt(e))throw Error("Illegal attachments");
b.attachments=Number(f)}if("/"==a.charAt(e+1))for(b.nsp="";++e;){f=a.charAt(e);if(","==f)break;b.nsp+=f;if(e==a.length)break}else b.nsp="/";f=a.charAt(e+1);if(""!==f&&Number(f)==f){for(b.id="";++e;){f=a.charAt(e);if(null==f||Number(f)!=f){--e;break}b.id+=a.charAt(e);if(e==a.length)break}b.id=Number(b.id)}if(a.charAt(++e))try{b.data=u.parse(a.substr(e))}catch(Pc){a={type:c.ERROR,data:"parser error"};break a}l("decoded %s as %j",a,b);a=b}}c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?(this.reconstructor=
new k(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(y(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};k.prototype.takeBinaryData=function(a){this.buffers.push(a);
return this.buffers.length==this.reconPack.attachments?(a=F.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};k.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":56,"./is-buffer":58,"component-emitter":8,debug:10,isarray:33,json3:34}],58:[function(a,e,c){(function(a){e.exports=function(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}}).call(this,"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{}],59:[function(a,e,c){e.exports=function(a,c){for(var b=[],e=(c=c||0)||0;e<a.length;e++)b[e-c]=a[e];return b}},{}],60:[function(a,e,c){(function(a){(function(b){function f(a){for(var b=[],c=0,e=a.length,f,d;c<e;)f=a.charCodeAt(c++),55296<=f&&56319>=f&&c<e?(d=a.charCodeAt(c++),56320==(d&64512)?b.push(((f&1023)<<10)+(d&1023)+65536):(b.push(f),c--)):b.push(f);return b}function d(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+
" is not a scalar value");}function g(){if(t>=r)throw Error("Invalid byte index");var a=q[t]&255;t++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function k(){if(t>r)throw Error("Invalid byte index");if(t==r)return!1;var a=q[t]&255;t++;if(0==(a&128))return a;if(192==(a&224)){var b=g();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=g();var c=g();a=(a&15)<<12|b<<6|c;if(2048<=a)return d(a),a;throw Error("Invalid continuation byte");
}if(240==(a&248)){b=g();c=g();var e=g();a=(a&15)<<18|b<<12|c<<6|e;if(65536<=a&&1114111>=a)return a}throw Error("Invalid UTF-8 detected");}var u="object"==typeof c&&c,l="object"==typeof e&&e&&e.exports==u&&e,y="object"==typeof a&&a;if(y.global===y||y.window===y)b=y;var n=String.fromCharCode,q,r,t;y={version:"2.0.0",encode:function(a){a=f(a);for(var b=a.length,c=-1,e,h="";++c<b;){e=a[c];if(0==(e&4294967168))e=n(e);else{var g="";0==(e&4294965248)?g=n(e>>6&31|192):0==(e&4294901760)?(d(e),g=n(e>>12&15|
224),g+=n(e>>6&63|128)):0==(e&4292870144)&&(g=n(e>>18&7|240),g+=n(e>>12&63|128),g+=n(e>>6&63|128));e=g+=n(e&63|128)}h+=e}return h},decode:function(a){q=f(a);r=q.length;t=0;a=[];for(var b;!1!==(b=k());)a.push(b);b=a.length;for(var c=-1,e,d="";++c<b;)e=a[c],65535<e&&(e-=65536,d+=n(e>>>10&1023|55296),e=56320|e&1023),d+=n(e);return d}};if(u&&!u.nodeType)if(l)l.exports=y;else{b={}.hasOwnProperty;for(var w in y)b.call(y,w)&&(u[w]=y[w])}else b.utf8=y})(this)}).call(this,"undefined"!==typeof global?global:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],61:[function(a,e,c){e.exports="function"===typeof Object.create?function(a,c){a.super_=c;a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,c){a.super_=c;var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a}},{}],62:[function(a,e,c){e.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===
typeof a.fill&&"function"===typeof a.readUInt8}},{}],63:[function(a,e,c){(function(b,e){function f(a,b){var e={seen:[],stylize:g};3<=arguments.length&&(e.depth=arguments[2]);4<=arguments.length&&(e.colors=arguments[3]);w(b)?e.showHidden=b:b&&c._extend(e,b);x(e.showHidden)&&(e.showHidden=!1);x(e.depth)&&(e.depth=2);x(e.colors)&&(e.colors=!1);x(e.customInspect)&&(e.customInspect=!0);e.colors&&(e.stylize=d);return u(e,a,e.depth)}function d(a,b){return(b=f.styles[b])?"\u001b["+f.colors[b][0]+"m"+a+"\u001b["+
f.colors[b][1]+"m":a}function g(a,b){return a}function k(a){var b={};a.forEach(function(a,c){b[a]=!0});return b}function u(a,b,e){if(a.customInspect&&b&&G(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var f=b.inspect(e,a);A(f)||(f=u(a,f,e));return f}if(f=l(a,b))return f;var d=Object.keys(b),h=k(d);a.showHidden&&(d=Object.getOwnPropertyNames(b));if(E(b)&&(0<=d.indexOf("message")||0<=d.indexOf("description")))return y(b);if(0===d.length){if(G(b))return a.stylize("[Function"+
(b.name?": "+b.name:"")+"]","special");if(C(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(H(b))return a.stylize(Date.prototype.toString.call(b),"date");if(E(b))return y(b)}f="";var g=!1,p=["{","}"];r(b)&&(g=!0,p=["[","]"]);G(b)&&(f=" [Function"+(b.name?": "+b.name:"")+"]");C(b)&&(f=" "+RegExp.prototype.toString.call(b));H(b)&&(f=" "+Date.prototype.toUTCString.call(b));E(b)&&(f=" "+y(b));if(0===d.length&&(!g||0==b.length))return p[0]+f+p[1];if(0>e)return C(b)?a.stylize(RegExp.prototype.toString.call(b),
"regexp"):a.stylize("[Object]","special");a.seen.push(b);d=g?n(a,b,e,h,d):d.map(function(c){return q(a,b,e,h,c,g)});a.seen.pop();return t(d,f,p)}function l(a,b){if(x(b))return a.stylize("undefined","undefined");if(A(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(O(b))return a.stylize(""+b,"number");if(w(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function y(a){return"["+Error.prototype.toString.call(a)+
"]"}function n(a,b,c,e,f){for(var d=[],h=0,g=b.length;h<g;++h)Object.prototype.hasOwnProperty.call(b,String(h))?d.push(q(a,b,c,e,String(h),!0)):d.push("");f.forEach(function(f){f.match(/^\d+$/)||d.push(q(a,b,c,e,f,!0))});return d}function q(a,b,c,e,f,d){var h,g;b=Object.getOwnPropertyDescriptor(b,f)||{value:b[f]};b.get?g=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(g=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(e,f)||(h="["+f+"]");g||
(0>a.seen.indexOf(b.value)?(g=null===c?u(a,b.value,null):u(a,b.value,c-1),-1<g.indexOf("\n")&&(g=d?g.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+g.split("\n").map(function(a){return"   "+a}).join("\n"))):g=a.stylize("[Circular]","special"));if(x(h)){if(d&&f.match(/^\d+$/))return g;h=JSON.stringify(""+f);h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=a.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=a.stylize(h,
"string"))}return h+": "+g}function t(a,b,c){var e=0;return 60<a.reduce(function(a,b){e++;0<=b.indexOf("\n")&&e++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function r(a){return Array.isArray(a)}function w(a){return"boolean"===typeof a}function O(a){return"number"===typeof a}function A(a){return"string"===typeof a}function x(a){return void 0===a}function C(a){return D(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}
function D(a){return"object"===typeof a&&null!==a}function H(a){return D(a)&&"[object Date]"===Object.prototype.toString.call(a)}function E(a){return D(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function G(a){return"function"===typeof a}function I(a){return 10>a?"0"+a.toString(10):a.toString(10)}function L(){var a=new Date,b=[I(a.getHours()),I(a.getMinutes()),I(a.getSeconds())].join(":");return[a.getDate(),N[a.getMonth()],b].join(" ")}var M=/%[sdj%]/g;c.format=
function(a){if(!A(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(f(arguments[c]));return b.join(" ")}c=1;var e=arguments,d=e.length;b=String(a).replace(M,function(a){if("%%"===a)return"%";if(c>=d)return a;switch(a){case "%s":return String(e[c++]);case "%d":return Number(e[c++]);case "%j":try{return JSON.stringify(e[c++])}catch(Kg){return"[Circular]"}default:return a}});for(var h=e[c];c<d;h=e[++c])b=null!==h&&D(h)?b+(" "+f(h)):b+(" "+h);return b};c.deprecate=function(a,f){if(x(e.process))return function(){return c.deprecate(a,
f).apply(this,arguments)};if(!0===b.noDeprecation)return a;var d=!1;return function(){if(!d){if(b.throwDeprecation)throw Error(f);b.traceDeprecation?console.trace(f):console.error(f);d=!0}return a.apply(this,arguments)}};var J={},K;c.debuglog=function(a){x(K)&&(K=b.env.NODE_DEBUG||"");a=a.toUpperCase();if(!J[a])if((new RegExp("\\b"+a+"\\b","i")).test(K)){var e=b.pid;J[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,e,b)}}else J[a]=function(){};return J[a]};c.inspect=f;
f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};f.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};c.isArray=r;c.isBoolean=w;c.isNull=function(a){return null===a};c.isNullOrUndefined=function(a){return null==a};c.isNumber=O;c.isString=A;c.isSymbol=function(a){return"symbol"===
typeof a};c.isUndefined=x;c.isRegExp=C;c.isObject=D;c.isDate=H;c.isError=E;c.isFunction=G;c.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};c.isBuffer=a("./support/isBuffer");var N="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");c.log=function(){console.log("%s - %s",L(),c.format.apply(c,arguments))};c.inherits=a("inherits");c._extend=function(a,b){if(!b||!D(b))return a;for(var c=Object.keys(b),
e=c.length;e--;)a[c[e]]=b[c[e]];return a}}).call(this,a("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":62,_process:43,inherits:61}],64:[function(a,e,c){if(window.mozRTCPeerConnection||navigator.mozGetUserMedia){var b="moz";var f=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)}else if(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)b="webkit",f=navigator.userAgent.match(/Chrom(e|ium)/)&&
parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10);a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;c=window.mozRTCIceCandidate||window.RTCIceCandidate;var d=window.mozRTCSessionDescription||window.RTCSessionDescription,g=window.webkitMediaStream||window.MediaStream,k="https:"===window.location.protocol&&("webkit"===b&&26<=f||"moz"===b&&33<=f),l=window.AudioContext||window.webkitAudioContext,u=document.createElement("video");u=u&&u.canPlayType&&
"probably"===u.canPlayType('video/webm; codecs="vp8", vorbis');var F=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;e.exports={prefix:b,browserVersion:f,support:!!a&&!!F,supportRTCPeerConnection:!!a,supportVp8:u,supportGetUserMedia:!!F,supportDataChannel:!!(a&&a.prototype&&a.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!g||!g.prototype.removeTrack),supportScreenSharing:!!k,AudioContext:l,
PeerConnection:a,SessionDescription:d,IceCandidate:c,MediaStream:g,getUserMedia:F}},{}],65:[function(a,e,c){function b(){}e.exports=b;b.mixin=function(a){a=a.prototype||a;a.isWildEmitter=!0;a.on=function(a,b,c){this.callbacks=this.callbacks||{};var e=3===arguments.length,f=e?arguments[2]:arguments[1];f._groupName=e?arguments[1]:void 0;(this.callbacks[a]=this.callbacks[a]||[]).push(f);return this};a.once=function(a,b,c){function e(){f.off(a,e);h.apply(this,arguments)}var f=this,d=3===arguments.length,
h=d?arguments[2]:arguments[1];this.on(a,d?arguments[1]:void 0,e);return this};a.releaseGroup=function(a){this.callbacks=this.callbacks||{};var b,c;for(b in this.callbacks){var e=this.callbacks[b];var f=0;for(c=e.length;f<c;f++)e[f]._groupName===a&&(e.splice(f,1),f--,c--)}return this};a.off=function(a,b){this.callbacks=this.callbacks||{};var c=this.callbacks[a];if(!c)return this;if(1===arguments.length)return delete this.callbacks[a],this;var e=c.indexOf(b);c.splice(e,1);0===c.length&&delete this.callbacks[a];
return this};a.emit=function(a){this.callbacks=this.callbacks||{};var b=[].slice.call(arguments,1),c=this.callbacks[a],e=this.getWildcardCallbacks(a),f;if(c){var d=c.slice();c=0;for(f=d.length;c<f&&d[c];++c)d[c].apply(this,b)}if(e)for(d=e.slice(),c=0,f=d.length;c<f&&d[c];++c)d[c].apply(this,[a].concat(b));return this};a.getWildcardCallbacks=function(a){this.callbacks=this.callbacks||{};var b,c=[];for(b in this.callbacks){var e=b.split("*");if("*"===b||2===e.length&&a.slice(0,e[0].length)===e[0])c=
c.concat(this.callbacks[b])}return c}};b.mixin(b)},{}],66:[function(a,e,c){function b(a,b,c){return b?new f(a,b):new f(a)}a=window;var f=a.WebSocket||a.MozWebSocket;e.exports=f?b:null;f&&(b.prototype=f.prototype)},{}],67:[function(a,e,c){function b(a){var b=!0;a.getTracks().forEach(function(a){b="ended"===a.readyState&&b});return b}function f(a){var b=this;k.call(this);this.id=a.id;this.parent=a.parent;this.type=a.type||"video";this.oneway=a.oneway||!1;this.sharemyscreen=a.sharemyscreen||!1;this.browserPrefix=
a.prefix;this.stream=a.stream;this.enableDataChannels=void 0===a.enableDataChannels?this.parent.config.enableDataChannels:a.enableDataChannels;this.receiveMedia=a.receiveMedia||this.parent.config.receiveMedia;this.channels={};this.sid=a.sid||Date.now().toString();this.pc=new g(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionConstraints);this.pc.on("ice",this.onIceCandidate.bind(this));this.pc.on("endOfCandidates",function(a){b.send("endOfCandidates",a)});this.pc.on("offer",
function(a){b.parent.config.nick&&(a.nick=b.parent.config.nick);b.send("offer",a)});this.pc.on("answer",function(a){b.parent.config.nick&&(a.nick=b.parent.config.nick);b.send("answer",a)});this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this));this.pc.on("addChannel",this.handleDataChannelAdded.bind(this));this.pc.on("removeStream",this.handleStreamRemoved.bind(this));this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded"));this.pc.on("iceConnectionStateChange",this.emit.bind(this,
"iceConnectionStateChange"));this.pc.on("iceConnectionStateChange",function(){switch(b.pc.iceConnectionState){case "failed":"offer"===b.pc.pc.localDescription.type&&(b.parent.emit("iceFailed",b),b.send("connectivityError"))}});this.pc.on("signalingStateChange",this.emit.bind(this,"signalingStateChange"));this.logger=this.parent.logger;"screen"===a.type?this.parent.localScreens&&this.parent.localScreens[0]&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreens[0]),
this.broadcaster=a.broadcaster):this.parent.localStreams.forEach(function(a){b.pc.addStream(a)});this.on("channelOpen",function(a){"https://simplewebrtc.com/protocol/filetransfer#inband-v1"===a.protocol&&(a.onmessage=function(c){c=JSON.parse(c.data);var e=new l.Receiver;e.receive(c,a);b.emit("fileTransfer",c,e);e.on("receivedFile",function(a,b){e.channel.close()})})});this.on("*",function(){b.parent.emit.apply(b.parent,arguments)})}c=a("util");var d=a("webrtcsupport"),g=a("rtcpeerconnection"),k=a("wildemitter"),
l=a("filetransfer");c.inherits(f,k);f.prototype.handleMessage=function(a){var b=this;this.logger.log("getting",a.type,a);a.prefix&&(this.browserPrefix=a.prefix);"offer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleOffer(a.payload,function(a){a||b.pc.answer(function(a,b){})})):"answer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleAnswer(a.payload)):"candidate"===a.type?this.pc.processIce(a.payload):"connectivityError"===
a.type?this.parent.emit("connectivityError",b):"mute"===a.type?this.parent.emit("mute",{id:a.from,name:a.payload.name}):"unmute"===a.type&&this.parent.emit("unmute",{id:a.from,name:a.payload.name})};f.prototype.send=function(a,b){b={to:this.id,sid:this.sid,broadcaster:this.broadcaster,roomType:this.type,type:a,payload:b,prefix:d.prefix};this.logger.log("sending",a,b);this.parent.emit("message",b)};f.prototype.sendDirectly=function(a,b,c){this.logger.log("sending via datachannel",a,b,{type:b,payload:c});
a=this.getDataChannel(a);if("open"!=a.readyState)return!1;a.send(c);return!0};f.prototype._observeDataChannel=function(a){var b=this;a.binaryType="arraybuffer";a.onclose=this.emit.bind(this,"channelClose",a);a.onerror=this.emit.bind(this,"channelError",a);a.onmessage=function(c){var e=new Uint32Array(c.data);b.emit("channelMessage",b,a.label,e,a,c)};a.onopen=this.emit.bind(this,"channelOpen",a)};f.prototype.getDataChannel=function(a,b){if(!d.supportDataChannel)return this.emit("error",Error("createDataChannel not supported"));
var c=this.channels[a];b||(b={});if(c)return c;c=this.channels[a]=this.pc.createDataChannel(a,b);c.binaryType="arraybuffer";this._observeDataChannel(c);return c};f.prototype.onIceCandidate=function(a){if(!this.closed)if(a){var b=this.parent.config.peerConnectionConfig;"moz"===d.prefix&&b&&b.iceTransports&&a.candidate&&a.candidate.candidate&&0>a.candidate.candidate.indexOf(b.iceTransports)?this.logger.log("Ignoring ice candidate not matching pcConfig iceTransports type: ",b.iceTransports):this.send("candidate",
a)}else this.logger.log("End of candidates.")};f.prototype.start=function(){this.enableDataChannels&&this.getDataChannel("simplewebrtc");this.pc.offer(this.receiveMedia,function(a,b){})};f.prototype.icerestart=function(){var a=this.receiveMedia;a.mandatory.IceRestart=!0;this.pc.offer(a,function(a,b){})};f.prototype.end=function(){this.closed||(this.pc.close(),this.handleStreamRemoved())};f.prototype.handleRemoteStreamAdded=function(a){var c=this;this.stream?this.logger.warn("Already have a remote stream"):
(this.stream=a.stream,this.stream.getTracks().forEach(function(a){a.addEventListener("ended",function(){b(c.stream)&&c.end()})}),this.parent.emit("peerStreamAdded",this))};f.prototype.handleStreamRemoved=function(){var a=this.parent.peers.indexOf(this);-1<a&&(this.parent.peers.splice(a,1),this.closed=!0,this.parent.emit("peerStreamRemoved",this))};f.prototype.handleDataChannelAdded=function(a){this.channels[a.label]=a;this._observeDataChannel(a)};f.prototype.sendFile=function(a){var b=new l.Sender,
c=this.getDataChannel("filetransfer"+(new Date).getTime(),{protocol:"https://simplewebrtc.com/protocol/filetransfer#inband-v1"});c.onopen=function(){c.send(JSON.stringify({size:a.size,name:a.name}));b.send(a,c)};c.onclose=function(){console.log("sender received transfer");b.emit("complete")};return b};e.exports=f},{filetransfer:26,rtcpeerconnection:44,util:63,webrtcsupport:64,wildemitter:65}],68:[function(a,e,c){function b(a){var b=this,c=a||{},e=this.config={url:"https://sandbox.simplewebrtc.com:443/",
socketio:{},connection:null,debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!1,peerVolumeWhenSpeaking:.25,media:{video:!0,audio:!0},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},localVideo:{autoplay:!0,mirror:!0,muted:!0}},h;var p=a.debug?a.logger||console:a.logger||n;this.logger=p;for(h in c)c.hasOwnProperty(h)&&(this.config[h]=c[h]);this.capabilities=g;d.call(this);var l=null===this.config.connection?this.connection=
new u(this.config):this.connection=this.config.connection;l.on("connect",function(){b.emit("connectionReady",l.getSessionid());b.sessionReady=!0;b.testReadiness()});l.on("message",function(a){var c=b.webrtc.getPeers(a.from,a.roomType);if("offer"===a.type){c.length&&c.forEach(function(b){b.sid==a.sid&&(e=b)});if(!e){var e=b.webrtc.createPeer({id:a.from,sid:a.sid,type:a.roomType,enableDataChannels:b.config.enableDataChannels&&"screen"!==a.roomType,sharemyscreen:"screen"===a.roomType&&!a.broadcaster,
broadcaster:"screen"!==a.roomType||a.broadcaster?null:b.connection.getSessionid()});b.emit("createdPeer",e)}e.handleMessage(a)}else c.length&&c.forEach(function(b){a.sid?b.sid===a.sid&&b.handleMessage(a):b.handleMessage(a)})});l.on("remove",function(a){a.id!==b.connection.getSessionid()&&b.webrtc.removePeers(a.id,a.type)});a.logger=this.logger;a.debug=!1;this.webrtc=new f(a);"mute unmute pauseVideo resumeVideo pause resume sendToAll sendDirectlyToAll getPeers".split(" ").forEach(function(a){b[a]=
b.webrtc[a].bind(b.webrtc)});this.webrtc.on("*",function(){b.emit.apply(b,arguments)});if(e.debug)this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:"));this.webrtc.on("localStream",function(){b.testReadiness()});this.webrtc.on("message",function(a){b.connection.emit("message",a)});this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this));this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this));this.config.adjustPeerVolume&&(this.webrtc.on("speaking",
this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1)));l.on("stunservers",function(a){b.webrtc.config.peerConnectionConfig.iceServers=a;b.emit("stunservers",a)});l.on("turnservers",function(a){b.webrtc.config.peerConnectionConfig.iceServers=b.webrtc.config.peerConnectionConfig.iceServers.concat(a);b.emit("turnservers",a)});this.webrtc.on("iceFailed",function(a){});this.webrtc.on("connectivityError",function(a){});this.webrtc.on("audioOn",
function(){b.webrtc.sendToAll("unmute",{name:"audio"})});this.webrtc.on("audioOff",function(){b.webrtc.sendToAll("mute",{name:"audio"})});this.webrtc.on("videoOn",function(){b.webrtc.sendToAll("unmute",{name:"video"})});this.webrtc.on("videoOff",function(){b.webrtc.sendToAll("mute",{name:"video"})});this.webrtc.on("localScreen",function(a){var c=document.createElement("video"),e=b.getRemoteVideoContainer();c.oncontextmenu=function(){return!1};c.id="localScreen";k(a,c);e&&e.appendChild(c);b.emit("localScreenAdded",
c);b.connection.emit("shareScreen");b.webrtc.peers.forEach(function(a){"video"===a.type&&(a=b.webrtc.createPeer({id:a.id,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},broadcaster:b.connection.getSessionid()}),b.emit("createdPeer",a),a.start())})});this.webrtc.on("localScreenStopped",function(a){b.getLocalScreen()&&b.stopScreenShare()});this.webrtc.on("channelMessage",function(a,c,e){"volume"==e.type&&b.emit("remoteVolumeChange",a,e.volume)});
this.config.autoRequestMedia&&this.startLocalVideo()}var f=a("./webrtc"),d=a("wildemitter"),g=a("webrtcsupport"),k=a("attachmediastream"),n=a("mockconsole"),u=a("./socketioconnection");b.prototype=Object.create(d.prototype,{constructor:{value:b}});b.prototype.leaveRoom=function(){if(this.roomName){for(this.connection.emit("leave");this.webrtc.peers.length;)this.webrtc.peers[0].end();this.getLocalScreen()&&this.stopScreenShare();this.emit("leftRoom",this.roomName);this.roomName=void 0}};b.prototype.disconnect=
function(){this.connection.disconnect();delete this.connection};b.prototype.handlePeerStreamAdded=function(a){var b=this,c=this.getRemoteVideoContainer(),e=k(a.stream);a.videoEl=e;e.id=this.getDomId(a);c&&c.appendChild(e);this.emit("videoAdded",e,a);window.setTimeout(function(){b.webrtc.isAudioEnabled()||a.send("mute",{name:"audio"});b.webrtc.isVideoEnabled()||a.send("mute",{name:"video"})},250)};b.prototype.handlePeerStreamRemoved=function(a){var b=this.getRemoteVideoContainer(),c=a.videoEl;this.config.autoRemoveVideos&&
b&&c&&b.removeChild(c);c&&this.emit("videoRemoved",c,a)};b.prototype.getDomId=function(a){return[a.id,a.type,a.broadcaster?"broadcasting":"incoming"].join("_")};b.prototype.setVolumeForAll=function(a){this.webrtc.peers.forEach(function(b){b.videoEl&&(b.videoEl.volume=a)})};b.prototype.joinRoom=function(a,b){var c=this;this.roomName=a;this.connection.emit("join",a,function(e,f){console.log("join CB",e);if(e)c.emit("error",e);else{if(!f.xtra){oa();A("game");Ya();Db(l.ERR_GAMELOAD,"#ff0000");return}t.room=
f.xtra;var d,h;for(d in f.clients){var g=f.clients[d];for(h in g)if(g[h]){var k=c.webrtc.createPeer({id:d,type:h,enableDataChannels:c.config.enableDataChannels&&"screen"!==h,receiveMedia:{offerToReceiveAudio:"screen"!==h&&c.config.receiveMedia.offerToReceiveAudio?1:0,offerToReceiveVideo:c.config.receiveMedia.offerToReceiveVideo}});c.emit("createdPeer",k);k.start()}}}b&&b(e,f);c.emit("joinedRoom",a)})};b.prototype.getEl=function(a){return"string"===typeof a?document.getElementById(a):a};b.prototype.startLocalVideo=
function(){var a=this;this.webrtc.start(this.config.media,function(b,c){b?a.emit("localMediaError",b):k(c,a.getLocalVideoContainer(),a.config.localVideo)})};b.prototype.stopLocalVideo=function(){this.webrtc.stop()};b.prototype.getLocalVideoContainer=function(){var a=this.getEl(this.config.localVideoEl);if(a&&"VIDEO"===a.tagName)return a.oncontextmenu=function(){return!1},a;if(a){var b=document.createElement("video");b.oncontextmenu=function(){return!1};a.appendChild(b);return b}};b.prototype.getRemoteVideoContainer=
function(){return this.getEl(this.config.remoteVideosEl)};b.prototype.shareScreen=function(a){this.webrtc.startScreenShare(a)};b.prototype.getLocalScreen=function(){return this.webrtc.localScreens&&this.webrtc.localScreens[0]};b.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var a=document.getElementById("localScreen"),b=this.getRemoteVideoContainer();this.config.autoRemoveVideos&&b&&a&&b.removeChild(a);a&&this.emit("videoRemoved",a);this.getLocalScreen()&&this.webrtc.stopScreenShare();
this.webrtc.peers.forEach(function(a){a.broadcaster&&a.end()})};b.prototype.testReadiness=function(){this.sessionReady&&(this.config.media.video||this.config.media.audio?0<this.webrtc.localStreams.length&&this.emit("readyToCall",this.connection.getSessionid()):this.emit("readyToCall",this.connection.getSessionid()))};b.prototype.createRoom=function(a,b){this.roomName=a;this.connection.emit("create",t.room,b)};b.prototype.sendFile=function(){if(!g.dataChannel)return this.emit("error",Error("DataChannelNotSupported"))};
e.exports=b},{"./socketioconnection":69,"./webrtc":70,attachmediastream:3,mockconsole:37,webrtcsupport:64,wildemitter:65}],69:[function(a,e,c){function b(a){this.connection=f.connect(a.url,a.socketio)}var f=a("socket.io-client");b.prototype.on=function(a,b){this.connection.on(a,b)};b.prototype.emit=function(){this.connection.emit.apply(this.connection,arguments)};b.prototype.getSessionid=function(){return this.connection.id};b.prototype.disconnect=function(){return this.connection.disconnect()};e.exports=
b},{"socket.io-client":50}],70:[function(a,e,c){function b(a){var b=this,c=a||{};this.config={debug:!1,peerConnectionConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[]},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},enableDataChannels:!0};var e;a=a.debug?a.logger||console:a.logger||d;this.logger=a;for(e in c)c.hasOwnProperty(e)&&(this.config[e]=c[e]);f.support||this.logger.error("Your browser doesn't seem to support WebRTC");this.peers=[];
g.call(this,this.config);this.on("speaking",function(){b.hardMuted||b.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"speaking"})))})});this.on("stoppedSpeaking",function(){b.hardMuted||b.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"stoppedSpeaking"})))})});this.on("volumeChange",function(a,c){b.hardMuted||b.peers.forEach(function(b){b.enableDataChannels&&
(b=b.getDataChannel("hark"),"open"==b.readyState&&b.send(JSON.stringify({type:"volume",volume:a})))})});if(this.config.debug)this.on("*",function(a,c,e){(b.config.logger===d?console:b.logger).log("event:",a,c,e)})}c=a("util");var f=a("webrtcsupport"),d=a("mockconsole"),g=a("localmedia"),k=a("./peer");c.inherits(b,g);b.prototype.createPeer=function(a){a.parent=this;a=new k(a);this.peers.push(a);return a};b.prototype.removePeers=function(a,b){this.getPeers(a,b).forEach(function(a){a.end()})};b.prototype.getPeers=
function(a,b){return this.peers.filter(function(c){return(!a||c.id===a)&&(!b||c.type===b)})};b.prototype.sendToAll=function(a,b){this.peers.forEach(function(c){c.send(a,b)})};b.prototype.sendDirectlyToAll=function(a,b,c){this.peers.forEach(function(e){e.enableDataChannels&&e.sendDirectly(a,b,c)})};e.exports=b},{"./peer":67,localmedia:35,mockconsole:37,util:63,webrtcsupport:64}]},{},[68])(68)})},t={name:localStorage.name,color:localStorage.color||"#ff0000"},Za=function(){};console.log("%c nehhon %c POWER ",
"background: #00ffd4; color: #000; font-size:20px","background: #000; color: #00ffd4; font-size:20px");console.log("%c webmaster@nehhon.com ","background: #00ffd4; color: #000; font-size:20px");console.log("%c @nehhon ","background: #000; color: #00ffd4; font-size:20px");var k=function(d){return document.getElementById(d)},W=function(d,a,e){void 0===localStorage[d]&&(localStorage[d]=a);e&&(k(e).value=localStorage[d])};void 0===localStorage.fullscreen&&(localStorage.fullscreen=!0);W("favMusic","originalMusic");
W("musicRange",36);W("soundRange",100);W("goldRes",400);W("foodRes",400);W("stoneRes",400);W("woodRes",400);W("nplayed",0);W("infinity","true");W("mapx",256);W("terrain",0);W("water","0");W("items","10");W("peons","3");W("gateways","1");W("freePop","1");W("maxPop",200);W("zoomMult",70);W("scrollSpeed",50);W("nightcycle",!0);W("terrainRND",0);console.log=Za;console.error=Za;console.warn=Za;console.info=Za;"tza.red"!==location.hostname&&(location.href="https://tza.red");window.addEventListener("error",
function(d){$a(d.lineno+":"+d.colno+" "+d.message,"error")});var Cf=function(d){d.parentNode.removeChild(d)},Db=function(d,a){var e=k("notifybar"),c=document.createElement("div");c.innerHTML=d;a&&(c.style.background=a);e.appendChild(c);setTimeout(Cf,11E3,c)},Df=location;(function(){var d=!!window.opr||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),a="undefined"!==typeof InstallTrigger,e=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),c=!!document.documentMode,
b=!c&&!!window.StyleMedia,f=!!window.chrome&&!!window.chrome.webstore,h;d?h="Opera":a?h="Firefox":e?h="Safari":c?h="IE":b?h="Edge":f&&(h="Chrome");t.navLang=localStorage.language||navigator.language||navigator.userLanguage;a=t.navLang.substr(0,2);"es"==a?d=["Tzared","Juego de estrategia en tiempo real para navegadores web, juega solo o con amigos","tzared,jugar,multijugador,juego,online,navegador web,tzar"]:"it"==a?d=["Tzared","Gioco di strategia in tempo reale per browser web, giocare da soli o con gli amici",
"tzared,giocare,multigiocatore,gioco,online,navigatore,tzar,web"]:"pl"==a?d=["Tzared","Gra strategiczna w czasie rzeczywistym dla przegl\u0105darek internetowych, bawi\u0107 si\u0119 samotnie lub z przyjaci\u00f3\u0142mi","tzared,gra,multiplayer,online,tzar,przegl\u0105darka internetowa"]:"ru"==a?d=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0434\u043b\u044f \u0432\u0435\u0431-\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u0432, \u0438\u0433\u0440\u0430\u0442\u044c \u0432 \u043e\u0434\u0438\u043d\u043e\u0447\u043a\u0443 \u0438\u043b\u0438 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u044c\u0442\u0438\u043f\u043b\u0435\u0435\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u0435\u0440,\u043e\u0433\u043d\u0451\u043c \u0438 \u043c\u0435\u0447\u043e\u043c"]:"pt"==a?d=["Tzared","Jogo de estrat\u00e9gia em tempo real para navegadores da web, jogar sozinho ou com amigos","tzared,jogar,multiplayer,jogo,online,navegador web,tzar"]:"bg"==a?d=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0447\u0435\u0441\u043a\u0430 \u0438\u0433\u0440\u0430 \u0432 \u0440\u0435\u0430\u043b\u043d\u043e \u0432\u0440\u0435\u043c\u0435 \u0437\u0430 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0438, \u0438\u0433\u0440\u0430\u0439\u0442\u0435 \u0441\u0430\u043c\u0438 \u0438\u043b\u0438 \u0441 \u043f\u0440\u0438\u044f\u0442\u0435\u043b\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u0442\u0438\u043f\u043b\u0435\u0439\u044a\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u044a\u0440"]:"de"==a?d=["Tzared","Echtzeit-Strategiespiel f\u00fcr Webbrowser, alleine oder mit Freunden spielen","tzared,multiplayer,spiel,online,Webbrowser,tzar"]:"cz"==a?d=["Tzared","Strategick\u00e1 hra v re\u00e1ln\u00e9m \u010dase pro webov\u00e9 prohl\u00ed\u017ee\u010de, hr\u00e1t sama nebo s p\u0159\u00e1teli",
"tzared,play,multiplayer,hra,online,browser,tzar,web"]:(d=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"],a="en");document.getElementsByTagName("html")[0].lang=a;document.title=d[0];t.title=d[0];document.getElementsByTagName("meta").description=d[1];document.getElementsByTagName("meta").keywords=d[2];t.versionInt=351;t.version="v"+t.versionInt/10;t.versionDate=Date.now()-1563274436534;localStorage.version!==t.version&&
(localStorage.version=t.version,Db("Updated to "+t.version));k("info").innerHTML="Work in progress - Beta "+t.version+" - Updated "+~~(t.versionDate/864E5)+" days ago";t.lang="en es it pt ru pl bg de cz".split(" ").indexOf(a);0>t.lang&&(t.lang=0);t.langstr=a;t.team=0;t.race=0;t.navigator=h;t.mx=151;t.onlineID=null;t.temperature=0;t.cdn="nehhon/"})();var Rc=function(d){d--;var a=new XMLHttpRequest;a.open("GET",t.cdn+t.langstr+".json",!0);a.onload=function(){l=JSON.parse(a.response);ua=[l.SP_SETUPMAP_RACE_1.split("|")[0],
l.SP_SETUPMAP_RACE_2.split("|")[0],l.SP_SETUPMAP_RACE_3.split("|")[0],l.ORDERS_NAMES_E_COMMON.toLocaleUpperCase()];for(var e=["mult0",l.MAINSCR_MULTI.split("|")[0],"rnd0",l.MAINSCR_SINGLE.split("| ")[0],"load0",l.SINGLESCR_LOAD.split("| ")[1],"editor0",l.MAPEDITOR,"settings0",l.MP_MPLAYER_SETTINGS,"about",l.ABOUT,"multSection",l.MAINSCR_MULTI.split("|")[0],"offlineSection",l.MAINSCR_SINGLE.split("|")[0],"returnmenu",l.CAMPAIGN_BACK,"savelocal",l.SAVE_GAME_CONTENT],c=0,b=e.length;c<b;c+=2)k(e[c])&&
(k(e[c]).innerHTML=e[c+1])};a.send()};Rc(t.lang);Rc.translated=!0;var C=console.log,Zd=function(){A("alert");oa()},$a=function(d,a,e,c){var b=k("alert");b||(Tb("alert"),b=k("alert"),C(c),b.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var f=k("alerttitle"),m=k("alerttext");k("alertok").onclick=Zd;b.style.display="block";f.innerHTML=
a||l.TZAREDIT_S2;k("alertok").innerHTML=c||l.DLG_BTNS_OK;d&&(m.innerHTML=d);e?k("alertok").style.display="none":k("alertok").style.display="block";Da()},Ef=function(d,a,e){for(var c=0,b={},f=0;f<d.length;b={$jscomp$loop$prop$url$20:b.$jscomp$loop$prop$url$20},f++)b.$jscomp$loop$prop$url$20=t.cdn+d[f],-1===a.indexOf(b.$jscomp$loop$prop$url$20)?fetch(b.$jscomp$loop$prop$url$20).then(function(a){return a.arrayBuffer()}).then(function(a){return function(b){c++;e.innerHTML=100*c/d.length+"%";c==d.length&&
(e.style.display="none");$d({url:a.$jscomp$loop$prop$url$20,buffer:b})}}(b)):c++},ae=function(){for(var d=[Eb.content.common,Eb.content.icons],a=Object.keys(ab),e=0;e<a.length;e++)d.put(ab[a[e]].url);return d},be=function(){var d=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then(function(a){a?Sc("basic",function(a){a=a.target.result;C(this);Ef(ae(),a,d);d.innerHTML="0%";d.onclick=null;be.button=this}):$a("Storage may be cleared by the UA under storage pressure.")})},
X={size:512,load:0,xtra:[],common:1,xtraRes:[]},va=function(d){d.target.loadedSize||(va.total+=d.total,d.target.lastLoaded=0,d.target.loadedSize=!0);va.progress+=d.loaded-d.target.lastLoaded;d.target.lastLoaded=d.loaded;k("loadingtext").innerHTML=l.DOWNLOADING_GRAPHICS+~~(100*va.progress/va.total)+"%"};X.check=function(){C("txt",X.load,X.images);X.load++;if(X.load===X.images){ce();var m=Yb(r.atlasLoc(),1048576);d.activeTexture(d.TEXTURE0);var a=d.createTexture();d.bindTexture(d.TEXTURE_2D,a);aa?d.texImage2D(d.TEXTURE_2D,
0,d.RGBA,512,512,0,d.RGBA,d.FLOAT,m):d.texImage2D(d.TEXTURE_2D,0,d.RGBA32F,512,512,0,d.RGBA,d.FLOAT,m);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT);d.uniform1i(d.getUniformLocation(G,"u_image1"),0);var e=performance.now();m=X.common.viewU8();if(aa){e=4*Math.pow(4096,2);for(var c=Math.ceil(m.length/e),b=0;b<c;b++){d.activeTexture(d.TEXTURE6+
b);var f=d.createTexture();d.bindTexture(d.TEXTURE_2D,f);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT);f=new Uint8Array(m.buffer,m.byteOffset+e*b,e);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,4096,4096,0,d.RGBA,d.UNSIGNED_BYTE,f);d.uniform1i(d.getUniformLocation(G,"img_common["+b+"]"),6+b);d.useProgram(I);d.uniform1i(d.getUniformLocation(I,
"img_common["+b+"]"),6+b);d.useProgram(G)}d.useProgram(I)}else d.activeTexture(d.TEXTURE1),f=d.createTexture(),d.bindTexture(d.TEXTURE_2D_ARRAY,f),d.texParameteri(d.TEXTURE_2D_ARRAY,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D_ARRAY,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texImage3D(d.TEXTURE_2D_ARRAY,0,d.RGBA,X.size,X.size,m.length/(X.size*X.size*4),0,d.RGBA,d.UNSIGNED_BYTE,m),d.uniform1i(d.getUniformLocation(G,"img_common"),1),C("3dtex",performance.now()-e),d.useProgram(I),d.activeTexture(d.TEXTURE0),
d.bindTexture(d.TEXTURE_2D_ARRAY,f),d.uniform1i(d.getUniformLocation(I,"img_common"),0);d.activeTexture(d.TEXTURE5);d.bindTexture(d.TEXTURE_2D,a);d.uniform1i(d.getUniformLocation(I,"u_image1"),5);r.delTexs();d.activeTexture(d.TEXTURE2);wa||Ff();Ha.check()}};var Ia=function(d,a){this.address=d;this.size=a};Ia.prototype.viewU8=function(){return Zb(this.address,this.size)};Ia.prototype.viewU32=function(){return Tc(this.address,this.size)};Ia.prototype.viewF32=function(){return Yb(this.address,this.size)};
Ia.prototype.viewI32=function(){return new Int32Array(g.HEAPF32.buffer,this.address,this.size)};var $b,If=function(d){k("loadingtext").innerHTML=l.DOWNLOADING_GRAPHICS;Sc("basic",function(a){$b=a.target.result;a=r.getTerrain();for(var e=Object.keys(ab),c=0;c<e.length;c++)if(ab[e[c]].id==a){var b=ab[e[c]];break}a=1048576*(323+b.size);X.common=new Ia(r.crtStxt(a),a);X.images=Object.keys(d).length+1;X.load=0;va.progress=0;va.total=0;Date.now();wa||S.icons?X.check():ac(t.cdn+d.icons,function(a){C(a);
a=new Uint8Array(a);a=new Blob([a],{type:"image/png"});var b=new Image;b.src=URL.createObjectURL(a);S.icons=b;b.onload=X.check},va);ac(t.cdn+d.common,Gf,va);ac(t.cdn+b.url,Hf,va)})},Eb=function(){X.started=!0;If(Eb.content)};Eb.content={icons:"icons.png",common:"common.neh2"};var ab={grass:{name:"Grass",url:"grass.neh2",size:30,id:0},trenkorian:{name:"Trenkorian",url:"trenkorian.neh2",size:36,id:1},desert:{name:"Desert",url:"desert.neh2",size:21,id:2},snow:{name:"Snow",url:"snow.neh2",size:20,id:3},
summer:{name:"Summer",url:"summer.neh2",size:30,id:4}};(function(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("sworker.js").then(function(d){console.log("CLIENT: service worker registration complete.")},function(d){C(d);console.log("CLIENT: service worker registration failure.")}),navigator.serviceWorker.oncontrollerchange=function(){console.log("page controlled by:",navigator.serviceWorker.controller);location.reload(!0)}):
console.log("CLIENT: service worker is not supported.")})();var ha="GENERAL_DEFGAMENAME;GENERAL_GAMENAME;GENERAL_VERSION;GENERAL_NET_TITLE;GENERAL_CANCEL;GENERAL_OK;GENERAL_YES;GENERAL_NO;GENERAL_CLOSE;GENERAL_IGNORE;GENERAL_ABORT;GENERAL_YOUSURE;GENERAL_REFRESH;GENERAL_KICK;GENERAL_QLOAD;GENERAL_QSAVE;ADDS_MOREHOUSES;ADDS_AISEND;CHECK_INSERTCD;CHECK_INSERTCD2;CHECK_INSERTCD3;CHECK_NOCD;CHECK_BADEXE;ERR_CTFCANTSPAWN;ERR_DXFAILED;ERR_VMODE;ERR_OFFSCREEN;ERR_GPF;ERR_INCORRECTVER;ERR_GAMEFULL;ERR_BROWSEFAIL;ERR_NONET;ERR_SNDINIT;ERR_GAMECREATE;ERR_GAMELOAD;ERR_GAMELOAD2;ERR_DEMOVER;ERR_DEMORNDMAP;ERR_INVALIDCFG;ERR_INITMIDI;ERR_DSINIT;ERR_MCIINIT;ERR_BETACONNECT;ERR_SERVERCANCEL;ERR_SERVERKICK;ERR_ORDERROOM;ERR_MENUROOM;ERR_NETASYNC;ERR_NETASYNC2;ERR_NETASYNCBAD;ERR_NOTERRAIN;ERR_NOMAP;ERR_CLIENTSYNC;ERR_RULESLOAD;ERR_MAPWRONGVER;ERR_WRONGAI;ERR_WRONGOBJS;ERR_UNKNOWN;ERR_FATAL;ERR_NONFATAL;ERR_ERRORCODE;DEFMSG_MOVEDAVANCE;DEFMSG_MOVESNEAK;DEFMSG_ATTACK;DEFMSG_ATTACKTYPE;DEFMSG_ENTERHOLDER;DEFMSG_MINE;DEFMSG_BUILD;DEFMSG_REPAIR;DEFMSG_DIG;DEFMSG_CAPTURE;DEFMSG_CHOP;DEFMSG_ENTERSHIP;DEFMSG_FISHING;DEFMSG_PICKITEM;DEFMSG_PICKITEMINST;DEFMSG_GATHERRESITEMS;DEFMSG_TENDCOWS;DEFMSG_LEAVETRADE;DEFMSG_RETURNGOODS;DEFMSG_DUMMYTRAIN;DEFMSG_REMOVERALLYPOINT;DEFMSG_SETRALLYPOINT;DEFMSG_SETRALLYPOINTDA;DEFMSG_SETRALLYPOINTADV;DEFMSG_NOMAPTITLE;DEFMSG_NODECR;Q_QUIT_TITLE;Q_QUIT;Q_RESIGN;Q_DISCONNECT;MSG_CLIENT_QUIT;MSG_LOAD_OBJDEFS;MSG_LOAD_TERRAIN;MSG_LOAD_OBJECTS;MSG_LOAD_FINAL;MSG_LOAD_AI;MSG_LOAD_DONE;MSG_GAME_DESTROY;MSG_GAME_CREATE;MSG_GAME_RANDOM;MSG_GAME_RESTART;MSG_GAME_LOAD;MSG_GAME_LOAD_OBJ;MSG_GAME_INIT;MSG_RESADDED;MSG_NET_JOIN;MSG_NET_BROWSE;MSG_TREE;MSG_GAME_SPEED;MSG_GAME_SPEED_SLOWEST;MSG_GAME_SPEED_SLOW;MSG_GAME_SPEED_NORMAL;MSG_GAME_SPEED_FAST;MSG_GAME_SPEED_FASTEST;MSG_SYS_ERROR;MSG_SYS_TITLE;MSG_SYS_CONT;MSG_SYS_ABORT;MSG_SYS_YES;MSG_SYS_NO;MSG_SYS_IGNORE;MSG_DISCONNECT;VIEWMSG_POPLIMIT1;VIEWMSG_POPLIMIT2;VIEWMSG_NOTGOLD;VIEWMSG_NOTMANNA;VIEWMSG_NOTPOWER;VIEWMSG_MAGICGATEWAYCAP;VIEWMSG_QUICKSAVED;VIEWMSG_NOMPCHEAT;VIEWMSG_CHEATSENABLED;VIEWMSG_PLAYER_RESIGNED;VIEWMSG_PLAYER_DISCONECTED;VIEWMSG_PLAYER_DEFEATED;VIEWMSG_NEWQUEST;VIEWMSG_DEMO_END;VIEWMSG_NOTRES;VIEWMSG_GOLD;VIEWMSG_STONE;VIEWMSG_FOOD;VIEWMSG_WOOD;VIEWMSG_MANNA;VIEWMSG_SELL_ITEM;VIEWMSG_WAIT_PLAYERS;VIEWMSG_WAIT_RESPONSE;VIEWMSG_PLAYER_ENEMY;VIEWMSG_PLAYER_NEUTRAL;VIEWMSG_PLAYER_ALLY;VIEWMSG_PLAYER_WANT_ENEMY;VIEWMSG_PLAYER_WANT_NEUTRAL;VIEWMSG_PLAYER_WANT_ALLY;VIEWMSG_SPELL_LEARNED;VIEWMSG_PAUSE;NOTIFY_UNDER_ATTACK;NOTIFY_CAPTURED;NOTIFY_KILLED;NOTIFY_DESTROYED;NOTIFY_BUILT;NOTIFY_PRODUCED;NOTIFY_DISCOVERED;NOTIFY_UPGRADED;SELVIEW_UNITS;SELVIEW_BERSERKKINGDOM;MAINSCR_SINGLE;MAINSCR_MULTI;MAINSCR_PREF;MAINSCR_CREDITS;MAINSCR_QUIT;SINGLESCR_CAMPAIGN;SINGLESCR_CUSTOM;SINGLESCR_RANDOM;SINGLESCR_LOAD;SINGLESCR_BACK;SP_CHOOSEMAP_T_CUSTOMMAP;SP_CHOOSEMAP_T_MAP;SP_CHOOSEMAP_T_DESCRIPTION;SP_CHOOSEMAP_PLAY;SP_CHOOSEMAP_BACK;SP_SETUPMAP_T_NUM_PLAYERS;SP_SETUPMAP_T_GAME_TYPE;SP_SETUPMAP_T_VICT_COND;SP_SETUPMAP_T_SCORE_LIM;SP_SETUPMAP_T_TIME_LIM;SP_SETUPMAP_T_DIFF_LVL;SP_SETUPMAP_T_ST_RES;SP_SETUPMAP_T_MAP_DECR;SP_SETUPMAP_T_FOG;SP_SETUPMAP_T_EXPOLRE;SP_SETUPMAP_T_MAPDEF;SP_SETUPMAP_T_POPLIMIT;SP_SETUPMAP_BACK;SP_SETUPMAP_PLAY;SP_SETUPMAP_RACE_0;SP_SETUPMAP_RACE_1;SP_SETUPMAP_RACE_2;SP_SETUPMAP_RACE_3;SP_SETUPMAP_G_TYPE_0;SP_SETUPMAP_G_TYPE_1;SP_SETUPMAP_G_TYPE_2;SP_SETUPMAP_VCOND_0;SP_SETUPMAP_VCOND_1;SP_SETUPMAP_VCOND_2;SP_SETUPMAP_VCOND_3;SP_SETUPMAP_DIFFLVL_0;SP_SETUPMAP_DIFFLVL_1;SP_SETUPMAP_DIFFLVL_2;SP_SETUPMAP_RESURCS_0;SP_SETUPMAP_RESURCS_1;SP_SETUPMAP_RESURCS_2;SP_SETUPMAP_RESURCS_3;MP_SEARCH_T_PL_NAME;MP_SEARCH_T_IPX;MP_SEARCH_T_TCP;MP_SEARCH_T_IP;MP_SEARCH_T_LOBBY;MP_SEARCH_T_GAMES;MP_SEARCH_T_INFORM;MP_SEARCH_T_GAMENAME;MP_SEARCH_CREATE;MP_SEARCH_SEARCH;MP_SEARCH_JOIN;MP_SEARCH_BACK;MP_MPLAYER_PLAY;MP_MPLAYER_SETTINGS;MP_MPLAYER_DISCONNECT;MP_MPLAYER_RACE_0;MP_MPLAYER_RACE_1;MP_MPLAYER_RACE_2;MP_MPLAYER_RACE_3;MP_MPLAYER_NAME_0;MP_MPLAYER_NAME_1;MP_MPLAYER_NAME_2;MP_SETUPMAP_T_RANDOM;MP_SETUPMAP_T_CUSTOM;MP_SETUPMAP_T_CUSTOM_LIST;MP_SETUPMAP_T_MAP_DECR;MP_SETUPMAP_T_GAME_TYPE;MP_SETUPMAP_T_VICT_COND;MP_SETUPMAP_T_SCORE_LIM;MP_SETUPMAP_T_TIME_LIM;MP_SETUPMAP_T_DIFF_LVL;MP_SETUPMAP_T_ST_RES;MP_SETUPMAP_T_MAP_SIZE;MP_SETUPMAP_T_MAP_RES;MP_SETUPMAP_T_MAP_TYPE;MP_SETUPMAP_T_TERRAIN;MP_SETUPMAP_T_GSLOCATIONS;MP_SETUPMAP_T_ANIMALS;MP_SETUPMAP_T_RIVERS;MP_SETUPMAP_T_MITEMS;MP_SETUPMAP_T_CLIFFS;MP_SETUPMAP_T_FOG;MP_SETUPMAP_T_EXPOLRE;MP_SETUPMAP_T_WEATHER;MP_SETUPMAP_T_DAY;MP_SETUPMAP_T_POPLIMIT;MP_SETUPMAP_T_USEMAPSET;MP_SETUPMAP_T_GATEWAYS;MP_SETUPMAP_T_COMP;MP_SETUPMAP_T_OPEN;MP_SETUPMAP_T_DISABLE;MP_SETUPMAP_G_TYPE_0;MP_SETUPMAP_G_TYPE_1;MP_SETUPMAP_G_TYPE_2;MP_SETUPMAP_VCOND_0;MP_SETUPMAP_VCOND_1;MP_SETUPMAP_VCOND_2;MP_SETUPMAP_VCOND_3;MP_SETUPMAP_DIFFLVL_0;MP_SETUPMAP_DIFFLVL_1;MP_SETUPMAP_DIFFLVL_2;MP_SETUPMAP_RESURCS_0;MP_SETUPMAP_RESURCS_1;MP_SETUPMAP_RESURCS_2;MP_SETUPMAP_RESURCS_3;MP_SETUPMAP_CANCEL;MP_SETUPMAP_ACCEPT;MP_SETUPMAP_M_SIZE_0;MP_SETUPMAP_M_SIZE_1;MP_SETUPMAP_M_SIZE_2;MP_SETUPMAP_M_SIZE_3;MP_SETUPMAP_M_SIZE_4;MP_SETUPMAP_M_SIZE_5;MP_SETUPMAP_M_SIZE_6;MP_SETUPMAP_M_RES_0;MP_SETUPMAP_M_RES_1;MP_SETUPMAP_M_RES_2;MP_SETUPMAP_M_TYPE_0;MP_SETUPMAP_M_TYPE_1;MP_SETUPMAP_M_TYPE_2;MP_SETUPMAP_M_TYPE_3;MP_SETUPMAP_M_TYPE_4;MP_SETUPMAP_M_TYPE_5;MP_SETUPMAP_AI_ASSIST;GAME_SCR_MENU;GAME_SCR_DIPLOMACY;GAME_SCR_CHAT;DLG_BTNS_OK;DLG_BTNS_CANCEL;WND_QUESTS_CURQUEST;WND_QUESTS_CLOSE;WND_QUESTS_PAGE;WND_QUESTS_NONE;WND_MESSAGE_CLOSE;SP_SETUPRND_T_NUM_PLAYERS;SP_SETUPRND_T_GAME_TYPE;SP_SETUPRND_T_VICT_COND;SP_SETUPRND_T_SCORE_LIM;SP_SETUPRND_T_TIME_LIM;SP_SETUPRND_T_DIFF_LVL;SP_SETUPRND_T_ST_RES;SP_SETUPRND_T_FOG;SP_SETUPRND_T_EXPOLRE;SP_SETUPRND_T_MAP_SIZE;SP_SETUPRND_T_MAP_RES;SP_SETUPRND_T_MAP_TYPE;SP_SETUPRND_T_TERRAIN;SP_SETUPRND_T_GSLOCATIONS;SP_SETUPRND_T_ANIMALS;SP_SETUPRND_T_RIVERS;SP_SETUPRND_T_MITEMS;SP_SETUPRND_T_CLIFFS;SP_SETUPRND_T_POPLIMIT;SP_SETUPRND_T_GATEWAYS;SP_SETUPRND_BACK;SP_SETUPRND_PLAY;SP_SETUPRND_RACE_0;SP_SETUPRND_RACE_1;SP_SETUPRND_RACE_2;SP_SETUPRND_RACE_3;SP_SETUPRND_G_TYPE_0;SP_SETUPRND_G_TYPE_1;SP_SETUPRND_G_TYPE_2;SP_SETUPRND_VCOND_0;SP_SETUPRND_VCOND_1;SP_SETUPRND_VCOND_2;SP_SETUPRND_VCOND_3;SP_SETUPRND_DIFFLVL_0;SP_SETUPRND_DIFFLVL_1;SP_SETUPRND_DIFFLVL_2;SP_SETUPRND_RESURCS_0;SP_SETUPRND_RESURCS_1;SP_SETUPRND_RESURCS_2;SP_SETUPRND_RESURCS_3;SP_SETUPRND_M_SIZE_0;SP_SETUPRND_M_SIZE_1;SP_SETUPRND_M_SIZE_2;SP_SETUPRND_M_SIZE_3;SP_SETUPRND_M_SIZE_4;SP_SETUPRND_M_SIZE_5;SP_SETUPRND_M_SIZE_6;SP_SETUPRND_M_RES_0;SP_SETUPRND_M_RES_1;SP_SETUPRND_M_RES_2;SP_SETUPRND_M_TYPE_0;SP_SETUPRND_M_TYPE_1;SP_SETUPRND_M_TYPE_2;SP_SETUPRND_M_TYPE_3;SP_SETUPRND_M_TYPE_4;SP_SETUPRND_M_TYPE_5;OPTIONS_T_SOPT;OPTIONS_T_SVOL;OPTIONS_T_USP;OPTIONS_T_BS;OPTIONS_T_NS;OPTIONS_T_MOPT;OPTIONS_T_MV;OPTIONS_T_CD;OPTIONS_T_GOPT;OPTIONS_T_GS;OPTIONS_T_SS;OPTIONS_T_PD;OPTIONS_T_UINT;OPTIONS_T_HC;OPTIONS_T_ML;OPTIONS_T_WE;OPTIONS_T_DN;OPTIONS_OK;ENDGAMEDLG_QUIT;ENDGAMEDLG_LOAD;ENDGAMEDLG_SAVE;ENDGAMEDLG_NEXT;ENDGAMEDLG_STAT;ENDGAMEDLG_RESTART;ENDGAMEDLG_WIN1;ENDGAMEDLG_WIN2;ENDGAMEDLG_LOSE1;ENDGAMEDLG_LOSE2;PEONS_CHOP;PEONS_DIG;PEONS_MINE;PEONS_BUILD;PEONS_REPAIR;PEONS_TEND COWS;PEONS_EXPLORE;PEONS_CAPTURE;PEONS_ATTACK;PEONS_AI FAR BUILD;PEONS_GATHER RESOURCE ITEMS;PEONS_USE TRANSPORT;CHAT_T_CHAT;LOAD_T_LOAD;LOAD_TYPE_0;LOAD_TYPE_1;LOAD_TYPE_2;LOAD_LOAD;LOAD_DEL;LOAD_CANCEL;SAVE_T_SAVE;SAVE_NEW;SAVE_SAVE;SAVE_DEL;SAVE_CANCEL;CAMPAIGN_T_CAM;CAMPAIGN_T_DESCR;CAMPAIGN_T_EMISS;CAMPAIGN_T_EMISDES;CAMPAIGN_BACK;CAMPAIGN_PLAY;EDIT_T_GAMENAME;DIPLOMACY_T_TITLE;DIPLOMACY_TRIBUTE;DIPLOMACY_SHVICTORY;DIPLOMACY_ACCEPT;DIPLOMACY_CANCEL;TRIBUTE_T_TITLE;TRIBUTE_CANCEL;TRIBUTE_SEND;MENU_INST;MENU_LOAD;MENU_SAVE;MENU_OPTI;MENU_REST;MENU_QUIT;MENU_BACK;MENU_SURR;MENU_DISCONNECT;OBJECTS_ACADEMY;OBJECTS_ARCHER;OBJECTS_BALLISTA;OBJECTS_BARRACK;OBJECTS_BAT;OBJECTS_BEAR;OBJECTS_BIRD;OBJECTS_BLACKSMITH;OBJECTS_BRIDGE;OBJECTS_CARPET;OBJECTS_CASTLE;OBJECTS_CATAPULT;OBJECTS_CATHEDRAL;OBJECTS_CHARIOT;OBJECTS_CHURCH E;OBJECTS_CHURCH R;OBJECTS_CHURCH A;OBJECTS_COW;OBJECTS_CRUSADEANCHOR;OBJECTS_CRUSADER;OBJECTS_DRAGON;OBJECTS_DUMMY;OBJECTS_DWARF;OBJECTS_EAGLE;OBJECTS_ENICHAR;OBJECTS_FARM;OBJECTS_FIELD;OBJECTS_FISH;OBJECTS_FISHING_BOAT;OBJECTS_FISHPATCH;OBJECTS_FOOTMAN E;OBJECTS_FOOTMAN A;OBJECTS_FOOTMAN R;OBJECTS_GALLEON;OBJECTS_GATE_STONE;OBJECTS_GATE_WOOD;OBJECTS_GHOST;OBJECTS_GROUND_OBJECT;OBJECTS_GROUND_PATCH;OBJECTS_HARBOR;OBJECTS_HCATAPULT;OBJECTS_HEAVY_CAVALRY;OBJECTS_HORSE_ARCHER;OBJECTS_HORSE_SAMURAI;OBJECTS_HOUSE;OBJECTS_HULK;OBJECTS_ITEM;OBJECTS_ITEM_FLAG;OBJECTS_ITEM_HEALTH;OBJECTS_ITEM_MAGIC;OBJECTS_ITEM_PLUSPLUS;OBJECTS_ITEM_SCROLL;OBJECTS_ITEM_SOUL;OBJECTS_JIHAD_WARRIOR;OBJECTS_JINN;OBJECTS_KNIGHT;OBJECTS_LONGBOWMAN;OBJECTS_LUMBER;OBJECTS_MACEMAN E;OBJECTS_MACEMAN R;OBJECTS_MACEMAN A;OBJECTS_MAGE;OBJECTS_MAGETOWER;OBJECTS_MAGICWORKSHOP;OBJECTS_MARKET;OBJECTS_MONK;OBJECTS_MOSQUE;OBJECTS_NINJA;OBJECTS_ORK;OBJECTS_OUTPOST;OBJECTS_PEON;OBJECTS_PIKEMAN;OBJECTS_PRIEST;OBJECTS_RES_GOLD;OBJECTS_RES_STONE;OBJECTS_RESITEM;OBJECTS_RUIN;OBJECTS_SHAOLINN;OBJECTS_SKELETON;OBJECTS_SPY;OBJECTS_STABLE;OBJECTS_STORAGE;OBJECTS_TAVERN;OBJECTS_TCGUILD;OBJECTS_TOWER_STONE;OBJECTS_TOWER_STONE2;OBJECTS_TOWER_WOOD;OBJECTS_TOWER_WOOD2;OBJECTS_TOWER_ROCKET;OBJECTS_TRADER E;OBJECTS_TRADER R;OBJECTS_TROLL;OBJECTS_WALL_STONE;OBJECTS_WALL_WOOD;OBJECTS_WHIRLPOOL;OBJECTS_WORKSHOP;OBJECTS_XEBEC;OBJECTS_MAGICGATEWAY;OBJECTS_EVILCASTLE;ORDERS_NAMES_???;ORDERS_NAMES_FISHING_BOAT;ORDERS_NAMES_FISHING;ORDERS_NAMES_LOAN_RETURN;ORDERS_NAMES_LOAN;ORDERS_NAMES_LOAN_GOLD;ORDERS_NAMES_LOAN_STONE;ORDERS_NAMES_LOAN_IRON;ORDERS_NAMES_LOAN_FOOD;ORDERS_NAMES_LOAN_WOOD;ORDERS_NAMES_BRIBE;ORDERS_NAMES_REVEAL_SELF;ORDERS_NAMES_IMPERSONATE;ORDERS_NAMES_BECOME_JIHADW;ORDERS_NAMES_BECOME_PRIEST;ORDERS_NAMES_CLOAK;ORDERS_NAMES_UNCLOAK;ORDERS_NAMES_MURDER;ORDERS_NAMES_ITEM_USE;ORDERS_NAMES_ITEM_DROP;ORDERS_NAMES_ITEM_KILL;ORDERS_NAMES_ITEM_BERSERK;ORDERS_NAMES_MOVE;ORDERS_NAMES_REPAIR;ORDERS_NAMES_CAPTURE;ORDERS_NAMES_HARVEST;ORDERS_NAMES_ATTACK;ORDERS_NAMES_ATTACK_GROUND;ORDERS_NAMES_HOLD_STEADY;ORDERS_NAMES_SELECT_CRUSADERS;ORDERS_NAMES_STAND_GROUND;ORDERS_NAMES_ATTACK_TYPE;ORDERS_NAMES_EXORCISM;ORDERS_NAMES_PICK_ITEM;ORDERS_NAMES_GUARD;ORDERS_NAMES_PATROL;ORDERS_NAMES_GATEOPEN;ORDERS_NAMES_GATECLOSE;ORDERS_NAMES_GATE_SUBAI_ON;ORDERS_NAMES_GATE_SUBAI_OFF;ORDERS_NAMES_E_BARRACK;ORDERS_NAMES_DUMMY;ORDERS_NAMES_TCGUILD;ORDERS_NAMES_E_BLACKSMITH;ORDERS_NAMES_MAGETOWER;ORDERS_NAMES_WALL_STONE;ORDERS_NAMES_WALL_WOOD;ORDERS_NAMES_E_BUILD;ORDERS_NAMES_R_BUILD;ORDERS_NAMES_A_BUILD;ORDERS_NAMES_E_CASTLE;ORDERS_NAMES_MAGICWORKSHOP;ORDERS_NAMES_CATHEDRAL;ORDERS_NAMES_SHAOLINN;ORDERS_NAMES_MOSQUE;ORDERS_NAMES_E_CHURCH;ORDERS_NAMES_E_FARM;ORDERS_NAMES_E_FOOTMAN;ORDERS_NAMES_A_RHONIN;ORDERS_NAMES_R_JANISSARY;ORDERS_NAMES_ORK;ORDERS_NAMES_R_SATRAP;ORDERS_NAMES_R_FOOTMAN;ORDERS_NAMES_R_SPEARMAN;ORDERS_NAMES_JINN;ORDERS_NAMES_DWARF;ORDERS_NAMES_TROLL;ORDERS_NAMES_A_HORSEARCHER;ORDERS_NAMES_R_HORSEARCHER;ORDERS_NAMES_R_CAVALRY;ORDERS_NAMES_A_HORSESAMURAI;ORDERS_NAMES_E_ARCHER;ORDERS_NAMES_R_ARCHER;ORDERS_NAMES_A_ARCHER;ORDERS_NAMES_A_SAMURAI;ORDERS_NAMES_E_MAGE;ORDERS_NAMES_R_MAGE;ORDERS_NAMES_A_MAGE;ORDERS_NAMES_E_OUTPOST;ORDERS_NAMES_E_HARBOR;ORDERS_NAMES_E_LUMBER;ORDERS_NAMES_E_MARKET;ORDERS_NAMES_E_CARAVAN;ORDERS_NAMES_R_CARAVAN;ORDERS_NAMES_GATE_WOOD;ORDERS_NAMES_GATE_STONE;ORDERS_NAMES_FIELD;ORDERS_NAMES_E_PEON;ORDERS_NAMES_R_PEON;ORDERS_NAMES_A_PEON;ORDERS_NAMES_NINJA;ORDERS_NAMES_MONK;ORDERS_NAMES_E_MACEMAN;ORDERS_NAMES_E_PRIEST;ORDERS_NAMES_A_PRIEST;ORDERS_NAMES_R_PRIEST;ORDERS_NAMES_CHARIOT;ORDERS_NAMES_E_LONGBOWMAN;ORDERS_NAMES_E_KNIGHT;ORDERS_NAMES_E_STABLE;ORDERS_NAMES_STOP;ORDERS_NAMES_E_STORAGE;ORDERS_NAMES_E_TAVERN;ORDERS_NAMES_E_WORKSHOP;ORDERS_NAMES_EMERGE;ORDERS_NAMES_E_GALLEON;ORDERS_NAMES_E_HULK;ORDERS_NAMES_E_XEBEC;ORDERS_NAMES_BRIDGE;ORDERS_NAMES_E_ACADEMY;ORDERS_NAMES_E_TOWER_STONE;ORDERS_NAMES_E_TOWER_STONE2;ORDERS_NAMES_TOWER_ROCKET;ORDERS_NAMES_E_TOWER_WOOD;ORDERS_NAMES_E_TOWER_WOOD2;ORDERS_NAMES_VIEW_HEROES;ORDERS_NAMES_VIEW_SPYS;ORDERS_NAMES_VIEW_ITEMS;ORDERS_NAMES_E_HOUSE;ORDERS_NAMES_E_PIKEMAN;ORDERS_NAMES_E_SPY;ORDERS_NAMES_CATAPULT;ORDERS_NAMES_H_CATAPULT;ORDERS_NAMES_TO_WTOWER2;ORDERS_NAMES_TO_STOWER;ORDERS_NAMES_TO_STOWER2_1;ORDERS_NAMES_TO_STOWER2_2;ORDERS_NAMES_TO_SWALL;ORDERS_NAMES_TO_SGATE;ORDERS_NAMES_TE_ARROW_1;ORDERS_NAMES_TE_PLATEARMOR;ORDERS_NAMES_TE_FIELDS;ORDERS_NAMES_TE_LIVESTOCK;ORDERS_NAMES_TE_FEUDALISM;ORDERS_NAMES_TE_ARCHITECTURE;ORDERS_NAMES_TE_LONGBOW;ORDERS_NAMES_RAISEDEAD;ORDERS_NAMES_SPELL_HEAL;ORDERS_NAMES_SPELL_SPAWNDRAGON;ORDERS_NAMES_SPELL_RAISEEXP;ORDERS_NAMES_SPELL_FLAMEBOLT;ORDERS_NAMES_SPELL_BLESS;ORDERS_NAMES_SPELL_FREEZE;ORDERS_NAMES_SPELL_WHIRLPOOL;ORDERS_NAMES_SPELL_TURNTOSTONE;ORDERS_NAMES_SPELL_LIGHTNING;ORDERS_NAMES_SPELL_FIRERAIN;ORDERS_NAMES_SPELL_SPAWNBAT;ORDERS_NAMES_SPELL_SPAWNSTONEGOLEM;ORDERS_NAMES_SPELL_SPAWNCARPET;ORDERS_NAMES_SPELL_SPAWNJIN;ORDERS_NAMES_SPELL_MAGICVISION;ORDERS_NAMES_SPELL_RAISEDEAD;ORDERS_NAMES_SPELL_BERSERK;ORDERS_NAMES_SPELL_HYPNOTIZE;ORDERS_NAMES_SPELL_CLOAK;ORDERS_NAMES_UNLOAD;ORDERS_NAMES_TRADE;ORDERS_NAMES_BUILD_ITEM;ORDERS_NAMES_TRADE1;ORDERS_NAMES_TRADE_SHIP;ORDERS_NAMES_DIE;ORDERS_NAMES_DEFAULT;ORDERS_NAMES_MINE;ORDERS_NAMES_DIG;ORDERS_NAMES_CHOP;ORDERS_NAMES_SPELL;ORDERS_NAMES_PREACH_CRUSADE;ORDERS_NAMES_COW;ORDERS_NAMES_TO_SHIP_LEVEL2;ORDERS_NAMES_TO_SHIP_LEVEL3;ORDERS_NAMES_TO_SHIP_LEVEL4;ORDERS_NAMES_TO_SHIP_LEVEL5;ORDERS_NAMES_TO_SHIP_LEVEL6;ORDERS_NAMES_TO_CONVERTRES;ORDERS_NAMES_HOLDFIRE;ORDERS_NAMES_FIREATWILL;ORDERS_NAMES_EXPLORE;ORDERS_NAMES_BALLISTA;ORDERS_NAMES_TE_HALBERD;ORDERS_NAMES_TE_GOLDPLUS;ORDERS_NAMES_TE_STONEPLUS;ORDERS_NAMES_TE_WOODPLUS;ORDERS_NAMES_TE_LEARNING;ORDERS_NAMES_TE_TEMPERIRON;ORDERS_NAMES_TE_CROSSBOW;ORDERS_NAMES_TE_SCALEARMOR;ORDERS_NAMES_TE_CHAINMAIL;ORDERS_NAMES_TE_ENGINEERING;ORDERS_NAMES_TE_CANNONTOWER;ORDERS_NAMES_TE_HEROISM;ORDERS_NAMES_TE_NOBILITY;ORDERS_NAMES_TE_HONOR;ORDERS_NAMES_TE_WARFARE;ORDERS_NAMES_TE_TACTICS;ORDERS_NAMES_TE_MERCENARIES;ORDERS_NAMES_TE_HEROESQUEST;ORDERS_NAMES_TE_FAME;ORDERS_NAMES_TE_SIEGETACTICS;ORDERS_NAMES_TE_BODYBUILDING;ORDERS_NAMES_TE_FANATICISM;ORDERS_NAMES_TE_CRUSADE;ORDERS_NAMES_TE_ESPIONAGE;ORDERS_NAMES_TE_INQUISITION;ORDERS_NAMES_TE_HEALING;ORDERS_NAMES_TE_MEDICINE;ORDERS_NAMES_TE_TRADEROUTES;ORDERS_NAMES_TE_MAPMAKING;ORDERS_NAMES_TE_USURY;ORDERS_NAMES_TE_GAMBLING;ORDERS_NAMES_TE_SUPPLYSTORAGE;ORDERS_NAMES_TE_BRIBERY;ORDERS_NAMES_TE_BUDDHISM;ORDERS_NAMES_TE_TRADETAXES;ORDERS_NAMES_TE_BAT;ORDERS_NAMES_TE_STONEGOLEM;ORDERS_NAMES_TE_INVISIBILITY;ORDERS_NAMES_TE_LIGHTNING;ORDERS_NAMES_TE_FREEZE;ORDERS_NAMES_TE_BLESS;ORDERS_NAMES_TAVERN_MERC;ORDERS_NAMES_TAVERN_HERO;ORDERS_NAMES_MARKET_ITEMS;ORDERS_NAMES_MARKET_SELL;ORDERS_NAMES_TE_LANDINGTACTICS;ORDERS_NAMES_TE_COWPOACHING;ORDERS_NAMES_TE_SLAVERY;ORDERS_NAMES_TE_RIDINGHORSES;ORDERS_NAMES_TE_JANISSARY;ORDERS_NAMES_TE_JIHAD;ORDERS_NAMES_TE_MAGICCARPET;ORDERS_NAMES_TE_JIN;ORDERS_NAMES_TE_WITCHCRAFTS;ORDERS_NAMES_TE_RAINOFFIRE;ORDERS_NAMES_TE_MAGICVISION;ORDERS_NAMES_TE_NECROMANCY;ORDERS_NAMES_GAMBLE;ORDERS_NAMES_TE_HORSEMANSHIP;ORDERS_NAMES_TE_SCIMITAR;ORDERS_NAMES_TE_OREFLOATATION;ORDERS_NAMES_TE_JEWELRY;ORDERS_NAMES_TE_GREATWALL;ORDERS_NAMES_TE_BUDHISM;ORDERS_NAMES_TE_IRRIGATION;ORDERS_NAMES_TE_ARMOREDCHARIOT;ORDERS_NAMES_TE_BUSHIDO;ORDERS_NAMES_TE_SUNTZUBOOK;ORDERS_NAMES_TE_MEDITATION;ORDERS_NAMES_TE_PHILOSOPHY;ORDERS_NAMES_TE_KUNGFU;ORDERS_NAMES_TE_NINJAS;ORDERS_NAMES_TE_MASTERY;ORDERS_NAMES_TE_TOURNAMENTS;ORDERS_NAMES_TE_BANKING;ORDERS_NAMES_TE_CHEMISTRY;ORDERS_NAMES_TE_GUNPOWDER;ORDERS_NAMES_TE_ROCKETARROW;ORDERS_NAMES_TE_SEAFOOD;ORDERS_NAMES_TE_CONCENTRATION;ORDERS_NAMES_TE_BERSERK;ORDERS_NAMES_TE_WHIRLPOOL;ORDERS_NAMES_TE_DRAGON;ORDERS_NAMES_TE_TURNTOSTONE;ORDERS_NAMES_TE_FLAMEBOLT;ORDERS_NAMES_TE_ARTOFRIDING;ORDERS_NAMES_BUILD_ORC;ORDERS_NAMES_BUILD_DWARF;ORDERS_NAMES_BUILD_SKELETON;ORDERS_NAMES_BUILD_GHOST;ORDERS_NAMES_VIEW_QUESTS;ORDERS_NAMES_R_JIHAD_WARRIOR;ORDERS_NAMES_E_COMMON;ORDERS_NAMES_E_RARE;ORDERS_NAMES_E_GUILDS;ORDERS_NAMES_R_COMMON;ORDERS_NAMES_R_RARE;ORDERS_NAMES_R_GUILDS;ORDERS_NAMES_A_COMMON;ORDERS_NAMES_A_RARE;ORDERS_NAMES_A_GUILDS;ORDERS_NAMES_TR_TRADE;ORDERS_NAMES_TR_CANCEL;ORDERS_NAMES_TR_AMOUNT;ORDERS_NAMES_TR_SRCOBJ;ORDERS_NAMES_TR_SRCRES;ORDERS_NAMES_TR_DSTOBJ;ORDERS_NAMES_TR_DSTRES;ORDERS_NAMES_GM_RES;ORDERS_NAMES_GM_AMOUNT;ORDERS_NAMES_GM_PROP;ORDERS_NAMES_GM_GAMBLE;ORDERS_NAMES_GM_CANCEL;ORDERS_NAMES_BU_ITEM;ORDERS_NAMES_BU_AMOUNT;ORDERS_NAMES_BU_CANCEL;ORDERS_NAMES_BU_BUILD;ORDERS_NAMES_TR1_TRADE;ORDERS_NAMES_TR1_CANCEL;ORDERS_NAMES_TR1_AMOUNT1;ORDERS_NAMES_TR1_AMOUNT2;ORDERS_NAMES_TR1_SRCRES;ORDERS_NAMES_TR1_DSTRES;ORDERS_ADD_TE_SLAVERY;ORDERS_ADD_TE_STONEGOLEM;ORDERS_ADD_TE_FREEZE;ORDERS_ADD_TE_LIGHTNING;ORDERS_ADD_TE_INVISIBILITY;ORDERS_ADD_TE_BAT;ORDERS_ADD_TE_CRUSADE;ORDERS_ADD_TE_BLESS;ORDERS_ADD_TE_LONGBOW;ORDERS_ADD_TE_PLATEARMOR;ORDERS_ADD_TE_FIELDS;ORDERS_ADD_TE_LIVESTOCK;ORDERS_ADD_TE_FEUDALISM;ORDERS_ADD_TE_ARCHITECTURE;ORDERS_ADD_TE_LONGBOWMAN;ORDERS_ADD_TE_HALBERD;ORDERS_ADD_TE_GOLDPLUS;ORDERS_ADD_TE_STONEPLUS;ORDERS_ADD_TE_WOODPLUS;ORDERS_ADD_TE_LEARNING;ORDERS_ADD_TE_TEMPERIRON;ORDERS_ADD_TE_CROSSBOW;ORDERS_ADD_TE_SCALEARMOR;ORDERS_ADD_TE_CHAINMAIL;ORDERS_ADD_TE_ENGINEERING;ORDERS_ADD_TE_CANNONTOWER;ORDERS_ADD_TE_HEROISM;ORDERS_ADD_TE_NOBILITY;ORDERS_ADD_TE_HONOR;ORDERS_ADD_TE_WARFARE;ORDERS_ADD_TE_TACTICS;ORDERS_ADD_TE_MERCENARIES;ORDERS_ADD_TE_HEROESQUEST;ORDERS_ADD_TE_FAME;ORDERS_ADD_TE_SIEGETACTICS;ORDERS_ADD_TE_BODYBUILDING;ORDERS_ADD_TE_FANATICISM;ORDERS_ADD_TE_ESPIONAGE;ORDERS_ADD_TE_INQUISITION;ORDERS_ADD_TE_HEALING;ORDERS_ADD_TE_MEDICINE;ORDERS_ADD_TE_TRADETOUTES;ORDERS_ADD_TE_MAPMAKING;ORDERS_ADD_TE_PIRACY;ORDERS_ADD_TE_USURY;ORDERS_ADD_TE_SUPPLYSTORAGE;ORDERS_ADD_TE_BRIBERY;ORDERS_ADD_TE_BUDDHISM;ORDERS_ADD_TE_TRADETAXES;ORDERS_ADD_TE_LANDINGTACTICS;ORDERS_ADD_TE_BOARDINGRAM;ORDERS_ADD_TE_COWPOACHING;ORDERS_ADD_TE_RIDINGHORSES;ORDERS_ADD_TE_JANISSARY;ORDERS_ADD_TE_JIHAD;ORDERS_ADD_TE_MAGICCARPET;ORDERS_ADD_TE_JIN;ORDERS_ADD_TE_WITCHCRAFTS;ORDERS_ADD_TE_MAGICVISION;ORDERS_ADD_TE_NECROMANCY;ORDERS_ADD_TE_HORSEMANSHIP;ORDERS_ADD_TE_SCIMITAR;ORDERS_ADD_TE_OREFLOATATION;ORDERS_ADD_TE_JEWELRY;ORDERS_ADD_TE_GREATWALL;ORDERS_ADD_TE_BUDHISM;ORDERS_ADD_TE_IRRIGATION;ORDERS_ADD_TE_ARMOREDCHARIOT;ORDERS_ADD_TE_BUSHIDO;ORDERS_ADD_TE_SUNTZUBOOK;ORDERS_ADD_TE_MEDITATION;ORDERS_ADD_TE_PHILOSOPHY;ORDERS_ADD_TE_KUNGFU;ORDERS_ADD_TE_NINJAS;ORDERS_ADD_TE_MASTERY;ORDERS_ADD_TE_TOURNAMENTS;ORDERS_ADD_TE_BANKING;ORDERS_ADD_TE_CHEMISTRY;ORDERS_ADD_TE_GUNPOWDER;ORDERS_ADD_TE_ROCKETARROW;ORDERS_ADD_TE_SEAFOOD;ORDERS_ADD_TE_CONCENTRATION;ORDERS_ADD_TE_BERSERK;ORDERS_ADD_TE_WHIRLPOOL;ORDERS_ADD_TE_DRAGON;ORDERS_ADD_TE_TURNTOSTONE;ORDERS_ADD_TE_FLAMEBOLT;ORDERS_ADD_TE_ARTOFRIDING;ORDERS_ADD_TE_TRADEROUTES;ORDERS_ADD_TE_GAMBLE;SPELL_NAMES_SPELL_FIRERAIN;SPELL_NAMES_SPELL_LIGHTNING;SPELL_NAMES_SPELL_HEAL;SPELL_NAMES_SPELL_SPAWNCARPET;SPELL_NAMES_SPELL_SPAWNBAT;SPELL_NAMES_SPELL_BLESS;SPELL_NAMES_SPELL_FREEZE;SPELL_NAMES_SPELL_BERSERK;SPELL_NAMES_SPELL_SOULBIND;SPELL_NAMES_SPELL_CLOAK;SPELL_NAMES_SPELL_SPAWNSTONEGOLEM;SPELL_NAMES_SPELL_MAGICVISION;SPELL_NAMES_SPELL_RAISEDEAD;SPELL_NAMES_SPELL_TURNTOSTONE;SPELL_NAMES_SPELL_WHIRLPOOL;SPELL_NAMES_SPELL_SPAWNDRAGON;SPELL_NAMES_SPELL_FLAMEBOLT;SPELL_NAMES_SPELL_RAISEEXP;SPELL_NAMES_SPELL_SPAWNJIN;SPELL_NAMES_SPELL_CURSE;SPELL_NAMES_SPELL_HYPNOTIZE;IMAGES_FLAG_CAPTURE;IMAGES_ITEM_BOOK1;IMAGES_ITEM_BOOK2;IMAGES_ITEM_BOOK3;IMAGES_ITEM_BOW1;IMAGES_ITEM_BOW2;IMAGES_ITEM_BOW3;IMAGES_ITEM_FLAG;IMAGES_ITEM_FOOD;IMAGES_ITEM_GOLD;IMAGES_ITEM_IRON;IMAGES_ITEM_POTION1;IMAGES_ITEM_POTION2;IMAGES_ITEM_POTION3;IMAGES_ITEM_POTION4;IMAGES_ITEM_POTION5;IMAGES_ITEM_POTION6;IMAGES_ITEM_POTION7;IMAGES_ITEM_POTION8;IMAGES_ITEM_SCROLL1;IMAGES_ITEM_SHIELD1;IMAGES_ITEM_SHIELD2;IMAGES_ITEM_SHIELD3;IMAGES_ITEM_STONE;IMAGES_ITEM_SWORD;IMAGES_ITEM_SWORD1;IMAGES_ITEM_SWORD2;IMAGES_ITEM_SWORD3;IMAGES_ITEM_WOOD;TZAREDIT_S1;TZAREDIT_S2;HELP_???;HELP_SP_CAMPAIGN;HELP_SP_CUSTOM_MAP;HELP_SP_RANDOM_MAP;HELP_SP_LOAD_GAME;HELP_SP_BACK;HELP_CN_CAMPAIGNS;HELP_CN_CAMPAIGN_DESCRIPTION;HELP_CN_ENTRY_MISSONS;HELP_CN_ENTRY_MISSONS_DESCRIPTION;HELP_CN_BACK;HELP_CN_PLAY;HELP_CM_MAPS;HELP_CM_MAP_DECRIPTION;HELP_CM_PLAY;HELP_CM_BACK;HELP_RM_PLAYER_COLOR;HELP_RM_PLAYER_NAME;HELP_RM_PLAYER_CIVILIVIZATION;HELP_RM_PLAYER_TEAM;HELP_RM_NUMBER_OF_PLAYERS;HELP_RM_POP_LIMIT;HELP_RM_GAME_TYPE;HELP_RM_DIFFICULTY_LEVEL;HELP_RM_VICTORY_CONDITION;HELP_RM_STARTING_RESOURCES;HELP_RM_NO_FOG;HELP_RM_EXPLORE;HELP_RM_MAP_SIZE;HELP_RM_MAP_TYPE;HELP_RM_TERRAIN;HELP_RM_MAP_RESOURCES;HELP_RM_GUARDED_TOWN;HELP_RM_AMNIMALS;HELP_RM_MAGIC_ITEMS;HELP_RM_CLIFFS;HELP_RM_GATEWAYS;HELP_RM_PLAY;HELP_RM_BACK;HELP_RM_VALUE;HELP_LG_SELECT_GAME;HELP_LG_CHOOSE;HELP_LG_LOAD;HELP_LG_CANCEL;HELP_LG_DELETE;HELP_MP_PLAYER_NAME;HELP_MP_GAME_NAME;HELP_MP_IPX;HELP_MP_TCP/IP;HELP_MP_IP_ADDRESS;HELP_MP_CREATE;HELP_MP_SEARCH;HELP_MP_JOIN;HELP_MP_BACK;HELP_MP_GAMES_FOUND;HELP_MP_GAME_INFORMATION;HELP_MP_BETA;HELP_MPC_CHECK_BUTTON;HELP_MPC_PLAYER_COLOR;HELP_MPC_PLAYER_NAME;HELP_MPC_PLAYER_CIVILIVIZATION;HELP_MPC_PLAYER_TEAM;HELP_MPC_CHAT_BOX;HELP_MPC_CHAT_BOX_WRITE;HELP_MPC_SETTINGS;HELP_MPC_MAP;HELP_MPC_DISCONNECT;HELP_MPC_PLAY;HELP_MPS_RANDOM_MAP;HELP_MPS_CUSTOM_MAP;HELP_MPS_POP_LIMIT;HELP_MPS_GAME_TYPE;HELP_MPS_DIFFICULTY_LEVEL;HELP_MPS_VICTORY_CONDITION;HELP_MPS_STARTING_RESOURCES;HELP_MPS_MAP_SIZE;HELP_MPS_MAP_TYPE;HELP_MPS_TERRAIN;HELP_MPS_MAP_RESOURCES;HELP_MPS_TOWERS;HELP_MPS_AMNIMALS;HELP_MPS_MAGIC_ITEMS;HELP_MPS_CLIFFS;HELP_MPS_GATEWAYS;HELP_MPS_DAY_NIGTH;HELP_MPS_WEATHER;HELP_MPS_NO_FOG;HELP_MPS_EXPLORE;HELP_MPS_ACCEPT;HELP_MPS_CANCEL;HELP_MPS_MAPS_LIST;HELP_MPS_MAP_DECRIPTION;HELP_MPS_USE_MAP_SETTINGS;HELP_MPS_VALUE;HELP_SG_SAVE_GAME;HELP_SG_NEW;HELP_SG_SAVE;HELP_SG_DELETE;HELP_SG_CANCEL;HELP_SG_RESTART;HELP_SG_QUIT;HELP_SG_LIST;HELP_CH_BOX;HELP_CH_ALLIES;HELP_CH_ENEMIES;HELP_CH_ALL;HELP_CH_CUSTOM;HELP_CH_SELECT_PLAYER;HELP_CH_NAMES;HELP_CH_COLORS;HELP_D_ALLIES;HELP_D_ENEMIES;HELP_D_NEUTRAL;HELP_D_SHARED VISION;HELP_D_SHARED RESOURCES;HELP_D_SHARED UNIT CONTROL;HELP_D_SHARED_VICTORY;HELP_D_ACCEPT;HELP_D_CANCEL;HELP_D_TRIBUTE;HELP_T_AMOUNT;HELP_T_SEND;HELP_T_CANCEL;HELP_CM1_PLAYER_COLOR;HELP_CM1_PLAYER_NAME;HELP_CM1_PLAYER_CIVILIVIZATION;HELP_CM1_PLAYER_TEAM;HELP_CM1_NUMBER_OF_PLAYERS;HELP_CM1_POP_LIMIT;HELP_CM1_GAME_TYPE;HELP_CM1_DIFFICULTY_LEVEL;HELP_CM1_VICTORY_CONDITION;HELP_CM1_STARTING_RESOURCES;HELP_CM1_NO_FOG;HELP_CM1_EXPLORE;HELP_CM1_USE_MAP_SETTINGS;HELP_CM1_MAP_DECRIPTION;HELP_CM1_VALUE;HELP_CM1_BACK;HELP_CM1_PLAY;HELP_O_SOUND_VOLUME;HELP_O_CHK_VOLUME;HELP_O_UNIT_SPEECH;HELP_O_BUILDING_SOUND;HELP_O_NATURE_SOUND;HELP_O_GAME_SPEED;HELP_O_SCROLL_SPEED;HELP_O_PATH_DEPTH;HELP_O_DAY_NIGTH;HELP_O_WEATHER;HELP_O_MUSIC_VOLUME;HELP_O_CHK_MVOLUME;HELP_O_CD;HELP_O_H_CURS;HELP_O_MENU;HELP_O_OK;HELP_MPS_AI_ASSIST;HELP_MPS_SH_RES;HELP_MPS_TOWERS_POP;VM_LOC_SENT;VM_BOOKMARK_SET;VM_TIME_LIMIT_HIT;VM_TIME_LIMIT_REACHED;VM_SCORE_LIMIT_HIT;VM_SCORE_LIMIT_REACHED;VM_SAVING;VM_DISCON1;VM_DISCON2;TZAREDIT_DELETE;TZAREDIT_ANY;TZAREDIT_MILITARY_UNITS;TZAREDIT_DELAY;TZAREDIT_REMOVE;OBJECTS_MESSIAH;ERR_NOMAPS;ERR_FIRST;ERR_EXPLASYNC;ERR_OBJASYNC;ERR_BADKINGDOMSCRIPT;ORDERS_NAMES_TE_INVINSIBILITY;ORDERS_NAMES_TE_IRONPLUS;ORDERS_NAMES_TO_WALL_STONE;ORDERS_NAMES_TO_GATE_STONE;ORDERS_NAMES_VIEW_AI;ORDERS_NAMES_SET_AI_NONE;ORDERS_NAMES_SET_AI_FULL;ORDERS_NAMES_SET_AI_WAR;ORDERS_NAMES_SET_AI_ECO;CHOOSEAI_TITLE;CHOOSEAI_OK;CHOOSEAI_CANCEL;CHOOSEAI_DEFAULT;ENDGAMEDLG_HIDE;MISC_SELLITEM3;MISC_HERO3;MISC_KINGDOM3;MISC_QUICKSAVE3;MISC_AUTOSAVE3;MISC_NATURE3;MISC_RESCUE3;MISC_BUY3;MISC_PREVPAGE3;MISC_NEXTPAGE3;MISC_VIEW3;MISC_REQ3;MISC_INF3;MISC_HIRE3;MISC_RETLOAN3;MISC_GETLOAN3;MISC_WATOBJ3;MISC_RES3;MISC_TREES3;MISC_UNK3;MISC_RND3;MISC_UNKAUTHOR3;MISC_HEALTH3;MISC_EXP3;MISC_MANNA3;MISC_DEFENCE3;MISC_ATTACK3;MISC_SWORD3;MISC_SHIELD3;MISC_BOW3;MSG_GAME_CONNECT;MSG_GAME_SPEED_TURBO;MSG_AIFULL3;MSG_AIECO3;MSG_AIWAR3;MSG_AIOFF3;MSG_NET_JOIN_HEADOFF;MSG_GOLDREQ;MSG_GAME_SPEED2;ERR3_ERR_CONNECT;ERR3_RANKSLOST;ORDERS_NAMES_DESTROY;ORDERS_NAMES_ONLINEHELP;ORDERS_NAMES_NEXTIDLE;ORDERS_NAMES_BOOK_ITM;ORDERS_NAMES_POTION_ITM;ORDERS_NAMES_POWER_ITM;TZAREDIT_ANY_MAJOR_OBJECTS;DEFMSG_CAPTUREOWN;MP_SETUPMAP_SH_RES;MP_SETUPMAP_TOWERS_POP;VM_SENDRESULTS;VM_SENDRESULTS2;SYSTEM_LANGUAGE;DOWNLOADING_GRAPHICS;WEBAUDIO;CONNECTION_ERROR;DOWNLOAD_ALL;MAPEDITOR;TEAM;COLOUR;MAXHEALTH;PLAYING;WAITING;ADD;WATER;AUTOFULLSCREEN;FULLSCREEN;UP;DOWN;LANGUAGE;INITIAL_PEASANTS;ADD_AI;RACE;DATE;FREE_POP;ABOUT;PLAYED_TIME;ZOOMSPEED".split(";"),
Ja,Q,Ta,Sb={},Uc="ts1.mp3 ts2.mp3 ts3.mp3 ts4.mp3 ts5.mp3 ts6.mp3 ts7.mp3 ts8.mp3 ts9.mp3 ts10.mp3 sr1.mp3 sr2.mp3 sr3.mp3 sr4.mp3 sr5.mp3 sr6.mp3 sr7.mp3 sr8.mp3 sr9.mp3 sr10.mp3 o1.mp3 o2.mp3 o3.mp3 o4.mp3 o5.mp3 o6.mp3 o7.mp3 o8.mp3 o9.mp3 o10.mp3 INTRO.mp3 OUTRO.mp3 WIN1.mp3 WIN2.mp3 ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.WAV CAMEL2.WAV CARPETCMD.WAV CATAPULT.WAV CBEAR1.WAV CBEAR2.WAV CBEAR3.WAV CBEAR4.WAV COW1.WAV COW2.WAV COW3.WAV COW4.WAV DRAGON1.WAV DRAGON2.WAV FLY1.WAV FLY2.WAV FOOT1.WAV FOOT2.WAV FOOT3.WAV FOOT4.WAV FOOT5.WAV FOOT6.WAV FOOT7.WAV FOOT8.WAV GHOST1CMD.WAV GHOST2CMD.WAV GHOST3CMD.WAV GOLEMCMD.WAV H%20CMD%201.WAV H%20CMD%202.WAV H%20CMD%203.WAV H%20CMD%204.WAV HEAVY%20CATAPULT.WAV INF%20CMD%201.WAV INF%20CMD%202.WAV INF%20CMD%203.WAV INF%20CMD%204.WAV INF%20CMD%205.WAV MESSIAHCMD.WAV ORC%20CMD%201.WAV ORC%20CMD%202.WAV ORC%20CMD%203.WAV ORC%20CMD%204.WAV ORC%20CMD%205.WAV ORC%20CMD%206.WAV SHIP%20CMD%201.WAV SHIP%20CMD%202.WAV SKELETON1.WAV SKELETON2.WAV SHIP%20SELECT.WAV E_BARRACK1.WAV E_BLACKSMITH1.WAV FIRE1.WAV FIRE2.WAV FIRE3.WAV FIRE4.WAV FIRE5.WAV ROCKET.WAV".split(" "),
de,yb,zb,bc=function(){if(!Ja){n.prototype.loadBuffer=function(a,b){var c=this;ac(t.cdn+a,function(e){c.context.decodeAudioData(e).then(function(c){c&&x(c,a,b)})})};for(var d=0,a=Uc.length;d<a;d++){var e=Uc[d];Sb[e.split(".")[0].toLowerCase()]=e}C("");"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,Ja=new AudioContext,yb=Ja.createGain(),zb=Ja.createGain(),de=new n(Ja,void 0,x),C("Sound: OK"),yb.gain.value=parseInt(localStorage.musicRange)/100,
zb.gain.value=parseInt(localStorage.soundRange)/100,yb.connect(Ja.destination),zb.connect(Ja.destination));Q=function(){if(!q.editor){Q.id++;k("musicSelect")&&(localStorage.favMusic=k("musicSelect").mversion.value);var a=Q.list[localStorage.favMusic];a&&Ta(a[~~(a.length*Math.random())],0,0,void 0,1,0,Q.id)}};Q.reset=function(){Q.stop();Q()};Q.stop=function(){Q.active&&(Q.active.stop(),clearTimeout(Q.intv))};Q.id=0;Q.list={originalMusic1:"o1 o2 o3 o4 o5 o6 o7 o8 o9 o10 outro".split(" "),originalMusic:"ts1 ts2 ts3 ts4 ts5 ts6 ts7 ts8 ts9 ts10".split(" "),
sharpRain:"sr1 sr2 sr3 sr4 sr5 sr6 sr7 sr8 sr9 sr10".split(" ")};Ta=function(a,b,e,d,m,g,k){"string"!==typeof a&&(a=Uc[a].split(".")[0].toLowerCase());var c=a;if((a=Sb[a])&&"loading"!==a&&!q.canceled){var f=-M+(window.innerWidth-t.mx)/2,h=-N+window.innerHeight/2;if(a.duration){if(q.started)if(64<q.now()-a.lastPlayed||!a.lastPlayed)a.lastPlayed=q.now();else return;if(!(!m&&"attack"!=c&&g&&600<Date.now()-g)){if(b){b=-f+32*b;e=-h+32*e;h=K;if(b*b+e*e>Math.pow(2E3,2))return!1;b/=80;e/=80;h/=8}else h=e=
b=0;void 0!==d&&d!==t.kingdom||q.mute||(d=Ja.createBufferSource(),d.buffer=a,m?(d.connect(yb),Q.active=d,Q.intv=setTimeout(Q,Math.floor(1E3*a.duration)+1E3)):(a=Ja.createPanner(),a.panningModel="HRTF",a.setPosition(b,e,h),d.connect(a),a.connect(zb)),d.start(0))}}else Sb[c]="loading",m={x:b,y:e,k:d,music:m,date:Date.now(),mid:k},de.loadBuffer(a,m)}}}},Fb,ee=function(){return Date.now()-Gb+25*r.gcycle()},bb=function(d){if(!(d&&q.online||bb.bySystem&&d))if(0===q.paused){q.paused=1;void 0!=Fb&&clearInterval(Fb);
var a=q.now();q.pausedTime+=Date.now();d?$a("",l.VIEWMSG_PAUSE,0,l.GENERAL_CLOSE):bb.bySystem=1;q.now=function(){return a}}else q.pausedTime-=Date.now(),q.paused=0,bb.bySystem=0,d&&k("alert")&&A("alert"),Fb=setInterval(Ka,Ka.speed),q.now=ee};bb.bySystem=0;bb.fast=!0;var fe=function(d){d/=1E3;var a=~~(d/60)%60,e=~~(d/3600);d=~~(d%60);1===(d+"").length&&(d="0"+d);0!=e?(e+=":",10>a&&(a="0"+a)):e="";return e+a+":"+d},Gb=0,ge=0,rf=function(){var d=this.value/100;C(d);Ka.speed=25/(4*d+1);clearInterval(Fb);
Fb=setInterval(Ka,Ka.speed)},Ka=function(){if(!q.editor){q.cycle=r.gcycle();q.now();Gb&&(ge+=Date.now()-Gb-Ka.speed);Gb=Date.now();var d=Date.now();r.movtablexe();q.cycle=r.gcycle();0===q.cycle%40&&he();Vc+=Date.now()-d;0!==q.cycle%40||wa||(k("topinfo").innerHTML="<span>CPU:"+(Vc/10).toFixed(2)+"%</span> <span>"+~~(Wc/Xc+.5)+"FPS</span> <span>"+fe(q.now())+"</span>",Wc=Xc=Vc=0);ge>=Ka.speed&&Ka()}};Ka.speed=25;var Vc=0,Xc=0,Wc=0,ie=-1,La,cc,dc,lb,ec,ma,Yc,mb,xa,Zc,je,S,ke,le,me,ne,oe,pe,Hb,nb=function(){k("mgitem").style.backgroundPositionY=
-48*r.mwicon()+"px";k("mgamount").innerHTML=r.amount()},fc=function(){if(!fc.setup){fc.setup=!0;if(wa){k("content").innerHTML='<div id="mapeditorinfo">\n    <div id="sButtons">\n    <button id="selectUnits">'+l.SELVIEW_UNITS+'</button>\n    <button id="selectBuilds">'+l.BUILDINGS+'</button>\n    <button id="selectItems">'+l.ITEMS+'</button>\n    <button id="selectNature">'+l.MISC_NATURE3+'</button>\n    </div>\n    <div id="mapeditorinfoUnits"><div id="EDshowunits"></div></div>\n    <div id="mapeditorinfoBuilds" style="display:none"><div id="EDshowbuilds"></div></div>\n    <div id="mapeditorinfoItems" style="display:none"></div>\n    <div id="mapeditorinfoNature" style="display:none"></div>\n    </div>\n    <div id="mapeditorinfotop">\n    <button id="menueditor">'+
l.GAME_SCR_MENU+'</button>\n    <button id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>\n    <button id="rotatebutton"></button>\n    <button id="mapProps">'+l.MENU_OPTI+'</button>\n    <button id="mapRules">'+l.rules+'</button>\n    <span>Brush size: </span><input type="number" min="1" max="256" value="6" id="brushSize"/>\n    <span>Active kingdom</span>\n    <select id="selectKingdom">\n    </select>\n    </div>\n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:99"></div>\n    ';
var d=function(a){D(["mapeditorinfoUnits","mapeditorinfoBuilds","mapeditorinfoItems","mapeditorinfoNature"]);L(a)};k("selectUnits").onclick=function(){return d("mapeditorinfoUnits")};k("selectBuilds").onclick=function(){return d("mapeditorinfoBuilds")};k("selectItems").onclick=function(){return d("mapeditorinfoItems")};k("selectNature").onclick=function(){return d("mapeditorinfoNature")};for(var a=function(){var a=this.race0,c=this.type0;C(a,c);for(var e=0,d=r.nfolen();e<d;e++){var m=r.unitSearchValid(a,
c,e);m&&C(l[ha[m]].toUpperCase())}},e=0;4>e;e++){var c=document.createElement("button");c.innerHTML=ua[e];c.race0=e;c.type0=0;c.cont0=k("EDshowunits");c.onclick=a;k("mapeditorinfoUnits").appendChild(c)}for(e=0;4>e;e++)c=document.createElement("button"),c.innerHTML=ua[e],c.race0=e,c.type0=1,c.cont0=k("EDshowbuilds"),c.onclick=a,k("mapeditorinfoBuilds").appendChild(c);k("selectKingdom").onchange;k("mapProps").onclick=function(){Da();if(!k("mapPropsWindow")){var a=document.createElement("div");a.id=
"mapPropsWindow";document.body.appendChild(a);var c=document.createElement("div");a.appendChild(c);a=document.createElement("table");c.appendChild(a);a=document.createElement("div");a.innerHTML=l.mapName;var e=document.createElement("input");e.value=q.name||l.strcusMap;e.id="mapName";e.type="text";c.appendChild(a);c.appendChild(e);a=document.createElement("div");a.innerHTML=l.description;e=document.createElement("textarea");e.type="text";e.value=q.description||"";e.id="mapDescription";c.appendChild(a);
c.appendChild(e);a=document.createElement("div");a.innerHTML=l.author;e=document.createElement("input");e.id="mapAuthor";e.value=q.author||"";e.type="text";c.appendChild(a);c.appendChild(e);c.appendChild(document.createElement("p"));a=document.createElement("button");a.onclick=qe;a.innerHTML=l.GENERAL_CLOSE;c.appendChild(a)}L("mapPropsWindow");c=k("mapPropsWindow").getElementsByTagName("table")[0];c.id="edpltbl";c.innerHTML="";c.innerHTML+='<tr style="text-transform:uppercase;"><td>'+l.COLOUR+"</td><td>"+
l.MP_SEARCH_T_PL_NAME+"</td><td>"+l.VIEWMSG_GOLD+"</td><td>"+l.VIEWMSG_WOOD+"</td><td>"+l.VIEWMSG_FOOD+"</td><td>"+l.VIEWMSG_STONE+"</td><td>"+l.MP_SETUPMAP_T_COMP+"</td><td>"+l.TEAM+"</td></tr>";a=1;for(e=r.nkingdom();a<e;a++)c.innerHTML+='\n<tr><td><input type="color"/></td><td><input type="text"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><label class="container">\n  <input type="checkbox">\n  <span class="checkmark"></span>\n</label></td><td><input type="number" min="0"></td></tr>';
c.innerHTML+="<tr><td><button id='editorAdd'>+</button></td></tr>";k("editorAdd").onclick=Jf;r.editorKingdoms()};k("mapRules").onclick=function(){k("mapRulesWindow").style.display="block";Da();if(""==k("mapRulesWindow").innerHTML){var a=document.createElement("div");a.innerHTML='\n<div id="mapEvent">\n<h4>'+l.events+'</h4>\n<select id="eventOptions" style="display:none">\n<option value="objAction">'+l.objAction+'</option>\n<option value="objZone">'+l.objZone+'</option>\n</select>\n<div id="eventScreen">\n</div>\n<div id="eventLayout">\n</div>\n<button id="addEvent">+</button>\n</div>\n<div id="mapActions">\n<h4>'+
l.actions+'</h4>\n<select id="actionOptions" style="display:none">\n<option value="objOrder">'+l.objOrder+'</option>\n</select>\n<div id="actionScreen">\n</div>\n<div id="actionLayout">\n</div>\n<button id="addAction">+</button>\n</div>\n<h4>'+l.rules+"</h4>\n";var c=document.createElement("div");c.id="rulist";a.appendChild(c);c=document.createElement("button");c.onclick=Kf;c.innerHTML="+";a.appendChild(c);c.id="addRule";a.appendChild(document.createElement("p"));c=document.createElement("button");
c.onclick=qe;c.innerHTML=l.GENERAL_CLOSE;a.appendChild(c);k("mapRulesWindow").appendChild(a);k("addEvent").onclick=Lf;k("addAction").onclick=Mf;k("eventOptions").onchange=function(){var a=re[this.value];J.div=a.id;L(J.div);J.active.name=this.value;a.func&&a.func();a=k("eventScreen").getElementsByTagName("button");for(var b=!1,c=0,e=a.length;c<e;c++){var d=a[c];if(d.sdiv)if("none"==d.style.display)d.sdiv.style.display="none";else{if(!b)d.onclick();b=!0}}gc(da.active,"eventLayout")};k("actionOptions").onchange=
function(){ba.active.name=this.value;gc(da.active,"actionLayout")};a=document.createElement("div");a.id="edobjAction";var e=document.createElement("select");e.innerHTML='\n<option value="attack">'+l.MISC_ATTACK3+'</option>\n<option value="destroy">'+l.destroy+'</option>\n<option value="moving">'+l.moving+'</option>\n<option value="capture">'+l.capture+"</option>\n";e.value="attack";e.id="selectionEvents";e.onchange=Nf;var d=document.createElement("section"),m=document.createElement("section"),g=document.createElement("section"),
n=document.createElement("section"),q=document.createElement("section");c=document.createElement("button");c.innerHTML=l.ADD;c.onclick=hc;var r=document.createElement("div");r.className="unitList";r.id="zoneList";g.appendChild(c);g.appendChild(r);r=document.createElement("div");r.className="unitList";r.id="unitListDiv";r.spType=J;c=document.createElement("button");c.innerHTML=l.ADD;c.onclick=function(){qa(this)};c.button=r;c.style.margin="10px";d.appendChild(c);c=document.createElement("button");
c.innerHTML=l.defined;c.onclick=ia;c.sdiv=d;a.appendChild(c);c.onclick();c=document.createElement("button");c.innerHTML=l.undefined;c.onclick=ia;c.sdiv=m;a.appendChild(c);d.appendChild(r);a.appendChild(d);a.appendChild(m);a.appendChild(document.createElement("p"));a.appendChild(e);a.appendChild(document.createElement("p"));r=document.createElement("div");r.className="unitList";r.id="unitListDiv2";r.spType=J;c=document.createElement("button");c.innerHTML=l.ADD;c.onclick=function(){qa(this)};c.button=
r;c.style.margin="10px";n.appendChild(c);c=document.createElement("button");c.innerHTML=l.defined;c.onclick=ia;c.sdiv=n;c.id="byButton1";a.appendChild(c);c=document.createElement("button");c.innerHTML=l.undefined;c.onclick=ia;c.id="byButton2";c.sdiv=q;a.appendChild(c);n.appendChild(r);c=document.createElement("button");c.innerHTML=l.zone;c.onclick=ia;c.sdiv=g;c.id="eventZone";c.style.display="none";a.appendChild(c);a.appendChild(g);a.appendChild(n);a.appendChild(q);k("eventScreen").appendChild(a);
A("mapEvent");A("mapActions");a=document.createElement("div");a.id="edobjOrder";e=document.createElement("select");e.innerHTML='\n<option value="move">'+l.move+'</option>\n<option value="attack">'+l.MISC_ATTACK3+"</option>\n";e.value="move";e.id="selectionActions";e.onchange=Of;d=document.createElement("section");m=document.createElement("section");n=document.createElement("section");q=document.createElement("section");r=document.createElement("div");r.className="unitList";r.id="unitListDivAction";
r.spType=ba;c=document.createElement("button");c.innerHTML=l.ADD;c.onclick=function(){qa(this)};c.button=r;c.style.margin="10px";d.appendChild(c);c=document.createElement("button");c.innerHTML=l.defined;c.onclick=ia;c.sdiv=d;a.appendChild(c);c=document.createElement("button");c.innerHTML=l.undefined;c.onclick=ia;c.sdiv=m;a.appendChild(c);d.appendChild(r);a.appendChild(d);a.appendChild(m);c.onclick();a.appendChild(document.createElement("p"));a.appendChild(e);a.appendChild(document.createElement("p"));
r=document.createElement("div");r.className="unitList";r.id="unitListDivAction2";r.spType=ba;c=document.createElement("button");c.innerHTML=l.ADD;c.onclick=function(){qa(this)};c.button=r;c.style.margin="10px";n.appendChild(c);c=document.createElement("button");c.innerHTML=l.defined;c.onclick=ia;c.sdiv=n;c.id="toButton1";a.appendChild(c);c=document.createElement("button");c.innerHTML=l.undefined;c.onclick=ia;c.id="toButton2";c.sdiv=q;a.appendChild(c);n.appendChild(r);a.appendChild(n);a.appendChild(q);
c.onclick();k("actionScreen").appendChild(a);A("mapEvent");A("mapActions")}};k("menueditor").onclick=H;La=k("minimap")}else{k("content").innerHTML='<ul id="msgs1"></ul>\n    <div id="clicks" style="display:none;margin-top:0;margin-left:151px"></div>\n    \n    <div id="playersinfo"></div>\n    <div id="resources" style="display:block">\n    <div id="gold"></div>\n    <div id="wood"></div>\n    <div id="food"></div>\n    <div id="stone"></div>\n    <div id="pop"></div>\n    <div id="temperature"></div>\n    </div>\n    <div id="enterwindow" class="displaynone">\n    <h2 id="sendMessageH2">'+
l.CHAT_T_CHAT+'</h2>\n    <input id="msginputGame" />\n    </div>\n    \n    <div id="statButton"></div>\n    <div id="topinfo"></div>\n    <div id="bottominfo"></div>\n    \n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:99"></div>\n\n    <div id="menu" style="display:block">\n    <button id="gameMenu">'+l.GAME_SCR_MENU+'</button>\n    <div style="width:151px;height:calc(100% - 741px);top:645px;background:url(nehhon/menurepeat.gif) repeat" id="kingdomcolor"></div>\n    <div id="daynighticon"></div>\n    <div id="icons20">\n    <div id="attackmenu" style="display:none"></div>\n    <div id="defencemenu" style="display:none"></div>\n    <div id="levelmenu" style="display:none"></div>\n    <div id="manamenu" style="display:none"></div>\n    <div id="manamenu1" style="display:none"></div>\n    </div>\n    <div id="progressvalue"></div>\n    <div id="kingdom"></div>\n    <div id="unitname" contenteditable="true"></div>\n    <progress id="progressone" style="display:none"></progress>\n    <progress id="progressmana" style="display:none" max="100"></progress>\n    <input id="unitSpeed" min="1" max="100" type="range"/>\n    <canvas width="48" height="48" id="selectedobject"></canvas>\n    <div id="navigation">\n    <button id="aleft"></button>\n    <button id="stock"></button>\n    <button id="aright"></button>\n    </div>\n    <div id="orders">\n    <button id="order1"><progress class="loadingunit" style="display:none"></progress></button>\n    <button id="order2"></button>\n    <button id="order3"></button>\n    <button id="order4"></button>\n    <button id="order5"></button>\n    <button id="order6"></button>\n    <button id="order7"></button>\n    <button id="order8"></button>\n    </div>\n    <div id="magicworkshopmenu" style="display:none">\n    <button id="mgbook"></button>\n    <button id="mgpotion"></button>\n    <button id="mgsword"></button>\n    <button id="mgamount"></button>\n    <button id="mgitem"></button>\n    <button id="mgdecline"></button>\n    <button id="mgaccept"></button>\n    <div id="mgbak"></div>\n    </div>\n    </div>';
Hb=k("msgs1");S={page:0,length:8,leftButton:k("aleft"),rightButton:k("aright"),stock:k("stock")};S.leftButton.onclick=function(){r.changePage(-1)};La=k("minimap");ke=k("unitSpeed");le=k("gold");me=k("wood");ne=k("food");oe=k("stone");pe=k("daynighticon");S.rightButton.onclick=function(){r.changePage(1)};S.displayed=[];cc=k("attackmenu");dc=k("defencemenu");lb=k("levelmenu");ec=k("kingdom");ma=k("progressone");Yc=k("unitname");mb=k("progressvalue");k("selectedobject");k("mgbook").onclick=function(){r.mwSelect(0);
nb()};k("mgpotion").onclick=function(){r.mwSelect(1);nb()};k("mgsword").onclick=function(){r.mwSelect(2);nb()};k("mgdecline").onclick=function(){k("magicworkshopmenu").style.display="none"};k("mgitem").onmousedown=function(a){var b=1;a.button&&(b*=-1);r.mwMore(b);nb()};k("mgaccept").onclick=function(){k("magicworkshopmenu").style.display="none";r.createItems()};k("mgamount").onmousedown=function(a){var b=1;a.button&&(b=-1);r.mwamount(b);nb()};xa=[k("order1"),k("order2"),k("order3"),k("order4"),k("order5"),
k("order6"),k("order7"),k("order8")];Zc=k("bottominfo");e=0;for(a=xa.length;e<a;e++)xa[e].addEventListener("mousedown",Pf),xa[e].addEventListener("mouseup",Qf),xa[e].ordid=e,xa[e].addEventListener("mouseenter",Rf),xa[e].addEventListener("mouseout",Sf);k("stock").addEventListener("click",function(a){r.checkStock()});La.addEventListener("mousedown",function(a){});je={mana:{background:"0px -120px",progress:k("progressmana")},2:{background:"0px -240px"},milk:{background:"0px -280px"},0:{background:"0px -260px"},
3:{background:"0px -320px"},1:{background:"0px -340px"}};k("gameMenu").onclick=H}k("minimap").addEventListener("mousedown",function(a){r.mapWidth();var b=a.pageX-4,c=a.pageY-31;0===a.button?(document.addEventListener("mouseup",function z(a){document.removeEventListener("mouseup",z);document.removeEventListener("mousemove",ic)}),$c=!0,ic(a),document.addEventListener("mousemove",ic)):2===a.button&&(c=r.mapWidth(),b=~~(c*(a.pageX-4)/Ma),c=~~(c*(a.pageY-31)/ra),C(b,c),r.mouseUp(b,c,2,!0))})}};fc.setup=
!1;var Rf=function(){r.mouseEnter(this.ordid)},Sf=function(){S.stockActive&&se(Ib[0],1,1);Zc.innerHTML=""},Qf=function(d){r.executeOrder(this.ordid,d.button);this.style.transform="translate(0px,0px)"},Pf=function(){this.style.transform="translate(2px,2px)"},$c,te=function(){history.pushState("",document.title,window.location.pathname)},Ya=function(){q.online=0;location.hash="";k("index").style.display="block";k("returnmenu").style.display="none";setTimeout(te,200)},sa=[.3,.25,.3,1,.3,.25,.3,1,.3,
.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1],he=function(){if("false"===localStorage.nightcycle)e=new Float32Array([1,1,1,1]);else{var m=(.025*q.cycle/q.daylength*24+q.initialhour)%24,a=~~m;m-=a;pe.style.backgroundPosition="0 -"+36*a+"px";var e=new Float32Array([sa[4*
a],sa[4*a+1],sa[4*a+2],sa[4*a+3]]);a=(a+1)%24;e[0]+=(-e[0]+sa[4*a])*m;e[1]+=(-e[1]+sa[4*a+1])*m;e[2]+=(-e[2]+sa[4*a+2])*m;e[3]+=(-e[3]+sa[4*a+3])*m}a=e;d.useProgram(I);d.uniform4fv(ue,a);d.useProgram(G);d.uniform4fv(ve,a)},M=0,N=0,cb=0,db=0,Jb=function(d,a){var e=k("tzar").width,c=k("tzar").height,b=r.mapWidth(),f=t.mx/32;d/=32;a/=32;var m=K*e*.03125,g=K*c*.03125,p=.03125*e,l=.03125*c,n=d+.5*(p-m),q=a+.5*(l-g);0>n?d=.5*-(p-m):n+m-f*K>b&&(d=b-m-.5*(p-m)+f*K);0>q?a=.5*-(l-g):q+g>b&&(a=b-g-.5*(l-g));
m-t.mx>b&&(K=b/(.03125*e),C(K));g>b&&(K=b/(.03125*c),C(K));M=32*-d;N=32*-a},ic=function(d){var a=r.mapWidth(),e=d.pageX-parseInt(La.style.left);d=d.pageY-parseInt(La.style.top);var c=k("tzar").width,b=k("tzar").height*ra/(32*a);e=~~(.5+(e-c*Ma/(32*a)*.5)*a/Ma);d=~~(.5+(d-.5*b)*a/ra);Jb(32*e,32*d);0==$c&&document.removeEventListener("mousemove",ic)},ad=0,bd=0,cd=0,dd=0,ob={37:function(d){dd=d;cb=dd+cd},40:function(d){ad=-d;db=ad+bd},39:function(d){cd=-d;cb=dd+cd},38:function(d){bd=d;db=ad+bd},27:function(d){},
13:function(d){d&&!q.editor&&("displaynone"==k("enterwindow").className?(k("enterwindow").className="displayblock",k("msginputGame").focus(),ob.blocked=13):(ed(),k("enterwindow").className="displaynone",ob.blocked=null))},19:function(d){},48:function(d){},219:function(d){d&&we(-1)},221:function(d){d&&we(1)},blocked:null};document.oncontextmenu=function(){return!1};var fd=function(){if(!wa){A("magicworkshopmenu");cc.style.display="none";dc.style.display="none";lb.style.display="none";ma.style.display=
"none";k("manamenu").style.display="none";k("manamenu1").style.display="none";k("progressmana").style.display="none";Yc.innerHTML="";cc.innerHTML="";dc.innerHTML="";k("manamenu").innerHTML="";lb.innerHTML="";ec.innerHTML="";mb.innerHTML="";ma.value="";mb.maxLength="";ke.style.display="none";for(var d=0;d<xa.length;xa[d++].innerHTML="");xe();ye()}},Ib=[];Ib.change=1;document.onkeydown=function(d){if(d.ctrlKey&&d.shiftKey)return!1;var a=!0;({116:1,115:1,123:1})[d.keyCode]&&(a=!1);return a};var Tf=function(d){if(ob[d.keyCode])ob[d.keyCode](1);
d.target!=k("msginputGame")&&r.runKey(d.keyCode,!0)},Uf=function(d){if(ob[d.keyCode])ob[d.keyCode](0);C(d.keyCode,"up");d.target!=k("msginputGame")&&r.runKey(d.keyCode,!1)},jc,kc,lc,mc,Kb=!1,Vf=function(d){var a=d.changedTouches[0].screenX;d=d.changedTouches[0].screenY;lc=M;mc=N;jc=a;kc=d},Wf=function(d){var a=d.changedTouches[0].screenY;M=lc-(jc-d.changedTouches[0].screenX);N=mc-(kc-a);Lb()},Xf=function(d){},gd=function(d){return!("li"==d.target.localName||d.target==k("tzar")||d.target==k("resources")||
d.target==k("playersinfo")||d.target==k("msgs1"))},Yf=function(d){var a=window.innerWidth,e=window.innerHeight,c=d.pageX,b=d.pageY;if(!gd(d)){if(Kb){M=lc-(jc-c);N=mc-(kc-b);Lb();return}r.mouseMove(d.pageX,d.pageY)}if(screen.height-10<=e){if(1.2===Math.abs(cb)||0===cb)cb=1.2*((10>c)-(c>a-10));if(1.2===Math.abs(db)||0===db)db=1.2*((10>b)-(b>e-10))}},Zf=function(d){if(!gd(d))if(d.altKey&&d.pageX>t.mx){Kb=!0;var a=d.pageX;d=d.pageY;lc=M;mc=N;jc=a;kc=d}else Kb=!1,r.mouseDown(d.pageX,d.pageY,d.button)},
$f=function(d){if(!gd(d))if(Kb)Kb=!1;else return r.mouseUp(d.pageX,d.pageY,d.button)},ze=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){ze||(ze=!0,Ec())});var se=function(d,a,e,c,b,f,g,n,p,t,u,w,y,v,x,C,D,H,G){A("manamenu");A("manamenu1");A("progressmana");b=l[ha[b]];a&&e?(k("stock").className="",k("manamenu1").style.display="block",k("manamenu1").style.backgroundPosition="0px -80px",k("manamenu1").innerHTML=a):k("stock").className="blocked";1==f&&c&&(d=Math.floor(25*
(c-q.cycle)/1E3),0<d&&(k("manamenu").style.display="block",k("manamenu").style.backgroundPosition="0px -200px",k("manamenu").innerHTML=d+"s"));ec.style.display="block";Yc.innerHTML=b;g||0==f?(cc.innerHTML=g,L("attackmenu")):A("attackmenu");0==f||2==f&&n?(dc.innerHTML=n,L("defencemenu")):A("defencemenu");t&&(k("manamenu").style.display="block",k("manamenu").innerHTML=p,27===u?(k("manamenu1").style.backgroundPosition="0px -280px",L("manamenu1"),k("manamenu1").innerHTML=p,k("manamenu").style.backgroundPosition=
"0px -240px",k("manamenu").innerHTML=w):(k("progressmana").value=~~(100*p/t),L("progressmana"),k("manamenu").style.backgroundPosition="0px -120px"));G&&(b=k("manamenu1"),b.style.display="block",b.style.backgroundPosition=je[H].background,b.innerHTML=G);lb.innerHTML=y;lb.style.display="block";0!==y||2!=f&&1!=f||(lb.style.display="none");ec.innerHTML=ya(ja(r.empName(v),17));ma.style.display="block";-1===x?(ma.value=100,ma.max=100,mb.innerHTML=l.MISC_INF3):(ma.value=x,-1===C?(ma.max=100,ma.value=1):
ma.max=C,mb.innerHTML=~~x+"/"+C);Ae(D)},Be=function(d,a,e){d=l[ha[d]];e&&(d=hd(d,ya(ja(a,e))));k("msgs1").innerHTML+="<li>"+d+"</li>";pb()},ya=function(d){for(var a,e="",c=0;a=d[c++];)e+=String.fromCharCode(a);return e},Lb=function(){};new Float32Array(8);var id,jd,kd,ld,Ce,K=1;new Float32Array(12);var d,qb,Tc=function(d,a){return new Uint32Array(g.HEAPF32.buffer,d,a)},Yb=function(d,a){return new Float32Array(g.HEAPF32.buffer,d,a)},ja=function(d,a){return new Uint16Array(g.HEAPF32.buffer,d,a)},Zb=
function(d,a){return new Uint8Array(g.HEAPF32.buffer,d,a)},xe=function(){if(!wa){for(var d=S.displayed.length=0,a=S.length;d<a;d++){var e=xa[d];e.className="blocked";e.style.backgroundPosition="48px 96px";e.innerHTML=""}S.rightButton.className="blocked";S.leftButton.className="blocked";S.stock.className="blocked";S.rightBlocked=1}},ve,G,I,De,ue,Ee,nc,md,nd,oc,Mb,Nb,Ob,rb,od,pd,eb,Fe,Pb=function(m,a){var e=4*Ce,c=d.createBuffer();c.size=a;c.len=e;d.bindBuffer(d.ARRAY_BUFFER,c);d.enableVertexAttribArray(m);
d.vertexAttribPointer(m,a,d.FLOAT,!1,0,0);d.bufferData(d.ARRAY_BUFFER,e*a,d.STATIC_DRAW);aa?pc.vertexAttribDivisorANGLE(m,1):d.vertexAttribDivisor(m,1);return c};Pb.jump=4E3;var qc=function(m,a){var e=d.createBuffer(),c=a+1E4;a*=4;c*=4;d.bindBuffer(d.COPY_READ_BUFFER,m);d.bindBuffer(d.ARRAY_BUFFER,e);d.bufferData(d.ARRAY_BUFFER,a*m.size,d.STATIC_DRAW);d.copyBufferSubData(d.COPY_READ_BUFFER,d.ARRAY_BUFFER,0,0,a*m.size);d.bindBuffer(d.COPY_READ_BUFFER,e);d.bindBuffer(d.ARRAY_BUFFER,m);d.bufferData(d.ARRAY_BUFFER,
c*m.size,d.STATIC_DRAW);d.copyBufferSubData(d.COPY_READ_BUFFER,d.ARRAY_BUFFER,0,0,a*m.size);d.bindBuffer(d.COPY_READ_BUFFER,null);d.deleteBuffer(e)},aa,Z=function(){if(!q.canceled){performance.now();requestAnimationFrame(Z);var m=Z.fp1000,a=Z.delta,e=Z.now,c=Z.realnow,b=Z.delta,f=e;Z.frameCount++;e=Date.now()-Gb+25*q.cycle;Z.now=e;a=(a+(e-f))/1E3;Z.delta=a;f=c;c=Date.now();Z.realnow=c;b=(b+(c-f))/1E3;Z.realdelta=b;Xc+=a;Wc++;Z.fp1000=m+a;if(0!=cb||0!=db)m=parseInt(localStorage.scrollSpeed)/100,M+=
cb*b*1280*K*m,N+=db*b*1280*K*m,M=Math.floor(M),N=Math.floor(N),Jb(-M,-N);d.useProgram(G);Lb();d.uniform1f(Ee,e);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);b=window.innerWidth;m=window.innerHeight;d.useProgram(I);sb(od);d.uniform1f(md,e);d.drawArrays(d.TRIANGLES,0,6);d.viewport(t.marx,m-ra-t.mary,Ma,ra);d.uniform1i(oc,1);d.uniform2fv(Ob,[0,0]);d.uniform1f(rb,Ma/32/r.mapWidth());d.drawArrays(d.TRIANGLES,0,6);d.uniform1i(oc,0);d.uniform2f(nd,b,m);d.uniform2fv(Ob,[M,N]);d.uniform1f(rb,1/K);d.viewport(t.mx,
0,b,m);d.useProgram(G);sb(pd);qd(r.getBufferID());e=r.mapWidth();b=k("tzar").width;m=k("tzar").height;d.viewport(t.marx,m-ra-t.mary,Ma,ra);d.uniform2f(nc,32*e,32*e);d.uniform2fv(Nb,[0,0]);d.uniform1i(Mb,1);d.uniform1f(qb,1);qd(r.getBufferID());d.uniform1i(Mb,2);qd(1);d.uniform1i(Mb,0);d.uniform2f(nc,b,m);d.uniform2fv(Nb,[M,N]);d.uniform1f(qb,1/K);d.viewport(t.mx,0,b,m);tb.update&&tb(1)}},qd=function(m){m&&(d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD),d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),
aa?pc.drawArraysInstancedANGLE(d.TRIANGLES,0,6,m):d.drawArraysInstanced(d.TRIANGLES,0,6,m),d.disable(d.BLEND))},rd=!1,ag=function(m){if(!sd&&(m.clientX>t.menumx||$c||!m.clientX)){var a=r.mapWidth(),e=m.deltaY;m=k("tzar").width;var c=k("tzar").height;e=Math.sign(e)*parseFloat(localStorage.zoomMult)/1E3*K;c=(K+e)*c*.03125;(K+e)*m*.03125-(K+e)*t.mx/32>a||c>a||(K+=e,.08>K&&(K=.08),Jb(-M,-N),d.useProgram(I),d.uniform1f(rb,1/K),d.useProgram(G),d.uniform1f(qb,1/K),r.setupZoom(K),Ge())}},Ge=function(){var d=
k("tzar").width,a=k("tzar").height,e=-M+.5*(d-K*d),c=-N+.5*(a-K*a);d=K*(d-t.mx);a*=K;var b=ub.viewF32();b[0]=e;b[1]=c;b[2]=-999999999;b[3]=0;b[4]=0;He();b[0]=d;b[1]=a;b[2]=0;b[3]=0;b[4]=0;Ie()},Je,Ke;Lb=function(){var m=[M,N];if(M!=Je||N!=Ke)Je=M,Ke=N,r.setupTranslation(-M,-N),d.useProgram(I),d.uniform2fv(Ob,m),d.useProgram(G),d.uniform2fv(Nb,m),Ge()};var Le,vb,rc=function(){var m=window.innerWidth,a=window.innerHeight;d.canvas.width=m;d.canvas.height=a;r.canvasSize(m,a);d.useProgram(I);d.uniform2f(nd,
m,a);d.useProgram(G);eb.width=m;eb.height=a;d.activeTexture(d.TEXTURE2);vb||(vb=d.createTexture());d.bindTexture(d.TEXTURE_2D,vb);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,m,a,0,d.RGBA,d.UNSIGNED_BYTE,null);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.bindFramebuffer(d.FRAMEBUFFER,eb);d.framebufferTexture2D(d.FRAMEBUFFER,
d.COLOR_ATTACHMENT0,d.TEXTURE_2D,vb,0);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.bindFramebuffer(d.FRAMEBUFFER,null);d.uniform1f(qb,1);d.uniform1i(d.getUniformLocation(G,"lightmap"),2);d.useProgram(I);d.uniform1i(d.getUniformLocation(I,"lightmap"),2);d.uniform1f(rb,1);d.useProgram(G);d.uniform2f(nc,m,a);d.viewport(t.mx,0,m,a);rc.changed=1;Jb(-M,-N)},sb=function(m){if(aa)return sc.bindVertexArrayOES(m);d.bindVertexArray(m)},sc,pc,Me=function(){return aa?(sc||(sc=d.getExtension("OES_vertex_array_object")),
sc.createVertexArrayOES()):d.createVertexArray()};Array.prototype.put=function(d){this[this.length]=d};Array.prototype.quit=function(d){d=this.indexOf(d);return-1<d?(this.splice(d,1),!0):!1};Array.prototype.add=function(d){0>this.indexOf(d)&&(this[this.length]=d)};var q={},He=function(){var m=ub.viewF32(),a=tc.viewF32();d.bindBuffer(d.ARRAY_BUFFER,jd);d.bufferSubData(d.ARRAY_BUFFER,12*m[4],a)},Ie=function(){var m=ub.viewF32(),a=tc.viewF32();d.bindBuffer(d.ARRAY_BUFFER,ld);d.bufferSubData(d.ARRAY_BUFFER,
12*m[4],a)},ua=["European","Arab","Asian"],hd=function(d,a,e){e&&(d=d.replace("%d",e));return d.replace("%s",a)};Rc.translated=!0;var uc,hb=function(d){q.infinity=void 0;if(k("mapconfiguration")&&""!==k("mapconfiguration").innerHTML){d="mapx mapwidth goldRes goldValue woodRes woodValue foodRes foodValue stoneRes stoneValue infinity infiniteValue terrain terrainSelect terrainRND terrainTypeSelect peons peonValue freePop freePopValue maxPop maxPopValue".split(" ");for(var a=0,e=d.length;a<e;a+=2){var c=
k(d[a+1]).value;"infinity"===d[a]?(c=k(d[a+1]).checked,q[d[a]]=c):parseInt(c)?q[d[a]]=parseInt(c):q[d[a]]=c;localStorage[d[a]]=c}}else"true"===localStorage.infinity&&(q.infinity=!0),q.goldRes=parseInt(localStorage.goldRes),q.foodRes=parseInt(localStorage.foodRes),q.woodRes=parseInt(localStorage.woodRes),q.stoneRes=parseInt(localStorage.stoneRes),q.mapx=parseInt(localStorage.mapx),q.terrain=parseInt(localStorage.terrain),q.items=parseInt(localStorage.items),q.peons=parseInt(localStorage.peons),q.gateways=
parseInt(localStorage.gateways),q.freePop=parseInt(localStorage.freePop),q.maxPop=parseInt(localStorage.maxPop),q.terrainRND=parseInt(localStorage.terrainRND);q.daylength=2880;q.initialhour=12;q.infinity&&(q.goldRes=Math.pow(2,31)-1,q.foodRes=Math.pow(2,31)-1,q.woodRes=Math.pow(2,31)-1,q.stoneRes=Math.pow(2,31)-1);q.mapy=q.mapx;q.gravity=580.9/9.8*9.8;q.name="";q.arje=~~(555555*Math.random()+1);r.setupGame(q.peons,q.freePop,q.goldRes,q.woodRes,q.foodRes,q.stoneRes,q.water,q.terrain,q.items,q.gateways,
q.mapx,q.arje,q.maxPop,q.terrainRND);return q},ce=function(){Hb&&(Hb.innerHTML="");k("loadingtext").innerHTML=l.MSG_GAME_LOAD;t.kingdom||(t.kingdom=1);q.online&&(bg(l.MSG_GAME_CREATE),q.editor=0);C(r.mapWidth(),"width");r.mapWidth()?(q.mapx=r.mapWidth(),q.mapy=q.mapx):hb();q.pausedTime=0;q.canceled=0;uc=performance.now();Ba=k("msgs1");q.online||(location.hash="");L("content");A("playermenu");A("index");A("notifybottom");q.cycle?q.deltaTime=25*q.cycle:(q.date=Date.now(),q.cycle=0,q.deltaTime=0);q.loadDate=
Date.now();q.online||te();q.now=ee;q.paused=0;q.pausedTime=0;q.zMax=96*q.mapy;bb();performance.now();q.allow14=!0;q.temperature=25;var d=q.temperature;0===t.temperature&&(d+="&deg;C");k("temperature")&&(k("temperature").innerHTML=d);K=1;r.preSetup();tb(1);C(M,N);Ha.check()},Ha=function(){D(["loading","playermenu","index"]);k("playersinfo")&&(k("playersinfo").innerHTML="");fd();window.addEventListener("keydown",Tf);window.addEventListener("keyup",Uf);window.addEventListener("mousemove",Yf);window.addEventListener("touchstart",
Vf);window.addEventListener("touchmove",Wf);window.addEventListener("touchend",Xf);window.addEventListener("wheel",ag,!1);window.addEventListener("mousedown",Zf);window.addEventListener("mouseup",$f);uc=performance.now()-uc;C("FULL: ",uc);q.online?r.plready():td();q.allow14=!1};Ha.check=function(){Ha.load++;Ha.load===Ha.target&&Ha()};Ha.target=2;var Ne=function(){return t.gl?!1:($a("You can't run WEBGL 2<br>More info <a href='http://webglreport.com/?v=2'>here</a>","Error"),Ya(),!0)},Ec=function(){var d=
document.documentElement;d.requestFullscreen?d.requestFullscreen():d.msRequestFullscreen?d.msRequestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen&&d.webkitRequestFullscreen()},Tb=function(d){var a=document.createElement("div");a.id=d;document.body.appendChild(a)},vc=function(d){Ne()||(fc(),bc(),window.onbeforeunload=function(){return"Are you sure you want to quit?"},Ha.load=0,d&&"true"==localStorage.fullscreen&&Ec(),wa?(t.marx=0,t.mary=60,t.menumy=60,ra=Ma=
171,t.mx=171,t.menumx=171):(t.mx=151,ra=Ma=128,t.menumx=151,t.menumy=0,t.marx=4,t.mary=31),La.style.width=Ma+"px",La.style.height=ra+"px",La.style.left=t.marx+"px",La.style.top=t.mary+"px",Tb("loading"),""==k("loading").innerHTML&&(k("loading").innerHTML='<p id="loadingtext"></p>\n<div>\n<div id=\'logo\' class="svgnehhon"></div>\n<span id="netral">NEHHON NETRAL-H ENGINE</span>\n</div>'),wa?r.setupEditor():r.mapWidth()||hb(),Eb())},Ae,Oe,ye,Ff=function(){var d=k("selectedobject").getContext("webgl",
{antialias:!1,depth:!1}),a=d.createShader(d.VERTEX_SHADER);d.shaderSource(a,"void main() {\ngl_Position = vec4(0 ,0, 0, 1);\ngl_PointSize=48.0;\n}");d.compileShader(a);var e=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(e,"precision mediump float;\nuniform sampler2D u_image;\nuniform vec4 u_color;\nuniform float txtCoord;\nvoid main() {\ngl_FragColor = texture2D(u_image, (vec2(\tmod(txtCoord,21.0) ,floor(txtCoord/21.0) ) + gl_PointCoord)*(0.046875));\nif(gl_FragColor.r==gl_FragColor.g&&gl_FragColor.r==gl_FragColor.b) gl_FragColor*=u_color;\n}");
d.compileShader(e);var c=d.createProgram();d.attachShader(c,a);d.attachShader(c,e);d.linkProgram(c);d.useProgram(c);a=d.createTexture();d.bindTexture(d.TEXTURE_2D,a);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texImage2D(d.TEXTURE_2D,0,d.RGB,d.RGB,d.UNSIGNED_BYTE,S.icons);var b=d.getUniformLocation(c,"u_color"),
f=d.getUniformLocation(c,"txtCoord");Ae=function(a){d.uniform4f(b,1,1,1,1);d.uniform1f(f,a);d.drawArrays(d.POINTS,0,1)};Oe=function(){d.uniform4f(b,1,1,1,1);d.uniform1f(f,189);d.drawArrays(d.POINTS,0,1)};ye=function(){d.uniform1f(f,0);d.uniform4f(b,0,0,0,0);d.drawArrays(d.POINTS,0,1)}},Ma=128,ra=128,fa=[];window.addEventListener("offline",function(d){Db("Offline","#ff0000")});window.addEventListener("online",function(d){Db("Online","#00ff00")});(function(){for(var d=["returnmenu","index","Account",
"accountIframe"],a=0,e=d.length;a<e;k(d[a++]));})();var ud=!1,cg=function(){ud=!0;location.replace("#"+this.gameID+"Room");vd(this.gameID)},vd=function(d){fa=[];Pe();C("connecting to",d,l.MSG_GAME_LOAD);k("game").style.display="block";k("gameName").innerHTML=l.MSG_GAME_LOAD;k("returnmenu").style.display="none";k("index").style.display="none";Ba.innerHTML="";Oa=[];t.p2p?(Y.joinRoom(d,Fc),bc()):(Y||ca(),ca.func=function(){vd(d)})},dg={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",
31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},Qe=function(d){A("game");q.online=0;q.id=void 0;Y.leaveRoom();fa.length=0;Ya();r.closeRoom();d.constructor==String&&$a(d)},Oa,Ub=function(){return parseInt(t.color.substr(1),16)},Re=function(d){for(var a=0,e=fa.length;a<e;a++){var c=
fa[a];if(c.id==d)return c}},Y,Te=function(d){if(!k("usernameForm")){Da();var a=localStorage.name||"Guest",e=localStorage.color;if(!e){for(e=Math.floor(16777215*Math.random()).toString(16);6>e.length;)e="0"+e;e="#"+e}var c=document.createElement("div");c.id="usernameForm";c.innerHTML="\n            <div>\n            <h2>"+l.MP_SEARCH_T_PL_NAME+'</h2>\n            <div style="padding:37px">\n<input type="color" id=\'usernameColor\' value="'+e+'" /><input id=\'usernameVal\' type="text" value="'+Se(a)+
'" />\n</div>\n<br />\n</div>';a=document.createElement("button");a.innerHTML=l.MSG_SYS_CONT;a.onclick=function(){t.name=fb(k("usernameVal").value);t.color=k("usernameColor").value;localStorage.color=t.color;localStorage.name=t.name;document.body.removeChild(k("usernameForm"));Ua(r.userConfig(Ub()),17,t.name||"Guest");d();oa()};c.children[0].appendChild(a);document.body.appendChild(c)}},Id=function(d){for(var a=0,e=0;e<d.length;e++)a+=d.charCodeAt(e)*e+(a&e);C(a,"id");return a%4294967295},ca=function(){Ne()||
(t.name?(Bf(),Y=new SimpleWebRTC({localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},url:"https://gthsolar.openode.io"}),Y.on("channelMessage",function(d,a,e){a=Tc(r.tempointeradd(e.length),e.length);for(var c=0;c<e.length;c++)a[c]=e[c];r.onldata(d.superID)}),Y.on("error",function(d){"full"==d&&(Ya(),Db(l.ERR_GAMEFULL,"#ff0000"))}),Y.on("connectionReady",function(d){var a=Y.connection.connection;t.p2p=a;t.superID=Id(a.id);r.setupOnlID(t.superID);
a.username=t.name;a.color=t.color;a.on("getRooms",function(a){var c=a.date,b=Object.keys(a),d=k("gameList");if(1<b.length){d.innerHTML="";for(var e=0,g=b.length;e<g;e++){var m=b[e],n=a[m];if("date"!=m){var q=n.len;if(q){var r=document.createElement("tr"),t="";t=n.playing?t+("<td><div class='redCircle'></div>"+l.PLAYING+"</td>"):t+("<td><div class='redCircle' style=\"background:rgba(0,255,0,.8); box-shadow:0px 0px 20px rgba(0,255,0,.8)\"></div>"+l.WAITING+"</td></td>");t+="<td>"+fb(n.description)+
"</td><td>"+~~((c-n.date)/6E4)+" min ago</td><td>"+fb(q)+"/"+fb(n.max)+"</td>";r.innerHTML=t;r.gameID=m;n.playing||(r.onclick=cg);d.appendChild(r)}}}}else d.innerHTML="<tr><td>"+l.NO_GAMES_FOUND+"</td></tr>"});t.onlineID=d;ca.func&&ca.func()}),Y.on("createdPeer",function(d){q.started||na(d)})):Te(ca))},eg=function(){bc();oa();Pe();L("game");A("returnmenu");A("index");k("gameName").innerHTML=l.MSG_GAME_LOAD;Ba.innerHTML="";fa=[];V();t.admin=1;t.room={description:k("gameFormName").value,max:parseInt(k("gameMax").value),
public:!0};2>t.room.max&&(t.room.max=2);14<t.room.max&&(t.room.max=14);localStorage.gameDescription=t.room.description;Y.createRoom(t.onlineID+"b",Fc);q.online=1;document.body.removeChild(k("gameForm"));Oa=[t.onlineID];hb();r.setupOnlTable(t.room.max+1);Ua(r.onlADD(0,0,Ub(),t.superID,0),17,t.name);Ue()},Jd=function(){Y||ca();if(t.onlineID){Da();var d=localStorage.gameDescription||t.name+"'s room",a=document.createElement("div");a.id="gameForm";a.innerHTML="<div>\n<h2>"+l.OPTIONS_T_GOPT+"</h2>\n"+
l.EDIT_T_GAMENAME+': <input id=\'gameFormName\' type="text" value="'+d+'" maxlength="29" /><br />\n'+l.SP_SETUPMAP_T_NUM_PLAYERS+': <input id="gameMax" type="number" value="6" max="14" min="2"/><br />\n</div>';d=document.createElement("button");d.innerHTML=l.MSG_SYS_CONT;d.onclick=eg;a.children[0].appendChild(d);document.body.appendChild(a)}else setTimeout(function(){location.hash=""},200),ca.func=Jd},qf=function(){var d=r.savegame(),a=wd.viewI32(),e=Zb(d,a[0]);a=a[1];C(e,d);d=new Blob([new Uint32Array([a]),
e],{type:"application/octet-binary"});fg({name:"Savegame",played:25*r.gcycle(),date:Date.now()},d);k("saveGame").innerHTML="Done";setTimeout(function(){k("saveGame").innerHTML=l.ENDGAMEDLG_SAVE},800)},gg=function(){fa.length&&(hb(),r.strOnl(),t.p2p.emit("gameStarted"))},td=function(){oa();k("alert")&&A("alert");q.started=1;q.date=Date.now();wa||(bb(),Q());r.startMovement();Z()};td.fast=!0;var Ve=document.getElementsByTagName("main")[0],sd=!1,oa=function(){sd=!1;Ve.style.filter=""},Da=function(){sd=
!0;Ve.style.filter="blur(14px)"};var We=function(){A("game");q.id=void 0;q.online=0;q.compressed=void 0;q.arje=void 0;Y.leaveRoom();fa.length=0;Ya();t.admin=0;r.closeRoom()};var hg=function(d,a){if(null==k(d)){var e=document.createElement("div");e.innerHTML=a;e.id=d;k("playermenu").appendChild(e);return!0}return!1},Pe=function(){hg("game",'<h2 id="gameName"></h2>\n<p id="onlineTopInfo"></p>\n<div id="multi21">\n<table class="players" >\n<tbody id="multiplayertable">\n</tbody>\n</table>\n<div id="chat">\n<ul id="msgs">\n</ul>\n<input id="msginput" type="text" autocomplete="off" />\n<input id="sendmsg" type="submit" value="" />\n</div>\n</div>\n<div id="showGameInfo"></div>\n<div id="buttons"></div>')&&
(Ba=k("msgs"),wc=k("msginput"),wc.addEventListener("keyup",function(d){13===d.keyCode&&ed()}),k("sendmsg").onclick=ed)},Fc=function(d){if((t.admin||d)&&!q.id)if(L("game"),d=Y.roomName,d+="Room",C("login"),oa(),0!==Y.getPeers().length||t.admin){var a=t.room||NaN;C(a);q.id=d;q.online=1;V();t.admin&&(k("onlineTopInfo").innerHTML=' <button id="addAI" style="padding: 6px;">'+l.ADD_AI+'</button><span style="float:right;display:none">'+l.SP_SETUPMAP_T_NUM_PLAYERS+'<input style="display:none"  id="nplayersO" min="2" type="number" max="14" value="'+
t.room.max+'" /></span>',k("nplayersO").onchange=function(){var a=this.value;a<Oa.length&&(a=Oa.length);C(Oa.length,a);Oa.length!=a||fa.length||a++;a=parseInt(a);if(2>a||!a)a=2;14<a&&(a=14);a!==t.room.max&&t.p2p.emit("maxPlayers",a-(Oa.length-fa.length-1));this.value=t.room.max},k("addAI").onclick=function(){r.onlCount()<t.room.max&&(Ua(r.onlADD(0,0,16777216*Math.random(),0,1),17,"AI"),t.p2p.emit("maxPlayers",t.room.max-r.nAIs()),r.sndNfo())});k("copyButton")&&(k("copyButton").onclick=function(){k("onlineID").select();
document.execCommand("Copy")},k("onlineID").value=location.origin+"/#"+q.id);k("gameName").innerHTML=fb(a.description)||"Online Game";A("returnmenu");t.admin?(location.replace("#"+q.id),k("buttons").innerHTML='<button id="startbutton">'+l.MP_MPLAYER_PLAY+'</button><button id="optionbutton">'+l.MENU_OPTI+'</button><button id="closebutton">'+l.GENERAL_CLOSE+'</button><br><input id="maploadOnline" type="file" /> <label style="display:none" for= "maploadOnline">'+l.strcusMap+'</label> <button id="deleteCusMap">'+
l.randomMap+"</button>",k("startbutton").onclick=gg,k("optionbutton").onclick=Xe,k("closebutton").onclick=We,k("maploadOnline").accept=".tzared",A("deleteCusMap")):(k("buttons").innerHTML='<button id="quitbutton">'+l.MSG_DISCONNECT+"</button>",k("quitbutton").onclick=Qe);Y.connection.on("remove",ig)}else location.hash="",Ya()},ig=function(d){if(d=Re(d.id)){var a=ya(ja(r.empName(r.pidkingdom(d.superID)),17));xd(hd(l.VIEWMSG_PLAYER_DISCONECTED,a),0,5);fa.quit(d);r.deletePlayer(d.superID);d.admin&&!q.started&&
Qe(l.ERR_SERVERCANCEL)}},Ye=document.getElementsByClassName("ucolor"),Ze=document.getElementsByClassName("username"),$e=document.getElementsByClassName("race"),yd=document.getElementsByClassName("team"),Ca=function(d){if(t.admin&&"BUTTON"!=d.target.tagName){Ca.div&&(document.body.removeChild(Ca.div),Ca.div=void 0);var a=d.pageX;d=d.pageY;var e=this.i2;C(e);var c=document.createElement("div");c.style.top=d+"px";c.style.left=a+"px";c.className="onlPlayer";Ca.div=c;C(this.peer,this.i2);if(this.peer.name)a=
document.createElement("button"),a.onclick=function(){r.userKick(e);t.p2p.emit("maxPlayers",r.onlCount());document.body.removeChild(c);Ca.div=void 0},a.innerHTML=l.GENERAL_KICK,c.appendChild(a);else{var b=this.peer;a=document.createElement("button");a.onclick=function(){r.updown(e,-1);document.body.removeChild(c);Ca.div=void 0};a.innerHTML=l.UP;c.appendChild(a);a=document.createElement("button");a.onclick=function(){r.updown(e,1);document.body.removeChild(c);Ca.div=void 0};a.innerHTML=l.DOWN;c.appendChild(a);
t.onlineID!=b&&(a=document.createElement("button"),a.onclick=function(){C(22222,b);r.userKick(e);t.p2p.emit("maxPlayers",r.onlCount());document.body.removeChild(c);Ca.div=void 0},a.innerHTML=l.GENERAL_KICK,c.appendChild(a))}a=document.createElement("button");a.onclick=function(){document.body.removeChild(c);Ca.div=void 0};a.innerHTML=l.GENERAL_CLOSE;c.appendChild(a);document.body.appendChild(c)}},Ue=function(){var d=k("multiplayertable"),a='<tr style="text-transform:uppercase"><td></td><td>'+l.MP_SEARCH_T_PL_NAME+
"</td><td>"+l.RACE+"</td><td>"+l.TEAM+"</td></tr>",e=Oa,c=r.nkingdom()-1||14;C("LENGTH",c);e&&c<e.length&&(c=e.length);for(e=0;e<c;e++)a+='<tr><td class="ucolor"></td><td class="username">'+l.MP_MPLAYER_NAME_2+'</td><td class="race"></td><td class="team"></td></tr>';6>c&&(a+='<tr style="height: '+(260-46*c)+'px"></tr>');d.innerHTML=a;k("multiplayertable").getElementsByTagName("tr");r.onlineKingdoms();k("msgs").style.height=d.clientHeight-87+"px"},Vb=Za,jg=function(){bc();document.body.removeChild(k("connectConfirm"));
var d=location.hash.substr(1);vd(d.substr(0,d.length-4))},Kd=function(){if(ud)ud=!1;else if(!t.admin){var d=document.createElement("div");document.body.appendChild(d);d.id="connectConfirm";d.innerHTML="<button>"+l.CLICKJOIN+"</button>";d.onclick=jg;ca()}};window.onhashchange=gb;var Ba,wc,xd=function(d,a,e,c){Ta("chat");e&&(a=r.gstarted()?Hb:Ba,a.innerHTML=5!==e?a.innerHTML+("<li><span>"+ya(ja(e,17))+" \u2014</span> "+ya(ja(d,c))+"</li>"):a.innerHTML+("<li>"+d+"</li>"),a.scrollTop=a.scrollHeight,r.gstarted()&&
pb())};xd.fast=!0;var pb=function(){11==Ba.children.length&&k("msgs1").removeChild(k("msgs1").children[0]);1==Ba.children.length&&(pb.intv=setInterval(kg,16E3))},kg=function(){k("msgs1").children[0]&&k("msgs1").removeChild(k("msgs1").children[0]);Ba&&0==Ba.children.length&&clearInterval(pb.intv)},fb=function(d){return String(d).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Se=function(d){return String(d).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},ed=function(){if(q.started){var d=
Hb;var a=k("msginputGame").value;k("msginputGame").value=""}else d=Ba,a=wc.value,wc.value="";""!==a&&(a=fb(a),d.innerHTML+="<li><span>"+t.name+" \u2014</span> "+a+"</li>",Ua(r.tempstradd(),1024,a),r.liveChat(a.length),d.scrollTop=d.scrollHeight,q.started&&pb())},af=document.getElementsByClassName("ucolor1"),lg=document.getElementsByClassName("username1"),mg=document.getElementsByClassName("race1"),ng=document.getElementsByClassName("team1"),bf=function(d){var a=1;2===d.button&&(a=-1);this.innerHTML=
r.changeTeam(this.iteam,a)},cf=function(d){var a=1;2===d.button&&(a=-1);this.innerHTML=ua[r.changeRace(this.iteam,a)]},df=function(){this.parentElement.style.background=this.value;r.changeColor(this.iteam,parseInt(this.value.substr(1),16))},og=function(){r.randomKingdoms(1)},pg=function(){r.randomKingdoms(-1)},ef=function(d,a,e,c,b,f,g){var h="#"+c.toString(16);d=ya(ja(d,17));var m=k("multiplayertable").getElementsByTagName("tr"),l=f==t.superID,n=b+1;c=parseInt(h.substr(1),16);c=[c>>16&255,c>>8&255,
c&255];Ye[b].style.background="rgb("+c[0]+","+c[1]+","+c[2]+")";Ze[b].innerHTML=d;g&&(Ze[b].style.color="#fff900");l||g&&t.admin?(yd[b].innerHTML="",d=document.createElement("button"),d.onmousedown=bf,d.iteam=n,d.innerHTML=a,yd[b].appendChild(d),g&&(d.style.color="#fff900"),d=document.createElement("button"),d.onmousedown=cf,d.iteam=n,d.innerHTML=ua[e],$e[b].appendChild(d),g&&(d.style.color="#fff900"),a=document.createElement("input"),a.type="color",a.iteam=n,a.value=h,Ye[b].appendChild(a),a.onchange=
df):(yd[b].innerHTML=a,$e[b].innerHTML=ua[e]);t.admin&&!l&&(m[b+1].onclick=Ca,m[b+1].peer=f,m[b+1].i2=b+1)},ff=function(){if(!t.name)return Te(ff);""===k("RandomMap").innerHTML&&(k("RandomMap").innerHTML="<h2>"+l.MP_SETUPMAP_T_RANDOM+'</h2><div>\n            <table class="players" id="oneplayertable">\n                <tbody id="oneplayertbody">\n                </tbody>\n            </table>\n            <button style="margin-left:40px" id="start2" class="start startButton">'+l.MP_MPLAYER_PLAY+'</button>\n            <button class="start optionsButton" id="start1">'+
l.MENU_OPTI+"</button>\n        </div>",k("start1").onclick=Xe,k("start2").onclick=vc);L("returnmenu");r.randomKingdoms()},gf=function(d){d=d.target.result;var a=new Uint8Array(d,4);d=(new Uint32Array(d,0,1))[0];C(d,a);for(var e=a.length,c=r.readSavegame0(e),b=0;b<e;b++)ib[c+b]=a[b];r.readSVG(4*d,e,!0);L("customMapcont");k("closeCustom").style.display="inline-table";k("custombody").innerHTML="";r.customMapTable()},Hf=function(d){X.terrain=hf(d,323,253036);X.check()},Gf=function(d){hf(d,0,0);X.check()},
hf=function(d,a,e){var c=new Uint8Array(d,24),b=r.nh19add(c.length);b=Zb(b,c.length);for(var f=0;f<c.length;f++)b[f]=c[f];d=new Uint32Array(d,0,6);c=performance.now();r.rdnh19(d[0],d[1],d[2],d[3],d[4],d[5],a,e);C(performance.now()-c)},ac=function(d,a,e){if(U&&$b&&-1<$b.indexOf(d))return $b.push(d),C("cache:",d),qg("basic",a,d);var c=new XMLHttpRequest;c.open("GET",d,!0);c.responseType="arraybuffer";c.onload=function(b){b=b.target.response;$d({url:d,buffer:b});a(b)};e&&(c.onprogress=e);c.send()},bg=
function(d,a,e){"granted"!=Notification.permission&&Notification.requestPermission(function(a){});var c=new Notification(d,{icon:"nehhon/807.png",body:a,requireInteraction:!1});e||(e=5550);setTimeout(function(){c.close()},e)},jf=function(d){for(var a="",e=0,c=d.length;e<c;e++)a+=dg[d[e]];return a};Df[jf([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]!==jf([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])&&(C("edge chrome firefox - compt"),ce=Za);var tb=function(g){if(g){tb.update=
!1;g=r.mapWidth();var a=performance.now(),e=Yb(r.configTerrain(),g*g*4);C(performance.now()-a);d.useProgram(I);d.activeTexture(d.TEXTURE1);a=d.createTexture();d.bindTexture(d.TEXTURE_2D,a);d.pixelStorei(d.UNPACK_ALIGNMENT,1);aa?(d.getExtension("OES_texture_float"),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,g,g,0,d.RGBA,d.FLOAT,e)):d.texImage2D(d.TEXTURE_2D,0,d.RGBA32F,g,g,0,d.RGBA,d.FLOAT,e);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);
d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT);d.bindTexture(d.TEXTURE_2D,null);d.bindTexture(d.TEXTURE_2D,a);d.uniform1i(d.getUniformLocation(I,"img_data"),1);d.useProgram(G);d.activeTexture(d.TEXTURE2)}else tb.update=!0};tb.update=!1;var g="undefined"!==typeof g?g:{},Qb={},Pa;for(Pa in g)g.hasOwnProperty(Pa)&&(Qb[Pa]=g[Pa]);g.arguments=[];g.thisProgram="./this.program";g.quit=function(d,a){throw a;};g.preRun=[];g.postRun=[];var Ab=
!1,Va=!1,xc=!1,kf=!1;Ab="object"===typeof window;Va="function"===typeof importScripts;xc="object"===typeof process&&"function"===typeof require&&!Ab&&!Va;kf=!Ab&&!xc&&!Va;var Ea="";if(xc){Ea="undefined/";var zd,Ad;g.read=function(d,a){zd||(zd=require("fs"));Ad||(Ad=require("path"));d=Ad.normalize(d);d=zd.readFileSync(d);return a?d:d.toString()};g.readBinary=function(d){d=g.read(d,!0);d.buffer||(d=new Uint8Array(d));Dc(d.buffer);return d};1<process.argv.length&&(g.thisProgram=process.argv[1].replace(/\\/g,
"/"));g.arguments=process.argv.slice(2);"undefined"!==typeof module&&(module.exports=g);process.on("uncaughtException",function(d){if(!(d instanceof kb))throw d;});process.on("unhandledRejection",ea);g.quit=function(d){process.exit(d)};g.inspect=function(){return"[Emscripten Module object]"}}else if(kf)"undefined"!=typeof read&&(g.read=function(d){return read(d)}),g.readBinary=function(d){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(d));d=read(d,"binary");Dc("object"===typeof d);
return d},"undefined"!=typeof scriptArgs?g.arguments=scriptArgs:"undefined"!=typeof arguments&&(g.arguments=arguments),"function"===typeof quit&&(g.quit=function(d){quit(d)});else if(Ab||Va)Va?Ea=self.location.href:document.currentScript&&(Ea=document.currentScript.src),Ea=0!==Ea.indexOf("blob:")?Ea.substr(0,Ea.lastIndexOf("/")+1):"",g.read=function(d){var a=new XMLHttpRequest;a.open("GET",d,!1);a.send(null);return a.responseText},Va&&(g.readBinary=function(d){var a=new XMLHttpRequest;a.open("GET",
d,!1);a.responseType="arraybuffer";a.send(null);return new Uint8Array(a.response)}),g.readAsync=function(d,a,e){var c=new XMLHttpRequest;c.open("GET",d,!0);c.responseType="arraybuffer";c.onload=function(){200==c.status||0==c.status&&c.response?a(c.response):e()};c.onerror=e;c.send(null)},g.setWindowTitle=function(d){document.title=d};var Nc=g.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),Fa=g.printErr||("undefined"!==typeof printErr?printErr:
"undefined"!==typeof console&&console.warn.bind(console)||Nc);for(Pa in Qb)Qb.hasOwnProperty(Pa)&&(g[Pa]=Qb[Pa]);Qb=void 0;var uf={"f64-rem":function(d,a){return d%a},"debugger":function(){debugger}},jb=0;"object"!==typeof WebAssembly&&Fa("no native wasm support detected");var Lc=!1,Ld="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var Ic,ib,pa,yc=g.TOTAL_MEMORY||471859200;5242880>yc&&Fa("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+
yc+"! (TOTAL_STACK=5242880)");if(g.buffer)var la=g.buffer;else if("object"===typeof WebAssembly&&"function"===typeof WebAssembly.Memory){var Wb=new WebAssembly.Memory({initial:yc/65536});la=Wb.buffer}else la=new ArrayBuffer(yc);Gd();pa[1375368]=10744384;var Wd=[],Mc=[],xf=[],Vd=[],Xb=!1,Wa=0,Jc=null,Bb=null;g.preloadedImages={};g.preloadedAudios={};var Na="a.out.wasm";Nd(Na)||(Na=xb(Na));g.asm=function(d,a,e){a.memory=Wb;a.table=new WebAssembly.Table({initial:221,maximum:221,element:"anyfunc"});a.__memory_base=
1024;a.__table_base=0;return tf(a)};var ka=[function(d){d!==ie&&(ie=d,document.body.style.cursor='url("'+t.cdn+"cursor"+d+'.gif"),auto')},function(){k("magicworkshopmenu").style.display="block";nb()},function(){xe()},function(d,a,e,c,b){d=xa[d];d.style.backgroundPosition=48*b+"px "+48*a+"px";e&&(d.className="");0<c&&(d.innerHTML=c)},function(d){C(d);qc(id,d);qc(jd,d);qc(kd,d);qc(ld,d)},function(){Ie()},function(){He()},function(){var g=ub.viewF32(),a=lf.viewF32();d.bindBuffer(d.ARRAY_BUFFER,kd);d.bufferSubData(d.ARRAY_BUFFER,
16*g[4],a)},function(){var g=ub.viewF32(),a=tc.viewF32();d.bindBuffer(d.ARRAY_BUFFER,id);d.bufferSubData(d.ARRAY_BUFFER,12*g[4],a)},function(d,a){setTimeout(r.removeAnim,d,a)},function(d,a,e){a:{for(var c=0,b=fa.length;c<b;c++){var f=fa[c];if(f.superID===e){e=f;break a}}e=void 0}d=Tc(d,a);e&&e.sendDirectly("channelMessage","nehhof",d)},function(d,a,e,c,b,f,g){ef(d,a,e,c,b,f,g)},function(d,a,e,c,b,f){ef(d,a,e,c,b,f)},function(){Ue()},function(d,a,e){xd(d,0,a,e)},function(d){C(d);t.superID==d?($a(l.ERR_SERVERKICK),
We()):(d=Re(d))&&d.end()},function(){L("returnmenu");k("oneplayertbody").innerHTML='<tr><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">-</button></td><td></td><td></td></tr>';for(var d=0,a=r.nkingdom()-1;d<a;d++)k("oneplayertbody").innerHTML+='<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>';k("addPlayer").onclick=og;k("removePlayer").onclick=pg},function(d,a,e,c,b){for(c=
c.toString(16);6>c.length;)c="0"+c;c="#"+c;af[b].style.background=c;lg[b].innerHTML=ya(ja(d,20));d=ng[b].getElementsByTagName("button")[0];d.iteam=b+1;d.onmousedown=bf;d.innerHTML=a;a=mg[b].getElementsByTagName("button")[0];a.iteam=b+1;a.onmousedown=cf;a.innerHTML=ua[e];e=document.createElement("input");e.type="color";e.iteam=b+1;e.value=c;af[b].appendChild(e);e.onchange=df},function(d,a){d&&(S.leftButton.className="");8*(d+1)<a&&(S.rightButton.className="")},function(d,a,e){ma.value=a;ma.max=e;mb.innerHTML=
a+"/"+e;ma.style.display="block";k("kingdom").innerHTML=d+" "+l.SELVIEW_UNITS;Oe()},function(){fd()},function(d,a,e){Ta(d,a,e)},function(d,a,e){Be(d,a,e)},function(d,a){d=hd(l[ha[d]],l[ha[a]]);k("msgs1").innerHTML+="<li>"+d+"</li>";pb()},function(d,a,e,c){wa||(d==Math.pow(2,31)-1&&(d="***"),a==Math.pow(2,31)-1&&(a="***"),e==Math.pow(2,31)-1&&(e="***"),c==Math.pow(2,31)-1&&(c="***"),le.innerHTML=d,me.innerHTML=a,ne.innerHTML=e,oe.innerHTML=c)},function(d,a){wa||(k("pop").innerHTML=d+"/"+a)},function(d,
a,e,c,b,f){var g=k("rndtable"),m=document.createElement("tr");g.appendChild(m);g=document.createElement("td");var p=document.createElement("select"),n=p;p.innerHTML='<option value="0">'+ua[0]+'</option><option value="1">'+ua[1]+'</option><option value="2">'+ua[2]+'</option><option value="3">'+ua[3]+"</option>";p.value=d;g.appendChild(p);m.appendChild(g);g=document.createElement("td");p=document.createElement("select");p.innerHTML=zc[d];p.value=a;p.rndid=f;p.onchange=rg;n.types=p;n.onchange=sg;g.appendChild(p);
m.appendChild(g);g=document.createElement("td");p=document.createElement("input");p.value=e;p.onchange=tg;p.type="number";p.rndid=f;g.appendChild(p);m.appendChild(g);g=document.createElement("td");d=document.createElement("label");d.className="container";a=document.createElement("input");a.type="checkbox";a.rndid=f;a.checked=c;a.onchange=ug;c=document.createElement("span");c.className="checkmark";d.appendChild(a);d.appendChild(c);g.appendChild(d);m.appendChild(g);c="<option value='"+(Math.pow(2,31)-
1)+"'>Capturable</option>";g=0;for(d=r.nkingdom();g<d;g++)a=g?ya(ja(r.empName(g),17)):l.MISC_NATURE3,c+='<option value="'+g+'">'+a+"</option>";g=document.createElement("td");p=document.createElement("select");p.innerHTML=c;p.rndid=f;p.value=b;p.onchange=vg;g.appendChild(p);m.appendChild(g);g=document.createElement("td");b=document.createElement("button");b.className="closeIcon";b.onclick=wg;b.rndid=f;g.appendChild(b);m.appendChild(g)},function(d){Ta(d)},function(d,a,e,c,b,f,g,n,p,q,r){g=c;if(k("showGameInfo")){c=
"<table><tbody>";d==Math.pow(2,31)-1&&(d="***");e==Math.pow(2,31)-1&&(e="***");a==Math.pow(2,31)-1&&(a="***");g==Math.pow(2,31)-1&&(g="***");b=[l.VIEWMSG_GOLD,d,l.MP_SETUPMAP_T_MAP_SIZE,p,l.VIEWMSG_WOOD,e,l.MP_SETUPMAP_T_TERRAIN,f,l.VIEWMSG_FOOD,a,l.INITIAL_PEASANTS,q,l.VIEWMSG_STONE,g,l.WATER,b,l.FREE_POP,r];f=b.length;for(p=0;p<f;p+=2)p%4||(p&&(c+="</tr>"),c+="<tr>"),c+="<td>"+b[p]+":</td><td>"+b[p+1]+"</td>";c+="</tbody></table>";k("showGameInfo").innerHTML=c}},function(d,a,e,c){$a(a&&l[ha[a]],
l[ha[d]],c,l[ha[e]])},function(){td();Zd()},function(){vc()},function(d,a,e,c){console.log(d,a,e,c)},function(d,a){Jb(Math.floor(d-k("tzar").width/2),Math.floor(a-k("tzar").height/2));Lb()},function(d){Be(d)},function(d,a,e,c,b,f){C(ja(d,20));k("custombody").innerHTML+="<tr>\n<td style='background:rgb("+c+","+b+","+f+')\' class="ucolor1"></td>\n<td class="username1">'+ya(ja(d,20))+'</td>\n<td style="display:none" class="race1">'+e+'</td>\n<td class="team1">'+a+"</td></tr>"},function(d,a,e,c,b,f,g,
k,p,l,n,q,r,t,w,x,A,C,D){se(d,a,e,c,b,f,g,k,p,l,n,q,r,t,w,x,A,C,D)},function(){fd()},function(d,a,e,c,b,f,h,k){var m="";f&&(m+="<span>"+l[ha[f]]+"</span>");h&&(m+="<span>"+l[ha[h]]+"</span>");C(k);if(k){m+='<span class="red">'+l.MISC_REQ3+": ";f=r.shapoint();f=new Int32Array(g.HEAPF32.buffer,f,k);for(h=0;h<k;h++)m+=l[ha[f[h]]],h+1<k&&(m+=", ");m+="</span>"}m+="<span>";d&&(m+=d+"<img class='resource' src='nehhon/gold.gif' /> ");a&&(m+=a+"<img class='resource' src='nehhon/wood.gif' /> ");e&&(m+=e+"<img class='resource' src='nehhon/food.gif' /> ");
c&&(m+=c+"<img class='resource' src='nehhon/stone.gif' /> ");m+="</span>";b&&(m+="<span class='shotcut'>"+String.fromCharCode(b).toUpperCase()+"</span>");Zc.innerHTML=m},function(d,a){Le=[d,a]},function(){d.getError()===d.CONTEXT_LOST_WEBGL&&(d=k("tzar").getContext("webgl2",{antialias:!1,alpha:!1}),C("restored"));if(!rd){var g=aa?"precision highp float;\nattribute vec3 a_position;\nattribute vec3 a_texCoord;\nattribute vec4 a_physic;\nattribute vec3 a_margins;\nattribute float a_step;\n\nuniform float kingdoms;\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D u_image1;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\n\nuniform float zMax;\nvarying highp vec2 vTextureCoord;\nvarying vec4 v_kcolor;\nvarying float height;\nvarying float rColor;\n\nvec4 superArray(highp float position) {\nhighp vec2 xy = vec2(mod(position,512.0) ,   floor(position/512.0) )/512.0;\nreturn (texture2D(u_image1, xy));\n}\n\nfloat delayr(float pos){\nhighp vec2 xy = vec2(mod(pos,128.0) ,   floor(pos/128.0) )/128.0;\nreturn (texture2D(delay, xy).r);\n}\n\n\nvoid main() {\n\n\n\n    highp float  x;\n    float t;\n\thighp float pos;\n    highp float jump=0.0;\n    pos=a_texCoord.x;\n\n   // pos=260840u/4u;\n\n\n\nvec4 imgInfo=superArray(pos);\n\nfloat frames=imgInfo[0];\nfloat fps=imgInfo[1];\nfloat dirs=imgInfo[2];\nfloat recolor=imgInfo[3];\n\nrColor=recolor;\n\n\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps>0.0){\njump=floor(t * fps*0.001);         \n}else{\n\n//fps=12.0;\n//jump=floor(t * fps*0.001);  \n\n\n\nfloat index=-fps;\n\nfloat spt= mod(t,delayr(frames-1.0+index));\nbool stop=false;\nfor(int i=0;i<55;i++){\nif(!stop){\njump=float(i);\nif(jump<frames) \nif(delayr(jump+index)>spt)\nstop=true;\n}\n\n}\n\n\n\n\n\n}\n\njump=mod(jump,frames)*2.0;\npos=(pos+jump);\n}\n}\n\npos+=1.0;\n   \n    vec4 coord = superArray(pos);\n    vec2 mxy=coord.xy;\n    highp vec2 txtcord = coord.zw;\n   // txtcord=vec2(0.0,0.0);\n    \n    vec2 sizes = superArray(pos+1.0).xy;\n    //sizes=vec2(50.0);\n    if(a_step==1.0||a_step==3.0){\n    mxy.x+=sizes.x;\n    txtcord.x+=sizes.x;\n    }\n\n    if(a_step==2.0||a_step==3.0){\n    mxy.y+=sizes.y;\n    txtcord.y+=sizes.y;\n    }\n\n\theight = sizes.y;\n\n\tfloat z=a_position.z;\n\n\n    \nif(a_margins.x!=0.0&&(a_step==1.0||a_step==3.0)){\nmxy.x+=a_margins.x-sizes.x;\n}\n\n\nif(a_margins.y!=0.0&&(a_step==2.0||a_step==3.0)){\nmxy.y+=a_margins.y-sizes.y;\n}\n\n\n\tif(z<0.0){\n\tz*=-1.0;\nif(miniMap<2) mxy*=0.0;\n\t}\n\n\n\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n\n    mxy.y+=physicY;\n\n\nif(miniMap!=0){\n\tz=0.0;\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\n   gl_Position = vec4((((a_position.xy+mxy) + u_translation) / u_resolution * 2.0 - 1.0) * vec2(zoom, -zoom), (z), 1.0);\n   vTextureCoord=txtcord;\n\n\nvec4 outColor=texture2D(colorArray,vec2(a_texCoord.z/64.0,0));\n//outColor=vec4(1.0);\n\nif(a_texCoord.z>=kingdoms) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n":
"#version 300 es\nprecision highp float;\n\nin vec3 a_position;\nin vec3 a_texCoord;\nin vec4 a_physic;\nin vec3 a_margins;\nin uint a_step;\n\nuniform float kingdoms;\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D u_image1;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\n\nuniform float zMax;\nout highp vec2 vTextureCoord;\nout vec4 v_kcolor;\nout float height;\nflat out int rColor;\n\nvec4 superArray(in highp int position) {\n     return(texelFetch(u_image1, ivec2(\t\t(position%512)\t\t,\tposition/512\t), 0));\n}\n\nvoid main() {\n\n\n\n    highp float  x;\n    float t;\n\thighp int pos;\n    int jump=0;\n    pos=int(a_texCoord.x);\n   // pos=260840u/4u;\n\n\n\nvec4 imgInfo=superArray(pos);\n\nint frames=int(imgInfo[0]);\nfloat fps=imgInfo[1];\nfloat dirs=imgInfo[2];\nfloat recolor=imgInfo[3];\n\nrColor=int(recolor);\n\n\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps>0.0){\njump=int(floor(t * fps*0.001));         \n}else{\n\n\nint index=int(-fps);\n\nfloat spt= mod(t,texelFetch(delay, ivec2(frames-1+index, 0), 0).r);\n\nfor(jump=0;jump<frames;jump++)\nif(texelFetch(delay, ivec2(jump+index, 0), 0).r>spt){ \nbreak;\n}\n\n\n\n\n}\n\njump=(jump%frames)*2;\npos=(pos+jump);\n}\n}\n\npos+=1;\n   \n    vec4 coord = superArray(pos);\n    vec2 mxy=coord.xy;\n    vec2 txtcord = coord.zw/512.0;\n\n    \n    vec2 sizes = superArray(pos+1).xy;\n\n    if(a_step==1u||a_step==3u){\n    mxy.x+=sizes.x;\n    txtcord.x+=sizes.x/512.0;\n    }\n\n    if(a_step==2u||a_step==3u){\n    mxy.y+=sizes.y;\n    txtcord.y+=sizes.y/512.0;\n    }\n\n\n\n\theight = sizes.y/512.0;\n\n\tfloat z=a_position.z;\n\n\n    \nif(a_margins.x!=0.0&&(a_step==1u||a_step==3u)){\nmxy.x+=a_margins.x-sizes.x;\n}\n\n\nif(a_margins.y!=0.0&&(a_step==2u||a_step==3u)){\nmxy.y+=a_margins.y-sizes.y;\n}\n\n\n\tif(z<0.0){\n\tz*=-1.0;\nif(miniMap<2) mxy*=0.0;\n\t}\n\n\n\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n\n    mxy.y+=physicY;\n\n\nif(miniMap!=0){\n\tz=0.0;\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\n   gl_Position = vec4((((a_position.xy+mxy) + u_translation) / u_resolution * 2.0 - 1.0) * vec2(zoom, -zoom), (z), 1.0);\n   vTextureCoord=txtcord;\n\nvec4 outColor=texelFetch(colorArray, ivec2(a_texCoord.z, 0), 0);\n\nif(a_texCoord.z>=kingdoms) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n";
var a=d.createShader(d.VERTEX_SHADER);d.shaderSource(a,g);d.compileShader(a);var e=aa?"precision highp float;\n\nuniform sampler2D lightmap;\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nvarying vec4 v_kcolor;\nvarying highp vec2 vTextureCoord;\nvarying float height;\nvarying float rColor;\n\nvec4 getPixel(){\nhighp vec2 txtFinal=vTextureCoord;\nif(txtFinal.x>=512.0){\ntxtFinal.y+=height*floor((txtFinal.x)/512.0);\ntxtFinal.x=mod(txtFinal.x,512.0);\n}\n\n//if(txtFinal.x<1.0) return vec4(1.0,0.0,0.0,1.0);\n//if(txtFinal.y<1.0) return vec4(1.0,0.0,0.0,1.0);\n\n\n\ntxtFinal.x=txtFinal.x+floor(mod(txtFinal.y,8.0))*512.0;\n\n//if(txtFinal.x<1.0) return vec4(0.0,1.0,0.0,1.0);\n\ntxtFinal.y=floor(txtFinal.y/8.0);\n\ntxtFinal/=4096.0;\n\nif(txtFinal.y<1.0)\nreturn texture2D(img_common[0], txtFinal);\nelse if(txtFinal.y<2.0)\nreturn texture2D(img_common[1], txtFinal);\nelse if(txtFinal.y<3.0)\nreturn texture2D(img_common[2], txtFinal);\nelse if(txtFinal.y<4.0)\nreturn texture2D(img_common[3], txtFinal);\nelse if(txtFinal.y<5.0)\nreturn texture2D(img_common[4], txtFinal);\nelse if(txtFinal.y<6.0)\nreturn texture2D(img_common[5], txtFinal);\nelse if(txtFinal.y<7.0)\nreturn texture2D(img_common[6], txtFinal);\n}\n\n\nvoid main() {\n\n\nif(miniMap==0){\n\n\n\n\nvec4 color=getPixel();\n\n\n\n//vec4 color=vec4(1.0);\n \n\nif(color.a<0.5) discard;\n\n\nif(rColor==1.0 &&color.r==color.g&&color.r==color.b){\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0)\n{\ncolor*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n}\n\n\n\n\nvec4 light=vec4(1.0);\n\ngl_FragColor=color*light;\n}else{\n\nif(v_kcolor.a>1.0)\ngl_FragColor=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\ngl_FragColor=v_kcolor;\n}\n\n}":
"#version 300 es\nprecision highp float;\n\n\n\nuniform sampler2D lightmap;\nuniform vec2 u_resolution;\nprecision highp sampler2DArray;\nuniform sampler2DArray img_common;\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nin vec4 v_kcolor;\nin highp vec2 vTextureCoord;\nin float height;\nflat in int rColor;\nout vec4 COLOR;\n\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\n\nvoid main() {\n\n\nif(miniMap==0){\n\n\n\n\nvec2 txtFinal=vTextureCoord;\n\nif(txtFinal.x>=1.0){\ntxtFinal.y+=height*floor(txtFinal.x);\n}\n\n\nvec4 color=texture(img_common, vec3(txtFinal, int(txtFinal.y)));\n \n\nif(color.a<0.5) discard;\n\n\nif(rColor==1 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)\n&&v4no(color,95)\n&&v4no(color,96)\n&&v4no(color,98)\n&&v4no(color,101)\n&&v4no(color,103)\n&&v4no(color,107)\n&&v4no(color,108)\n&&v4no(color,109)\n&&v4no(color,118)\n&&v4no(color,121)\n&&v4no(color,124)\n&&v4no(color,134)\n&&v4no(color,135)\n&&v4no(color,139)\n&&v4no(color,148)\n&&v4no(color,150)\n&&v4no(color,151)\n&&v4no(color,156)\n&&v4no(color,163)\n&&v4no(color,164)\n&&v4no(color,165)\n&&v4no(color,166)\n&&v4no(color,167)\n&&v4no(color,173)\n&&v4no(color,177)\n&&v4no(color,180)\n&&v4no(color,183)\n&&v4no(color,185)\n&&v4no(color,186)\n&&v4no(color,195)\n&&v4no(color,196)\n&&v4no(color,198)\n&&v4no(color,200)\n&&v4no(color,203)\n&&v4no(color,210)\n&&v4no(color,214)\n&&v4no(color,215)\n&&v4no(color,223)\n&&v4no(color,225)\n&&v4no(color,230)\n&&v4no(color,231)\n&&v4no(color,241)\n&&v4no(color,251)\n&&v4no(color,252)\n&&v4no(color,253)\n&&v4no(color,254)\n){\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0)\n{\ncolor*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n}\n\n\n\n\nvec4 light=vec4(1.0);\nlight = texture(lightmap, gl_FragCoord.xy/u_resolution)/u_ambient+vec4(1.0,1.0,1.0,0.0)*u_ambient;\n\nCOLOR=color*light;\n}else{\n\nif(v_kcolor.a>1.0)\nCOLOR=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\nCOLOR=v_kcolor;\n}\n\n}";
g=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(g,e);d.compileShader(g);G=d.createProgram();d.attachShader(G,a);d.attachShader(G,g);d.linkProgram(G);d.useProgram(G);(a=d.getShaderInfoLog(a))&&console.log("Shader compiler log1: "+a);(a=d.getShaderInfoLog(g))&&console.log("Shader compiler log1: "+a);g=aa?"precision highp float;\nattribute vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap==1){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}":
"#version 300 es\nprecision highp float;\nin vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap==1){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}";a=d.createShader(d.VERTEX_SHADER);d.shaderSource(a,g);d.compileShader(a);e=aa?"precision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform vec2 u_translation;\nuniform vec2 u_light;\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D lightmap;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n\nuniform sampler2D u_image1;\n\nvec4 superArray(highp float position) {\nhighp vec2 xy = vec2(mod(position,512.0) ,   floor(position/512.0) )/512.0;\nreturn (texture2D(u_image1, xy));\n}\n\nvec4 sptexture3D(vec2 txtFinal,float height) {\n\nif(txtFinal.x>=512.0){\ntxtFinal.y+=height*floor((txtFinal.x)/512.0);\ntxtFinal.x=mod(txtFinal.x,512.0);\n}\n\n//if(txtFinal.x<1.0) return vec4(1.0,0.0,0.0,1.0);\n//if(txtFinal.y<1.0) return vec4(1.0,0.0,0.0,1.0);\n\n\n\ntxtFinal.x=txtFinal.x+floor(mod(txtFinal.y,8.0))*512.0;\n\n//if(txtFinal.x<1.0) return vec4(0.0,1.0,0.0,1.0);\n\ntxtFinal.y=floor(txtFinal.y/8.0);\n\ntxtFinal/=4096.0;\n\nif(txtFinal.y<1.0)\nreturn texture2D(img_common[0], txtFinal);\nelse if(txtFinal.y<2.0)\nreturn texture2D(img_common[1], txtFinal);\nelse if(txtFinal.y<3.0)\nreturn texture2D(img_common[2], txtFinal);\nelse if(txtFinal.y<4.0)\nreturn texture2D(img_common[3], txtFinal);\nelse if(txtFinal.y<5.0)\nreturn texture2D(img_common[4], txtFinal);\nelse if(txtFinal.y<6.0)\nreturn texture2D(img_common[5], txtFinal);\nelse if(txtFinal.y<7.0)\nreturn texture2D(img_common[6], txtFinal);\n\n}\n\nvoid main() {\nvec4 color;\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n\nif(miniMap==1){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\n\nvec4 coords=texture2D(img_data,xy/(mapSize*32.0));\n\n\n//gl_FragColor=vec4(coords[0]);\n\n\nvec2 xy32=xy/32.0;\nvec2 floorxy32=floor(xy32);\nvec2 xyr=xy32-floorxy32;\nfloat pos;\n\nvec4 nrgb;\n\nif(coords.q!=0.0) nrgb=sptexture3D((coords.pq*512.0)+xyr*32.0,448.0);\n\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) \npos=(coords[1]);\nelse\npos=(coords[0]);\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,0.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\n\nvec4 frames=superArray(pos);\n\nfloat fps=frames[1];\n\nfloat jump=mod(floor(u_fps * fps*0.001),(frames[0])) * 2.0+1.0;  \njump=1.0;\nvec4 info=superArray(pos+jump);\n\n\n\n\n\nvec2 wh=superArray(pos+1.0+jump).xy;\n\nvec2 nxy=vec2(mod(xy.x,wh.x),mod(xy.y,wh.y));\n\n\ncolor=sptexture3D((info.pq+nxy),wh.t);\n//color=sptexture3D(vec2(500.0,240.0),50.0);\n\n//if(miniMap==0) light = (texture(lightmap, gl_FragCoord.xy/u_resolution)/u_ambient+1.0);\n\n}\n\n\nvec4 tlight=sptexture3D(  (u_light+vec2(mod(xy.x,512.0),mod(xy.y,512.0))),512.0    );\n\n\ngl_FragColor=color*u_ambient*(vec4(.5)+tlight*.75);\n}":
"#version 300 es\nprecision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nprecision highp sampler2DArray;\nuniform sampler2DArray img_common;\nuniform vec4 u_ambient;\n\nuniform vec2 u_translation;\nuniform vec2 u_light;\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D lightmap;\nout vec4 COLOR;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n\n\nuniform sampler2D u_image1;\nvec4 superArray(in highp int position) {\n     return(texelFetch(u_image1, ivec2(\t\t(position%512)\t\t,\tposition/512\t), 0));\n}\n\nvec4 sptexture3D(in vec2 coords,float h) {\nif(coords.x>=1.0){\ncoords.y+=h*floor(coords.x)/512.0;\n}\n    return(\ttexture(img_common, vec3(coords,int(coords.y)))\t);\n}\n\nvoid main() {\nvec4 color;\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n\nif(miniMap==1){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\n\nvec4 coords=texture(img_data,xy/(mapSize*32.0));\nvec2 xy32=xy/32.0;\nvec2 floorxy32=floor(xy32);\nvec2 xyr=xy32-floorxy32;\nhighp int pos;\n\nvec4 nrgb;\n\nif(coords.q!=0.0) nrgb=sptexture3D((coords.pq)+xyr/16.0,448.0);\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) \npos=int(coords[1]);\nelse\npos=int(coords[0]);\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,0.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\n\nvec4 frames=superArray(pos);\n\nfloat fps=frames[1];\n\nhighp int jump=(int(floor(u_fps * fps*0.001))%int(frames[0])) * 2+1;  \n//jump=1;\nvec4 info=superArray(pos+jump);\n\n\n\n\n\nvec2 wh=superArray(pos+1+jump).xy;\n\nvec2 nxy=vec2(mod(xy.x,wh.x),mod(xy.y,wh.y));\n\n\ncolor=sptexture3D((info.pq+nxy)/512.0,wh.t);\n\n\n//if(miniMap==0) light = (texture(lightmap, gl_FragCoord.xy/u_resolution)/u_ambient+1.0);\n\n}\n\n\nvec4 tlight=sptexture3D(  (u_light+vec2(mod(xy.x,512.0),mod(xy.y,512.0)))/512.0,512.0    );\n\n\n\n//\nCOLOR=color*u_ambient*(vec4(.5)+tlight*.75);\n}";
g=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(g,e);d.compileShader(g);I=d.createProgram();d.attachShader(I,a);d.attachShader(I,g);d.linkProgram(I);(a=d.getShaderInfoLog(a))&&console.log("Shader1 compiler log T: "+a);(a=d.getShaderInfoLog(g))&&console.log("Shader compiler log T: "+a)}a=d.getAttribLocation(G,"a_position");g=d.getAttribLocation(G,"a_texCoord");var c=d.getAttribLocation(G,"a_step");e=d.getAttribLocation(G,"a_physic");var b=d.getAttribLocation(G,"a_margins");d.useProgram(I);var f=
d.getUniformLocation(I,"minimapMargin");Ob=d.getUniformLocation(I,"u_translation");nd=d.getUniformLocation(I,"u_resolution");md=d.getUniformLocation(I,"u_fps");ue=d.getUniformLocation(I,"u_ambient");rb=d.getUniformLocation(I,"zoom");var h=d.getUniformLocation(I,"mx"),l=d.getUniformLocation(I,"mapSize");d.getUniformLocation(I,"borderCoords");d.getUniformLocation(I,"waterBorder");oc=d.getUniformLocation(I,"miniMap");d.uniform1i(oc,0);d.uniform2fv(Ob,[0,0]);d.uniform1f(md,-1);d.uniform1f(rb,1);d.uniform1f(h,
-t.mx);d.uniform1f(l,r.mapWidth());d.uniform2fv(d.getUniformLocation(I,"u_light"),Le);q.editor?d.uniform2fv(f,[0,-60]):d.uniform2fv(f,[-4,-31]);f=d.getAttribLocation(I,"a_position");h=new Uint32Array(256);h[68]=1;h[95]=1;h[96]=1;h[98]=1;h[101]=1;h[103]=1;h[107]=1;h[108]=1;h[109]=1;h[118]=1;h[121]=1;h[124]=1;h[134]=1;h[135]=1;h[139]=1;h[148]=1;h[150]=1;h[151]=1;h[156]=1;h[163]=1;h[164]=1;h[165]=1;h[166]=1;h[167]=1;h[173]=1;h[177]=1;h[180]=1;h[183]=1;h[185]=1;h[186]=1;h[195]=1;h[196]=1;h[198]=1;h[200]=
1;h[203]=1;h[210]=1;h[214]=1;h[215]=1;h[223]=1;h[225]=1;h[230]=1;h[231]=1;h[241]=1;h[251]=1;h[252]=1;h[253]=1;h[254]=1;od=Me();sb(od);h=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,h);d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),d.STATIC_DRAW);d.enableVertexAttribArray(f);d.vertexAttribPointer(f,2,d.FLOAT,!1,0,0);sb(null);d.useProgram(G);d.bindBuffer(d.ARRAY_BUFFER,null);pd=Me();sb(pd);Fe=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,Fe);d.enableVertexAttribArray(c);
aa?(pc=d.getExtension("ANGLE_instanced_arrays"),d.vertexAttribPointer(c,1,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),d.STATIC_DRAW),pc.vertexAttribDivisorANGLE(c,0)):(d.vertexAttribIPointer(c,1,d.UNSIGNED_BYTE,0,0),d.bufferData(d.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),d.STATIC_DRAW),d.vertexAttribDivisor(c,0));c=r.mapWidth();Ce=Math.floor(c*c/2);id=Pb(g,3);jd=Pb(a,3);kd=Pb(e,4);ld=Pb(b,3);sb(null);nc=d.getUniformLocation(G,"u_resolution");ve=d.getUniformLocation(G,
"u_ambient");Nb=d.getUniformLocation(G,"u_translation");qb=d.getUniformLocation(G,"zoom");Ee=d.getUniformLocation(G,"now");Mb=d.getUniformLocation(G,"miniMap");a=d.getUniformLocation(G,"zMax");d.uniform1f(a,q.zMax);d.uniform1i(Mb,0);d.useProgram(G);a=Yb(r.sharedDelayID(),1323);q.daylength||(q.daylength=2880);q.initialhour||(q.initialhour=12);g=0;for(e=sa.length;g<e;g++).55>sa[g]&&(sa[g]=.55);he();d.uniform1f(qb,1);d.uniform2fv(Nb,[0,0]);eb=d.createFramebuffer();rc.changed=0;window.addEventListener("resize",
rc,!1);rc();d.blendEquation(d.FUNC_ADD);d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA);d.disable(d.DITHER);d.disable(d.BLEND);performance.now();if(!rd){d.uniform1f(d.getUniformLocation(G,"kingdoms"),r.nkingdom());b=Zb(r.getColorTexture(),4*(r.nkingdom()+7));d.activeTexture(d.TEXTURE4);e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);if(aa){c=new Uint8Array(4*Math.pow(64,2));for(g=0;g<c.length;g++)c[g]=b[g];d.texImage2D(d.TEXTURE_2D,0,d.RGBA,64,64,0,d.RGBA,d.UNSIGNED_BYTE,c);d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);C(b,c)}else d.texImage2D(d.TEXTURE_2D,0,d.RGBA,b.length/4,1,0,d.RGBA,d.UNSIGNED_BYTE,b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_WRAP_T,d.REPEAT);d.bindTexture(d.TEXTURE_2D,null);d.bindTexture(d.TEXTURE_2D,e);d.uniform1i(d.getUniformLocation(G,"colorArray"),4);d.activeTexture(d.TEXTURE3);e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);if(aa){d.getExtension("OES_texture_float");b=new Float32Array(65536);for(g=0;g<b.length;g++)b[4*g]=a[g];d.texImage2D(d.TEXTURE_2D,0,d.RGBA,128,128,0,d.RGBA,d.FLOAT,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);
d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST)}else d.texImage2D(d.TEXTURE_2D,0,d.R16F,a.length,1,0,d.RED,d.FLOAT,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT);d.bindTexture(d.TEXTURE_2D,null);d.bindTexture(d.TEXTURE_2D,e);d.uniform1i(d.getUniformLocation(G,
"delay"),3);d.activeTexture(d.TEXTURE2);De=d.createTexture();d.bindTexture(d.TEXTURE_2D,De);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT);d.clearColor(0,0,0,1)}d.bindFramebuffer(d.FRAMEBUFFER,eb);eb.width=1;eb.height=
1;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,vb,0);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.bindFramebuffer(d.FRAMEBUFFER,null);new Float32Array(8);r.setupGL();d.enable(d.DEPTH_TEST);d.depthFunc(d.LEQUAL);Z.fp1000=1E3;Z.delta=0;Z.now=0;Z.frameCount=0;d.bindTexture(d.TEXTURE_2D,vb);rd=X.setup=!0},function(d,a,e,c,b,f,g,l,n){e=ya(ja(e,17));a="#"+a.toString(16);var h=k("edpltbl").getElementsByTagName("input"),m=8*d;h[m].onchange=xg;h[m+1].onchange=yg;h[m+2].oninput=
Ac;h[m+3].oninput=Ac;h[m+4].oninput=Ac;h[m+5].oninput=Ac;h[m].value=a;h[m+1].value=e;h[m+2].value=b;h[m+3].value=f;h[m+4].value=g;h[m+5].value=l;h[m+6].value=c;h[m+7].value=n;h[m+2].res=0;h[m+3].res=1;h[m+4].res=2;h[m+5].res=3;h[m+6].onchange=zg;h[m+6].checked=c;h[m+7].onchange=Ag;h[m].team=d+1;h[m+1].team=d+1;h[m+2].team=d+1;h[m+3].team=d+1;h[m+4].team=d+1;h[m+5].team=d+1;h[m+6].team=d+1;h[m+7].team=d+1}];Mc.push({func:function(){Bg()}});var ta={last:0,caught:[],infos:{},deAdjust:function(d){if(!d||
ta.infos[d])return d;for(var a in ta.infos)for(var e=+a,c=ta.infos[e].adjusted,b=c.length,f=0;f<b;f++)if(c[f]===d)return e;return d},addRef:function(d){d&&ta.infos[d].refcount++},decRef:function(d){if(d){var a=ta.infos[d];Dc(0<a.refcount);a.refcount--;0!==a.refcount||a.rethrown||(a.destructor&&g.dynCall_vi(a.destructor,d),delete ta.infos[d],Qd(d))}},clearRef:function(d){d&&(ta.infos[d].refcount=0)}},P={buffers:[null,[],[]],printChar:function(d,a){var e=P.buffers[d];0===a||10===a?((1===d?Nc:Fa)(Hd(e,
0)),e.length=0):e.push(a)},varargs:0,get:function(d){P.varargs+=4;return pa[P.varargs-4>>2]},getStr:function(){var d=P.get();return d?Hd(ib,d,void 0):""},get64:function(){var d=P.get();P.get();return d},getZero:function(){P.get()}};Sd=xc?function(){var d=process.hrtime();return 1E3*d[0]+d[1]/1E6}:"undefined"!==typeof dateNow?dateNow:"object"===typeof performance&&performance&&"function"===typeof performance.now?function(){return performance.now()}:Date.now;var mf=g.asm({},{abort:ea,setTempRet0:function(d){jb=
d},getTempRet0:function(){return jb},__ZSt18uncaught_exceptionv:Pd,___cxa_find_matching_catch:Cb,___cxa_free_exception:Qd,___gxx_personality_v0:function(){},___resumeException:function(d){ta.last||(ta.last=d);throw d;},___setErrNo:function(d){g.___errno_location&&(pa[g.___errno_location()>>2]=d);return d},___syscall140:function(d,a){P.varargs=a;try{return P.getStreamFromFD(),P.get(),P.get(),P.get(),P.get(),0}catch(e){return ea(e),-e.errno}},___syscall146:function(d,a){P.varargs=a;try{var e=P.get(),
c=P.get(),b=P.get();for(a=d=0;a<b;a++){for(var f=pa[c+8*a>>2],g=pa[c+(8*a+4)>>2],k=0;k<g;k++)P.printChar(e,ib[f+k]);d+=g}return d}catch(p){return ea(p),-p.errno}},___syscall54:function(d,a){P.varargs=a;return 0},___syscall6:function(d,a){P.varargs=a;try{return P.getStreamFromFD(),0}catch(e){return ea(e),-e.errno}},_emscripten_asm_const_i:function(d){return ka[d]()},_emscripten_asm_const_idd:function(d,a,e){return ka[d](a,e)},_emscripten_asm_const_idddd:function(d,a,e,c,b){return ka[d](a,e,c,b)},_emscripten_asm_const_ii:function(d,
a){return ka[d](a)},_emscripten_asm_const_iii:function(d,a,e){return ka[d](a,e)},_emscripten_asm_const_iiii:function(d,a,e,c){return ka[d](a,e,c)},_emscripten_asm_const_iiiii:function(d,a,e,c,b){return ka[d](a,e,c,b)},_emscripten_asm_const_iiiiii:function(d,a,e,c,b,f){return ka[d](a,e,c,b,f)},_emscripten_asm_const_iiiiiii:function(d,a,e,c,b,f,g){return ka[d](a,e,c,b,f,g)},_emscripten_asm_const_iiiiiiii:function(d,a,e,c,b,f,g,k){return ka[d](a,e,c,b,f,g,k)},_emscripten_asm_const_iiiiiiiii:function(d,
a,e,c,b,f,g,k,l){return ka[d](a,e,c,b,f,g,k,l)},_emscripten_asm_const_iiiiiiiiii:function(d,a,e,c,b,f,g,k,l,n){return ka[d](a,e,c,b,f,g,k,l,n)},_emscripten_asm_const_iiiiiiiiiiii:function(d,a,e,c,b,f,g,k,l,n,q,r){return ka[d](a,e,c,b,f,g,k,l,n,q,r)},_emscripten_asm_const_iiiiiiiiiiiiiiiiiiii:function(d,a,e,c,b,f,g,k,l,n,q,r,t,v,w,x,A,C,D,G){return ka[d](a,e,c,b,f,g,k,l,n,q,r,t,v,w,x,A,C,D,G)},_emscripten_get_heap_size:Rd,_emscripten_get_now:Sd,_emscripten_memcpy_big:function(d,a,e){ib.set(ib.subarray(a,
a+e),d)},_emscripten_resize_heap:function(d){var a=Rd();if(2147418112<d)return!1;for(a=Math.max(a,16777216);a<d;)a=536870912>=a?Ra(2*a,65536):Math.min(Ra((3*a+2147483648)/4,65536),2147418112);if(!Td(a))return!1;Gd();return!0},abortOnCannotGrowMemory:function(d){ea("OOM")},emscripten_realloc_buffer:Td,flush_NO_FILESYSTEM:function(){var d=g._fflush;d&&d(0);d=P.buffers;d[1].length&&P.printChar(1,10);d[2].length&&P.printChar(2,10)},tempDoublePtr:5501488,DYNAMICTOP_PTR:5501472},la);g.asm=mf;var Bg=g.__GLOBAL__sub_I_nh_cpp=
function(){return g.asm.__GLOBAL__sub_I_nh_cpp.apply(null,arguments)};g.__Z10EDchangeAIjb=function(){return g.asm.__Z10EDchangeAIjb.apply(null,arguments)};g.__Z10Uint8Arrayj=function(){return g.asm.__Z10Uint8Arrayj.apply(null,arguments)};g.__Z10canvasSizejj=function(){return g.asm.__Z10canvasSizejj.apply(null,arguments)};g.__Z10changePagei=function(){return g.asm.__Z10changePagei.apply(null,arguments)};g.__Z10changeRaceji=function(){return g.asm.__Z10changeRaceji.apply(null,arguments)};g.__Z10changeTeamji=
function(){return g.asm.__Z10changeTeamji.apply(null,arguments)};g.__Z10checkStockv=function(){return g.asm.__Z10checkStockv.apply(null,arguments)};g.__Z10getTerrainv=function(){return g.asm.__Z10getTerrainv.apply(null,arguments)};g.__Z10mouseEnterj=function(){return g.asm.__Z10mouseEnterj.apply(null,arguments)};g.__Z10movtablexev=function(){return g.asm.__Z10movtablexev.apply(null,arguments)};g.__Z10nameSharedPjS_j=function(){return g.asm.__Z10nameSharedPjS_j.apply(null,arguments)};g.__Z10pidkingdomj=
function(){return g.asm.__Z10pidkingdomj.apply(null,arguments)};g.__Z10removeAnimjj=function(){return g.asm.__Z10removeAnimjj.apply(null,arguments)};g.__Z10searchUnitth=function(){return g.asm.__Z10searchUnitth.apply(null,arguments)};g.__Z10setupOnlIDj=function(){return g.asm.__Z10setupOnlIDj.apply(null,arguments)};g.__Z10tempstraddv=function(){return g.asm.__Z10tempstraddv.apply(null,arguments)};g.__Z10touchStartjj=function(){return g.asm.__Z10touchStartjj.apply(null,arguments)};g.__Z10unitActionj=
function(){return g.asm.__Z10unitActionj.apply(null,arguments)};g.__Z10userConfigj=function(){return g.asm.__Z10userConfigj.apply(null,arguments)};g.__Z11EDchangeResjjj=function(){return g.asm.__Z11EDchangeResjjj.apply(null,arguments)};g.__Z11Uint16Arrayj=function(){return g.asm.__Z11Uint16Arrayj.apply(null,arguments)};g.__Z11Uint32Arrayt=function(){return g.asm.__Z11Uint32Arrayt.apply(null,arguments)};g.__Z11changeColorjj=function(){return g.asm.__Z11changeColorjj.apply(null,arguments)};g.__Z11createItemsv=
function(){return g.asm.__Z11createItemsv.apply(null,arguments)};g.__Z11getBufferIDv=function(){return g.asm.__Z11getBufferIDv.apply(null,arguments)};g.__Z11movtableADDjjjj=function(){return g.asm.__Z11movtableADDjjjj.apply(null,arguments)};g.__Z11setupEditorv=function(){return g.asm.__Z11setupEditorv.apply(null,arguments)};g.__Z11setupRandomi=function(){return g.asm.__Z11setupRandomi.apply(null,arguments)};g.__Z11showrndobjsv=function(){return g.asm.__Z11showrndobjsv.apply(null,arguments)};g.__Z11synchroHashv=
function(){return g.asm.__Z11synchroHashv.apply(null,arguments)};g.__Z12EDchangeNamej=function(){return g.asm.__Z12EDchangeNamej.apply(null,arguments)};g.__Z12EDchangeTeamjj=function(){return g.asm.__Z12EDchangeTeamjj.apply(null,arguments)};g.__Z12bufferMarginfffj=function(){return g.asm.__Z12bufferMarginfffj.apply(null,arguments)};g.__Z12deletePlayerj=function(){return g.asm.__Z12deletePlayerj.apply(null,arguments)};g.__Z12executeOrderjj=function(){return g.asm.__Z12executeOrderjj.apply(null,arguments)};
g.__Z12setupIMGinfojjjjjjjjjjjjjjjjjjj=function(){return g.asm.__Z12setupIMGinfojjjjjjjjjjjjjjjjjjj.apply(null,arguments)};g.__Z12setupKingdomjjjjhbjjj=function(){return g.asm.__Z12setupKingdomjjjjhbjjj.apply(null,arguments)};g.__Z12setupVersionj=function(){return g.asm.__Z12setupVersionj.apply(null,arguments)};g.__Z12unitObjetivej=function(){return g.asm.__Z12unitObjetivej.apply(null,arguments)};g.__Z13EDchangeColorjj=function(){return g.asm.__Z13EDchangeColorjj.apply(null,arguments)};g.__Z13configTerrainv=
function(){return g.asm.__Z13configTerrainv.apply(null,arguments)};g.__Z13randomTerrainv=function(){return g.asm.__Z13randomTerrainv.apply(null,arguments)};g.__Z13readSavegame0j=function(){return g.asm.__Z13readSavegame0j.apply(null,arguments)};g.__Z13setupOnlTablej=function(){return g.asm.__Z13setupOnlTablej.apply(null,arguments)};g.__Z13sharedDelayIDv=function(){return g.asm.__Z13sharedDelayIDv.apply(null,arguments)};g.__Z13sharedFloatIDv=function(){return g.asm.__Z13sharedFloatIDv.apply(null,arguments)};
g.__Z13startMovementv=function(){return g.asm.__Z13startMovementv.apply(null,arguments)};g.__Z13tempointeraddj=function(){return g.asm.__Z13tempointeraddj.apply(null,arguments)};g.__Z13updateRNDtypejj=function(){return g.asm.__Z13updateRNDtypejj.apply(null,arguments)};g.__Z14customMapTablev=function(){return g.asm.__Z14customMapTablev.apply(null,arguments)};g.__Z14editorKingdomsv=function(){return g.asm.__Z14editorKingdomsv.apply(null,arguments)};g.__Z14finishSavegamev=function(){return g.asm.__Z14finishSavegamev.apply(null,
arguments)};g.__Z14onlineKingdomsv=function(){return g.asm.__Z14onlineKingdomsv.apply(null,arguments)};g.__Z14randomKingdomsi=function(){return g.asm.__Z14randomKingdomsi.apply(null,arguments)};g.__Z14setupResourcesjjjjt=function(){return g.asm.__Z14setupResourcesjjjjt.apply(null,arguments)};g.__Z15configRandomMapv=function(){return g.asm.__Z15configRandomMapv.apply(null,arguments)};g.__Z15getColorTexturev=function(){return g.asm.__Z15getColorTexturev.apply(null,arguments)};g.__Z15setupOnlineGamePjS_j=
function(){return g.asm.__Z15setupOnlineGamePjS_j.apply(null,arguments)};g.__Z15unitSearchValidjjj=function(){return g.asm.__Z15unitSearchValidjjj.apply(null,arguments)};g.__Z15updateRNDnumberjj=function(){return g.asm.__Z15updateRNDnumberjj.apply(null,arguments)};g.__Z16setupTranslationjj=function(){return g.asm.__Z16setupTranslationjj.apply(null,arguments)};g.__Z16updateRNDeach256jj=function(){return g.asm.__Z16updateRNDeach256jj.apply(null,arguments)};g.__Z16updateRNDkingdomjj=function(){return g.asm.__Z16updateRNDkingdomjj.apply(null,
arguments)};g.__Z3rndi=function(){return g.asm.__Z3rndi.apply(null,arguments)};g.__Z4nAIsv=function(){return g.asm.__Z4nAIsv.apply(null,arguments)};g.__Z4testjj=function(){return g.asm.__Z4testjj.apply(null,arguments)};g.__Z5empXYv=function(){return g.asm.__Z5empXYv.apply(null,arguments)};g.__Z5nhlenv=function(){return g.asm.__Z5nhlenv.apply(null,arguments)};g.__Z5test2jj=function(){return g.asm.__Z5test2jj.apply(null,arguments)};g.__Z5test3jj=function(){return g.asm.__Z5test3jj.apply(null,arguments)};
g.__Z6amountv=function(){return g.asm.__Z6amountv.apply(null,arguments)};g.__Z6dbgspdj=function(){return g.asm.__Z6dbgspdj.apply(null,arguments)};g.__Z6gcyclev=function(){return g.asm.__Z6gcyclev.apply(null,arguments)};g.__Z6mapLocv=function(){return g.asm.__Z6mapLocv.apply(null,arguments)};g.__Z6mwMorei=function(){return g.asm.__Z6mwMorei.apply(null,arguments)};g.__Z6mwiconv=function(){return g.asm.__Z6mwiconv.apply(null,arguments)};g.__Z6nfolenv=function(){return g.asm.__Z6nfolenv.apply(null,arguments)};
g.__Z6nhcompv=function(){return g.asm.__Z6nhcompv.apply(null,arguments)};g.__Z6onlADDjjjjb=function(){return g.asm.__Z6onlADDjjjjb.apply(null,arguments)};g.__Z6pause0v=function(){return g.asm.__Z6pause0v.apply(null,arguments)};g.__Z6prelddv=function(){return g.asm.__Z6prelddv.apply(null,arguments)};g.__Z6rdnh19mmmmmmjj=function(){return g.asm.__Z6rdnh19mmmmmmjj.apply(null,arguments)};g.__Z6runKeyjb=function(){return g.asm.__Z6runKeyjb.apply(null,arguments)};g.__Z6sndNfov=function(){return g.asm.__Z6sndNfov.apply(null,
arguments)};g.__Z6strOnlv=function(){return g.asm.__Z6strOnlv.apply(null,arguments)};g.__Z6trraddv=function(){return g.asm.__Z6trraddv.apply(null,arguments)};g.__Z6unitXFj=function(){return g.asm.__Z6unitXFj.apply(null,arguments)};g.__Z6unitYFj=function(){return g.asm.__Z6unitYFj.apply(null,arguments)};g.__Z6updownji=function(){return g.asm.__Z6updownji.apply(null,arguments)};g.__Z7crtStxtm=function(){return g.asm.__Z7crtStxtm.apply(null,arguments)};g.__Z7delTexsv=function(){return g.asm.__Z7delTexsv.apply(null,
arguments)};g.__Z7empNamej=function(){return g.asm.__Z7empNamej.apply(null,arguments)};g.__Z7getPagev=function(){return g.asm.__Z7getPagev.apply(null,arguments)};g.__Z7mouseUpiijb=function(){return g.asm.__Z7mouseUpiijb.apply(null,arguments)};g.__Z7nh19addj=function(){return g.asm.__Z7nh19addj.apply(null,arguments)};g.__Z7onldataj=function(){return g.asm.__Z7onldataj.apply(null,arguments)};g.__Z7plreadyv=function(){return g.asm.__Z7plreadyv.apply(null,arguments)};g.__Z7readSVGmmb=function(){return g.asm.__Z7readSVGmmb.apply(null,
arguments)};g.__Z7resume0v=function(){return g.asm.__Z7resume0v.apply(null,arguments)};g.__Z7setupGLv=function(){return g.asm.__Z7setupGLv.apply(null,arguments)};g.__Z8atlasLocv=function(){return g.asm.__Z8atlasLocv.apply(null,arguments)};g.__Z8gstartedv=function(){return g.asm.__Z8gstartedv.apply(null,arguments)};g.__Z8liveChatj=function(){return g.asm.__Z8liveChatj.apply(null,arguments)};g.__Z8mapWidthv=function(){return g.asm.__Z8mapWidthv.apply(null,arguments)};g.__Z8mnameaddv=function(){return g.asm.__Z8mnameaddv.apply(null,
arguments)};g.__Z8mwSelectj=function(){return g.asm.__Z8mwSelectj.apply(null,arguments)};g.__Z8mwamounti=function(){return g.asm.__Z8mwamounti.apply(null,arguments)};g.__Z8nkingdomv=function(){return g.asm.__Z8nkingdomv.apply(null,arguments)};g.__Z8onlCountv=function(){return g.asm.__Z8onlCountv.apply(null,arguments)};g.__Z8preSetupv=function(){return g.asm.__Z8preSetupv.apply(null,arguments)};g.__Z8savegamev=function(){return g.asm.__Z8savegamev.apply(null,arguments)};g.__Z8shapointv=function(){return g.asm.__Z8shapointv.apply(null,
arguments)};g.__Z8touchEndjj=function(){return g.asm.__Z8touchEndjj.apply(null,arguments)};g.__Z8userKickj=function(){return g.asm.__Z8userKickj.apply(null,arguments)};g.__Z9RNDdeletej=function(){return g.asm.__Z9RNDdeletej.apply(null,arguments)};g.__Z9addRNDobjv=function(){return g.asm.__Z9addRNDobjv.apply(null,arguments)};g.__Z9boolArrayt=function(){return g.asm.__Z9boolArrayt.apply(null,arguments)};g.__Z9closeRoomv=function(){return g.asm.__Z9closeRoomv.apply(null,arguments)};g.__Z9createMapi=
function(){return g.asm.__Z9createMapi.apply(null,arguments)};g.__Z9ginfonamejj=function(){return g.asm.__Z9ginfonamejj.apply(null,arguments)};g.__Z9mouseDowniij=function(){return g.asm.__Z9mouseDowniij.apply(null,arguments)};g.__Z9mouseMoveii=function(){return g.asm.__Z9mouseMoveii.apply(null,arguments)};g.__Z9onLimits2ii=function(){return g.asm.__Z9onLimits2ii.apply(null,arguments)};g.__Z9randomMapv=function(){return g.asm.__Z9randomMapv.apply(null,arguments)};g.__Z9setupGamejjjjjjjjjjjjjj=function(){return g.asm.__Z9setupGamejjjjjjjjjjjjjj.apply(null,
arguments)};g.__Z9setupInfojjjjjjjjjjcchhhhhhbbPjhbPbS_hthS_hth=function(){return g.asm.__Z9setupInfojjjjjjjjjjcchhhhhhbbPjhbPbS_hthS_hth.apply(null,arguments)};g.__Z9setupOdinj=function(){return g.asm.__Z9setupOdinj.apply(null,arguments)};g.__Z9setupZoomf=function(){return g.asm.__Z9setupZoomf.apply(null,arguments)};g.__Z9shareNamej=function(){return g.asm.__Z9shareNamej.apply(null,arguments)};g.__Z9touchMovejj=function(){return g.asm.__Z9touchMovejj.apply(null,arguments)};g.___errno_location=function(){return g.asm.___errno_location.apply(null,
arguments)};g._emscripten_replace_memory=function(){return g.asm._emscripten_replace_memory.apply(null,arguments)};var vf=g._free=function(){return g.asm._free.apply(null,arguments)};g._llvm_bswap_i32=function(){return g.asm._llvm_bswap_i32.apply(null,arguments)};g._main=function(){return g.asm._main.apply(null,arguments)};var wf=g._malloc=function(){return g.asm._malloc.apply(null,arguments)};g._memcpy=function(){return g.asm._memcpy.apply(null,arguments)};g._memset=function(){return g.asm._memset.apply(null,
arguments)};g._sbrk=function(){return g.asm._sbrk.apply(null,arguments)};g.establishStackSpace=function(){return g.asm.establishStackSpace.apply(null,arguments)};var Md=g.stackAlloc=function(){return g.asm.stackAlloc.apply(null,arguments)};g.stackRestore=function(){return g.asm.stackRestore.apply(null,arguments)};g.stackSave=function(){return g.asm.stackSave.apply(null,arguments)};g.dynCall_ii=function(){return g.asm.dynCall_ii.apply(null,arguments)};g.dynCall_iidiiii=function(){return g.asm.dynCall_iidiiii.apply(null,
arguments)};g.dynCall_iii=function(){return g.asm.dynCall_iii.apply(null,arguments)};g.dynCall_iiii=function(){return g.asm.dynCall_iiii.apply(null,arguments)};g.dynCall_iiiii=function(){return g.asm.dynCall_iiiii.apply(null,arguments)};g.dynCall_jiji=function(){return g.asm.dynCall_jiji.apply(null,arguments)};g.dynCall_v=function(){return g.asm.dynCall_v.apply(null,arguments)};g.dynCall_vi=function(){return g.asm.dynCall_vi.apply(null,arguments)};g.dynCall_vii=function(){return g.asm.dynCall_vii.apply(null,
arguments)};g.dynCall_viii=function(){return g.asm.dynCall_viii.apply(null,arguments)};g.asm=mf;kb.prototype=Error();kb.prototype.constructor=kb;Bb=function a(){g.calledRun||Kc();g.calledRun||(Bb=a)};g.callMain=function(a){a=a||[];Xb||(Xb=!0,Sa(Mc));var d=a.length+1,c=Md(4*(d+1));pa[c>>2]=Fd(g.thisProgram);for(var b=1;b<d;b++)pa[(c>>2)+b]=Fd(a[b-1]);pa[(c>>2)+d]=0;try{var f=g._main(d,c,0);if(!g.noExitRuntime||0!==f){if(!g.noExitRuntime&&(Lc=!0,g.onExit))g.onExit(f);g.quit(f,new kb(f))}}catch(h){h instanceof
kb||("SimulateInfiniteLoop"==h?g.noExitRuntime=!0:((a=h)&&"object"===typeof h&&h.stack&&(a=[h,h.stack]),Fa("exception thrown: "+a),g.quit(1,h)))}finally{}};g.run=Kc;g.abort=ea;if(g.preInit)for("function"==typeof g.preInit&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();var Ud=!0;g.noInitialRun&&(Ud=!1);g.noExitRuntime=!0;Kc();var Gc=!1,r={};Vb=Za;var l,wd,tc,lf,ub,Bd=function(){Gc=!0;for(var a=g.asm,e=Object.keys(a),c=e.length,b="inspector71017 newUnit radar createMap falseunit synchroHash rnd setupRandom randomTerrain unitMovement test setupInfo setupKingdom shapoint Uint16Array setupTech setupRequirements boolArray AIobjetive test2 searchUnit killUnit investigateTech AIprocess setupResources unitWorking movtablexe test3 unitParameter setupGL bufferColor getBufferID setupIMGinfo atlasLoc randomMap executeOrder shiftONOFF IMGdata Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove gManaMax setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms changeTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen rdnh19 crtStxt configTerrain delTexs gName touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeAI EDchangeName EDchangeRes unitSearchValid setupVersion".split(" "),
f=0,h=b.length;f<h;f++)for(var l=b[f],n=0;n<c;n++){var q=e[n];if(-1<q.indexOf(l)){r[b[f]]=a[q];break}}wd=new Ia(r.shapoint(),1024);ub=new Ia(r.sharedFloatID(),5);tc=new Ia(r.sharedFloatID(),3);lf=new Ia(r.sharedFloatID(),4);Ua(r.userConfig(Ub()),17,t.name||"Guest");r.setupVersion(t.versionInt);a={antialias:!1,alpha:!0,desynchronized:!0};localStorage.webgl&&"2"!=localStorage.webgl||(d=k("tzar").getContext("webgl2",a));d||(d=k("tzar").getContext("webgl",a),aa=!0);t.gl=d;Bd.waiting&&vc();Vb()},Ua=function(a,
d,c){a=ja(a,d);for(var b=0;b<d;b++)a[b]=c.charCodeAt(b)};Bd.waiting=!1;g.postRun[0]=Bd;if(window.indexedDB){var Bc=window.indexedDB.open("nh2019",t.versionInt),U;Bc.onsuccess=function(a){U=Bc.result;Sc("basic",function(a){a=a.target.result;for(var c=ae(),b=0;b<c.length;b++)if(-1===a.indexOf(t.cdn+c[b])){a=document.createElement("li");k("topLinks").appendChild(a);l&&(a.innerHTML=l.SAVE_GAME_CONTENT);a.onclick=be;a.id="savelocal";break}})};Bc.onupgradeneeded=function(a){U=Bc.result;C(U);U.objectStoreNames.contains("basic")&&
U.deleteObjectStore("basic");U.objectStoreNames.contains("maps")||U.createObjectStore("maps",{keyPath:"id",autoIncrement:!0});U.objectStoreNames.contains("mapsBlobs")||U.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0});U.objectStoreNames.contains("basic")||U.createObjectStore("basic",{keyPath:"url"})}}var $d=function(a){U&&(U.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){})},fg=function(a,d){var c=U.transaction(["maps"],"readwrite");c.objectStore("maps").add(a).onsuccess=
function(){C("done")};c=U.transaction(["mapsBlobs"],"readwrite");c.objectStore("mapsBlobs").add(d).onsuccess=function(){C("done")}},Sc=function(a,d){if(U){var c=U.transaction([a],"readonly");if(c.objectStore(a).getAllKeys)a=c.objectStore(a).getAllKeys();else return d({target:{result:[]}});a.onsuccess=d}else d({target:{result:[]}})},qg=function(a,d,c){U.transaction([a],"readonly").objectStore(a).get(c).onsuccess=function(a){d(a.target.result.buffer)}},Cg=function(a){a=a.target.result;var d=a.length;
if(d){var c=k("mapcache");c.innerHTML='<tr style="font-size:23px"><td>Name</td><td>Date</td><td>'+l.PLAYED_TIME+"</td></tr>";for(--d;-1<d;d--){var b=a[d],f=document.createElement("tr");f.cid=b.id;var g=new Date(b.date),n=g.getHours(),p="0"+g.getMinutes();g.getSeconds();var q=g.getDate(),r=g.getMonth()+1;g=g.getFullYear();n=n+":"+p.substr(-2)+" &nbsp; &nbsp;"+q+"/"+r+"/"+g;f.onclick=Cd;f.innerHTML="<td>"+(b.name||"savegame")+"</td><td>"+n+"</td><td>"+fe(b.played)+"</td>";c.appendChild(f)}C(a)}},Cd=
function(){var a=this.cid;U.transaction(["mapsBlobs"],"readwrite").objectStore("mapsBlobs").get(a).onsuccess=Cd.step2};Cd.step2=function(a){a=a.target.result;var d=new FileReader;d.onload=gf;d.readAsArrayBuffer(a)};var wa=!1,A=function(a){k(a).style.display="none"},L=function(a){k(a).style.display="block"},we=function(a){q.editor&&(a=parseInt(k("brushSize").value)+a,a>k("brushSize").max?k("brushSize").value=k("brushSize").max:1>a?k("brushSize").value=1:k("brushSize").value=a)},qe=function(){C(this);
this.parentElement.parentElement.style.display="none";oa()},re={objAction:{id:"edobjAction",msg:"",func:function(){J.active.type="attack";L("selectionEvents");A("eventZone");L("unitListDiv2");k("byButton2").style.display="inline-block";k("byButton1").style.display="inline-block";J.active.zone=void 0}},objZone:{id:"edobjAction",msg:0,func:function(){J.active.type="zone";J.active.to.length=0;A("selectionEvents");k("eventZone").style.display="inline-block";A("byButton2");A("byButton1");A("unitListDiv2");
nf()}}},hc=function(a){if(a)A("mapRulesWindow"),oa(),hc.actived=!0;else if(hc.actived){L("mapRulesWindow");Da();a=~~((void 0)[0]/32);var d=~~((void 0)[1]/32),c=~~((void 0)[9]/32),b=~~((void 0)[10]/32);if(a<c)var f=a,g=c;else f=c,g=a;if(d<b)var k=d,l=b;else k=b,l=d;J.active.zone||(J.active.zone=[]);J.active.zone.put([f,k,g,l]);C(a,d,c,b);nf();hc.actived=!1}},nf=function(){var a=k("zoneList");a.innerHTML="";var d=J.active.zone;if(d)for(var c=d.length,b=0;b<c;b++){var f=d[b],g=document.createElement("div"),
l=document.createElement("button");l.innerHTML="x";l.obj=f;l.pObj=d;l.spObj=!0;l.onclick=Dd;g.innerHTML=f[0]+"x "+f[1]+"y -> "+f[2]+"x "+f[3]+"y";g.appendChild(l);a.appendChild(g)}},of={moving:1},Nf=function(){of[this.value]?(A("byButton2"),A("byButton1"),A("unitListDiv2")):(L("unitListDiv2"),k("byButton2").style.display="inline-block",k("byButton1").style.display="inline-block");J.active.type=this.value},Of=function(){of[this.value]?(A("toButton2"),A("toButton1"),A("unitListDivAction2")):(L("unitListDivAction2"),
k("toButton2").style.display="inline-block",k("toButton1").style.display="inline-block");ba.active.type=this.value},qa=function(a){if(a)A("mapRulesWindow"),oa(),qa.actived=a.button;else if(qa.actived){L("mapRulesWindow");Da();a=qa.actived.spType.active;a="unitListDiv2"==qa.actived.id||"unitListDivAction2"==qa.actived.id?a.to:a.list;for(var d={},c=0,b=a.length;c<b;c++)d[a[c]]=1;c=0;for(b=Ib.length;c<b;c++)d[Ib[c]]||a.put(Ib[c]);Rb(qa.actived,a);qa.actived=!1}},Rb=function(a,d){a.innerHTML="";for(var c=
0,b=d.length;c<b;c++){var e=document.createElement("div"),g=document.createElement("button");g.onclick=Dd;g.innerHTML="x";g.pObj=d;g.spObj=!0;g.obj=d[c];e.appendChild(g);a.appendChild(e)}},ia=function(){ia.active&&(ia.active.className="");ia.active=this;this.className="spSelect";for(var a=this.parentElement.getElementsByTagName("section"),d=0,c=a.length;d<c;d++)a[d].style.display="none";this.sdiv.style.display="block"},da=function(){var a=this.editorRule;a.deleted||(L("mapEvent"),L("mapActions"),
A("eventOptions"),da.active&&(da.div.className=""),this.className="spSelect",da.active=a,da.div=this,gc(a,"eventLayout"),gc(a,"actionLayout"),J.div&&A(J.div),J.div1=void 0)},J=function(){var a=this.editorRule;a.deleted||(L("eventOptions"),J.div1&&(J.div1.className=""),this.className="spSelect",J.active=a,k("selectionEvents").value=a.type,J.div1=this,k("eventOptions").value=a.name,J.div=re[a.name].id,L(J.div),Rb(k("unitListDiv"),a.list),Rb(k("unitListDiv2"),a.to))},ba=function(){var a=this.editorRule;
a.deleted||(L("actionOptions"),ba.div1&&(ba.div1.className=""),this.className="spSelect",ba.active=a,k("selectionActions").value=a.type,ba.div1=this,k("actionOptions").value=a.name,ba.div="ed"+a.name,L(ba.div),Rb(k("unitListDivAction"),a.list),Rb(k("unitListDivAction2"),a.to))},gc=function(a,d){k(d).innerHTML="";if("eventLayout"==d){a=a.events;var c=J,b=da.active.events}else a=a.actions,c=ba,b=da.active.actions;for(var e=0,g=a.length;e<g;e++){var l=document.createElement("div");Cc(l,a[e],c,b);k(d).appendChild(l)}},
Lf=function(){var a=da.active,d={name:"objAction",list:[],to:[],type:"attack"};a.events.put(d);var c=document.createElement("div");Cc(c,d,J,a.events);k("eventLayout").appendChild(c);if(J.div1)J.div1.onclick()},Mf=function(){var a=da.active,d={name:"objOrder",list:[],to:[],type:"move"};a.actions.put(d);var c=document.createElement("div");Cc(c,d,ba,a.actions);k("actionLayout").appendChild(c);if(ba.div1)ba.div1.onclick()},Cc=function(a,d,c,b){a.innerHTML=d.events?d.name:l[d.name];a.onclick=c;a.editorRule=
d;c=document.createElement("button");c.innerHTML="x";c.obj=d;c.pObj=b;c.onclick=Dd;a.appendChild(c)},Kf=function(){q.rules||(q.rules=[]);var a={name:"Rule"+q.rules.length,events:[],actions:[]};q.rules.put(a);var d=document.createElement("div");Cc(d,a,da,q.rules);k("rulist").appendChild(d)},Dd=function(){this.pObj.quit(this.obj);this.obj.deleted=!0;this.parentElement.parentElement.removeChild(this.parentElement);if(!this.spObj)if(this.pObj!==q.rules)da.div.onclick();else A("mapEvent"),A("mapActions")},
Ac=function(){parseInt(this.value)?r.EDchangeRes(this.team,parseInt(this.value),this.res):(this.value="\u221e",r.EDchangeRes(this.team,Math.pow(2,31)-1,this.res))},Jf=function(){},xg=function(){r.EDchangeColor(this.team,parseInt(this.value.substr(1),16))},yg=function(){var a=17;this.value.length<a&&(a=this.value.length);for(var d=wd.viewU32(),c=0;17>c;c++)d[c]=0;for(c=0;c<a;c++)d[c]=this.value.charCodeAt(c);r.EDchangeName(this.team)},zg=function(){r.EDchangeAI(this.team,this.checked)},Ag=function(){r.EDchangeTeam(this.team,
parseInt(this.value))},sg=function(){this.types.innerHTML=zc[this.value];this.types.value=""},rg=function(){r.updateRNDtype(this.rndid,this.value)},vg=function(){r.updateRNDkingdom(this.rndid,this.value)},tg=function(){r.updateRNDnumber(this.rndid,this.value)},ug=function(){r.updateRNDeach256(this.rndid,this.checked)},wg=function(){r.RNDdelete(this.rndid);Ed()},Dg=function(){r.addRNDobj();Ed()},Ed=function(){k("rndtable").innerHTML='<tr style="height: 57px"><td>Type</td><td>Object</td><td>Amount</td><td>Each 256\u00b2</td><td>'+
l.MISC_KINGDOM3+"</td><td></td></tr>";r.showrndobjs();var a=document.createElement("tr"),d=document.createElement("td"),c=document.createElement("button");c.innerHTML=l.ADD;c.onclick=Dg;d.appendChild(c);a.appendChild(d);k("rndtable").appendChild(a)},Eg=function(a,d){for(var c=0;c<a.length;c++)k(a[c]).style.cssText=d},Qa=function(){var a=parseInt(this.min),d=parseInt(this.max),c=parseInt(this.value);c>d?this.value=this.max:c<a&&(this.value=this.min)},zc,Xe=function(){k("mapconfiguration")||Tb("mapconfiguration");
k("mapconfiguration").style.display="block";Da();if(""==k("mapconfiguration").innerHTML){zc=["","","",""];for(var a=0;4>a;a++){for(var d="",c=0,b=r.nfolen();c<b;c++){var f=r.ginfoname(c,a);f&&(d+='<option value="'+c+'">'+l[ha[f]].toUpperCase()+"</option>")}zc[a]=d}a="";d=Object.keys(ab);c=0;for(b=d.length;c<b;c++)f=ab[d[c]],a+='<option value="'+f.id+'" '+(f.id==localStorage.terrain?"selected":"")+">"+f.name+"</option>";c="";"true"==localStorage.infinity&&(c="checked");k("mapconfiguration").innerHTML=
'<button id="closeButton1" class="closeIcon"></button><table>\n<tbody>\n<tr><td>'+l.MP_SETUPMAP_T_MAP_SIZE+'</td><td><input id="mapwidth" type="number" value="'+localStorage.mapx+'" step="32" min="0" max="2048" /></td></tr>\n<tr><td><hr></td></tr>\n<tr><td>'+l.MP_SETUPMAP_T_ST_RES+"</td></tr>\n<tr><td><hr></td></tr>\n<tr><td>"+l.MISC_INF3+'</td><td><label class="container">\n  <input id="infiniteValue" type="checkbox" '+c+'>\n  <span class="checkmark"></span>\n</label></td></tr>\n<tr><td>'+l.VIEWMSG_GOLD+
'</td><td><input id="goldValue" type="number" value="'+localStorage.goldRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+l.VIEWMSG_WOOD+'</td><td><input id="woodValue" type="number" value="'+localStorage.woodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+l.VIEWMSG_FOOD+'</td><td><input id="foodValue" type="number" value="'+localStorage.foodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+l.VIEWMSG_STONE+'</td><td><input id="stoneValue" type="number" value="'+
localStorage.stoneRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td><hr></td></tr>\n<tr><td>'+l.MP_SETUPMAP_T_TERRAIN+'</td><td><select name="terrain" id="terrainSelect">'+a+"</select></td></tr>\n<tr><td>"+l.MP_SETUPMAP_T_MAP_TYPE+'</td><td>\n<select name="terrain" id="terrainTypeSelect">\n<option value="0">'+l.MP_SETUPMAP_M_TYPE_5+'</option>\n<option value="1">'+l.MP_SETUPMAP_M_TYPE_4+'</option>\n<option value="2">'+l.MP_SETUPMAP_M_TYPE_3+'</option>\n<option value="3">'+l.MP_SETUPMAP_M_TYPE_2+
'</option>\n<option value="4">'+l.MP_SETUPMAP_M_TYPE_1+'</option>\n<option value="5">'+l.MP_SETUPMAP_M_TYPE_0+"</option>\n</select></td></tr>\n<tr><td>"+l.INITIAL_PEASANTS+'</td><td><input type="number" value="'+localStorage.peons+'" id="peonValue" min="0"/></td></tr>\n<tr><td>'+l.FREE_POP+'</td><td><input type="number" value="'+localStorage.freePop+'" id="freePopValue" min="0" /></td></tr>\n<tr><td>'+l.SP_SETUPMAP_T_POPLIMIT+'</td><td><input type="number" value="'+localStorage.maxPop+'" id="maxPopValue" min="100" max="500" /></td></tr>\n</select>\n</td>\n</tr>\n</tbody>\n</table>\n<hr style="margin: 25px">\n<table>\n<tbody id="rndtable">\n</tbody>';
Ed();k("terrainTypeSelect").value=localStorage.terrainRND;k("maxPopValue").oninput=Qa;k("peonValue").oninput=Qa;k("freePopValue").oninput=Qa;k("mapwidth").oninput=Qa;k("goldValue").oninput=Qa;k("woodValue").oninput=Qa;k("foodValue").oninput=Qa;k("stoneValue").oninput=Qa;Eg(["goldValue","woodValue","foodValue","stoneValue"],"width: 158px");k("infiniteValue").onchange=function(){var a=this.checked;k("goldValue").disabled=a;k("stoneValue").disabled=a;k("woodValue").disabled=a;k("foodValue").disabled=
a};k("infiniteValue").onchange();k("closeButton1").onclick=function(){q.online&&hb();k("mapconfiguration").style.display="none";oa()}}};k("returnmenu").onclick=Ya;var Fg=function(){C(this,this.checked);localStorage[this.localProp]=this.checked},pf=function(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.localProp&&(a=fb(a));t[this.localProp]=a;localStorage[this.localProp]=a},Hc={Multiplayer:wb,RandomMap:ff,MapEditor:function(a){},CustomMap:function(){""==k("CustomMap").innerHTML&&
(k("CustomMap").innerHTML="<h2>"+l.SINGLESCR_LOAD.split("| ")[0]+'</h2>\n<input id="mapload" type="file" />\n<label for="mapload" id="maploadlabel">Choose a file</label>\n<table id="mapcache"></table>\n<div id="customMapcont" style="display:none">\n<table class="players" id="customaptable">\n<tbody id="custombody">\n</tbody>\n</table>\n<button style="margin-left:40px" id="startCustom" class="start startButton">'+l.MP_MPLAYER_PLAY+'</button>\n\n<button style="margin-left:40px" id="closeCustom" class="start">'+
l.GENERAL_CLOSE+"</button>\n</div>",k("closeCustom").onclick=function(){A("customMapcont");k("maploadlabel").style.display="inline-block";k("mapcache").style.display="table"},k("startCustom").onclick=function(){A("customMapcont");k("closeCustom").onclick();vc()},k("mapload").accept=".tzared",k("mapload").onchange=function(a){a=k("mapload").files[0];C(a);a.name.split(".");var d=new FileReader;d.onload=gf;d.readAsArrayBuffer(a)});L("returnmenu");U&&(U.transaction(["maps"],"readwrite").objectStore("maps").getAll().onsuccess=
Cg)},Settings:function(){var a=k("Settings");if(""==a.innerHTML){var d=document.createElement("h2");d.innerHTML=l.MP_MPLAYER_SETTINGS;a.appendChild(d);d=document.createElement("div");var c=document.createElement("span");c.innerHTML=l.COLOUR;d.appendChild(c);var b=document.createElement("input");b.type="color";b.value=localStorage.color;b.onchange=pf;b.localProp="color";b.style.backgroundColor=localStorage.color;d.appendChild(b);c=document.createElement("span");c.innerHTML=l.MP_SEARCH_T_PL_NAME;d.appendChild(c);
b=document.createElement("input");b.type="text";b.value=Se(localStorage.name);b.onchange=pf;b.localProp="name";d.appendChild(b);c=document.createElement("span");c.innerHTML=l.LANGUAGE;d.appendChild(c);c=document.createElement("select");c.innerHTML='<option value="en">English</option>\n<option value="es">Espa\u00f1ol</option>\n<option value="it">Italiano</option>\n<option value="pt">Portugu\u00eas</option>\n<option value="pl">Polski</option>\n<option value="cz">\u010ce\u0161tina</option>\n<option value="de">Deutsch</option>\n<option value="ru">\u0420\u0443\u0441\u0441\u043a\u0438\u0439</option>\n<option value="bg">\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438</option>\n';
c.value=t.langstr;c.onchange=function(){localStorage.language=this.value;location.href=""};d.appendChild(c);c=document.createElement("span");c.innerHTML=l.AUTOFULLSCREEN;d.appendChild(c);var f=document.createElement("label");f.className="container";c=document.createElement("span");c.className="checkmark";b=document.createElement("input");b.type="checkbox";b.checked="true"==localStorage.fullscreen?!0:!1;b.onchange=Fg;b.localProp="fullscreen";f.appendChild(b);f.appendChild(c);d.appendChild(f);c=document.createElement("span");
c.innerHTML="GPU";d.appendChild(c);c.style.marginTop="65px";c=document.createElement("select");c.innerHTML='<option value="1">WebGL 1</option>\n<option value="2">WebGL 2 (recommended)</option>\n';c.value=aa?1:2;c.onchange=function(){localStorage.webgl=this.value;location.href=""};d.appendChild(c);a.appendChild(d)}L("returnmenu")},About:function(){var a=k("About");""==a.innerHTML&&(a.innerHTML='<div style="text-align:center;    user-select: text;"><div class="svgnehhon" style="background-repeat: no-repeat;height:342px;background-position: center;"></div>\nFully programmed by Donov from <a href="https://nehhon.com" target="_blank">nehhon</a><p>\n<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url" target="_blank"><img src="nehhon/donate.gif" /></a><p>\nContact:</p>\n<a href=\'mailto:webmaster@nehhon.com\' target="_blank">webmaster@nehhon.com</a> <br> <a href="https://twitter.com/TzaredGame" target="_blank">@TzaredGame</a>\n<p>Graphics, sound and game concept (Tzar) by Haemimont</p>\n<hr>\n<p style="margin-bottom:40px;">Special thanks to:</p>\n<div>\n<a href="https://www.crazygames.com/c/io" target="_blank">CRAZYGAMES.COM</a>\n<a href="https://www.gameflare.com/strategy-games/" target="_blank">GAMEFLARE.COM</a><p>\n<img style="max-width:422px" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODc0LjMgMzkzLjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDg3NC4zIDM5My43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6I0ZGRkZGRjt9LnN0MXtmaWxsOiNGMzgwMjA7fS5zdDJ7ZmlsbDojRkFBRTQwO308L3N0eWxlPjxnPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03OTAuNiwyNzEuOWMtMy40LDAtNi4xLTIuNy02LjEtNi4xYzAtMy4zLDIuNy02LjEsNi4xLTYuMWMzLjMsMCw2LjEsMi43LDYuMSw2LjFDNzk2LjcsMjY5LjEsNzkzLjksMjcxLjksNzkwLjYsMjcxLjkgTTc5MC42LDI2MC45Yy0yLjcsMC00LjksMi4yLTQuOSw0LjljMCwyLjcsMi4yLDQuOSw0LjksNC45YzIuNywwLDQuOS0yLjIsNC45LTQuOUM3OTUuNSwyNjMuMSw3OTMuMywyNjAuOSw3OTAuNiwyNjAuOSBNNzkzLjcsMjY5aC0xLjRsLTEuMi0yLjNoLTEuNnYyLjNoLTEuM3YtNi43aDMuMmMxLjQsMCwyLjMsMC45LDIuMywyLjJjMCwxLTAuNiwxLjctMS40LDJMNzkzLjcsMjY5eiBNNzkxLjMsMjY1LjVjMC41LDAsMS0wLjMsMS0xYzAtMC44LTAuNC0xLTEtMWgtMnYyTDc5MS4zLDI2NS41TDc5MS4zLDI2NS41eiIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTU1LjEsMjU5LjEgMTcwLjcsMjU5LjEgMTcwLjcsMzAxLjYgMTk3LjgsMzAxLjYgMTk3LjgsMzE1LjIgMTU1LjEsMzE1LjIgIi8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTIxMy45LDI4Ny4zdi0wLjJjMC0xNi4xLDEzLTI5LjIsMzAuMy0yOS4yczMwLjEsMTIuOSwzMC4xLDI5djAuMmMwLDE2LjEtMTMsMjkuMi0zMC4zLDI5LjJDMjI2LjcsMzE2LjMsMjEzLjksMzAzLjQsMjEzLjksMjg3LjMgTTI1OC41LDI4Ny4zdi0wLjJjMC04LjEtNS44LTE1LjEtMTQuNC0xNS4xYy04LjUsMC0xNC4yLDYuOS0xNC4yLDE1djAuMmMwLDguMSw1LjgsMTUuMSwxNC4zLDE1LjFDMjUyLjgsMzAyLjMsMjU4LjUsMjk1LjQsMjU4LjUsMjg3LjMiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjkzLjQsMjkwLjZ2LTMxLjVoMTUuOHYzMS4yYzAsOC4xLDQuMSwxMS45LDEwLjMsMTEuOXMxMC4zLTMuNywxMC4zLTExLjV2LTMxLjZoMTUuOHYzMS4xYzAsMTguMS0xMC4zLDI2LTI2LjMsMjZDMzAzLjQsMzE2LjIsMjkzLjQsMzA4LjIsMjkzLjQsMjkwLjYiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzY5LjQsMjU5LjFIMzkxYzIwLDAsMzEuNywxMS41LDMxLjcsMjcuN3YwLjJjMCwxNi4yLTExLjgsMjguMi0zMiwyOC4yaC0yMS4zTDM2OS40LDI1OS4xTDM2OS40LDI1OS4xeiBNMzkxLjMsMzAxLjRjOS4zLDAsMTUuNS01LjEsMTUuNS0xNC4ydi0wLjJjMC05LTYuMi0xNC4yLTE1LjUtMTQuMkgzODV2MjguNUgzOTEuM3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjQ0NS4zLDI1OS4xIDQ5MC4yLDI1OS4xIDQ5MC4yLDI3Mi43IDQ2MC44LDI3Mi43IDQ2MC44LDI4Mi4zIDQ4Ny40LDI4Mi4zIDQ4Ny40LDI5NS4yIDQ2MC44LDI5NS4yIDQ2MC44LDMxNS4yIDQ0NS4zLDMxNS4yICIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNTExLjgsMjU5LjEgNTI3LjMsMjU5LjEgNTI3LjMsMzAxLjYgNTU0LjUsMzAxLjYgNTU0LjUsMzE1LjIgNTExLjgsMzE1LjIgIi8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTU5NS4xLDI1OC43aDE1bDIzLjksNTYuNWgtMTYuN2wtNC4xLTEwaC0yMS42bC00LDEwaC0xNi4zTDU5NS4xLDI1OC43eiBNNjA4LjgsMjkzLjFsLTYuMi0xNS45bC02LjMsMTUuOUg2MDguOHoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjU0LDI1OS4xaDI2LjVjOC42LDAsMTQuNSwyLjIsMTguMyw2LjFjMy4zLDMuMiw1LDcuNSw1LDEzLjF2MC4yYzAsOC42LTQuNiwxNC4zLTExLjUsMTcuMmwxMy40LDE5LjZoLTE4bC0xMS4zLTE3aC02Ljh2MTdINjU0TDY1NCwyNTkuMUw2NTQsMjU5LjF6IE02NzkuOCwyODZjNS4zLDAsOC4zLTIuNiw4LjMtNi42di0wLjJjMC00LjQtMy4yLTYuNi04LjQtNi42aC0xMC4yVjI4Nkw2NzkuOCwyODZMNjc5LjgsMjg2eiIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzI2LjIsMjU5LjEgNzcxLjMsMjU5LjEgNzcxLjMsMjcyLjMgNzQxLjYsMjcyLjMgNzQxLjYsMjgwLjggNzY4LjUsMjgwLjggNzY4LjUsMjkzLjEgNzQxLjYsMjkzLjEgNzQxLjYsMzAyIDc3MS43LDMwMiA3NzEuNywzMTUuMiA3MjYuMiwzMTUuMiAiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTIxLjEsMjkzLjljLTIuMiw0LjktNi44LDguNC0xMi44LDguNGMtOC41LDAtMTQuMy03LjEtMTQuMy0xNS4xVjI4N2MwLTguMSw1LjctMTUsMTQuMi0xNWM2LjQsMCwxMS4zLDMuOSwxMy4zLDkuM2gxNi40Yy0yLjYtMTMuNC0xNC40LTIzLjMtMjkuNi0yMy4zYy0xNy4zLDAtMzAuMywxMy4xLTMwLjMsMjkuMnYwLjJjMCwxNi4xLDEyLjgsMjksMzAuMSwyOWMxNC44LDAsMjYuNC05LjYsMjkuNC0yMi40TDEyMS4xLDI5My45TDEyMS4xLDI5My45eiIvPjxnPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzUyLjksMTY5LjYgNzEwLDE0NSA3MDIuNiwxNDEuOCA1MjcuMSwxNDMgNTI3LjEsMjMyLjEgNzUyLjksMjMyLjEgIi8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTY3NC44LDIyMy45YzIuMS03LjIsMS4zLTEzLjgtMi4yLTE4LjdjLTMuMi00LjUtOC42LTcuMS0xNS4xLTcuNGwtMTIzLjEtMS42Yy0wLjgsMC0xLjUtMC40LTEuOS0xYy0wLjQtMC42LTAuNS0xLjQtMC4zLTIuMmMwLjQtMS4yLDEuNi0yLjEsMi45LTIuMmwxMjQuMi0xLjZjMTQuNy0wLjcsMzAuNy0xMi42LDM2LjMtMjcuMmw3LjEtMTguNWMwLjMtMC44LDAuNC0xLjYsMC4yLTIuNGMtOC0zNi4yLTQwLjMtNjMuMi03OC45LTYzLjJjLTM1LjYsMC02NS44LDIzLTc2LjYsNTQuOWMtNy01LjItMTUuOS04LTI1LjUtNy4xYy0xNy4xLDEuNy0zMC44LDE1LjQtMzIuNSwzMi41Yy0wLjQsNC40LTAuMSw4LjcsMC45LDEyLjdjLTI3LjksMC44LTUwLjIsMjMuNi01MC4yLDUxLjdjMCwyLjUsMC4yLDUsMC41LDcuNWMwLjIsMS4yLDEuMiwyLjEsMi40LDIuMWwyMjcuMiwwYzEuMywwLDIuNS0wLjksMi45LTIuMkw2NzQuOCwyMjMuOXoiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNNzE0LDE0NC44Yy0xLjEsMC0yLjMsMC0zLjQsMC4xYy0wLjgsMC0xLjUsMC42LTEuOCwxLjRsLTQuOCwxNi43Yy0yLjEsNy4yLTEuMywxMy44LDIuMiwxOC43YzMuMiw0LjUsOC42LDcuMSwxNS4xLDcuNGwyNi4yLDEuNmMwLjgsMCwxLjUsMC40LDEuOSwxYzAuNCwwLjYsMC41LDEuNSwwLjMsMi4yYy0wLjQsMS4yLTEuNiwyLjEtMi45LDIuMmwtMjcuMywxLjZjLTE0LjgsMC43LTMwLjcsMTIuNi0zNi4zLDI3LjJsLTIsNS4xYy0wLjQsMSwwLjMsMiwxLjQsMmg5My44YzEuMSwwLDIuMS0wLjcsMi40LTEuOGMxLjYtNS44LDIuNS0xMS45LDIuNS0xOC4yQzc4MS4zLDE3NSw3NTEuMSwxNDQuOCw3MTQsMTQ0LjgiLz48L2c+PC9nPjwvc3ZnPg==" alt="cloudflare">\n</div>\n</div>');
L("returnmenu")}};k("about").onclick=function(){location.hash="About"};k("discord").onclick=function(){window.open("https://discord.gg/ndxJHxT","_blank")};k("mult0").onclick=function(){location.hash="Multiplayer"};k("rnd0").onclick=function(){location.hash="RandomMap"};k("load0").onclick=function(){location.hash="CustomMap"};k("editor0").onclick=function(){location.hash="MapEditor"};k("settings0").onclick=function(){location.hash="Settings"};gb()})();
