var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(q){var z=0;return function(){return z<q.length?{done:!1,value:q[z++]}:{done:!0}}};$jscomp.arrayIterator=function(q){return{next:$jscomp.arrayIteratorImpl(q)}};$jscomp.makeIterator=function(q){var z="undefined"!=typeof Symbol&&Symbol.iterator&&q[Symbol.iterator];return z?z.call(q):$jscomp.arrayIterator(q)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,z,D){q!=Array.prototype&&q!=Object.prototype&&(q[z]=D.value)};$jscomp.getGlobal=function(q){return"undefined"!=typeof window&&window===q?q:"undefined"!=typeof global&&null!=global?global:q};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(q,z){this.$jscomp$symbol$id_=q;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:z})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function q(D){if(this instanceof q)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(D||"")+"_"+z++,D)}var z=0;return q}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var q=$jscomp.global.Symbol.iterator;q||(q=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[q]&&$jscomp.defineProperty(Array.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var q=$jscomp.global.Symbol.asyncIterator;q||(q=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(q){$jscomp.initSymbolIterator();q={next:q};q[$jscomp.global.Symbol.iterator]=function(){return this};return q};
$jscomp.iteratorFromArray=function(q,z){$jscomp.initSymbolIterator();q instanceof String&&(q+="");var D=0,E={next:function(){if(D<q.length){var w=D++;return{value:z(w,q[w]),done:!1}}E.next=function(){return{done:!0,value:void 0}};return E.next()}};E[Symbol.iterator]=function(){return E};return E};
$jscomp.polyfill=function(q,z,D,E){if(z){D=$jscomp.global;q=q.split(".");for(E=0;E<q.length-1;E++){var w=q[E];w in D||(D[w]={});D=D[w]}q=q[q.length-1];E=D[q];z=z(E);z!=E&&null!=z&&$jscomp.defineProperty(D,q,{configurable:!0,writable:!0,value:z})}};$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(q){return q})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(q){return q?q:function(){return[]}},"es6","es5");
$jscomp.findInternal=function(q,z,D){q instanceof String&&(q=String(q));for(var E=q.length,w=0;w<E;w++){var Va=q[w];if(z.call(D,Va,w,q))return{i:w,v:Va}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(q,D){return $jscomp.findInternal(this,q,D).v}},"es6","es3");$jscomp.polyfill("Math.log2",function(q){return q?q:function(q){return Math.log(q)/Math.LN2}},"es6","es3");
$jscomp.polyfill("Math.sign",function(q){return q?q:function(q){q=Number(q);return 0===q||isNaN(q)?q:0<q?1:-1}},"es6","es3");$jscomp.owns=function(q,z){return Object.prototype.hasOwnProperty.call(q,z)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(q,z){for(var D=1;D<arguments.length;D++){var E=arguments[D];if(E)for(var w in E)$jscomp.owns(E,w)&&(q[w]=E[w])}return q};$jscomp.polyfill("Object.assign",function(q){return q||$jscomp.assign},"es6","es3");
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(q){function z(){this.batch_=null}function D(q){return q instanceof w?q:new w(function(U,w){U(q)})}if(q&&!$jscomp.FORCE_POLYFILL_PROMISE)return q;z.prototype.asyncExecute=function(q){if(null==this.batch_){this.batch_=[];var U=this;this.asyncExecuteFunction(function(){U.executeBatch_()})}this.batch_.push(q)};var E=$jscomp.global.setTimeout;z.prototype.asyncExecuteFunction=function(q){E(q,0)};z.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var q=
this.batch_;this.batch_=[];for(var w=0;w<q.length;++w){var z=q[w];q[w]=null;try{z()}catch(xb){this.asyncThrow_(xb)}}}this.batch_=null};z.prototype.asyncThrow_=function(q){this.asyncExecuteFunction(function(){throw q;})};var w=function(q){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var w=this.createResolveAndReject_();try{q(w.resolve,w.reject)}catch(hb){w.reject(hb)}};w.prototype.createResolveAndReject_=function(){function q(q){return function(U){z||(z=!0,q.call(w,U))}}var w=this,
z=!1;return{resolve:q(this.resolveTo_),reject:q(this.reject_)}};w.prototype.resolveTo_=function(q){if(q===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(q instanceof w)this.settleSameAsPromise_(q);else{a:switch(typeof q){case "object":var z=null!=q;break a;case "function":z=!0;break a;default:z=!1}z?this.resolveToNonPromiseObj_(q):this.fulfill_(q)}};w.prototype.resolveToNonPromiseObj_=function(q){var w=void 0;try{w=q.then}catch(hb){this.reject_(hb);return}"function"==
typeof w?this.settleSameAsThenable_(w,q):this.fulfill_(q)};w.prototype.reject_=function(q){this.settle_(2,q)};w.prototype.fulfill_=function(q){this.settle_(1,q)};w.prototype.settle_=function(q,w){if(0!=this.state_)throw Error("Cannot settle("+q+", "+w+"): Promise already settled in state"+this.state_);this.state_=q;this.result_=w;this.executeOnSettledCallbacks_()};w.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var q=0;q<this.onSettledCallbacks_.length;++q)Va.asyncExecute(this.onSettledCallbacks_[q]);
this.onSettledCallbacks_=null}};var Va=new z;w.prototype.settleSameAsPromise_=function(q){var w=this.createResolveAndReject_();q.callWhenSettled_(w.resolve,w.reject)};w.prototype.settleSameAsThenable_=function(q,w){var z=this.createResolveAndReject_();try{q.call(w,z.resolve,z.reject)}catch(xb){z.reject(xb)}};w.prototype.then=function(q,z){function D(q,w){return"function"==typeof q?function(w){try{E(q(w))}catch(Ub){U(Ub)}}:w}var E,U,wb=new w(function(q,w){E=q;U=w});this.callWhenSettled_(D(q,E),D(z,
U));return wb};w.prototype.catch=function(q){return this.then(void 0,q)};w.prototype.callWhenSettled_=function(q,w){function z(){switch(D.state_){case 1:q(D.result_);break;case 2:w(D.result_);break;default:throw Error("Unexpected state: "+D.state_);}}var D=this;null==this.onSettledCallbacks_?Va.asyncExecute(z):this.onSettledCallbacks_.push(z)};w.resolve=D;w.reject=function(q){return new w(function(w,z){z(q)})};w.race=function(q){return new w(function(w,z){for(var E=$jscomp.makeIterator(q),U=E.next();!U.done;U=
E.next())D(U.value).callWhenSettled_(w,z)})};w.all=function(q){var z=$jscomp.makeIterator(q),E=z.next();return E.done?D([]):new w(function(q,w){function U(w){return function(z){ea[w]=z;ja--;0==ja&&q(ea)}}var ea=[],ja=0;do ea.push(void 0),ja++,D(E.value).callWhenSettled_(U(ea.length-1),w),E=z.next();while(!E.done)})};return w},"es6","es3");
(function(){function q(e,a,d){this.context=e;this.urlList=a;this.onload=d;this.loadCount=0}function z(e,a,d){a=a.split(".")[0].toLowerCase();Vb[a]=e;!d||d.music&&d.mid!==Q.id||(Wa(a,d.x,d.y,d.k,d.music,d.date),d.date=0)}function D(e){for(var a=e.length,d=0;d<a;k(e[d++]).style.display="none");}function E(e){for(var a=e.length,d=0;d<a;k(e[d++]).style.display="block");}function w(){location.href=""}function Va(e){A("setup:",e);e.toSend=[];e.orderList=[];var a=ka.roomName;a=a.substr(0,a.length-1);e.id==
a&&(e.admin=!0);e.superID=Yd(e.id);e.sendDirectly("channelMessage","nehhof",{});A(e.channels.channelMessage);if(!r.adminOK)var d=setTimeout(Pf,3500);ib(p.mnameadd(),17,r.name);e.channels.channelMessage.onopen=function(){clearTimeout(d);fa.put(e);Wa("attack");Gc(1);A("DATACHANNEL OPEN");A(e);setTimeout(function(){e.admin&&(r.adminOK=!0,p.shareName(e.superID))},500)};e.channels.channelMessage.onerror=function(a){A("DATACHANNEL ERROR",a)};e.channels.channelMessage.onclose=function(a){Wb(e);A("DATACHANNEL CLOSE",
a)};e.pc.pc.onconnectionstatechange=function(a){A(a);"disconnected"==e.pc.pc.connectionState&&Wb(e)};e.pc.pc.oniceconnectionstatechange=function(a){A(a);"failed"!=e.pc.pc.iceConnectionState&&"disconnected"!=e.pc.pc.iceConnectionState||Wb(e)};e.pc.pc.onsignalingstatechange=function(a){A(a);"closed"==e.pc.pc.signalingState&&Wb(e)}}function U(){k("buttons").innerHTML="";k("gameName").innerHTML=""}function wb(){""==k("Multiplayer").innerHTML&&(k("Multiplayer").innerHTML="<h2>"+m.MAINSCR_MULTI.split("|")[0]+
'</h2>\n<button id="createbutton">'+m.MP_SEARCH_CREATE.split("| ")[1]+'</button>\n<button id="refreshButton1" class="refreshButton">'+m.GENERAL_REFRESH+'</button>\n<table id="gameList">\n<tbody>\n<tr><td>'+m.MSG_GAME_LOAD+"</td></tr>\n</tbody>\n</table>",k("refreshButton1").onclick=wb,k("createbutton").onclick=Zd);X("returnmenu");r.p2p?(xa(),r.p2p.emit("getRooms")):(ka||za(),za.func=wb)}function hb(){var e=location,a=e.hash.substr(1);""===a&&(k("returnmenu").style.display="none");if("Room"===e.hash.substr(-4))Hc?
$d():Xb=$d;else if(Ic[a])if(Hc)Ic[a]();else Xb=Ic[a];else e.hash=""}function xb(e){return f.locateFile?f.locateFile(e,Da):Da+e}function Fc(e,a){e||Ea("Assertion failed: "+a)}function Xd(e,a,d){var c=a+d;for(d=a;e[d]&&!(d>=c);)++d;if(16<d-a&&e.subarray&&ae)return ae.decode(e.subarray(a,d));for(c="";a<d;){var b=e[a++];if(b&128){var g=e[a++]&63;if(192==(b&224))c+=String.fromCharCode((b&31)<<6|g);else{var l=e[a++]&63;b=224==(b&240)?(b&15)<<12|g<<6|l:(b&7)<<18|g<<12|l<<6|e[a++]&63;65536>b?c+=String.fromCharCode(b):
(b-=65536,c+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else c+=String.fromCharCode(b)}return c}function ea(e,a){return e?Xd(K,e,a):""}function ja(e,a,d,c){if(!(0<c))return 0;var b=d;c=d+c-1;for(var g=0;g<e.length;++g){var l=e.charCodeAt(g);if(55296<=l&&57343>=l){var v=e.charCodeAt(++g);l=65536+((l&1023)<<10)|v&1023}if(127>=l){if(d>=c)break;a[d++]=l}else{if(2047>=l){if(d+1>=c)break;a[d++]=192|l>>6}else{if(65535>=l){if(d+2>=c)break;a[d++]=224|l>>12}else{if(d+3>=c)break;a[d++]=240|l>>18;a[d++]=
128|l>>12&63}a[d++]=128|l>>6&63}a[d++]=128|l&63}}a[d]=0;return d-b}function Wd(e){for(var a=0,d=0;d<e.length;++d){var c=e.charCodeAt(d);55296<=c&&57343>=c&&(c=65536+((c&1023)<<10)|e.charCodeAt(++d)&1023);127>=c?++a:a=2047>=c?a+2:65535>=c?a+3:a+4}a+=1;d=be(a);ja(e,Jc,d,a);return d}function Ub(e,a){0<e%a&&(e+=a-e%a);return e}function ce(e){yb=e;f.HEAP8=Jc=new Int8Array(e);f.HEAP16=new Int16Array(e);f.HEAP32=Fa=new Int32Array(e);f.HEAPU8=K=new Uint8Array(e);f.HEAPU16=V=new Uint16Array(e);f.HEAPU32=H=
new Uint32Array(e);f.HEAPF32=new Float32Array(e);f.HEAPF64=new Float64Array(e)}function Yb(e){for(;0<e.length;){var a=e.shift();if("function"==typeof a)a();else{var d=a.func;"number"===typeof d?void 0===a.arg?f.dynCall_v(d):f.dynCall_vi(d,a.arg):d(void 0===a.arg?null:a.arg)}}}function de(e){Xa++;f.monitorRunDependencies&&f.monitorRunDependencies(Xa)}function Kc(e){Xa--;f.monitorRunDependencies&&f.monitorRunDependencies(Xa);0==Xa&&(null!==Lc&&(clearInterval(Lc),Lc=null),zb&&(e=zb,zb=null,e()))}function Ea(e){if(f.onAbort)f.onAbort(e);
e+="";ee(e);Ga(e);Mc=!0;throw"abort("+e+"). Build with -s ASSERTIONS=1 for more info.";}function fe(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}function ge(){try{if(Ab)return new Uint8Array(Ab);if(Zb)return Zb(Na);throw"both async and sync fetching of the wasm failed";}catch(e){Ea(e)}}function Qf(){return Ab||!Bb&&!Oa||"function"!==typeof fetch?new Promise(function(e,a){e(ge())}):fetch(Na,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+
Na+"'";return e.arrayBuffer()}).catch(function(){return ge()})}function he(e){return e.replace(/\b__Z[\w\d_]+/g,function(a){return a===a?a:a+" ["+a+"]"})}function ie(){var e=Error();if(!e.stack){try{throw Error(0);}catch(a){e=a}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function je(e,a,d,c){try{for(var b=0,g=0;g<d;g++){for(var l=Fa[a+8*g>>2],v=Fa[a+(8*g+4)>>2],n=0;n<v;n++)qa.printChar(e,K[l+n]);b+=v}Fa[c>>2]=b;return 0}catch(x){return"undefined"!==typeof ke&&x instanceof
ke.ErrnoError||Ea(x),-x.errno}}function le(){return Jc.length}function me(){Ea()}function ne(e){try{return ra.grow(e-yb.byteLength+65535>>16),ce(ra.buffer),1}catch(a){}}function $b(e,a,d,c,b){var g=H[e+8>>2];if(g){var l=ea(g),v=e+112,n=ea(v);n||(n="GET");var x=H[v+52>>2],t=H[v+56>>2],C=!!H[v+60>>2],f=H[v+68>>2],B=H[v+72>>2];g=H[v+76>>2];var O=H[v+80>>2],h=H[v+84>>2];v=H[v+88>>2];var k=!!(x&1),m=!!(x&2);x=!!(x&64);f=f?ea(f):void 0;B=B?ea(B):void 0;var p=O?ea(O):void 0,y=new XMLHttpRequest;y.withCredentials=
C;y.open(n,l,!x,f,B);x||(y.timeout=t);y.url_=l;Fc(!m,"streaming uses moz-chunked-arraybuffer which is no longer supported; TODO: rewrite using fetch()");y.responseType="arraybuffer";O&&y.overrideMimeType(p);if(g)for(;;){n=H[g>>2];if(!n)break;l=H[g+4>>2];if(!l)break;g+=8;n=ea(n);l=ea(l);y.setRequestHeader(n,l)}J.xhrs.push(y);H[e+0>>2]=J.xhrs.length;g=h&&v?K.slice(h,h+v):null;y.onload=function(b){var g=y.response?y.response.byteLength:0,c=0,l=0;k&&!m&&(l=g,c=Rc(l),K.set(new Uint8Array(y.response),c));
H[e+12>>2]=c;J.setu64(e+16,l);J.setu64(e+24,0);g&&J.setu64(e+32,g);V[e+40>>1]=y.readyState;4===y.readyState&&0===y.status&&(y.status=0<g?200:404);V[e+42>>1]=y.status;y.statusText&&ja(y.statusText,K,e+44,64);200<=y.status&&300>y.status?a&&a(e,y,b):d&&d(e,y,b)};y.onerror=function(a){var b=y.status;4===y.readyState&&0===b&&(b=404);H[e+12>>2]=0;J.setu64(e+16,0);J.setu64(e+24,0);J.setu64(e+32,0);V[e+40>>1]=y.readyState;V[e+42>>1]=b;d&&d(e,y,a)};y.ontimeout=function(a){d&&d(e,y,a)};y.onprogress=function(a){var b=
k&&m&&y.response?y.response.byteLength:0,g=0;k&&m&&(g=Rc(b),K.set(new Uint8Array(y.response),g));H[e+12>>2]=g;J.setu64(e+16,b);J.setu64(e+24,a.loaded-b);J.setu64(e+32,a.total);V[e+40>>1]=y.readyState;3<=y.readyState&&0===y.status&&0<a.loaded&&(y.status=200);V[e+42>>1]=y.status;y.statusText&&ja(y.statusText,K,e+44,64);c&&c(e,y,a)};y.onreadystatechange=function(a){V[e+40>>1]=y.readyState;2<=y.readyState&&(V[e+42>>1]=y.status);b&&b(e,y,a)};try{y.send(g)}catch(Pc){d&&d(e,y,Pc)}}else d(e,0,"no url specified!")}
function Sc(e,a,d,c,b){if(e){var g=H[a+112+64>>2];g||(g=H[a+8>>2]);var l=ea(g);try{var v=e.transaction(["FILES"],"readwrite").objectStore("FILES").put(d,l);v.onsuccess=function(e){V[a+40>>1]=4;V[a+42>>1]=200;ja("OK",K,a+44,64);c(a,0,l)};v.onerror=function(e){V[a+40>>1]=4;V[a+42>>1]=413;ja("Payload Too Large",K,a+44,64);b(a,0,e)}}catch(n){b(a,0,n)}}else b(a,0,"IndexedDB not available!")}function oe(e,a,d,c){if(e){var b=H[a+112+64>>2];b||(b=H[a+8>>2]);b=ea(b);try{var g=e.transaction(["FILES"],"readonly").objectStore("FILES").get(b);
g.onsuccess=function(e){if(e.target.result){e=e.target.result;var b=e.byteLength||e.length,g=Rc(b);K.set(new Uint8Array(e),g);H[a+12>>2]=g;J.setu64(a+16,b);J.setu64(a+24,0);J.setu64(a+32,b);V[a+40>>1]=4;V[a+42>>1]=200;ja("OK",K,a+44,64);d(a,0,e)}else V[a+40>>1]=4,V[a+42>>1]=404,ja("Not Found",K,a+44,64),c(a,0,"no data")};g.onerror=function(e){V[a+40>>1]=4;V[a+42>>1]=404;ja("Not Found",K,a+44,64);c(a,0,e)}}catch(l){c(a,0,l)}}else c(a,0,"IndexedDB not available!")}function pe(e,a,d,c){if(e){var b=H[a+
112+64>>2];b||(b=H[a+8>>2]);b=ea(b);try{var g=e.transaction(["FILES"],"readwrite").objectStore("FILES").delete(b);g.onsuccess=function(e){e=e.target.result;H[a+12>>2]=0;J.setu64(a+16,0);J.setu64(a+24,0);J.setu64(a+32,0);V[a+40>>1]=4;V[a+42>>1]=200;ja("OK",K,a+44,64);d(a,0,e)};g.onerror=function(e){V[a+40>>1]=4;V[a+42>>1]=404;ja("Not Found",K,a+44,64);c(a,0,e)}}catch(l){c(a,0,l)}}else c(a,0,"IndexedDB not available!")}function Tc(e){this.name="ExitStatus";this.message="Program terminated with exit("+
e+")";this.status=e}function Uc(e){function a(){if(!bc&&(bc=!0,!Mc)){Yb(qe);Yb(Rf);if(f.onRuntimeInitialized)f.onRuntimeInitialized();if(re){var a=e;a=a||[];var c=a.length+1,b=be(4*(c+1));Fa[b>>2]=Wd(Vc);for(var g=1;g<c;g++)Fa[(b>>2)+g]=Wd(a[g-1]);Fa[(b>>2)+c]=0;try{var l=f._main(c,b);if(!Ya||0!==l){if(!Ya&&(Mc=!0,f.onExit))f.onExit(l);Cb(l,new Tc(l))}}catch(v){v instanceof Tc||("SimulateInfiniteLoop"==v?Ya=!0:((a=v)&&"object"===typeof v&&v.stack&&(a=[v,v.stack]),Ga("exception thrown: "+a),Cb(1,v)))}finally{}}if(f.postRun)for("function"==
typeof f.postRun&&(f.postRun=[f.postRun]);f.postRun.length;)se.unshift(f.postRun.shift());Yb(se)}}e=e||Db;if(!(0<Xa)){if(f.preRun)for("function"==typeof f.preRun&&(f.preRun=[f.preRun]);f.preRun.length;)te.unshift(f.preRun.shift());Yb(te);0<Xa||(f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1);a()},1)):a())}}var Tf=function(){(function(e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?
define([],e):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SimpleWebRTC=e()})(function(){return function b(a,d,c){function g(n,v){if(!d[n]){if(!a[n]){var t="function"==typeof require&&require;if(!v&&t)return t(n,!0);if(l)return l(n,!0);v=Error("Cannot find module '"+n+"'");throw v.code="MODULE_NOT_FOUND",v;}v=d[n]={exports:{}};a[n][0].call(v.exports,function(b){var c=a[n][1][b];return g(c?c:b)},v,v.exports,b,a,d,c)}return d[n].exports}
for(var l="function"==typeof require&&require,v=0;v<c.length;v++)g(c[v]);return g}({1:[function(a,d,c){function b(){}d.exports=function(a,c,d){function g(a,b){if(0>=g.count)throw Error("after called too many times");--g.count;a?(l=!0,c(a),c=d):0!==g.count||l||c(null,b)}var l=!1;d=d||b;g.count=a;return 0===a?c():g}},{}],2:[function(a,d,c){d.exports=function(a,g,c){var b=a.byteLength;g=g||0;c=c||b;if(a.slice)return a.slice(g,c);0>g&&(g+=b);0>c&&(c+=b);c>b&&(c=b);if(g>=b||g>=c||0===b)return new ArrayBuffer(0);
a=new Uint8Array(a);b=new Uint8Array(c-g);for(var l=0;g<c;g++,l++)b[l]=a[g];return b.buffer}},{}],3:[function(a,d,c){d.exports=function(a,g,c){var b,l=g;g={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(c)for(b in c)g[b]=c[b];l?"audio"===l.tagName.toLowerCase()&&(g.audio=!0):l=document.createElement(g.audio?"audio":"video");g.disableContextMenu&&(l.oncontextmenu=function(a){a.preventDefault()});g.autoplay&&(l.autoplay="autoplay");g.muted&&(l.muted=!0);!g.audio&&g.mirror&&["","moz",
"webkit","o","ms"].forEach(function(a){l.style[a?a+"Transform":"transform"]="scaleX(-1)"});l.srcObject=a;return l}},{}],4:[function(a,d,c){function b(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}d.exports=b;b.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(Math.floor(10*b)&1)?a-c:a+c}return Math.min(a,
this.max)|0};b.prototype.reset=function(){this.attempts=0};b.prototype.setMin=function(a){this.ms=a};b.prototype.setMax=function(a){this.max=a};b.prototype.setJitter=function(a){this.jitter=a}},{}],5:[function(a,d,c){(function(a){c.encode=function(b){b=new Uint8Array(b);var g,c=b.length,d="";for(g=0;g<c;g+=3)d+=a[b[g]>>2],d+=a[(b[g]&3)<<4|b[g+1]>>4],d+=a[(b[g+1]&15)<<2|b[g+2]>>6],d+=a[b[g+2]&63];2===c%3?d=d.substring(0,d.length-1)+"=":1===c%3&&(d=d.substring(0,d.length-2)+"==");return d};c.decode=
function(b){var g=.75*b.length,c=b.length,d=0;"="===b[b.length-1]&&(g--,"="===b[b.length-2]&&g--);var x=new ArrayBuffer(g),t=new Uint8Array(x);for(g=0;g<c;g+=4){var f=a.indexOf(b[g]);var W=a.indexOf(b[g+1]);var B=a.indexOf(b[g+2]);var O=a.indexOf(b[g+3]);t[d++]=f<<2|W>>4;t[d++]=(W&15)<<4|B>>2;t[d++]=(B&3)<<6|O&63}return x}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],6:[function(a,d,c){(function(a){function b(a){for(var b=0;b<a.length;b++){var g=a[b];if(g.buffer instanceof
ArrayBuffer){var c=g.buffer;if(g.byteLength!==c.byteLength){var d=new Uint8Array(g.byteLength);d.set(new Uint8Array(c,g.byteOffset,g.byteLength));c=d.buffer}a[b]=c}}}function c(a,g){g=g||{};var c=new n;b(a);for(var d=0;d<a.length;d++)c.append(a[d]);return g.type?c.getBlob(g.type):c.getBlob()}function v(a,g){b(a);return new Blob(a,g||{})}var n=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder;try{var x=2===(new Blob(["hi"])).size}catch(W){x=!1}var t;if(t=x)try{t=2===(new Blob([new Uint8Array([1,
2])])).size}catch(W){t=!1}var f=n&&n.prototype.append&&n.prototype.getBlob;a=x?t?a.Blob:v:f?c:void 0;d.exports=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],7:[function(a,d,c){var b=[].slice;d.exports=function(a,c){"string"==typeof c&&(c=a[c]);if("function"!=typeof c)throw Error("bind() requires a function");var g=b.call(arguments,2);return function(){return c.apply(a,g.concat(b.call(arguments)))}}},{}],8:[function(a,d,
c){function b(a){if(a){for(var g in b.prototype)a[g]=b.prototype[g];return a}}d.exports=b;b.prototype.on=b.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};b.prototype.once=function(a,b){function c(){g.off(a,c);b.apply(this,arguments)}var g=this;this._callbacks=this._callbacks||{};c.fn=b;this.on(a,c);return this};b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=
function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var g,d=0;d<c.length;d++)if(g=c[d],g===b||g.fn===b){c.splice(d,1);break}return this};b.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var g=0,d=c.length;g<d;++g)c[g].apply(this,b)}return this};b.prototype.listeners=
function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};b.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],9:[function(a,d,c){d.exports=function(a,c){var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a}},{}],10:[function(a,d,c){function b(a){return b.enabled(a)?function(c){c instanceof Error&&(c=c.stack||c.message);var g=new Date,d=g-(b[a]||g);b[a]=g;c=a+" "+c+" +"+b.humanize(d);window.console&&console.log&&Function.prototype.apply.call(console.log,
console,arguments)}:function(){}}d.exports=b;b.names=[];b.skips=[];b.enable=function(a){try{localStorage.debug=a}catch(x){}for(var c=(a||"").split(/[\s,]+/),g=c.length,d=0;d<g;d++)a=c[d].replace("*",".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$"))};b.disable=function(){b.enable("")};b.humanize=function(a){return 36E5<=a?(a/36E5).toFixed(1)+"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=a?(a/1E3|0)+"s":a+"ms"};b.enabled=function(a){for(var c=0,g=b.skips.length;c<
g;c++)if(b.skips[c].test(a))return!1;c=0;for(g=b.names.length;c<g;c++)if(b.names[c].test(a))return!0;return!1};try{window.localStorage&&b.enable(localStorage.debug)}catch(g){}},{}],11:[function(a,d,c){d.exports=a("./lib/")},{"./lib/":12}],12:[function(a,d,c){d.exports=a("./socket");d.exports.parser=a("engine.io-parser")},{"./socket":13,"engine.io-parser":24}],13:[function(a,d,c){(function(b){function c(a,g){if(!(this instanceof c))return new c(a,g);g=g||{};a&&"object"==typeof a&&(g=a,a=null);a&&(a=
f(a),g.host=a.host,g.secure="https"==a.protocol||"wss"==a.protocol,g.port=a.port,a.query&&(g.query=a.query));this.secure=null!=g.secure?g.secure:b.location&&"https:"==location.protocol;g.host&&(a=g.host.split(":"),g.hostname=a.shift(),a.length?g.port=a.pop():g.port||(g.port=this.secure?"443":"80"));this.agent=g.agent||!1;this.hostname=g.hostname||(b.location?location.hostname:"localhost");this.port=g.port||(b.location&&location.port?location.port:this.secure?443:80);this.query=g.query||{};"string"==
typeof this.query&&(this.query=B.decode(this.query));this.upgrade=!1!==g.upgrade;this.path=(g.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!g.forceJSONP;this.jsonp=!1!==g.jsonp;this.forceBase64=!!g.forceBase64;this.enablesXDR=!!g.enablesXDR;this.timestampParam=g.timestampParam||"t";this.timestampRequests=g.timestampRequests;this.transports=g.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=g.policyPort||843;this.rememberUpgrade=
g.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=g.onlyBinaryUpgrades;this.pfx=g.pfx||null;this.key=g.key||null;this.passphrase=g.passphrase||null;this.cert=g.cert||null;this.ca=g.ca||null;this.ciphers=g.ciphers||null;this.rejectUnauthorized=g.rejectUnauthorized||null;this.open()}var l=a("./transports"),v=a("component-emitter"),n=a("debug")("engine.io-client:socket"),x=a("indexof"),t=a("engine.io-parser"),f=a("parseuri"),W=a("parsejson"),B=a("parseqs");d.exports=c;c.priorWebsocketSuccess=
!1;v(c.prototype);c.protocol=t.protocol;c.Socket=c;c.Transport=a("./transport");c.transports=a("./transports");c.parser=a("engine.io-parser");c.prototype.createTransport=function(a){n('creating transport "%s"',a);var b=this.query,c={},g;for(g in b)b.hasOwnProperty(g)&&(c[g]=b[g]);c.EIO=t.protocol;c.transport=a;this.id&&(c.sid=this.id);return new l[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:c,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,
enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})};c.prototype.open=function(){if(this.rememberUpgrade&&c.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))var a="websocket";else{if(0==this.transports.length){var b=this;setTimeout(function(){b.emit("error",
"No transports available")},0);return}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(Nc){this.transports.shift();this.open();return}a.open();this.setTransport(a)};c.prototype.setTransport=function(a){n("setting transport %s",a.name);var b=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",
function(){b.onClose("transport close")})};c.prototype.probe=function(a){function b(){if(C.onlyBinaryUpgrades){var b=!this.supportsBinary&&C.transport.supportsBinary;f=f||b}f||(n('probe transport "%s" opened',a),x.send([{type:"ping",data:"probe"}]),x.once("packet",function(b){f||("pong"==b.type&&"probe"==b.data?(n('probe transport "%s" pong',a),C.upgrading=!0,C.emit("upgrading",x),x&&(c.priorWebsocketSuccess="websocket"==x.name,n('pausing current transport "%s"',C.transport.name),C.transport.pause(function(){f||
"closed"==C.readyState||(n("changing transport and sending upgrade packet"),v(),C.setTransport(x),x.send([{type:"upgrade"}]),C.emit("upgrade",x),x=null,C.upgrading=!1,C.flush())}))):(n('probe transport "%s" failed',a),b=Error("probe error"),b.transport=x.name,C.emit("upgradeError",b)))}))}function g(){f||(f=!0,v(),x.close(),x=null)}function d(b){var c=Error("probe error: "+b);c.transport=x.name;g();n('probe transport "%s" failed because of error: %s',a,b);C.emit("upgradeError",c)}function l(){d("transport closed")}
function t(){d("socket closed")}function B(a){x&&a.name!=x.name&&(n('"%s" works - aborting "%s"',a.name,x.name),g())}function v(){x.removeListener("open",b);x.removeListener("error",d);x.removeListener("close",l);C.removeListener("close",t);C.removeListener("upgrading",B)}n('probing transport "%s"',a);var x=this.createTransport(a,{probe:1}),f=!1,C=this;c.priorWebsocketSuccess=!1;x.once("open",b);x.once("error",d);x.once("close",l);this.once("close",t);this.once("upgrading",B);x.open()};c.prototype.onOpen=
function(){n("socket open");this.readyState="open";c.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};c.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(n('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),
a.type){case "open":this.onHandshake(W(a.data));break;case "pong":this.setPing();break;case "error":var b=Error("server error");b.code=a.data;this.emit("error",b);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else n('packet received with socket readyState "%s"',this.readyState)};c.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=
a.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};c.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};c.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",
a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};c.prototype.ping=function(){this.sendPacket("ping")};c.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)if(this.callbackBuffer[a])this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0==this.writeBuffer.length?this.emit("drain"):this.flush()};c.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&
this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};c.prototype.write=c.prototype.send=function(a,b){this.sendPacket("message",a,b);return this};c.prototype.sendPacket=function(a,b,c){"closing"!=this.readyState&&"closed"!=this.readyState&&(a={type:a,data:b},this.emit("packetCreate",a),this.writeBuffer.push(a),this.callbackBuffer.push(c),this.flush())};c.prototype.close=
function(){if("opening"==this.readyState||"open"==this.readyState){var a=function(){g.once("upgrade",b);g.once("upgradeError",b)},b=function(){g.removeListener("upgrade",b);g.removeListener("upgradeError",b);c()},c=function(){g.onClose("forced close");n("socket closing - telling transport to close");g.transport.close()};this.readyState="closing";var g=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?a():c()});else this.upgrading?a():c()}return this};c.prototype.onError=
function(a){n("socket error %j",a);c.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};c.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){n('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);setTimeout(function(){c.writeBuffer=[];c.callbackBuffer=[];c.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();
this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",a,b)}};c.prototype.filterUpgrades=function(a){for(var b=[],c=0,g=a.length;c<g;c++)~x(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":8,debug:21,"engine.io-parser":24,indexof:32,parsejson:40,parseqs:41,parseuri:23}],14:[function(a,d,c){function b(a){this.path=
a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized}var g=a("engine.io-parser");a=a("component-emitter");d.exports=b;a(b.prototype);b.timestamps=
0;b.prototype.onError=function(a,b){a=Error(a);a.type="TransportError";a.description=b;this.emit("error",a);return this};b.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};b.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};b.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};b.prototype.onOpen=
function(){this.readyState="open";this.writable=!0;this.emit("open")};b.prototype.onData=function(a){a=g.decodePacket(a,this.socket.binaryType);this.onPacket(a)};b.prototype.onPacket=function(a){this.emit("packet",a)};b.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":8,"engine.io-parser":24}],15:[function(a,d,c){(function(b){var g=a("xmlhttprequest"),d=a("./polling-xhr"),v=a("./polling-jsonp"),n=a("./websocket");c.polling=function(a){var c=!1,l=!1,n=
!1!==a.jsonp;b.location&&(l="https:"==location.protocol,(c=location.port)||(c=l?443:80),c=a.hostname!=location.hostname||c!=a.port,l=a.secure!=l);a.xdomain=c;a.xscheme=l;if("open"in new g(a)&&!a.forceJSONP)return new d(a);if(!n)throw Error("JSONP disabled");return new v(a)};c.websocket=n}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(a,d,
c){(function(b){function c(){}function l(a){v.call(this,a);this.query=this.query||{};f||(b.___eio||(b.___eio=[]),f=b.___eio);this.index=f.length;var g=this;f.push(function(a){g.onData(a)});this.query.j=this.index;b.document&&b.addEventListener&&b.addEventListener("beforeunload",function(){g.script&&(g.script.onerror=c)},!1)}var v=a("./polling"),n=a("component-inherit");d.exports=l;var x=/\n/g,t=/\\n/g,f;n(l,v);l.prototype.supportsBinary=!1;l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);v.prototype.doClose.call(this)};l.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);this.script=b;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&
setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};l.prototype.doWrite=function(a,b){function c(){g();b()}function g(){if(d.iframe)try{d.form.removeChild(d.iframe)}catch(Qc){d.onError("jsonp polling iframe removal error",Qc)}try{f=document.createElement('<iframe src="javascript:0" name="'+d.iframeId+'">')}catch(Qc){f=document.createElement("iframe"),f.name=d.iframeId,f.src="javascript:0"}f.id=d.iframeId;d.form.appendChild(f);
d.iframe=f}var d=this;if(!this.form){var l=document.createElement("form"),n=document.createElement("textarea"),B=this.iframeId="eio_iframe_"+this.index,f;l.className="socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=B;l.method="POST";l.setAttribute("accept-charset","utf-8");n.name="d";l.appendChild(n);document.body.appendChild(l);this.form=l;this.area=n}this.form.action=this.uri();g();a=a.replace(t,"\\\n");this.area.value=a.replace(x,"\\n");try{this.form.submit()}catch(Qc){}this.iframe.attachEvent?
this.iframe.onreadystatechange=function(){"complete"==d.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-inherit":9}],17:[function(a,d,c){(function(b){function c(){}function l(a){t.call(this,a);if(b.location){var c="https:"==location.protocol,g=location.port;g||(g=c?443:80);this.xd=a.hostname!=b.location.hostname||g!=a.port;this.xs=a.secure!=c}}function f(a){this.method=
a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.create()}function n(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var x=a("xmlhttprequest"),
t=a("./polling"),C=a("component-emitter"),h=a("component-inherit"),B=a("debug")("engine.io-client:polling-xhr");d.exports=l;d.exports.Request=f;h(l,t);l.prototype.supportsBinary=!0;l.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||!1;a.supportsBinary=this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;
return new f(a)};l.prototype.doWrite=function(a,b){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var c=this;a.on("success",b);a.on("error",function(a){c.onError("xhr post error",a)});this.sendXhr=a};l.prototype.doPoll=function(){B("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};C(f.prototype);f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,
xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var c=this.xhr=new x(a),g=this;try{B("xhr open %s: %s",this.method,this.uri);c.open(this.method,this.uri,this.async);this.supportsBinary&&(c.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?c.setRequestHeader("Content-type","application/octet-stream"):c.setRequestHeader("Content-type",
"text/plain;charset=UTF-8")}catch(Oc){}"withCredentials"in c&&(c.withCredentials=!0);this.hasXDR()?(c.onload=function(){g.onLoad()},c.onerror=function(){g.onError(c.responseText)}):c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status||1223==c.status)g.onLoad();else setTimeout(function(){g.onError(c.status)},0)};B("xhr data %s",this.data);c.send(this.data)}catch(Oc){setTimeout(function(){g.onError(Oc)},0);return}b.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)};
f.prototype.onSuccess=function(){this.emit("success");this.cleanup()};f.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};f.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c;if(a)try{this.xhr.abort()}catch(ac){}b.document&&delete f.requests[this.index];this.xhr=null}};f.prototype.onLoad=function(){try{try{var a=
this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(Nc){}var b="application/octet-stream"===a?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(Nc){this.onError(Nc)}if(null!=b)this.onData(b)};f.prototype.hasXDR=function(){return"undefined"!==typeof b.XDomainRequest&&!this.xs&&this.enablesXDR};f.prototype.abort=function(){this.cleanup()};b.document&&(f.requestsCount=0,f.requests={},b.attachEvent?b.attachEvent("onunload",n):b.addEventListener&&b.addEventListener("beforeunload",
n,!1))}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-emitter":8,"component-inherit":9,debug:21,xmlhttprequest:20}],18:[function(a,d,c){function b(a){var b=a&&a.forceBase64;if(!x||b)this.supportsBinary=!1;g.call(this,a)}var g=a("../transport"),l=a("parseqs"),f=a("engine.io-parser");c=a("component-inherit");var n=a("debug")("engine.io-client:polling");d.exports=b;var x=null!=(new (a("xmlhttprequest"))({xdomain:!1})).responseType;
c(b,g);b.prototype.name="polling";b.prototype.doOpen=function(){this.poll()};b.prototype.pause=function(a){function b(){n("paused");c.readyState="paused";a()}var c=this;this.readyState="pausing";if(this.polling||!this.writable){var g=0;this.polling&&(n("we are currently polling - waiting to pause"),g++,this.once("pollComplete",function(){n("pre-pause polling complete");--g||b()}));this.writable||(n("we are currently writing - waiting to pause"),g++,this.once("drain",function(){n("pre-pause writing complete");
--g||b()}))}else b()};b.prototype.poll=function(){n("polling");this.polling=!0;this.doPoll();this.emit("poll")};b.prototype.onData=function(a){var b=this;n("polling got data %s",a);f.decodePayload(a,this.socket.binaryType,function(a,c,g){if("opening"==b.readyState)b.onOpen();if("close"==a.type)return b.onClose(),!1;b.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():n('ignoring poll - transport state "%s"',this.readyState))};b.prototype.doClose=
function(){function a(){n("writing close packet");b.write([{type:"close"}])}var b=this;"open"==this.readyState?(n("transport open - closing"),a()):(n("transport not open - deferring close"),this.once("open",a))};b.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0;b.emit("drain")};b=this;f.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})};b.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";!1!==this.timestampRequests&&
(a[this.timestampParam]=+new Date+"-"+g.timestamps++);this.supportsBinary||a.sid||(a.b64=1);a=l.encode(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port);a.length&&(a="?"+a);return b+"://"+this.hostname+c+this.path+a}},{"../transport":14,"component-inherit":9,debug:21,"engine.io-parser":24,parseqs:41,xmlhttprequest:20}],19:[function(a,d,c){function b(a){a&&a.forceBase64&&(this.supportsBinary=!1);g.call(this,a)}var g=a("../transport"),l=a("engine.io-parser"),f=
a("parseqs");c=a("component-inherit");var n=a("debug")("engine.io-client:websocket"),x=a("ws");d.exports=b;c(b,g);b.prototype.name="websocket";b.prototype.supportsBinary=!0;b.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent};b.pfx=this.pfx;b.key=this.key;b.passphrase=this.passphrase;b.cert=this.cert;b.ca=this.ca;b.ciphers=this.ciphers;b.rejectUnauthorized=this.rejectUnauthorized;this.ws=new x(a,void 0,b);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.binaryType=
"arraybuffer";this.addEventListeners()}};b.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(b){a.onData(b.data)};this.ws.onerror=function(b){a.onError("websocket error",b)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(b.prototype.onData=function(a){var b=this;setTimeout(function(){g.prototype.onData.call(b,a)},0)});b.prototype.write=function(a){var b=this;this.writable=
!1;for(var c=0,g=a.length;c<g;c++)l.encodePacket(a[c],this.supportsBinary,function(a){try{b.ws.send(a)}catch(ac){n("websocket closed before onclose event")}});setTimeout(function(){b.writable=!0;b.emit("drain")},0)};b.prototype.onClose=function(){g.prototype.onClose.call(this)};b.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};b.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=
":"+this.port);this.timestampRequests&&(a[this.timestampParam]=+new Date);this.supportsBinary||(a.b64=1);a=f.encode(a);a.length&&(a="?"+a);return b+"://"+this.hostname+c+this.path+a};b.prototype.check=function(){return!!x&&!("__initialize"in x&&this.name===b.prototype.name)}},{"../transport":14,"component-inherit":9,debug:21,"engine.io-parser":24,parseqs:41,ws:66}],20:[function(a,d,c){var b=a("has-cors");d.exports=function(a){var c=a.xdomain,g=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&
(!c||b))return new XMLHttpRequest}catch(n){}try{if("undefined"!=typeof XDomainRequest&&!g&&a)return new XDomainRequest}catch(n){}if(!c)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}},{"has-cors":31}],21:[function(a,d,c){function b(){try{var a=localStorage.debug}catch(l){}return a}c=d.exports=a("./debug");c.log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)};c.formatArgs=function(){var a=arguments,
b=this.useColors;a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff);if(!b)return a;b="color: "+this.color;a=[a[0],b,"color: inherit"].concat(Array.prototype.slice.call(a,1));var d=0,n=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(d++,"%c"===a&&(n=d))});a.splice(n,0,b);return a};c.save=function(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(l){}};c.load=b;c.useColors=function(){return"WebkitAppearance"in document.documentElement.style||
window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};c.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");c.formatters.j=function(a){return JSON.stringify(a)};c.enable(b())},{"./debug":22}],22:[function(a,d,c){c=d.exports=function(a){function d(){}function l(){var a=+new Date;l.diff=a-(g||a);l.prev=g;g=l.curr=a;null==l.useColors&&(l.useColors=c.useColors());null==
l.color&&l.useColors&&(l.color=c.colors[b++%c.colors.length]);var d=Array.prototype.slice.call(arguments);d[0]=c.coerce(d[0]);"string"!==typeof d[0]&&(d=["%o"].concat(d));var n=0;d[0]=d[0].replace(/%([a-z%])/g,function(a,b){if("%%"===a)return a;n++;b=c.formatters[b];"function"===typeof b&&(a=b.call(l,d[n]),d.splice(n,1),n--);return a});"function"===typeof c.formatArgs&&(d=c.formatArgs.apply(l,d));(l.log||c.log||console.log.bind(console)).apply(l,d)}d.enabled=!1;l.enabled=!0;var f=c.enabled(a)?l:d;
f.namespace=a;return f};c.coerce=function(a){return a instanceof Error?a.stack||a.message:a};c.disable=function(){c.enable("")};c.enable=function(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),g=b.length,d=0;d<g;d++)b[d]&&(a=b[d].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))};c.enabled=function(a){var b;var g=0;for(b=c.skips.length;g<b;g++)if(c.skips[g].test(a))return!1;g=0;for(b=c.names.length;g<b;g++)if(c.names[g].test(a))return!0;
return!1};c.humanize=a("ms");c.names=[];c.skips=[];c.formatters={};var b=0,g},{ms:38}],23:[function(a,d,c){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");d.exports=function(a){var c=a,d=a.indexOf("["),
l=a.indexOf("]");-1!=d&&-1!=l&&(a=a.substring(0,d)+a.substring(d,l).replace(/:/g,";")+a.substring(l,a.length));a=b.exec(a||"");for(var f={},C=14;C--;)f[g[C]]=a[C]||"";-1!=d&&-1!=l&&(f.source=c,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0);return f}},{}],24:[function(a,d,c){(function(b){function g(a,b,g){if(!b)return c.encodeBase64Packet(a,g);var d=new FileReader;d.onload=function(){a.data=d.result;
c.encodePacket(a,b,!0,g)};return d.readAsArrayBuffer(a.data)}function d(a,b,c){var g=Array(a.length);c=C(a.length,c);for(var d=function(a,c,d){b(c,function(b,c){g[a]=c;d(b,g)})},l=0;l<a.length;l++)d(l,a[l],c)}var f=a("./keys"),n=a("has-binary"),x=a("arraybuffer.slice"),t=a("base64-arraybuffer"),C=a("after"),h=a("utf8"),B=navigator.userAgent.match(/Android/i),k=/PhantomJS/i.test(navigator.userAgent),m=B||k;c.protocol=3;var p=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},q=f(p),
N={type:"error",data:"parser error"},y=a("blob");c.encodePacket=function(a,d,l,n){"function"==typeof d&&(n=d,d=!1);"function"==typeof l&&(n=l,l=null);var f=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&f instanceof ArrayBuffer){if(d){l=a.data;d=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=p[a.type];for(a=0;a<d.length;a++)l[a+1]=d[a];a=n(l.buffer)}else a=c.encodeBase64Packet(a,n);return a}if(y&&f instanceof b.Blob)return d?m?a=g(a,d,n):(d=new Uint8Array(1),d[0]=p[a.type],
a=new y([d.buffer,a.data]),a=n(a)):a=c.encodeBase64Packet(a,n),a;if(f&&f.base64)return n("b"+c.packets[a.type]+a.data.data);d=p[a.type];void 0!==a.data&&(d+=l?h.encode(String(a.data)):String(a.data));return n(""+d)};c.encodeBase64Packet=function(a,g){var d="b"+c.packets[a.type];if(y&&a.data instanceof y){var l=new FileReader;l.onload=function(){var a=l.result.split(",")[1];g(d+a)};return l.readAsDataURL(a.data)}try{var n=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(dh){a=new Uint8Array(a.data);
n=Array(a.length);for(var f=0;f<a.length;f++)n[f]=a[f];n=String.fromCharCode.apply(null,n)}d+=b.btoa(n);return g(d)};c.decodePacket=function(a,b,g){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(g)try{a=h.decode(a)}catch(ch){return N}g=a.charAt(0);return Number(g)==g&&q[g]?1<a.length?{type:q[g],data:a.substring(1)}:{type:q[g]}:N}g=(new Uint8Array(a))[0];a=x(a,1);y&&"blob"===b&&(a=new y([a]));return{type:q[g],data:a}};c.decodeBase64Packet=function(a,
c){var g=q[a.charAt(0)];if(!b.ArrayBuffer)return{type:g,data:{base64:!0,data:a.substr(1)}};a=t.decode(a.substr(1));"blob"===c&&y&&(a=new y([a]));return{type:g,data:a}};c.encodePayload=function(a,b,g){"function"==typeof b&&(g=b,b=null);var l=n(a);if(b&&l)return y&&!m?c.encodePayloadAsBlob(a,g):c.encodePayloadAsArrayBuffer(a,g);if(!a.length)return g("0:");d(a,function(a,g){c.encodePacket(a,l?b:!1,!0,function(a){g(null,a.length+":"+a)})},function(a,b){return g(b.join(""))})};c.decodePayload=function(a,
b,g){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,g);"function"===typeof b&&(g=b,b=null);if(""==a)return g(N,0,1);var d="";for(var l,n,f=0,t=a.length;f<t;f++)if(n=a.charAt(f),":"!=n)d+=n;else{if(""==d||d!=(l=Number(d)))return g(N,0,1);n=a.substr(f+1,l);if(d!=n.length)return g(N,0,1);if(n.length){d=c.decodePacket(n,b,!0);if(N.type==d.type&&N.data==d.data)return g(N,0,1);if(!1===g(d,f+l,t))return}f+=l;d=""}if(""!=d)return g(N,0,1)};c.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));
d(a,function(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})},function(a,c){a=c.reduce(function(a,b){b="string"===typeof b?b.length:b.byteLength;return a+b.toString().length+b+2},0);var g=new Uint8Array(a),d=0;c.forEach(function(a){var b="string"===typeof a,c=a;if(b){c=new Uint8Array(a.length);for(var l=0;l<a.length;l++)c[l]=a.charCodeAt(l);c=c.buffer}b?g[d++]=0:g[d++]=1;a=c.byteLength.toString();for(l=0;l<a.length;l++)g[d++]=parseInt(a[l]);g[d++]=255;c=new Uint8Array(c);for(l=0;l<c.length;l++)g[d++]=
c[l]});return b(g.buffer)})};c.encodePayloadAsBlob=function(a,b){d(a,function(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var g=new Uint8Array(a.length),d=0;d<a.length;d++)g[d]=a.charCodeAt(d);a=g.buffer;c[0]=0}g=(a instanceof ArrayBuffer?a.byteLength:a.size).toString();var l=new Uint8Array(g.length+1);for(d=0;d<g.length;d++)l[d]=parseInt(g[d]);l[g.length]=255;y&&(a=new y([c.buffer,l.buffer,a]),b(null,a))})},function(a,c){return b(new y(c))})};
c.decodePayloadAsBinary=function(a,b,g){"function"===typeof b&&(g=b,b=null);for(var d=[],l=!1;0<a.byteLength;){for(var n=new Uint8Array(a),f=0===n[0],t="",B=1;255!=n[B];B++){if(310<t.length){l=!0;break}t+=n[B]}if(l)return g(N,0,1);a=x(a,2+t.length);t=parseInt(t);n=x(a,0,t);if(f)try{n=String.fromCharCode.apply(null,new Uint8Array(n))}catch(eh){for(f=new Uint8Array(n),n="",B=0;B<f.length;B++)n+=String.fromCharCode(f[B])}d.push(n);a=x(a,t)}var v=d.length;d.forEach(function(a,d){g(c.decodePacket(a,b,
!0),d,v)})}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./keys":25,after:1,"arraybuffer.slice":2,"base64-arraybuffer":5,blob:6,"has-binary":30,utf8:60}],25:[function(a,d,c){d.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty,d;for(d in a)c.call(a,d)&&b.push(d);return b}},{}],26:[function(a,d,c){function b(a){l.call(this);a=a||{};this.config={chunksize:16384,pacing:0};for(var b in a)this.config[b]=
a[b];this.channel=this.file=null}function g(){l.call(this);this.receiveBuffer=[];this.received=0;this.metadata={};this.channel=null}var l=a("wildemitter");a=a("util");a.inherits(b,l);b.prototype.send=function(a,b){var c=this;this.file=a;this.channel=b;var g="number"!==typeof b.bufferedAmountLowThreshold,d=0,l=function(){var n=new window.FileReader;n.onload=function(){return function(n){c.channel.send(n.target.result);c.emit("progress",d,a.size,n.target.result);a.size>d+n.target.result.byteLength?
g?window.setTimeout(l,c.config.pacing):b.bufferedAmount<=b.bufferedAmountLowThreshold&&window.setTimeout(l,0):(c.emit("progress",a.size,a.size,null),c.emit("sentFile"));d+=c.config.chunksize}}(a);var f=a.slice(d,d+c.config.chunksize);n.readAsArrayBuffer(f)};g||(b.bufferedAmountLowThreshold=8*this.config.chunksize,b.addEventListener("bufferedamountlow",l));window.setTimeout(l,0)};a.inherits(g,l);g.prototype.receive=function(a,b){var c=this;a&&(this.metadata=a);this.channel=b;b.binaryType="arraybuffer";
this.channel.onmessage=function(a){c.received+=a.data.byteLength;c.receiveBuffer.push(a.data);c.emit("progress",c.received,c.metadata.size,a.data);c.received===c.metadata.size?(c.emit("receivedFile",new window.Blob(c.receiveBuffer),c.metadata),c.receiveBuffer=[]):c.received>c.metadata.size&&(console.error("received more than expected, discarding..."),c.receiveBuffer=[])}};d.exports={};d.exports.support="undefined"!==typeof window&&window&&window.File&&window.FileReader&&window.Blob;d.exports.Sender=
b;d.exports.Receiver=g},{util:63,wildemitter:65}],27:[function(a,d,c){var b={};d.exports=function(a,c){var g=2===arguments.length,d=g?c:a;if("undefined"===typeof window||"http:"===window.location.protocol){var l=Error("NavigatorUserMediaError");l.name="HTTPS_REQUIRED";return d(l)}if(window.navigator.userAgent.match("Chrome")){var f=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),C=33,h=!window.chrome.webstore;window.navigator.userAgent.match("Linux")&&(C=35);sessionStorage.getScreenMediaJSExtensionId?
chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,function(b){b&&""!==b.sourceId?(a=g&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}},a.video.mandatory.chromeMediaSourceId=b.sourceId,window.navigator.mediaDevices.getUserMedia(a).then(function(a){d(null,a)}).catch(function(a){d(a)})):(b=Error("NavigatorUserMediaError"),b.name="NotAllowedError",d(b))}):window.cefGetScreenMedia?
window.cefGetScreenMedia(function(b){b?(a=g&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},a.video.mandatory.chromeMediaSourceId=b,window.navigator.mediaDevices.getUserMedia(a).then(function(a){d(null,a)}).catch(function(a){d(a)})):(b=Error("cefGetScreenMediaError"),b.name="CEF_GETSCREENMEDIA_CANCELED",d(b))}):h||26<=f&&f<=C?(a=g&&a||{video:{mandatory:{googLeakyBucket:!0,
maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){d(null,a)}).catch(function(a){d(a)})):(f=window.setTimeout(function(){l=Error("NavigatorUserMediaError");l.name="EXTENSION_UNAVAILABLE";return d(l)},1E3),b[f]=[d,g?a:null],window.postMessage({type:"getScreen",id:f},"*"))}else window.navigator.userAgent.match("Firefox")&&(33<=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],
10)?(a=g&&a||{video:{mozMediaSource:"window",mediaSource:"window"}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){d(null,a);var b=a.currentTime,c=window.setInterval(function(){a||window.clearInterval(c);if(a.currentTime==b&&(window.clearInterval(c),a.onended))a.onended();b=a.currentTime},500)}).catch(function(a){d(a)})):(l=Error("NavigatorUserMediaError"),l.name="EXTENSION_UNAVAILABLE"))};"undefined"!==typeof window&&window.addEventListener("message",function(a){if(a.origin==window.location.origin)if("gotScreen"==
a.data.type&&b[a.data.id]){var c=b[a.data.id],g=c[1],d=c[0];delete b[a.data.id];""===a.data.sourceId?(a=Error("NavigatorUserMediaError"),a.name="NotAllowedError",d(a)):(g=g||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},g.video.mandatory.chromeMediaSourceId=a.data.sourceId,window.navigator.mediaDevices.getUserMedia(g).then(function(a){d(null,a)}).catch(function(a){d(a)}))}else"getScreenPending"==
a.data.type&&window.clearTimeout(a.data.id)})},{}],28:[function(a,d,c){d.exports=function(){return this}()},{}],29:[function(a,d,c){var b=a("wildemitter"),g;"undefined"!==typeof window&&(g=window.AudioContext||window.webkitAudioContext);var l=null;d.exports=function(a,c){var d=new b;if(!g)return d;c=c||{};var f=c.smoothing||.1,n=c.interval||50,v=c.threshold,B=c.play;c=c.history||10;var h=!0;l||(l=new g);var k=l.createAnalyser();k.fftSize=512;k.smoothingTimeConstant=f;var m=new Float32Array(k.frequencyBinCount);
a.jquery&&(a=a[0]);if(a instanceof HTMLAudioElement||a instanceof HTMLVideoElement){var p=l.createMediaElementSource(a);"undefined"===typeof B&&(B=!0)}else p=l.createMediaStreamSource(a);v=v||-50;p.connect(k);B&&k.connect(l.destination);d.speaking=!1;d.setThreshold=function(a){v=a};d.setInterval=function(a){n=a};d.stop=function(){h=!1;d.emit("volume_change",-100,v);d.speaking&&(d.speaking=!1,d.emit("stopped_speaking"));k.disconnect();p.disconnect()};d.speakingHistory=[];for(a=0;a<c;a++)d.speakingHistory.push(0);
var q=function(){setTimeout(function(){if(h){var a=-Infinity;k.getFloatFrequencyData(m);for(var b=4,c=m.length;b<c;b++)m[b]>a&&0>m[b]&&(a=m[b]);d.emit("volume_change",a,v);b=0;if(a>v&&!d.speaking){for(c=d.speakingHistory.length-3;c<d.speakingHistory.length;c++)b+=d.speakingHistory[c];2<=b&&(d.speaking=!0,d.emit("speaking"))}else if(a<v&&d.speaking){for(c=0;c<d.speakingHistory.length;c++)b+=d.speakingHistory[c];0==b&&(d.speaking=!1,d.emit("stopped_speaking"))}d.speakingHistory.shift();d.speakingHistory.push(0+
(a>v));q()}},n)};q();return d}},{wildemitter:65}],30:[function(a,d,c){(function(b){var c=a("isarray");d.exports=function(a){function d(a){if(!a)return!1;if(b.Buffer&&b.Buffer.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer||b.Blob&&a instanceof Blob||b.File&&a instanceof File)return!0;if(c(a))for(var g=0;g<a.length;g++){if(d(a[g]))return!0}else if(a&&"object"==typeof a)for(g in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,g)&&d(a[g]))return!0;return!1}return d(a)}}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{isarray:33}],31:[function(a,d,c){a=a("global");try{d.exports="XMLHttpRequest"in a&&"withCredentials"in new a.XMLHttpRequest}catch(b){d.exports=!1}},{global:28}],32:[function(a,d,c){var b=[].indexOf;d.exports=function(a,c){if(b)return a.indexOf(c);for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}},{}],33:[function(a,d,c){d.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},
{}],34:[function(a,d,c){(function(a){function b(a){if(b[a]!==n)return b[a];if("bug-string-char-index"==a)var c=!1;else if("json"==a)c=b("json-stringify")&&b("json-parse");else{var g;if("json-stringify"==a){c=t.stringify;var l="function"==typeof c&&h;if(l){(g=function(){return 1}).toJSON=g;try{l="0"===c(0)&&"0"===c(new Number)&&'""'==c(new String)&&c(d)===n&&c(n)===n&&c()===n&&"1"===c(g)&&"[1]"==c([g])&&"[null]"==c([n])&&"null"==c(null)&&"[null,null,null]"==c([n,d,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==
c({a:[g,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===c(null,g)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==c(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==c(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==c(new Date(-1))}catch(Ha){l=!1}}c=l}if("json-parse"==a){c=t.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){g=c('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var f=5==g.a.length&&1===g.a[0];if(f){try{f=
!c('"\t"')}catch(Ha){}if(f)try{f=1!==c("01")}catch(Ha){}if(f)try{f=1!==c("1.")}catch(Ha){}}}}catch(Ha){f=!1}c=f}}return b[a]=!!c}var d={}.toString,f,n,x="object"==typeof JSON&&JSON,t="object"==typeof c&&c&&!c.nodeType&&c;t&&x?(t.stringify=x.stringify,t.parse=x.parse):t=a.JSON=x||{};var h=new Date(-0xc782b5b800cec);try{h=-109252==h.getUTCFullYear()&&0===h.getUTCMonth()&&1===h.getUTCDate()&&10==h.getUTCHours()&&37==h.getUTCMinutes()&&6==h.getUTCSeconds()&&708==h.getUTCMilliseconds()}catch(fh){}if(!b("json")){var k=
b("bug-string-char-index");if(!h)var B=Math.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],m=function(a,b){return O[b]+365*(a-1970)+B((a-1969+(b=+(1<b)))/4)-B((a-1901+b)/100)+B((a-1601+b)/400)};(f={}.hasOwnProperty)||(f=function(a){var b={};if((b.__proto__=null,b.__proto__={toString:1},b).toString!=d)f=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a};else{var c=b.constructor;f=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in
b&&this[a]===b[a])}}b=null;return f.call(this,a)});var p={"boolean":1,number:1,string:1,undefined:1};var q=function(a,b){var c=0,g,l;(g=function(){this.valueOf=0}).prototype.valueOf=0;var n=new g;for(l in n)f.call(n,l)&&c++;g=n=null;c?q=2==c?function(a,b){var c={},g="[object Function]"==d.call(a),l;for(l in a)g&&"prototype"==l||f.call(c,l)||!(c[l]=1)||!f.call(a,l)||b(l)}:function(a,b){var c="[object Function]"==d.call(a),g,l;for(g in a)c&&"prototype"==g||!f.call(a,g)||(l="constructor"===g)||b(g);
(l||f.call(a,g="constructor"))&&b(g)}:(n="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),q=function(a,b){var c="[object Function]"==d.call(a),g,l;if(l=!c&&"function"!=typeof a.constructor)l=typeof a.hasOwnProperty,l="object"==l?!!a.hasOwnProperty:!p[l];l=l?a.hasOwnProperty:f;for(g in a)c&&"prototype"==g||!l.call(a,g)||b(g);for(c=n.length;g=n[--c];l.call(a,g)&&b(g));});return q(a,b)};if(!b("json-stringify")){var N={92:"\\\\",34:'\\"',8:"\\b",
12:"\\f",10:"\\n",13:"\\r",9:"\\t"},y=function(a,b){return("000000"+(b||0)).slice(-a)},r=function(a){var b='"',c=0,d=a.length,g=10<d&&k,l;for(g&&(l=a.split(""));c<d;c++){var f=a.charCodeAt(c);switch(f){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=N[f];break;default:b=32>f?b+("\\u00"+y(2,f.toString(16))):b+(g?l[c]:k?a.charAt(c):a[c])}}return b+'"'},u=function(a,b,c,g,l,t,h){var x;try{var C=b[a]}catch(hh){}if("object"==typeof C&&C){var v=d.call(C);if("[object Date]"!=v||f.call(C,"toJSON"))"function"==
typeof C.toJSON&&("[object Number]"!=v&&"[object String]"!=v&&"[object Array]"!=v||f.call(C,"toJSON"))&&(C=C.toJSON(a));else if(C>-1/0&&C<1/0){if(m){var k=B(C/864E5);for(v=B(k/365.2425)+1970-1;m(v+1,0)<=k;v++);for(x=B((k-m(v,0))/30.42);m(v,x+1)<=k;x++);k=1+k-m(v,x);var W=(C%864E5+864E5)%864E5;var O=B(W/36E5)%24;var p=B(W/6E4)%60;var ac=B(W/1E3)%60;W%=1E3}else v=C.getUTCFullYear(),x=C.getUTCMonth(),k=C.getUTCDate(),O=C.getUTCHours(),p=C.getUTCMinutes(),ac=C.getUTCSeconds(),W=C.getUTCMilliseconds();
C=(0>=v||1E4<=v?(0>v?"-":"+")+y(6,0>v?-v:v):y(4,v))+"-"+y(2,x+1)+"-"+y(2,k)+"T"+y(2,O)+":"+y(2,p)+":"+y(2,ac)+"."+y(3,W)+"Z"}else C=null}c&&(C=c.call(b,a,C));if(null===C)return"null";v=d.call(C);if("[object Boolean]"==v)return""+C;if("[object Number]"==v)return C>-1/0&&C<1/0?""+C:"null";if("[object String]"==v)return r(""+C);if("object"==typeof C){for(a=h.length;a--;)if(h[a]===C)throw TypeError();h.push(C);var N=[];b=t;t+=l;if("[object Array]"==v){x=0;for(a=C.length;x<a;x++)v=u(x,C,c,g,l,t,h),N.push(v===
n?"null":v);a=N.length?l?"[\n"+t+N.join(",\n"+t)+"\n"+b+"]":"["+N.join(",")+"]":"[]"}else q(g||C,function(a){var b=u(a,C,c,g,l,t,h);b!==n&&N.push(r(a)+":"+(l?" ":"")+b)}),a=N.length?l?"{\n"+t+N.join(",\n"+t)+"\n"+b+"}":"{"+N.join(",")+"}":"{}";h.pop();return a}};t.stringify=function(a,b,c){var g;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==(g=d.call(b)))var l=b;else if("[object Array]"==g){var f={};for(var n=0,t=b.length,B;n<t;B=b[n++],(g=d.call(B),"[object String]"==g||
"[object Number]"==g)&&(f[B]=1));}if(c)if("[object Number]"==(g=d.call(c))){if(0<(c-=c%1)){var C="";for(10<c&&(c=10);C.length<c;C+=" ");}}else"[object String]"==g&&(C=10>=c.length?c:c.slice(0,10));return u("",(B={},B[""]=a,B),l,f,C,"",[])}}if(!b("json-parse")){var w=String.fromCharCode,z={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F,A,D=function(){F=A=null;throw SyntaxError();},E=function(){for(var a=A,b=a.length,c,d,g,l,f;F<b;)switch(f=a.charCodeAt(F),f){case 9:case 10:case 13:case 32:F++;
break;case 123:case 125:case 91:case 93:case 58:case 44:return c=k?a.charAt(F):a[F],F++,c;case 34:c="@";for(F++;F<b;)if(f=a.charCodeAt(F),32>f)D();else if(92==f)switch(f=a.charCodeAt(++F),f){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=z[f];F++;break;case 117:d=++F;for(g=F+4;F<g;F++)f=a.charCodeAt(F),48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f||D();c+=w("0x"+a.slice(d,F));break;default:D()}else{if(34==f)break;f=a.charCodeAt(F);for(d=F;32<=f&&92!=f&&34!=f;)f=a.charCodeAt(++F);
c+=a.slice(d,F)}if(34==a.charCodeAt(F))return F++,c;D();default:d=F;45==f&&(l=!0,f=a.charCodeAt(++F));if(48<=f&&57>=f){for(48==f&&(f=a.charCodeAt(F+1),48<=f&&57>=f)&&D();F<b&&(f=a.charCodeAt(F),48<=f&&57>=f);F++);if(46==a.charCodeAt(F)){for(g=++F;g<b&&(f=a.charCodeAt(g),48<=f&&57>=f);g++);g==F&&D();F=g}f=a.charCodeAt(F);if(101==f||69==f){f=a.charCodeAt(++F);43!=f&&45!=f||F++;for(g=F;g<b&&(f=a.charCodeAt(g),48<=f&&57>=f);g++);g==F&&D();F=g}return+a.slice(d,F)}l&&D();if("true"==a.slice(F,F+4))return F+=
4,!0;if("false"==a.slice(F,F+5))return F+=5,!1;if("null"==a.slice(F,F+4))return F+=4,null;D()}return"$"},G=function(a){var b,c;"$"==a&&D();if("string"==typeof a){if("@"==(k?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;c||(c=!0)){a=E();if("]"==a)break;c&&(","==a?(a=E(),"]"==a&&D()):D());","==a&&D();b.push(G(a))}return b}if("{"==a){for(b={};;c||(c=!0)){a=E();if("}"==a)break;c&&(","==a?(a=E(),"}"==a&&D()):D());","!=a&&"string"==typeof a&&"@"==(k?a.charAt(0):a[0])&&":"==E()||D();b[a.slice(1)]=
G(E())}return b}D()}return a},H=function(a,b,c){c=I(a,b,c);c===n?delete a[b]:a[b]=c},I=function(a,b,c){var g=a[b],l;if("object"==typeof g&&g)if("[object Array]"==d.call(g))for(l=g.length;l--;)H(g,l,c);else q(g,function(a){H(g,a,c)});return c.call(a,b,g)};t.parse=function(a,b){var c;F=0;A=""+a;a=G(E());"$"!=E()&&D();F=A=null;return b&&"[object Function]"==d.call(b)?I((c={},c[""]=a,c),"",b):a}}}})(this)},{}],35:[function(a,d,c){function b(a){var b=!0;a.getTracks().forEach(function(a){b="ended"===a.readyState&&
b});return b}function g(){if("undefined"===typeof window||!window.navigator.mozGetUserMedia)return!1;var a=window.navigator.userAgent.match(/Firefox\/(\d+)\./);return 50>(a&&1<=a.length&&parseInt(a[1],10))}function l(a){h.call(this);var b=this.config={detectSpeakingEvents:!1,audioFallback:!1,media:{audio:!0,video:!0},harkOptions:null,logger:t},c;for(c in a)a.hasOwnProperty(c)&&(this.config[c]=a[c]);this.logger=b.logger;this._log=this.logger.log.bind(this.logger,"LocalMedia:");this._logerror=this.logger.error.bind(this.logger,
"LocalMedia:");this.localStreams=[];this.localScreens=[];navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||this._logerror("Your browser does not support local media capture.");this._audioMonitors=[];this.on("localStreamStopped",this._stopAudioMonitor.bind(this));this.on("localScreenStopped",this._stopAudioMonitor.bind(this))}c=a("util");var f=a("hark"),n=a("getscreenmedia"),h=a("wildemitter"),t=a("mockconsole");c.inherits(l,h);l.prototype.start=function(a,c){var g=this,d=a||this.config.media;
this.emit("localStreamRequested",d);navigator.mediaDevices.getUserMedia(d).then(function(a){d.audio&&g.config.detectSpeakingEvents&&g._setupAudioMonitor(a,g.config.harkOptions);g.localStreams.push(a);a.getTracks().forEach(function(c){c.addEventListener("ended",function(){b(a)&&g._removeStream(a)})});g.emit("localStream",a);if(c)return c(null,a)}).catch(function(a){if(g.config.audioFallback&&"NotFoundError"===a.name&&!1!==d.video)d.video=!1,g.start(d,c);else if(g.emit("localStreamRequestFailed",d),
c)return c(a,null)})};l.prototype.stop=function(a){this.stopStream(a);this.stopScreenShare(a)};l.prototype.stopStream=function(a){var b=this;a?-1<this.localStreams.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),g()&&this._removeStream(a)):this.localStreams.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});g()&&b._removeStream(a)})};l.prototype.startScreenShare=function(a,b){var c=this;this.emit("localScreenRequested");"function"!==typeof a||b||(b=a,a=null);n(a,function(a,
g){a?c.emit("localScreenRequestFailed"):(c.localScreens.push(g),g.getTracks().forEach(function(a){a.addEventListener("ended",function(){var a=!0;g.getTracks().forEach(function(b){a="ended"===b.readyState&&a});a&&c._removeStream(g)})}),c.emit("localScreen",g));if(b)return b(a,g)})};l.prototype.stopScreenShare=function(a){var b=this;a?-1<this.localScreens.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),g()&&this._removeStream(a)):this.localScreens.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});
g()&&b._removeStream(a)})};l.prototype.mute=function(){this._audioEnabled(!1);this.emit("audioOff")};l.prototype.unmute=function(){this._audioEnabled(!0);this.emit("audioOn")};l.prototype.pauseVideo=function(){this._videoEnabled(!1);this.emit("videoOff")};l.prototype.resumeVideo=function(){this._videoEnabled(!0);this.emit("videoOn")};l.prototype.pause=function(){this.mute();this.pauseVideo()};l.prototype.resume=function(){this.unmute();this.resumeVideo()};l.prototype._audioEnabled=function(a){this.localStreams.forEach(function(b){b.getAudioTracks().forEach(function(b){b.enabled=
!!a})})};l.prototype._videoEnabled=function(a){this.localStreams.forEach(function(b){b.getVideoTracks().forEach(function(b){b.enabled=!!a})})};l.prototype.isAudioEnabled=function(){var a=!0;this.localStreams.forEach(function(b){b.getAudioTracks().forEach(function(b){a=a&&b.enabled})});return a};l.prototype.isVideoEnabled=function(){var a=!0;this.localStreams.forEach(function(b){b.getVideoTracks().forEach(function(b){a=a&&b.enabled})});return a};l.prototype._removeStream=function(a){var b=this.localStreams.indexOf(a);
-1<b?(this.localStreams.splice(b,1),this.emit("localStreamStopped",a)):(b=this.localScreens.indexOf(a),-1<b&&(this.localScreens.splice(b,1),this.emit("localScreenStopped",a)))};l.prototype._setupAudioMonitor=function(a,b){this._log("Setup audio");b=f(a,b);var c=this,g;b.on("speaking",function(){c.emit("speaking")});b.on("stopped_speaking",function(){g&&clearTimeout(g);g=setTimeout(function(){c.emit("stoppedSpeaking")},1E3)});b.on("volume_change",function(a,b){c.emit("volumeChange",a,b)});this._audioMonitors.push({audio:b,
stream:a})};l.prototype._stopAudioMonitor=function(a){var b=-1;this._audioMonitors.forEach(function(c,g){c.stream===a&&(b=g)});-1<b&&(this._audioMonitors[b].audio.stop(),this._audioMonitors.splice(b,1))};d.exports=l},{getscreenmedia:27,hark:29,mockconsole:37,util:63,wildemitter:65}],36:[function(a,d,c){(function(a){function b(a,b){a.set(b[0],b[1]);return a}function l(a,b){a.add(b);return a}function f(a,b){for(var c=-1,g=a?a.length:0;++c<g&&!1!==b(a[c],c,a););return a}function n(a,b,c,g){var d=-1,
l=a?a.length:0;for(g&&l&&(c=a[++d]);++d<l;)c=b(c,a[d],d,a);return c}function h(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(jh){}return b}function t(a){var b=-1,c=Array(a.size);a.forEach(function(a,g){c[++b]=[g,a]});return c}function k(a,b){return function(c){return a(b(c))}}function W(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function B(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var g=a[b];this.set(g[0],g[1])}}function O(a){var b=
-1,c=a?a.length:0;for(this.clear();++b<c;){var g=a[b];this.set(g[0],g[1])}}function m(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var g=a[b];this.set(g[0],g[1])}}function p(a){this.__data__=new O(a)}function q(a,b,c){var g=a[b];R.call(a,b)&&(g===c||g!==g&&c!==c)&&(void 0!==c||b in a)||(a[b]=c)}function N(a,b){for(var c=a.length;c--;){var g=a[c][0];if(g===b||g!==g&&b!==b)return c}return-1}function y(a,b){return a&&A(b,L(b),a)}function r(a,b,c,g,d,l,n){var t;g&&(t=l?g(a,d,l,n):g(a));if(void 0!==
t)return t;if(!Ha(a))return a;if(d=wa(a)){if(t=H(a),!b)return F(a,t)}else{var B=ia(a),x="[object Function]"==B||"[object GeneratorFunction]"==B;if(ya(a))return w(a,b);if("[object Object]"==B||"[object Arguments]"==B||x&&!l){if(h(a))return l?a:{};t=I(x?{}:a);if(!b)return D(a,y(t,a))}else{if(!S[B])return l?a:{};t=J(a,B,r,b)}}n||(n=new p);if(l=n.get(a))return l;n.set(a,t);if(!d)var v=c?u(a,L,xa):L(a);f(v||a,function(d,l){v&&(l=d,d=a[l]);q(t,l,r(d,b,c,g,l,a,n))});return t}function u(a,b,c){b=b(a);if(!wa(a)){a=
c(a);c=-1;for(var g=a.length,d=b.length;++c<g;)b[d+c]=a[c]}return b}function w(a,b){if(b)return a.slice();b=new a.constructor(a.length);a.copy(b);return b}function z(a){var b=new a.constructor(a.byteLength);(new ca(b)).set(new ca(a));return b}function F(a,b){var c=-1,g=a.length;for(b||(b=Array(g));++c<g;)b[c]=a[c];return b}function A(a,b,c,g){c||(c={});for(var d=-1,l=b.length;++d<l;){var f=b[d],n=g?g(c[f],a[f],f,c,a):void 0;q(c,f,void 0===n?a[f]:n)}return c}function D(a,b){return A(a,xa(a),b)}function E(a,
b){a=a.__data__;var c=typeof b;return("string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function G(a,b){a=null==a?void 0:a[b];b=!Ha(a)||aa&&aa in a?!1:(we(a)||h(a)?ea:T).test(Za(a));return b?a:void 0}function H(a){var b=a.length,c=a.constructor(b);b&&"string"==typeof a[0]&&R.call(a,"index")&&(c.index=a.index,c.input=a.input);return c}function I(a){"function"!=typeof a.constructor||ue(a)?a={}:(a=ha(a),a=Ha(a)?ka(a):{});return a}
function J(a,c,g,d){var f=a.constructor;switch(c){case "[object ArrayBuffer]":return z(a);case "[object Boolean]":case "[object Date]":return new f(+a);case "[object DataView]":return c=d?z(a.buffer):a.buffer,new a.constructor(c,a.byteOffset,a.byteLength);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return c=
d?z(a.buffer):a.buffer,new a.constructor(c,a.byteOffset,a.length);case "[object Map]":return c=d?g(t(a),!0):t(a),n(c,b,new a.constructor);case "[object Number]":case "[object String]":return new f(a);case "[object RegExp]":return c=new a.constructor(a.source,P.exec(a)),c.lastIndex=a.lastIndex,c;case "[object Set]":return c=d?g(W(a),!0):W(a),n(c,l,new a.constructor);case "[object Symbol]":return qa?Object(qa.call(a)):{}}}function ue(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||
X)}function Za(a){if(null!=a){try{return ba.call(a)}catch(ih){}return a+""}return""}function ve(a){var b;if(b=null!=a)b=a.length,b="number"==typeof b&&-1<b&&0==b%1&&9007199254740991>=b;return b&&!we(a)}function we(a){a=Ha(a)?Y.call(a):"";return"[object Function]"==a||"[object GeneratorFunction]"==a}function Ha(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function L(a){if(ve(a)){var b;(b=wa(a))||(b=!!a&&"object"==typeof a&&ve(a)&&R.call(a,"callee")&&(!la.call(a,"callee")||"[object Arguments]"==
Y.call(a)));if(b){b=a.length;for(var c=String,g=-1,d=Array(b);++g<b;)d[g]=c(g);b=d}else b=[];c=b.length;g=!!c;for(var l in a){if(!(d=!R.call(a,l))&&(d=g)&&!(d="length"==l)){d=l;var f=c;f=null==f?9007199254740991:f;d=!!f&&("number"==typeof d||V.test(d))&&-1<d&&0==d%1&&d<f}d||b.push(l)}a=b}else if(ue(a)){l=[];for(b in Object(a))R.call(a,b)&&"constructor"!=b&&l.push(b);a=l}else a=pa(a);return a}function Sf(){return[]}function M(){return!1}var P=/\w*$/,T=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,
S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=
!0;S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1;var K="object"==typeof self&&self&&self.Object===Object&&self;a="object"==typeof a&&a&&a.Object===Object&&a||K||Function("return this")();var Q=(K="object"==typeof c&&c&&!c.nodeType&&c)&&"object"==typeof d&&d&&!d.nodeType&&d;K=Q&&Q.exports===K;Q=Array.prototype;var U=Function.prototype,X=Object.prototype,Z=a["__core-js_shared__"],aa=function(){var a=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),
ba=U.toString,R=X.hasOwnProperty,Y=X.toString,ea=RegExp("^"+ba.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");U=K?a.Buffer:void 0;K=a.Symbol;var ca=a.Uint8Array,ha=k(Object.getPrototypeOf,Object),ka=Object.create,la=X.propertyIsEnumerable,oa=Q.splice;Q=Object.getOwnPropertySymbols;U=U?U.isBuffer:void 0;var pa=k(Object.keys,Object),ja=G(a,"DataView"),da=G(a,"Map"),ma=G(a,"Promise"),na=G(a,"Set");a=G(a,"WeakMap");var fa=G(Object,
"create"),ra=Za(ja),sa=Za(da),ta=Za(ma),ua=Za(na),va=Za(a),qa=(K=K?K.prototype:void 0)?K.valueOf:void 0;B.prototype.clear=function(){this.__data__=fa?fa(null):{}};B.prototype["delete"]=function(a){return this.has(a)&&delete this.__data__[a]};B.prototype.get=function(a){var b=this.__data__;return fa?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):R.call(b,a)?b[a]:void 0};B.prototype.has=function(a){var b=this.__data__;return fa?void 0!==b[a]:R.call(b,a)};B.prototype.set=function(a,b){this.__data__[a]=
fa&&void 0===b?"__lodash_hash_undefined__":b;return this};O.prototype.clear=function(){this.__data__=[]};O.prototype["delete"]=function(a){var b=this.__data__;a=N(b,a);if(0>a)return!1;a==b.length-1?b.pop():oa.call(b,a,1);return!0};O.prototype.get=function(a){var b=this.__data__;a=N(b,a);return 0>a?void 0:b[a][1]};O.prototype.has=function(a){return-1<N(this.__data__,a)};O.prototype.set=function(a,b){var c=this.__data__,g=N(c,a);0>g?c.push([a,b]):c[g][1]=b;return this};m.prototype.clear=function(){this.__data__=
{hash:new B,map:new (da||O),string:new B}};m.prototype["delete"]=function(a){return E(this,a)["delete"](a)};m.prototype.get=function(a){return E(this,a).get(a)};m.prototype.has=function(a){return E(this,a).has(a)};m.prototype.set=function(a,b){E(this,a).set(a,b);return this};p.prototype.clear=function(){this.__data__=new O};p.prototype["delete"]=function(a){return this.__data__["delete"](a)};p.prototype.get=function(a){return this.__data__.get(a)};p.prototype.has=function(a){return this.__data__.has(a)};
p.prototype.set=function(a,b){var c=this.__data__;if(c instanceof O){c=c.__data__;if(!da||199>c.length)return c.push([a,b]),this;c=this.__data__=new m(c)}c.set(a,b);return this};var xa=Q?k(Q,Object):Sf,ia=function(a){return Y.call(a)};if(ja&&"[object DataView]"!=ia(new ja(new ArrayBuffer(1)))||da&&"[object Map]"!=ia(new da)||ma&&"[object Promise]"!=ia(ma.resolve())||na&&"[object Set]"!=ia(new na)||a&&"[object WeakMap]"!=ia(new a))ia=function(a){var b=Y.call(a);if(a=(a="[object Object]"==b?a.constructor:
void 0)?Za(a):void 0)switch(a){case ra:return"[object DataView]";case sa:return"[object Map]";case ta:return"[object Promise]";case ua:return"[object Set]";case va:return"[object WeakMap]"}return b};var wa=Array.isArray,ya=U||M;d.exports=function(a){return r(a,!0,!0)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],37:[function(a,d,c){a="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd time timeEnd trace warn".split(" ");
c=a.length;for(var b=function(){},g={};c--;)g[a[c]]=b;d.exports=g},{}],38:[function(a,d,c){function b(a){if(a=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a)){var b=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "y":return b*f;case "days":case "day":case "d":return b*l;case "hours":case "hour":case "h":return 36E5*b;case "minutes":case "minute":case "m":return 6E4*b;case "seconds":case "second":case "s":return 1E3*b;case "ms":return b}}}
function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var l=864E5,f=365.25*l;d.exports=function(a,c){c=c||{};return"string"==typeof a?b(a):c.long?g(a,l,"day")||g(a,36E5,"hour")||g(a,6E4,"minute")||g(a,1E3,"second")||a+" ms":a>=l?Math.round(a/l)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],39:[function(a,d,c){var b=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var c=[],g;for(g in a)b.call(a,
g)&&c.push(g);return c};c.values=function(a){var c=[],g;for(g in a)b.call(a,g)&&c.push(a[g]);return c};c.merge=function(a,c){for(var g in c)b.call(c,g)&&(a[g]=c[g]);return a};c.length=function(a){return c.keys(a).length};c.isEmpty=function(a){return 0==c.length(a)}},{}],40:[function(a,d,c){(function(a){var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,f=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,n=/(?:^|:|,)(?:\s*\[)+/g,h=/^\s+/,t=/\s+$/;d.exports=function(g){if("string"!=
typeof g||!g)return null;g=g.replace(h,"").replace(t,"");if(a.JSON&&JSON.parse)return JSON.parse(g);if(b.test(g.replace(c,"@").replace(f,"]").replace(n,"")))return(new Function("return "+g))()}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],41:[function(a,d,c){c.encode=function(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};c.decode=function(a){var b=
{};a=a.split("&");for(var c=0,d=a.length;c<d;c++){var f=a[c].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],42:[function(a,d,c){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");
d.exports=function(a){a=b.exec(a||"");for(var c={},d=14;d--;)c[g[d]]=a[d]||"";return c}},{}],43:[function(a,d,c){function b(){throw Error("setTimeout has not been defined");}function g(){throw Error("clearTimeout has not been defined");}function f(a){if(W===setTimeout)return setTimeout(a,0);if((W===b||!W)&&setTimeout)return W=setTimeout,setTimeout(a,0);try{return W(a,0)}catch(y){try{return W.call(null,a,0)}catch(Pc){return W.call(this,a,0)}}}function h(a){if(B===clearTimeout)return clearTimeout(a);
if((B===g||!B)&&clearTimeout)return B=clearTimeout,clearTimeout(a);try{return B(a)}catch(y){try{return B.call(null,a)}catch(Pc){return B.call(this,a)}}}function n(){m&&p&&(m=!1,p.length?O=p.concat(O):q=-1,O.length&&x())}function x(){if(!m){var a=f(n);m=!0;for(var b=O.length;b;){p=O;for(O=[];++q<b;)p&&p[q].run();q=-1;b=O.length}p=null;m=!1;h(a)}}function t(a,b){this.fun=a;this.array=b}function k(){}a=d.exports={};try{var W="function"===typeof setTimeout?setTimeout:b}catch(N){W=b}try{var B="function"===
typeof clearTimeout?clearTimeout:g}catch(N){B=g}var O=[],m=!1,p,q=-1;a.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];O.push(new t(a,b));1!==O.length||m||f(x)};t.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=k;a.addListener=k;a.once=k;a.off=k;a.removeListener=k;a.removeAllListeners=k;a.emit=k;a.prependListener=k;a.prependOnceListener=
k;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],44:[function(a,d,c){function b(a,b){var c=this,g;f.call(this);a=a||{};a.iceServers=a.iceServers||[];this.enableChromeNativeSimulcast=!1;b&&b.optional&&window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&b.optional.forEach(function(a){a.enableChromeNativeSimulcast&&
(c.enableChromeNativeSimulcast=!0)});this.enableMultiStreamHacks=!1;b&&b.optional&&window.chrome&&b.optional.forEach(function(a){a.enableMultiStreamHacks&&(c.enableMultiStreamHacks=!0)});this.restrictBandwidth=0;b&&b.optional&&b.optional.forEach(function(a){a.andyetRestrictBandwidth&&(c.restrictBandwidth=a.andyetRestrictBandwidth)});this.batchIceCandidates=0;b&&b.optional&&b.optional.forEach(function(a){a.andyetBatchIce&&(c.batchIceCandidates=a.andyetBatchIce)});this.batchedIceCandidates=[];b&&b.optional&&
window.chrome&&b.optional.forEach(function(a){a.andyetFasterICE&&(c.eliminateDuplicateCandidates=a.andyetFasterICE)});b&&b.optional&&b.optional.forEach(function(a){a.andyetDontSignalCandidates&&(c.dontSignalCandidates=a.andyetDontSignalCandidates)});this.assumeSetLocalSuccess=!1;b&&b.optional&&b.optional.forEach(function(a){a.andyetAssumeSetLocalSuccess&&(c.assumeSetLocalSuccess=a.andyetAssumeSetLocalSuccess)});window.navigator.mozGetUserMedia&&b&&b.optional&&(this.wtFirefox=0,b.optional.forEach(function(a){a.andyetFirefoxMakesMeSad&&
(c.wtFirefox=a.andyetFirefoxMakesMeSad,0<c.wtFirefox&&(c.firefoxcandidatebuffer=[]))}));A(a);this.pc=new RTCPeerConnection(a,b);this.getLocalStreams="function"===typeof this.pc.getLocalStreams?this.pc.getLocalStreams.bind(this.pc):function(){return[]};this.getSenders="function"===typeof this.pc.getSenders?this.pc.getSenders.bind(this.pc):function(){return[]};this.getRemoteStreams="function"===typeof this.pc.getRemoteStreams?this.pc.getRemoteStreams.bind(this.pc):function(){return[]};this.getReceivers=
"function"===typeof this.pc.getReceivers?this.pc.getReceivers.bind(this.pc):function(){return[]};this.addStream=this.pc.addStream.bind(this.pc);this.removeStream=function(a){"function"===typeof c.pc.removeStream?c.pc.removeStream.apply(c.pc,arguments):"function"===typeof c.pc.removeTrack&&a.getTracks().forEach(function(a){c.pc.removeTrack(a)})};"function"===typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc));this.pc.onremovestream=this.emit.bind(this,"removeStream");this.pc.onremovetrack=
this.emit.bind(this,"removeTrack");this.pc.onaddstream=this.emit.bind(this,"addStream");this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded");this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange");this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange");this.pc.onicecandidate=this._onIce.bind(this);this.pc.ondatachannel=this._onDataChannel.bind(this);this.localDescription={contents:[]};this.remoteDescription={contents:[]};this.config={debug:!1,
sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1};this.iceCredentials={local:{},remote:{}};for(g in a)this.config[g]=a[g];if(this.config.debug)this.on("*",function(){(a.logger||console).log("PeerConnection event:",arguments)});this.hadRemoteIPv6Candidate=this.hadLocalIPv6Candidate=this.hadRemoteRelayCandidate=this.hadLocalRelayCandidate=this.hadRemoteStunCandidate=this.hadLocalStunCandidate=!1;this._remoteDataChannels=[];this._localDataChannels=[];this._candidateBuffer=[]}c=a("util");var g=
a("sdp-jingle-json"),f=a("wildemitter"),h=a("lodash.clonedeep");c.inherits(b,f);Object.defineProperty(b.prototype,"signalingState",{get:function(){return this.pc.signalingState}});Object.defineProperty(b.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}});b.prototype._role=function(){return this.isInitiator?"initiator":"responder"};b.prototype.addStream=function(a){this.localStream=a;this.pc.addStream(a)};b.prototype._checkLocalCandidate=function(a){a=g.toCandidateJSON(a);
"srflx"==a.type?this.hadLocalStunCandidate=!0:"relay"==a.type&&(this.hadLocalRelayCandidate=!0);a&&a.ip&&-1!=a.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)};b.prototype._checkRemoteCandidate=function(a){a=g.toCandidateJSON(a);"srflx"==a.type?this.hadRemoteStunCandidate=!0:"relay"==a.type&&(this.hadRemoteRelayCandidate=!0);a&&a.ip&&-1!=a.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)};b.prototype.processIce=function(a,b){b=b||function(){};var c=this;if("closed"===this.pc.signalingState)return b();
if(a.contents||a.jingle&&a.jingle.contents){var d=this.remoteDescription.contents.map(function(a){return a.name});(a.contents||a.jingle.contents).forEach(function(a){var f=a.transport||{},l=f.candidates||[],n=d.indexOf(a.name),t=a.name,h=c.remoteDescription.contents.find(function(b){return b.name===a.name}),k=function(){l.forEach(function(a){a=g.toCandidateSDP(a);c.pc.addIceCandidate(new RTCIceCandidate({candidate:a,sdpMLineIndex:n,sdpMid:t}),function(){},function(a){c.emit("error",a)});c._checkRemoteCandidate(a)});
b()};c.iceCredentials.remote[a.name]&&f.ufrag&&c.iceCredentials.remote[a.name].ufrag!==f.ufrag?h?(h.transport.ufrag=f.ufrag,h.transport.pwd=f.pwd,f={type:"offer",jingle:c.remoteDescription},f.sdp=g.toSessionSDP(f.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"incoming"}),c.pc.setRemoteDescription(new RTCSessionDescription(f),function(){k()},function(a){c.emit("error",a)})):c.emit("error","ice restart failed to find matching content"):k()})}else{a.candidate&&0!==a.candidate.candidate.indexOf("a=")&&
(a.candidate.candidate="a="+a.candidate.candidate);if(this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(a.candidate),b();c.pc.addIceCandidate(new RTCIceCandidate(a.candidate),function(){},function(a){c.emit("error",a)});c._checkRemoteCandidate(a.candidate.candidate);b()}};b.prototype.offer=function(a,b){var c=this,d=2===arguments.length,f=d&&a?a:{offerToReceiveAudio:1,offerToReceiveVideo:1};
b=(b=d?b:a)||function(){};if("closed"===this.pc.signalingState)return b("Already closed");this.pc.createOffer(function(a){var d={type:"offer",sdp:a.sdp};c.assumeSetLocalSuccess&&(c.emit("offer",d),b(null,d));c._candidateBuffer=[];c.pc.setLocalDescription(a,function(){if(c.config.useJingle){var f=g.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"});f.sid=c.config.sid;c.localDescription=f;f.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(c.iceCredentials.local[a.name]={ufrag:b.ufrag,
pwd:b.pwd})});d.jingle=f}d.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkLocalCandidate(a)});c.assumeSetLocalSuccess||(c.emit("offer",d),b(null,d))},function(a){c.emit("error",a);b(a)})},function(a){c.emit("error",a);b(a)},f)};b.prototype.handleOffer=function(a,b){b=b||function(){};var c=this;a.type="offer";if(a.jingle){this.enableChromeNativeSimulcast&&a.jingle.contents.forEach(function(a){"video"===a.name&&(a.application.googConferenceFlag=!0)});this.enableMultiStreamHacks&&
a.jingle.contents.forEach(function(a){if("video"===a.name){var b=a.application.sources||[];if(0===b.length||"3735928559"!==b[0].ssrc)b.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),a.application.sources=b}});if(0<c.restrictBandwidth&&2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name){var d=a.jingle.contents[1];d.application&&d.application.bandwidth&&d.application.bandwidth.bandwidth||(a.jingle.contents[1].application.bandwidth=
{type:"AS",bandwidth:c.restrictBandwidth.toString()},a.sdp=g.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"outgoing"}))}a.jingle.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(c.iceCredentials.remote[a.name]={ufrag:b.ufrag,pwd:b.pwd})});a.sdp=g.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"incoming"});c.remoteDescription=a.jingle}a.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkRemoteCandidate(a)});
c.pc.setRemoteDescription(new RTCSessionDescription(a),function(){b()},b)};b.prototype.answerAudioOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},a)};b.prototype.answerBroadcastOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},a)};b.prototype.answer=function(a,b){var c=2===arguments.length;this._answer(c&&a?a:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},c?b:a)};b.prototype.handleAnswer=function(a,b){b=
b||function(){};var c=this;a.jingle&&(a.sdp=g.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"incoming"}),c.remoteDescription=a.jingle,a.jingle.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(c.iceCredentials.remote[a.name]={ufrag:b.ufrag,pwd:b.pwd})}));a.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkRemoteCandidate(a)});c.pc.setRemoteDescription(new RTCSessionDescription(a),function(){c.wtFirefox&&window.setTimeout(function(){c.firefoxcandidatebuffer.forEach(function(a){c.pc.addIceCandidate(new RTCIceCandidate(a),
function(){},function(a){c.emit("error",a)});c._checkRemoteCandidate(a.candidate)});c.firefoxcandidatebuffer=null},c.wtFirefox);b(null)},b)};b.prototype.close=function(){this.pc.close();this._localDataChannels=[];this._remoteDataChannels=[];this.emit("close")};b.prototype._answer=function(a,b){b=b||function(){};var c=this;if(!this.pc.remoteDescription)throw Error("remoteDescription not set");if("closed"===this.pc.signalingState)return b("Already closed");c.pc.createAnswer(function(a){var d=[];if(c.enableChromeNativeSimulcast&&
(a.jingle=g.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"}),2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name)){var f=a.jingle.contents[1].application.sourceGroups||[],l=!1;f.forEach(function(a){"SIM"==a.semantics&&(l=!0)});if(!l&&a.jingle.contents[1].application.sources.length){var n=JSON.parse(JSON.stringify(a.jingle.contents[1].application.sources[0]));n.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(n);d.push(a.jingle.contents[1].application.sources[0].ssrc);
d.push(n.ssrc);f.push({semantics:"SIM",sources:d});d=JSON.parse(JSON.stringify(n));d.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(d);f.push({semantics:"FID",sources:[n.ssrc,d.ssrc]});a.jingle.contents[1].application.sourceGroups=f;a.sdp=g.toSessionSDP(a.jingle,{sid:c.config.sdpSessionID,role:c._role(),direction:"outgoing"})}}var t={type:"answer",sdp:a.sdp};c.assumeSetLocalSuccess&&(f=h(t),c.emit("answer",f),b(null,f));c._candidateBuffer=[];c.pc.setLocalDescription(a,
function(){if(c.config.useJingle){var d=g.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"});d.sid=c.config.sid;c.localDescription=d;t.jingle=d}c.enableChromeNativeSimulcast&&(t.jingle||(t.jingle=g.toSessionJSON(a.sdp,{role:c._role(),direction:"outgoing"})),t.jingle.contents[1].application.sources.forEach(function(a,b){a.parameters=a.parameters.map(function(a){"msid"===a.key&&(a.value+="-"+Math.floor(b/2));return a})}),t.sdp=g.toSessionSDP(t.jingle,{sid:c.sdpSessionID,role:c._role(),direction:"outgoing"}));
t.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&c._checkLocalCandidate(a)});c.assumeSetLocalSuccess||(d=h(t),c.emit("answer",d),b(null,d))},function(a){c.emit("error",a);b(a)})},function(a){c.emit("error",a);b(a)},a)};b.prototype._onIce=function(a){var b=this;if(a.candidate){if(!this.dontSignalCandidates){a=a.candidate;var c={candidate:{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex}};this._checkLocalCandidate(a.candidate);var d=g.toCandidateJSON(a.candidate);
if(this.eliminateDuplicateCandidates&&"relay"===d.type){var f=this._candidateBuffer.filter(function(a){return"relay"===a.type}).map(function(a){return a.foundation+":"+a.component});var l=f.indexOf(d.foundation+":"+d.component);if(-1<l&&d.priority>>24>=f[l].priority>>24)return}if("max-bundle"===this.config.bundlePolicy&&(f=this._candidateBuffer.filter(function(a){return d.type===a.type}).map(function(a){return a.address+":"+a.port}),l=f.indexOf(d.address+":"+d.port),-1<l))return;if("require"!==this.config.rtcpMuxPolicy||
"2"!==d.component){this._candidateBuffer.push(d);if(b.config.useJingle&&(a.sdpMid||(a.sdpMid=b.pc.remoteDescription&&"offer"===b.pc.remoteDescription.type?b.remoteDescription.contents[a.sdpMLineIndex].name:b.localDescription.contents[a.sdpMLineIndex].name),b.iceCredentials.local[a.sdpMid]||g.toSessionJSON(b.pc.localDescription.sdp,{role:b._role(),direction:"outgoing"}).contents.forEach(function(a){var c=a.transport||{};c.ufrag&&(b.iceCredentials.local[a.name]={ufrag:c.ufrag,pwd:c.pwd})}),c.jingle=
{contents:[{name:a.sdpMid,creator:b._role(),transport:{transportType:"iceUdp",ufrag:b.iceCredentials.local[a.sdpMid].ufrag,pwd:b.iceCredentials.local[a.sdpMid].pwd,candidates:[d]}}]},0<b.batchIceCandidates)){0===b.batchedIceCandidates.length&&window.setTimeout(function(){var a={};b.batchedIceCandidates.forEach(function(b){b=b.contents[0];a[b.name]||(a[b.name]=b);a[b.name].transport.candidates.push(b.transport.candidates[0])});var c={jingle:{contents:[]}};Object.keys(a).forEach(function(b){c.jingle.contents.push(a[b])});
b.batchedIceCandidates=[];b.emit("ice",c)},b.batchIceCandidates);b.batchedIceCandidates.push(c.jingle);return}this.emit("ice",c)}}}else this.emit("endOfCandidates")};b.prototype._onDataChannel=function(a){a=a.channel;this._remoteDataChannels.push(a);this.emit("addChannel",a)};b.prototype.createDataChannel=function(a,b){a=this.pc.createDataChannel(a,b);this._localDataChannels.push(a);return a};b.prototype.getStats=function(){if("function"===typeof arguments[0]){var a=arguments[0];this.pc.getStats().then(function(b){a(null,
b)},function(b){a(b)})}else return this.pc.getStats.apply(this.pc,arguments)};d.exports=b},{"lodash.clonedeep":36,"sdp-jingle-json":45,util:63,wildemitter:65}],45:[function(a,d,c){var b=a("./lib/tosdp"),g=a("./lib/tojson");c.toIncomingSDPOffer=function(a){return b.toSessionSDP(a,{role:"responder",direction:"incoming"})};c.toOutgoingSDPOffer=function(a){return b.toSessionSDP(a,{role:"initiator",direction:"outgoing"})};c.toIncomingSDPAnswer=function(a){return b.toSessionSDP(a,{role:"initiator",direction:"incoming"})};
c.toOutgoingSDPAnswer=function(a){return b.toSessionSDP(a,{role:"responder",direction:"outgoing"})};c.toIncomingMediaSDPOffer=function(a){return b.toMediaSDP(a,{role:"responder",direction:"incoming"})};c.toOutgoingMediaSDPOffer=function(a){return b.toMediaSDP(a,{role:"initiator",direction:"outgoing"})};c.toIncomingMediaSDPAnswer=function(a){return b.toMediaSDP(a,{role:"initiator",direction:"incoming"})};c.toOutgoingMediaSDPAnswer=function(a){return b.toMediaSDP(a,{role:"responder",direction:"outgoing"})};
c.toCandidateSDP=b.toCandidateSDP;c.toMediaSDP=b.toMediaSDP;c.toSessionSDP=b.toSessionSDP;c.toIncomingJSONOffer=function(a,b){return g.toSessionJSON(a,{role:"responder",direction:"incoming",creators:b})};c.toOutgoingJSONOffer=function(a,b){return g.toSessionJSON(a,{role:"initiator",direction:"outgoing",creators:b})};c.toIncomingJSONAnswer=function(a,b){return g.toSessionJSON(a,{role:"initiator",direction:"incoming",creators:b})};c.toOutgoingJSONAnswer=function(a,b){return g.toSessionJSON(a,{role:"responder",
direction:"outgoing",creators:b})};c.toIncomingMediaJSONOffer=function(a,b){return g.toMediaJSON(a,{role:"responder",direction:"incoming",creator:b})};c.toOutgoingMediaJSONOffer=function(a,b){return g.toMediaJSON(a,{role:"initiator",direction:"outgoing",creator:b})};c.toIncomingMediaJSONAnswer=function(a,b){return g.toMediaJSON(a,{role:"initiator",direction:"incoming",creator:b})};c.toOutgoingMediaJSONAnswer=function(a,b){return g.toMediaJSON(a,{role:"responder",direction:"outgoing",creator:b})};
c.toCandidateJSON=g.toCandidateJSON;c.toMediaJSON=g.toMediaJSON;c.toSessionJSON=g.toSessionJSON},{"./lib/tojson":48,"./lib/tosdp":49}],46:[function(a,d,c){c.lines=function(a){return a.split("\r\n").filter(function(a){return 0<a.length})};c.findLine=function(a,c,d){for(var b=a.length,g=0;g<c.length;g++)if(c[g].substr(0,b)===a)return c[g];if(!d)return!1;for(c=0;c<d.length;c++)if(d[c].substr(0,b)===a)return d[c];return!1};c.findLines=function(a,c,d){for(var b=[],g=a.length,f=0;f<c.length;f++)c[f].substr(0,
g)===a&&b.push(c[f]);if(b.length||!d)return b;for(c=0;c<d.length;c++)d[c].substr(0,g)===a&&b.push(d[c]);return b};c.mline=function(a){a=a.substr(2).split(" ");for(var b={media:a[0],port:a[1],proto:a[2],formats:[]},c=3;c<a.length;c++)a[c]&&b.formats.push(a[c]);return b};c.rtpmap=function(a){a=a.substr(9).split(" ");var b={id:a.shift()};a=a[0].split("/");b.name=a[0];b.clockrate=a[1];b.channels=3==a.length?a[2]:"1";return b};c.sctpmap=function(a){a=a.substr(10).split(" ");return{number:a.shift(),protocol:a.shift(),
streams:a.shift()}};c.fmtp=function(a){for(var b,c=a.substr(a.indexOf(" ")+1).split(";"),d=[],f=0;f<c.length;f++)b=c[f].split("="),a=b[0].trim(),b=b[1],a&&b?d.push({key:a,value:b}):a&&d.push({key:"",value:a});return d};c.crypto=function(a){a=a.substr(9).split(" ");return{tag:a[0],cipherSuite:a[1],keyParams:a[2],sessionParams:a.slice(3).join(" ")}};c.fingerprint=function(a){a=a.substr(14).split(" ");return{hash:a[0],value:a[1]}};c.extmap=function(a){a=a.substr(9).split(" ");var b={},c=a.shift(),d=
c.indexOf("/");0<=d?(b.id=c.substr(0,d),b.senders=c.substr(d+1)):(b.id=c,b.senders="sendrecv");b.uri=a.shift()||"";return b};c.rtcpfb=function(a){a=a.substr(10).split(" ");var b={};b.id=a.shift();b.type=a.shift();"trr-int"===b.type?b.value=a.shift():b.subtype=a.shift()||"";b.parameters=a;return b};c.candidate=function(a){a=0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" ");for(var b={foundation:a[0],component:a[1],protocol:a[2]&&a[2].toLowerCase(),priority:a[3],ip:a[4],
port:a[5],type:a[7],generation:"0"},c=8;c<a.length;c+=2)"raddr"===a[c]?b.relAddr=a[c+1]:"rport"===a[c]?b.relPort=a[c+1]:"generation"===a[c]?b.generation=a[c+1]:"tcptype"===a[c]&&(b.tcpType=a[c+1]);b.network="1";return b};c.sourceGroups=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c].substr(13).split(" ");b.push({semantics:d.shift(),sources:d})}return b};c.sources=function(a){for(var b=[],c={},d=0;d<a.length;d++){var f=a[d].substr(7).split(" "),h=f.shift();if(!c[h]){var t={ssrc:h,parameters:[]};
b.push(t);c[h]=t}f=f.join(" ").split(":");t=f.shift();f=f.join(":")||null;c[h].parameters.push({key:t,value:f})}return b};c.groups=function(a){for(var b=[],c,d=0;d<a.length;d++)c=a[d].substr(8).split(" "),b.push({semantics:c.shift(),contents:c});return b};c.bandwidth=function(a){a=a.substr(2).split(":");var b={};b.type=a.shift();b.bandwidth=a.shift();return b};c.msid=function(a){a=a.substr(7);var b=a.split(" ");return{msid:a,mslabel:b[0],label:b[1]}}},{}],47:[function(a,d,c){d.exports={initiator:{incoming:{initiator:"recvonly",
responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",
both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],48:[function(a,d,c){var b=a("./senders"),g=a("./parsers"),f=Math.random();c._setIdCounter=function(a){f=a};c.toSessionJSON=function(a,b){var d,f=b.creators||[],l=b.role||"initiator";b=b.direction||"outgoing";var h=a.split("\r\nm=");for(d=1;d<h.length;d++)h[d]="m="+h[d],d!==h.length-1&&(h[d]+="\r\n");var n=h.shift()+"\r\n",k=g.lines(n);a={};var v=[];for(d=0;d<h.length;d++)v.push(c.toMediaJSON(h[d],
n,{role:l,direction:b,creator:f[d]||"initiator"}));a.contents=v;f=g.findLines("a=group:",k);f.length&&(a.groups=g.groups(f));return a};c.toMediaJSON=function(a,d,f){var l=f.creator||"initiator",h=f.role||"initiator",k=f.direction||"outgoing",n=g.lines(a);a=g.lines(d);d=g.mline(n[0]);l={creator:l,name:d.media,application:{applicationType:"rtp",media:d.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==d.media&&
(l.application={applicationType:"datachannel"},l.transport.sctp=[]);var v=l.application,x=l.transport;if(d=g.findLine("a=mid:",n))l.name=d.substr(6);g.findLine("a=sendrecv",n,a)?l.senders="both":g.findLine("a=sendonly",n,a)?l.senders=b[h][k].sendonly:g.findLine("a=recvonly",n,a)?l.senders=b[h][k].recvonly:g.findLine("a=inactive",n,a)&&(l.senders="none");if("rtp"==v.applicationType){if(d=g.findLine("b=",n))v.bandwidth=g.bandwidth(d);if(d=g.findLine("a=ssrc:",n))v.ssrc=d.substr(7).split(" ")[0];g.findLines("a=rtpmap:",
n).forEach(function(a){var b=g.rtpmap(a);b.parameters=[];b.feedback=[];g.findLines("a=fmtp:"+b.id,n).forEach(function(a){b.parameters=g.fmtp(a)});g.findLines("a=rtcp-fb:"+b.id,n).forEach(function(a){b.feedback.push(g.rtcpfb(a))});v.payloads.push(b)});g.findLines("a=crypto:",n,a).forEach(function(a){v.encryption.push(g.crypto(a))});g.findLine("a=rtcp-mux",n)&&(v.mux=!0);g.findLines("a=rtcp-fb:*",n).forEach(function(a){v.feedback.push(g.rtcpfb(a))});g.findLines("a=extmap:",n).forEach(function(a){a=
g.extmap(a);a.senders=b[h][k][a.senders];v.headerExtensions.push(a)});d=g.findLines("a=ssrc-group:",n);v.sourceGroups=g.sourceGroups(d||[]);d=g.findLines("a=ssrc:",n);var m=v.sources=g.sources(d||[]);if(d=g.findLine("a=msid:",n)){var p=g.msid(d);["msid","mslabel","label"].forEach(function(a){for(var b=0;b<m.length;b++){for(var c=!1,d=0;d<m[b].parameters.length;d++)m[b].parameters[d].key===a&&(c=!0);c||m[b].parameters.push({key:a,value:p[a]})}})}g.findLine("a=x-google-flag:conference",n,a)&&(v.googConferenceFlag=
!0)}d=g.findLines("a=fingerprint:",n,a);var q=g.findLine("a=setup:",n,a);d.forEach(function(a){a=g.fingerprint(a);q&&(a.setup=q.substr(8));x.fingerprints.push(a)});d=g.findLine("a=ice-ufrag:",n,a);f=g.findLine("a=ice-pwd:",n,a);d&&f&&(x.ufrag=d.substr(12),x.pwd=f.substr(10),x.candidates=[],g.findLines("a=candidate:",n,a).forEach(function(a){x.candidates.push(c.toCandidateJSON(a))}));"datachannel"==v.applicationType&&g.findLines("a=sctpmap:",n).forEach(function(a){a=g.sctpmap(a);x.sctp.push(a)});return l};
c.toCandidateJSON=function(a){a=g.candidate(a.split("\r\n")[0]);a.id=(f++).toString(36).substr(0,12);return a}},{"./parsers":46,"./senders":47}],49:[function(a,d,c){var b=a("./senders");c.toSessionSDP=function(a,b){var d=b.sid||a.sid||Date.now(),g=b.time||Date.now(),f=["v=0","o=- "+d+" "+g+" IN IP4 0.0.0.0","s=-","t=0 0"];d=a.contents||[];var l=!1;d.forEach(function(a){a.application.sources&&a.application.sources.length&&(l=!0)});l&&f.push("a=msid-semantic: WMS *");(a.groups||[]).forEach(function(a){f.push("a=group:"+
a.semantics+" "+a.contents.join(" "))});d.forEach(function(a){f.push(c.toMediaSDP(a,b))});return f.join("\r\n")+"\r\n"};c.toMediaSDP=function(a,d){var g=[],f=d.role||"initiator",l=d.direction||"outgoing",h=a.application;d=a.transport;var k=h.payloads||[],m=d&&d.fingerprints||[],B=[];"datachannel"==h.applicationType?(B.push("application"),B.push("1"),B.push("DTLS/SCTP"),d.sctp&&d.sctp.forEach(function(a){B.push(a.number)})):(B.push(h.media),B.push("1"),0<m.length?B.push("UDP/TLS/RTP/SAVPF"):h.encryption&&
0<h.encryption.length?B.push("RTP/SAVPF"):B.push("RTP/AVPF"),k.forEach(function(a){B.push(a.id)}));g.push("m="+B.join(" "));g.push("c=IN IP4 0.0.0.0");h.bandwidth&&h.bandwidth.type&&h.bandwidth.bandwidth&&g.push("b="+h.bandwidth.type+":"+h.bandwidth.bandwidth);"rtp"==h.applicationType&&g.push("a=rtcp:1 IN IP4 0.0.0.0");d&&(d.ufrag&&g.push("a=ice-ufrag:"+d.ufrag),d.pwd&&g.push("a=ice-pwd:"+d.pwd),m.forEach(function(a){g.push("a=fingerprint:"+a.hash+" "+a.value);a.setup&&g.push("a=setup:"+a.setup)}),
d.sctp&&d.sctp.forEach(function(a){g.push("a=sctpmap:"+a.number+" "+a.protocol+" "+a.streams)}));"rtp"==h.applicationType&&g.push("a="+(b[f][l][a.senders]||"sendrecv"));g.push("a=mid:"+a.name);h.sources&&h.sources.length&&(h.sources[0].parameters||[]).forEach(function(a){"msid"===a.key&&g.push("a=msid:"+a.value)});h.mux&&g.push("a=rtcp-mux");(h.encryption||[]).forEach(function(a){g.push("a=crypto:"+a.tag+" "+a.cipherSuite+" "+a.keyParams+(a.sessionParams?" "+a.sessionParams:""))});h.googConferenceFlag&&
g.push("a=x-google-flag:conference");k.forEach(function(a){var b="a=rtpmap:"+a.id+" "+a.name+"/"+a.clockrate;a.channels&&"1"!=a.channels&&(b+="/"+a.channels);g.push(b);if(a.parameters&&a.parameters.length){b=["a=fmtp:"+a.id];var c=[];a.parameters.forEach(function(a){c.push((a.key?a.key+"=":"")+a.value)});b.push(c.join(";"));g.push(b.join(" "))}a.feedback&&a.feedback.forEach(function(b){"trr-int"===b.type?g.push("a=rtcp-fb:"+a.id+" trr-int "+(b.value?b.value:"0")):g.push("a=rtcp-fb:"+a.id+" "+b.type+
(b.subtype?" "+b.subtype:""))})});h.feedback&&h.feedback.forEach(function(a){"trr-int"===a.type?g.push("a=rtcp-fb:* trr-int "+(a.value?a.value:"0")):g.push("a=rtcp-fb:* "+a.type+(a.subtype?" "+a.subtype:""))});(h.headerExtensions||[]).forEach(function(a){g.push("a=extmap:"+a.id+(a.senders?"/"+b[f][l][a.senders]:"")+" "+a.uri)});(h.sourceGroups||[]).forEach(function(a){g.push("a=ssrc-group:"+a.semantics+" "+a.sources.join(" "))});(h.sources||[]).forEach(function(a){for(var b=0;b<a.parameters.length;b++){var c=
a.parameters[b];g.push("a=ssrc:"+(a.ssrc||h.ssrc)+" "+c.key+(c.value?":"+c.value:""))}});(d.candidates||[]).forEach(function(a){g.push(c.toCandidateSDP(a))});return g.join("\r\n")};c.toCandidateSDP=function(a){var b=[];b.push(a.foundation);b.push(a.component);b.push(a.protocol.toUpperCase());b.push(a.priority);b.push(a.ip);b.push(a.port);var c=a.type;b.push("typ");b.push(c);("srflx"===c||"prflx"===c||"relay"===c)&&a.relAddr&&a.relPort&&(b.push("raddr"),b.push(a.relAddr),b.push("rport"),b.push(a.relPort));
a.tcpType&&"TCP"==a.protocol.toUpperCase()&&(b.push("tcptype"),b.push(a.tcpType));b.push("generation");b.push(a.generation||"0");return"a=candidate:"+b.join(" ")}},{"./senders":47}],50:[function(a,d,c){d.exports=a("./lib/")},{"./lib/":51}],51:[function(a,d,c){function b(a,b){"object"==typeof a&&(b=a,a=void 0);b=b||{};a=g(a);var c=a.source,d=a.id;b.forceNew||b["force new connection"]||!1===b.multiplex?(k("ignoring socket cache for %s",c),b=h(c,b)):(x[d]||(k("new io instance for %s",c),x[d]=h(c,b)),
b=x[d]);return b.socket(a.path)}var g=a("./url"),f=a("socket.io-parser"),h=a("./manager"),k=a("debug")("socket.io-client");d.exports=c=b;var x=c.managers={};c.protocol=f.protocol;c.connect=b;c.Manager=a("./manager");c.Socket=a("./socket")},{"./manager":52,"./socket":54,"./url":55,debug:10,"socket.io-parser":57}],52:[function(a,d,c){function b(a,c){if(!(this instanceof b))return new b(a,c);a&&"object"==typeof a&&(c=a,a=void 0);c=c||{};c.path=c.path||"/socket.io";this.nsps={};this.subs=[];this.opts=
c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);this.readyState="closed";this.uri=a;this.connected=[];this.encoding=!1;this.packetBuffer=
[];this.encoder=new h.Encoder;this.decoder=new h.Decoder;(this.autoConnect=!1!==c.autoConnect)&&this.open()}a("./url");var g=a("engine.io-client"),f=a("./socket");c=a("component-emitter");var h=a("socket.io-parser"),k=a("./on"),x=a("component-bind");a("object-component");var t=a("debug")("socket.io-client:manager"),C=a("indexof"),m=a("backo2");d.exports=b;b.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)};b.prototype.updateSocketIds=
function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id};c(b.prototype);b.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};b.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};b.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};
b.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};b.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&this.backoff.setMax(a);return this};b.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};b.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&
this._reconnection&&0===this.backoff.attempts&&this.reconnect()};b.prototype.open=b.prototype.connect=function(a){t("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;t("opening %s",this.uri);var b=this.engine=g(this.uri,this.opts),c=this;this.readyState="opening";this.skipReconnect=!1;var d=k(b,"open",function(){c.onopen();a&&a()}),f=k(b,"error",function(b){t("connect_error");c.cleanup();c.readyState="closed";c.emitAll("connect_error",b);if(a){var d=Error("Connection error");
d.data=b;a(d)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var l=this._timeout;t("connect attempt will timeout after %d",l);var h=setTimeout(function(){t("connect attempt timed out after %d",l);d.destroy();b.close();b.emit("error","timeout");c.emitAll("connect_timeout",l)},l);this.subs.push({destroy:function(){clearTimeout(h)}})}this.subs.push(d);this.subs.push(f);return this};b.prototype.onopen=function(){t("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;
this.subs.push(k(a,"data",x(this,"ondata")));this.subs.push(k(this.decoder,"decoded",x(this,"ondecoded")));this.subs.push(k(a,"error",x(this,"onerror")));this.subs.push(k(a,"close",x(this,"onclose")))};b.prototype.ondata=function(a){this.decoder.add(a)};b.prototype.ondecoded=function(a){this.emit("packet",a)};b.prototype.onerror=function(a){t("error",a);this.emitAll("error",a)};b.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new f(this,a);this.nsps[a]=b;var c=this;b.on("connect",function(){b.id=
c.engine.id;~C(c.connected,b)||c.connected.push(b)})}return b};b.prototype.destroy=function(a){a=C(this.connected,a);~a&&this.connected.splice(a,1);this.connected.length||this.close()};b.prototype.packet=function(a){t("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1;b.processPacketQueue()}))};b.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=
this.packetBuffer.shift();this.packet(a)}};b.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.decoder.destroy()};b.prototype.close=b.prototype.disconnect=function(){this.skipReconnect=!0;this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};b.prototype.onclose=function(a){t("close");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};
b.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)t("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();t("will wait %dms before reconnect attempt",b);this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(t("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),
a.skipReconnect||a.open(function(b){b?(t("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(t("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}};b.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":53,"./socket":54,"./url":55,backo2:4,"component-bind":7,"component-emitter":8,debug:10,"engine.io-client":11,
indexof:32,"object-component":39,"socket.io-parser":57}],53:[function(a,d,c){d.exports=function(a,c,d){a.on(c,d);return{destroy:function(){a.removeListener(c,d)}}}},{}],54:[function(a,d,c){function b(a,b){this.io=a;this.nsp=b;this.json=this;this.ids=0;this.acks={};this.io.autoConnect&&this.open();this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0}var g=a("socket.io-parser");c=a("component-emitter");var f=a("to-array"),h=a("./on"),k=a("component-bind"),x=a("debug")("socket.io-client:socket"),
t=a("has-binary");d.exports=b;var C={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=c.prototype.emit;c(b.prototype);b.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",k(this,"onopen")),h(a,"packet",k(this,"onpacket")),h(a,"close",k(this,"onclose"))]}};b.prototype.open=b.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==
this.io.readyState)this.onopen();return this};b.prototype.send=function(){var a=f(arguments);a.unshift("message");this.emit.apply(this,a);return this};b.prototype.emit=function(a){if(C.hasOwnProperty(a))return m.apply(this,arguments),this;var b=f(arguments),c=g.EVENT;t(b)&&(c=g.BINARY_EVENT);c={type:c,data:b};"function"==typeof b[b.length-1]&&(x("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),c.id=this.ids++);this.connected?this.packet(c):this.sendBuffer.push(c);return this};
b.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};b.prototype.onopen=function(){x("transport is open - connecting");"/"!=this.nsp&&this.packet({type:g.CONNECT})};b.prototype.onclose=function(a){x("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",a)};b.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case g.CONNECT:this.onconnect();break;case g.EVENT:this.onevent(a);break;case g.BINARY_EVENT:this.onevent(a);break;case g.ACK:this.onack(a);
break;case g.BINARY_ACK:this.onack(a);break;case g.DISCONNECT:this.ondisconnect();break;case g.ERROR:this.emit("error",a.data)}};b.prototype.onevent=function(a){var b=a.data||[];x("emitting event %j",b);null!=a.id&&(x("attaching ack callback to event"),b.push(this.ack(a.id)));this.connected?m.apply(this,b):this.receiveBuffer.push(b)};b.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=f(arguments);x("sending ack %j",d);var l=t(d)?g.BINARY_ACK:g.ACK;b.packet({type:l,id:a,
data:d})}}};b.prototype.onack=function(a){x("calling ack %s with %j",a.id,a.data);this.acks[a.id].apply(this,a.data);delete this.acks[a.id]};b.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};b.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};b.prototype.ondisconnect=
function(){x("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};b.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};b.prototype.close=b.prototype.disconnect=function(){this.connected&&(x("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this}},{"./on":53,"component-bind":7,"component-emitter":8,
debug:10,"has-binary":30,"socket.io-parser":57,"to-array":59}],55:[function(a,d,c){(function(b){var c=a("parseuri"),f=a("debug")("socket.io-client:url");d.exports=function(a,d){var g=a;d=d||b.location;null==a&&(a=d.protocol+"//"+d.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?d.protocol+a:d.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof d?d.protocol+"//"+a:"https://"+a),f("parse %s",a),g=c(a));g.port||(/^(http|ws)$/.test(g.protocol)?
g.port="80":/^(http|ws)s$/.test(g.protocol)&&(g.port="443"));g.path=g.path||"/";g.id=g.protocol+"://"+g.host+":"+g.port;g.href=g.protocol+"://"+g.host+(d&&d.port==g.port?"":":"+g.port);return g}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{debug:10,parseuri:42}],56:[function(a,d,c){(function(b){var d=a("isarray"),f=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(f(a)){var g={_placeholder:!0,
num:c.length};c.push(a);return g}if(d(a)){g=Array(a.length);for(var l=0;l<a.length;l++)g[l]=b(a[l]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(l in a)g[l]=b(a[l]);return g}return a}var c=[];a.data=b(a.data);a.attachments=c.length;return{packet:a,buffers:c}};c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder)return b[a.num];if(d(a))for(var g=0;g<a.length;g++)a[g]=c(a[g]);else if(a&&"object"==typeof a)for(g in a)a[g]=c(a[g]);return a}a.data=c(a.data);a.attachments=
void 0;return a};c.removeBlobs=function(a,c){function g(a,k,n){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){l++;var t=new FileReader;t.onload=function(){n?n[k]=this.result:h=this.result;--l||c(h)};t.readAsArrayBuffer(a)}else if(d(a))for(t=0;t<a.length;t++)g(a[t],t,a);else if(a&&"object"==typeof a&&!f(a))for(t in a)g(a[t],t,a)}var l=0,h=a;g(h);l||c(h)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./is-buffer":58,
isarray:33}],57:[function(a,d,c){function b(){}function g(a){var b=!1;var d=""+a.type;if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)d+=a.attachments,d+="-";a.nsp&&"/"!=a.nsp&&(b=!0,d+=a.nsp);null!=a.id&&(b&&(d+=",",b=!1),d+=a.id);null!=a.data&&(b&&(d+=","),d+=t.stringify(a.data));m("encoded %j as %s",a,d);return d}function f(a,b){C.removeBlobs(a,function(a){var c=C.deconstructPacket(a);a=g(c.packet);c=c.buffers;c.unshift(a);b(c)})}function h(){this.reconstructor=null}function k(a){this.reconPack=
a;this.buffers=[]}var m=a("debug")("socket.io-parser"),t=a("json3");a("isarray");d=a("component-emitter");var C=a("./binary"),p=a("./is-buffer");c.protocol=4;c.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");c.CONNECT=0;c.DISCONNECT=1;c.EVENT=2;c.ACK=3;c.ERROR=4;c.BINARY_EVENT=5;c.BINARY_ACK=6;c.Encoder=b;c.Decoder=h;b.prototype.encode=function(a,b){m("encoding packet %j",a);c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?f(a,b):(a=g(a),b([a]))};d(h.prototype);h.prototype.add=
function(a){if("string"==typeof a){a:{var b={},d=0;b.type=Number(a.charAt(0));if(null==c.types[b.type])a={type:c.ERROR,data:"parser error"};else{if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var g="";"-"!=a.charAt(++d)&&(g+=a.charAt(d),d!=a.length););if(g!=Number(g)||"-"!=a.charAt(d))throw Error("Illegal attachments");b.attachments=Number(g)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){g=a.charAt(d);if(","==g)break;b.nsp+=g;if(d==a.length)break}else b.nsp="/";g=a.charAt(d+1);if(""!==g&&Number(g)==
g){for(b.id="";++d;){g=a.charAt(d);if(null==g||Number(g)!=g){--d;break}b.id+=a.charAt(d);if(d==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=t.parse(a.substr(d))}catch(Oc){a={type:c.ERROR,data:"parser error"};break a}m("decoded %s as %j",a,b);a=b}}c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?(this.reconstructor=new k(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(p(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=
null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};k.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=C.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};k.prototype.finishedReconstruction=function(){this.reconPack=null;
this.buffers=[]}},{"./binary":56,"./is-buffer":58,"component-emitter":8,debug:10,isarray:33,json3:34}],58:[function(a,d,c){(function(a){d.exports=function(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],59:[function(a,d,c){d.exports=function(a,c){for(var b=[],d=(c=c||0)||0;d<a.length;d++)b[d-c]=a[d];return b}},{}],60:[function(a,d,c){(function(a){(function(b){function g(a){for(var b=
[],c=0,d=a.length,g,f;c<d;)g=a.charCodeAt(c++),55296<=g&&56319>=g&&c<d?(f=a.charCodeAt(c++),56320==(f&64512)?b.push(((g&1023)<<10)+(f&1023)+65536):(b.push(g),c--)):b.push(g);return b}function f(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");}function h(){if(w>=u)throw Error("Invalid byte index");var a=r[w]&255;w++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function k(){if(w>u)throw Error("Invalid byte index");
if(w==u)return!1;var a=r[w]&255;w++;if(0==(a&128))return a;if(192==(a&224)){var b=h();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=h();var c=h();a=(a&15)<<12|b<<6|c;if(2048<=a)return f(a),a;throw Error("Invalid continuation byte");}if(240==(a&248)){b=h();c=h();var d=h();a=(a&15)<<18|b<<12|c<<6|d;if(65536<=a&&1114111>=a)return a}throw Error("Invalid UTF-8 detected");}var t="object"==typeof c&&c,m="object"==typeof d&&d&&d.exports==t&&d,p="object"==typeof a&&
a;if(p.global===p||p.window===p)b=p;var q=String.fromCharCode,r,u,w;p={version:"2.0.0",encode:function(a){a=g(a);for(var b=a.length,c=-1,d,l="";++c<b;){d=a[c];if(0==(d&4294967168))d=q(d);else{var h="";0==(d&4294965248)?h=q(d>>6&31|192):0==(d&4294901760)?(f(d),h=q(d>>12&15|224),h+=q(d>>6&63|128)):0==(d&4292870144)&&(h=q(d>>18&7|240),h+=q(d>>12&63|128),h+=q(d>>6&63|128));d=h+=q(d&63|128)}l+=d}return l},decode:function(a){r=g(a);u=r.length;w=0;a=[];for(var b;!1!==(b=k());)a.push(b);b=a.length;for(var c=
-1,d,f="";++c<b;)d=a[c],65535<d&&(d-=65536,f+=q(d>>>10&1023|55296),d=56320|d&1023),f+=q(d);return f}};if(t&&!t.nodeType)if(m)m.exports=p;else{b={}.hasOwnProperty;for(var z in p)b.call(p,z)&&(t[z]=p[z])}else b.utf8=p})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],61:[function(a,d,c){d.exports="function"===typeof Object.create?function(a,c){a.super_=c;a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}})}:function(a,c){a.super_=c;var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a}},{}],62:[function(a,d,c){d.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===typeof a.fill&&"function"===typeof a.readUInt8}},{}],63:[function(a,d,c){(function(b,d){function g(a,b){var d={seen:[],stylize:h};3<=arguments.length&&(d.depth=arguments[2]);4<=arguments.length&&(d.colors=arguments[3]);z(b)?d.showHidden=
b:b&&c._extend(d,b);A(d.showHidden)&&(d.showHidden=!1);A(d.depth)&&(d.depth=2);A(d.colors)&&(d.colors=!1);A(d.customInspect)&&(d.customInspect=!0);d.colors&&(d.stylize=f);return t(d,a,d.depth)}function f(a,b){return(b=g.styles[b])?"\u001b["+g.colors[b][0]+"m"+a+"\u001b["+g.colors[b][1]+"m":a}function h(a,b){return a}function k(a){var b={};a.forEach(function(a,c){b[a]=!0});return b}function t(a,b,d){if(a.customInspect&&b&&H(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==
b)){var g=b.inspect(d,a);y(g)||(g=t(a,g,d));return g}if(g=m(a,b))return g;var f=Object.keys(b),l=k(f);a.showHidden&&(f=Object.getOwnPropertyNames(b));if(F(b)&&(0<=f.indexOf("message")||0<=f.indexOf("description")))return p(b);if(0===f.length){if(H(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(D(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(G(b))return a.stylize(Date.prototype.toString.call(b),"date");if(F(b))return p(b)}g="";var h=!1,n=["{","}"];w(b)&&
(h=!0,n=["[","]"]);H(b)&&(g=" [Function"+(b.name?": "+b.name:"")+"]");D(b)&&(g=" "+RegExp.prototype.toString.call(b));G(b)&&(g=" "+Date.prototype.toUTCString.call(b));F(b)&&(g=" "+p(b));if(0===f.length&&(!h||0==b.length))return n[0]+g+n[1];if(0>d)return D(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);f=h?q(a,b,d,l,f):f.map(function(c){return r(a,b,d,l,c,h)});a.seen.pop();return u(f,g,n)}function m(a,b){if(A(b))return a.stylize("undefined",
"undefined");if(y(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(N(b))return a.stylize(""+b,"number");if(z(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function p(a){return"["+Error.prototype.toString.call(a)+"]"}function q(a,b,c,d,g){for(var f=[],l=0,h=b.length;l<h;++l)Object.prototype.hasOwnProperty.call(b,String(l))?f.push(r(a,b,c,d,String(l),!0)):f.push("");g.forEach(function(g){g.match(/^\d+$/)||
f.push(r(a,b,c,d,g,!0))});return f}function r(a,b,c,d,g,f){var l,h;b=Object.getOwnPropertyDescriptor(b,g)||{value:b[g]};b.get?h=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(h=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,g)||(l="["+g+"]");h||(0>a.seen.indexOf(b.value)?(h=null===c?t(a,b.value,null):t(a,b.value,c-1),-1<h.indexOf("\n")&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+
a}).join("\n"))):h=a.stylize("[Circular]","special"));if(A(l)){if(f&&g.match(/^\d+$/))return h;l=JSON.stringify(""+g);l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=a.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=a.stylize(l,"string"))}return l+": "+h}function u(a,b,c){var d=0;return 60<a.reduce(function(a,b){d++;0<=b.indexOf("\n")&&d++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+
" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function w(a){return Array.isArray(a)}function z(a){return"boolean"===typeof a}function N(a){return"number"===typeof a}function y(a){return"string"===typeof a}function A(a){return void 0===a}function D(a){return E(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function E(a){return"object"===typeof a&&null!==a}function G(a){return E(a)&&"[object Date]"===Object.prototype.toString.call(a)}function F(a){return E(a)&&("[object Error]"===Object.prototype.toString.call(a)||
a instanceof Error)}function H(a){return"function"===typeof a}function I(a){return 10>a?"0"+a.toString(10):a.toString(10)}function K(){var a=new Date,b=[I(a.getHours()),I(a.getMinutes()),I(a.getSeconds())].join(":");return[a.getDate(),P[a.getMonth()],b].join(" ")}var L=/%[sdj%]/g;c.format=function(a){if(!y(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(g(arguments[c]));return b.join(" ")}c=1;var d=arguments,f=d.length;b=String(a).replace(L,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case "%s":return String(d[c++]);
case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(gh){return"[Circular]"}default:return a}});for(var l=d[c];c<f;l=d[++c])b=null!==l&&E(l)?b+(" "+g(l)):b+(" "+l);return b};c.deprecate=function(a,g){if(A(d.process))return function(){return c.deprecate(a,g).apply(this,arguments)};if(!0===b.noDeprecation)return a;var f=!1;return function(){if(!f){if(b.throwDeprecation)throw Error(g);b.traceDeprecation?console.trace(g):console.error(g);f=!0}return a.apply(this,arguments)}};
var J={},M;c.debuglog=function(a){A(M)&&(M=b.env.NODE_DEBUG||"");a=a.toUpperCase();if(!J[a])if((new RegExp("\\b"+a+"\\b","i")).test(M)){var d=b.pid;J[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else J[a]=function(){};return J[a]};c.inspect=g;g.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};g.styles={special:"cyan",number:"yellow",
"boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};c.isArray=w;c.isBoolean=z;c.isNull=function(a){return null===a};c.isNullOrUndefined=function(a){return null==a};c.isNumber=N;c.isString=y;c.isSymbol=function(a){return"symbol"===typeof a};c.isUndefined=A;c.isRegExp=D;c.isObject=E;c.isDate=G;c.isError=F;c.isFunction=H;c.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===
typeof a};c.isBuffer=a("./support/isBuffer");var P="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");c.log=function(){console.log("%s - %s",K(),c.format.apply(c,arguments))};c.inherits=a("inherits");c._extend=function(a,b){if(!b||!E(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":62,_process:43,inherits:61}],
64:[function(a,d,c){if(window.mozRTCPeerConnection||navigator.mozGetUserMedia){var b="moz";var g=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)}else if(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)b="webkit",g=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10);a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;c=window.mozRTCIceCandidate||window.RTCIceCandidate;var f=
window.mozRTCSessionDescription||window.RTCSessionDescription,h=window.webkitMediaStream||window.MediaStream,k="https:"===window.location.protocol&&("webkit"===b&&26<=g||"moz"===b&&33<=g),m=window.AudioContext||window.webkitAudioContext,t=document.createElement("video");t=t&&t.canPlayType&&"probably"===t.canPlayType('video/webm; codecs="vp8", vorbis');var C=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;d.exports={prefix:b,browserVersion:g,
support:!!a&&!!C,supportRTCPeerConnection:!!a,supportVp8:t,supportGetUserMedia:!!C,supportDataChannel:!!(a&&a.prototype&&a.prototype.createDataChannel),supportWebAudio:!(!m||!m.prototype.createMediaStreamSource),supportMediaStream:!(!h||!h.prototype.removeTrack),supportScreenSharing:!!k,AudioContext:m,PeerConnection:a,SessionDescription:f,IceCandidate:c,MediaStream:h,getUserMedia:C}},{}],65:[function(a,d,c){function b(){}d.exports=b;b.mixin=function(a){a=a.prototype||a;a.isWildEmitter=!0;a.on=function(a,
b,c){this.callbacks=this.callbacks||{};var d=3===arguments.length,g=d?arguments[2]:arguments[1];g._groupName=d?arguments[1]:void 0;(this.callbacks[a]=this.callbacks[a]||[]).push(g);return this};a.once=function(a,b,c){function d(){g.off(a,d);l.apply(this,arguments)}var g=this,f=3===arguments.length,l=f?arguments[2]:arguments[1];this.on(a,f?arguments[1]:void 0,d);return this};a.releaseGroup=function(a){this.callbacks=this.callbacks||{};var b,c;for(b in this.callbacks){var d=this.callbacks[b];var g=
0;for(c=d.length;g<c;g++)d[g]._groupName===a&&(d.splice(g,1),g--,c--)}return this};a.off=function(a,b){this.callbacks=this.callbacks||{};var c=this.callbacks[a];if(!c)return this;if(1===arguments.length)return delete this.callbacks[a],this;var d=c.indexOf(b);c.splice(d,1);0===c.length&&delete this.callbacks[a];return this};a.emit=function(a){this.callbacks=this.callbacks||{};var b=[].slice.call(arguments,1),c=this.callbacks[a],d=this.getWildcardCallbacks(a),g;if(c){var f=c.slice();c=0;for(g=f.length;c<
g&&f[c];++c)f[c].apply(this,b)}if(d)for(f=d.slice(),c=0,g=f.length;c<g&&f[c];++c)f[c].apply(this,[a].concat(b));return this};a.getWildcardCallbacks=function(a){this.callbacks=this.callbacks||{};var b,c=[];for(b in this.callbacks){var d=b.split("*");if("*"===b||2===d.length&&a.slice(0,d[0].length)===d[0])c=c.concat(this.callbacks[b])}return c}};b.mixin(b)},{}],66:[function(a,d,c){function b(a,b,c){return b?new g(a,b):new g(a)}a=window;var g=a.WebSocket||a.MozWebSocket;d.exports=g?b:null;g&&(b.prototype=
g.prototype)},{}],67:[function(a,d,c){function b(a){var b=!0;a.getTracks().forEach(function(a){b="ended"===a.readyState&&b});return b}function g(a){var b=this;k.call(this);this.id=a.id;this.parent=a.parent;this.type=a.type||"video";this.oneway=a.oneway||!1;this.sharemyscreen=a.sharemyscreen||!1;this.browserPrefix=a.prefix;this.stream=a.stream;this.enableDataChannels=void 0===a.enableDataChannels?this.parent.config.enableDataChannels:a.enableDataChannels;this.receiveMedia=a.receiveMedia||this.parent.config.receiveMedia;
this.channels={};this.sid=a.sid||Date.now().toString();this.pc=new h(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionConstraints);this.pc.on("ice",this.onIceCandidate.bind(this));this.pc.on("endOfCandidates",function(a){b.send("endOfCandidates",a)});this.pc.on("offer",function(a){b.parent.config.nick&&(a.nick=b.parent.config.nick);b.send("offer",a)});this.pc.on("answer",function(a){b.parent.config.nick&&(a.nick=b.parent.config.nick);b.send("answer",a)});this.pc.on("addStream",
this.handleRemoteStreamAdded.bind(this));this.pc.on("addChannel",this.handleDataChannelAdded.bind(this));this.pc.on("removeStream",this.handleStreamRemoved.bind(this));this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded"));this.pc.on("iceConnectionStateChange",this.emit.bind(this,"iceConnectionStateChange"));this.pc.on("iceConnectionStateChange",function(){switch(b.pc.iceConnectionState){case "failed":"offer"===b.pc.pc.localDescription.type&&(b.parent.emit("iceFailed",b),b.send("connectivityError"))}});
this.pc.on("signalingStateChange",this.emit.bind(this,"signalingStateChange"));this.logger=this.parent.logger;"screen"===a.type?this.parent.localScreens&&this.parent.localScreens[0]&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreens[0]),this.broadcaster=a.broadcaster):this.parent.localStreams.forEach(function(a){b.pc.addStream(a)});this.on("channelOpen",function(a){"https://simplewebrtc.com/protocol/filetransfer#inband-v1"===
a.protocol&&(a.onmessage=function(c){c=JSON.parse(c.data);var d=new m.Receiver;d.receive(c,a);b.emit("fileTransfer",c,d);d.on("receivedFile",function(a,b){d.channel.close()})})});this.on("*",function(){b.parent.emit.apply(b.parent,arguments)})}c=a("util");var f=a("webrtcsupport"),h=a("rtcpeerconnection"),k=a("wildemitter"),m=a("filetransfer");c.inherits(g,k);g.prototype.handleMessage=function(a){var b=this;this.logger.log("getting",a.type,a);a.prefix&&(this.browserPrefix=a.prefix);"offer"===a.type?
(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleOffer(a.payload,function(a){a||b.pc.answer(function(a,b){})})):"answer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleAnswer(a.payload)):"candidate"===a.type?this.pc.processIce(a.payload):"connectivityError"===a.type?this.parent.emit("connectivityError",b):"mute"===a.type?this.parent.emit("mute",{id:a.from,name:a.payload.name}):"unmute"===a.type&&this.parent.emit("unmute",{id:a.from,name:a.payload.name})};
g.prototype.send=function(a,b){b={to:this.id,sid:this.sid,broadcaster:this.broadcaster,roomType:this.type,type:a,payload:b,prefix:f.prefix};this.logger.log("sending",a,b);this.parent.emit("message",b)};g.prototype.sendDirectly=function(a,b,c){this.logger.log("sending via datachannel",a,b,{type:b,payload:c});a=this.getDataChannel(a);if("open"!=a.readyState)return!1;a.send(c);return!0};g.prototype._observeDataChannel=function(a){var b=this;a.binaryType="arraybuffer";a.onclose=this.emit.bind(this,"channelClose",
a);a.onerror=this.emit.bind(this,"channelError",a);a.onmessage=function(c){var d=new Uint32Array(c.data);b.emit("channelMessage",b,a.label,d,a,c)};a.onopen=this.emit.bind(this,"channelOpen",a)};g.prototype.getDataChannel=function(a,b){if(!f.supportDataChannel)return this.emit("error",Error("createDataChannel not supported"));var c=this.channels[a];b||(b={});if(c)return c;c=this.channels[a]=this.pc.createDataChannel(a,b);c.binaryType="arraybuffer";this._observeDataChannel(c);return c};g.prototype.onIceCandidate=
function(a){if(!this.closed)if(a){var b=this.parent.config.peerConnectionConfig;"moz"===f.prefix&&b&&b.iceTransports&&a.candidate&&a.candidate.candidate&&0>a.candidate.candidate.indexOf(b.iceTransports)?this.logger.log("Ignoring ice candidate not matching pcConfig iceTransports type: ",b.iceTransports):this.send("candidate",a)}else this.logger.log("End of candidates.")};g.prototype.start=function(){this.enableDataChannels&&this.getDataChannel("simplewebrtc");this.pc.offer(this.receiveMedia,function(a,
b){})};g.prototype.icerestart=function(){var a=this.receiveMedia;a.mandatory.IceRestart=!0;this.pc.offer(a,function(a,b){})};g.prototype.end=function(){this.closed||(this.pc.close(),this.handleStreamRemoved())};g.prototype.handleRemoteStreamAdded=function(a){var c=this;this.stream?this.logger.warn("Already have a remote stream"):(this.stream=a.stream,this.stream.getTracks().forEach(function(a){a.addEventListener("ended",function(){b(c.stream)&&c.end()})}),this.parent.emit("peerStreamAdded",this))};
g.prototype.handleStreamRemoved=function(){var a=this.parent.peers.indexOf(this);-1<a&&(this.parent.peers.splice(a,1),this.closed=!0,this.parent.emit("peerStreamRemoved",this))};g.prototype.handleDataChannelAdded=function(a){this.channels[a.label]=a;this._observeDataChannel(a)};g.prototype.sendFile=function(a){var b=new m.Sender,c=this.getDataChannel("filetransfer"+(new Date).getTime(),{protocol:"https://simplewebrtc.com/protocol/filetransfer#inband-v1"});c.onopen=function(){c.send(JSON.stringify({size:a.size,
name:a.name}));b.send(a,c)};c.onclose=function(){console.log("sender received transfer");b.emit("complete")};return b};d.exports=g},{filetransfer:26,rtcpeerconnection:44,util:63,webrtcsupport:64,wildemitter:65}],68:[function(a,d,c){function b(a){var b=this,c=a||{},d=this.config={url:"https://sandbox.simplewebrtc.com:443/",socketio:{},connection:null,debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!1,peerVolumeWhenSpeaking:.25,
media:{video:!0,audio:!0},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},localVideo:{autoplay:!0,mirror:!0,muted:!0}},l;var n=a.debug?a.logger||console:a.logger||x;this.logger=n;for(l in c)c.hasOwnProperty(l)&&(this.config[l]=c[l]);this.capabilities=h;f.call(this);var m=null===this.config.connection?this.connection=new t(this.config):this.connection=this.config.connection;m.on("connect",function(){b.emit("connectionReady",m.getSessionid());b.sessionReady=!0;b.testReadiness()});m.on("message",
function(a){var c=b.webrtc.getPeers(a.from,a.roomType);if("offer"===a.type){c.length&&c.forEach(function(b){b.sid==a.sid&&(d=b)});if(!d){var d=b.webrtc.createPeer({id:a.from,sid:a.sid,type:a.roomType,enableDataChannels:b.config.enableDataChannels&&"screen"!==a.roomType,sharemyscreen:"screen"===a.roomType&&!a.broadcaster,broadcaster:"screen"!==a.roomType||a.broadcaster?null:b.connection.getSessionid()});b.emit("createdPeer",d)}d.handleMessage(a)}else c.length&&c.forEach(function(b){a.sid?b.sid===a.sid&&
b.handleMessage(a):b.handleMessage(a)})});m.on("remove",function(a){A("rem1");p.gstarted()||a.id===b.connection.getSessionid()||(A("rem11"),b.webrtc.removePeers(a.id,a.type))});a.logger=this.logger;a.debug=!1;this.webrtc=new g(a);"mute unmute pauseVideo resumeVideo pause resume sendToAll sendDirectlyToAll getPeers".split(" ").forEach(function(a){b[a]=b.webrtc[a].bind(b.webrtc)});this.webrtc.on("*",function(){b.emit.apply(b,arguments)});if(d.debug)this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:"));
this.webrtc.on("localStream",function(){b.testReadiness()});this.webrtc.on("message",function(a){b.connection.emit("message",a)});this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this));this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this));this.config.adjustPeerVolume&&(this.webrtc.on("speaking",this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1)));m.on("stunservers",function(a){b.webrtc.config.peerConnectionConfig.iceServers=
a;b.emit("stunservers",a)});m.on("turnservers",function(a){b.webrtc.config.peerConnectionConfig.iceServers=b.webrtc.config.peerConnectionConfig.iceServers.concat(a);b.emit("turnservers",a)});this.webrtc.on("iceFailed",function(a){});this.webrtc.on("connectivityError",function(a){});this.webrtc.on("audioOn",function(){b.webrtc.sendToAll("unmute",{name:"audio"})});this.webrtc.on("audioOff",function(){b.webrtc.sendToAll("mute",{name:"audio"})});this.webrtc.on("videoOn",function(){b.webrtc.sendToAll("unmute",
{name:"video"})});this.webrtc.on("videoOff",function(){b.webrtc.sendToAll("mute",{name:"video"})});this.webrtc.on("localScreen",function(a){var c=document.createElement("video"),d=b.getRemoteVideoContainer();c.oncontextmenu=function(){return!1};c.id="localScreen";k(a,c);d&&d.appendChild(c);b.emit("localScreenAdded",c);b.connection.emit("shareScreen");b.webrtc.peers.forEach(function(a){"video"===a.type&&(a=b.webrtc.createPeer({id:a.id,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{offerToReceiveAudio:0,
offerToReceiveVideo:0},broadcaster:b.connection.getSessionid()}),b.emit("createdPeer",a),a.start())})});this.webrtc.on("localScreenStopped",function(a){b.getLocalScreen()&&b.stopScreenShare()});this.webrtc.on("channelMessage",function(a,c,d){"volume"==d.type&&b.emit("remoteVolumeChange",a,d.volume)});this.config.autoRequestMedia&&this.startLocalVideo()}var g=a("./webrtc"),f=a("wildemitter"),h=a("webrtcsupport"),k=a("attachmediastream"),x=a("mockconsole"),t=a("./socketioconnection");b.prototype=Object.create(f.prototype,
{constructor:{value:b}});b.prototype.leaveRoom=function(){if(this.roomName){for(this.connection.emit("leave");this.webrtc.peers.length;)this.webrtc.peers[0].end();this.getLocalScreen()&&this.stopScreenShare();this.emit("leftRoom",this.roomName);this.roomName=void 0}};b.prototype.disconnect=function(){this.connection.disconnect();delete this.connection};b.prototype.handlePeerStreamAdded=function(a){var b=this,c=this.getRemoteVideoContainer(),d=k(a.stream);a.videoEl=d;d.id=this.getDomId(a);c&&c.appendChild(d);
this.emit("videoAdded",d,a);window.setTimeout(function(){b.webrtc.isAudioEnabled()||a.send("mute",{name:"audio"});b.webrtc.isVideoEnabled()||a.send("mute",{name:"video"})},250)};b.prototype.handlePeerStreamRemoved=function(a){var b=this.getRemoteVideoContainer(),c=a.videoEl;this.config.autoRemoveVideos&&b&&c&&b.removeChild(c);c&&this.emit("videoRemoved",c,a)};b.prototype.getDomId=function(a){return[a.id,a.type,a.broadcaster?"broadcasting":"incoming"].join("_")};b.prototype.setVolumeForAll=function(a){this.webrtc.peers.forEach(function(b){b.videoEl&&
(b.videoEl.volume=a)})};b.prototype.joinRoom=function(a,b){var c=this;this.roomName=a;this.connection.emit("join",a,function(d,g){console.log("join CB",d);if(d)c.emit("error",d);else{if(!g.xtra){xa();T("game");$a();Eb(m.ERR_GAMELOAD,"#ff0000");return}r.room=g.xtra;var f,l;for(f in g.clients){var h=g.clients[f];for(l in h)if(h[l]){var k=c.webrtc.createPeer({id:f,type:l,enableDataChannels:c.config.enableDataChannels&&"screen"!==l,receiveMedia:{offerToReceiveAudio:"screen"!==l&&c.config.receiveMedia.offerToReceiveAudio?
1:0,offerToReceiveVideo:c.config.receiveMedia.offerToReceiveVideo}});c.emit("createdPeer",k);k.start()}}}b&&b(d,g);c.emit("joinedRoom",a)})};b.prototype.getEl=function(a){return"string"===typeof a?document.getElementById(a):a};b.prototype.startLocalVideo=function(){var a=this;this.webrtc.start(this.config.media,function(b,c){b?a.emit("localMediaError",b):k(c,a.getLocalVideoContainer(),a.config.localVideo)})};b.prototype.stopLocalVideo=function(){this.webrtc.stop()};b.prototype.getLocalVideoContainer=
function(){var a=this.getEl(this.config.localVideoEl);if(a&&"VIDEO"===a.tagName)return a.oncontextmenu=function(){return!1},a;if(a){var b=document.createElement("video");b.oncontextmenu=function(){return!1};a.appendChild(b);return b}};b.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)};b.prototype.shareScreen=function(a){this.webrtc.startScreenShare(a)};b.prototype.getLocalScreen=function(){return this.webrtc.localScreens&&this.webrtc.localScreens[0]};b.prototype.stopScreenShare=
function(){this.connection.emit("unshareScreen");var a=document.getElementById("localScreen"),b=this.getRemoteVideoContainer();this.config.autoRemoveVideos&&b&&a&&b.removeChild(a);a&&this.emit("videoRemoved",a);this.getLocalScreen()&&this.webrtc.stopScreenShare();this.webrtc.peers.forEach(function(a){a.broadcaster&&a.end()})};b.prototype.testReadiness=function(){this.sessionReady&&(this.config.media.video||this.config.media.audio?0<this.webrtc.localStreams.length&&this.emit("readyToCall",this.connection.getSessionid()):
this.emit("readyToCall",this.connection.getSessionid()))};b.prototype.createRoom=function(a,b){this.roomName=a;this.connection.emit("create",r.room,b)};b.prototype.sendFile=function(){if(!h.dataChannel)return this.emit("error",Error("DataChannelNotSupported"))};d.exports=b},{"./socketioconnection":69,"./webrtc":70,attachmediastream:3,mockconsole:37,webrtcsupport:64,wildemitter:65}],69:[function(a,d,c){function b(a){this.connection=g.connect(a.url,a.socketio)}var g=a("socket.io-client");b.prototype.on=
function(a,b){this.connection.on(a,b)};b.prototype.emit=function(){this.connection.emit.apply(this.connection,arguments)};b.prototype.getSessionid=function(){return this.connection.id};b.prototype.disconnect=function(){return this.connection.disconnect()};d.exports=b},{"socket.io-client":50}],70:[function(a,d,c){function b(a){var b=this,c=a||{};this.config={debug:!1,peerConnectionConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[]},receiveMedia:{offerToReceiveAudio:1,
offerToReceiveVideo:1},enableDataChannels:!0};var d;a=a.debug?a.logger||console:a.logger||f;this.logger=a;for(d in c)c.hasOwnProperty(d)&&(this.config[d]=c[d]);g.support||this.logger.error("Your browser doesn't seem to support WebRTC");this.peers=[];h.call(this,this.config);this.on("speaking",function(){b.hardMuted||b.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"speaking"})))})});this.on("stoppedSpeaking",function(){b.hardMuted||
b.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"stoppedSpeaking"})))})});this.on("volumeChange",function(a,c){b.hardMuted||b.peers.forEach(function(b){b.enableDataChannels&&(b=b.getDataChannel("hark"),"open"==b.readyState&&b.send(JSON.stringify({type:"volume",volume:a})))})});if(this.config.debug)this.on("*",function(a,c,d){(b.config.logger===f?console:b.logger).log("event:",a,c,d)})}c=a("util");var g=a("webrtcsupport"),
f=a("mockconsole"),h=a("localmedia"),k=a("./peer");c.inherits(b,h);b.prototype.createPeer=function(a){a.parent=this;a=new k(a);this.peers.push(a);return a};b.prototype.removePeers=function(a,b){this.getPeers(a,b).forEach(function(a){a.end()})};b.prototype.getPeers=function(a,b){return this.peers.filter(function(c){return(!a||c.id===a)&&(!b||c.type===b)})};b.prototype.sendToAll=function(a,b){this.peers.forEach(function(c){c.send(a,b)})};b.prototype.sendDirectlyToAll=function(a,b,c){this.peers.forEach(function(d){d.enableDataChannels&&
d.sendDirectly(a,b,c)})};d.exports=b},{"./peer":67,localmedia:35,mockconsole:37,util:63,webrtcsupport:64}]},{},[68])(68)})},cc,L=function(e,a,d){void 0===localStorage[e]&&(localStorage[e]=a);d&&(k(d).value=localStorage[e])};L("name","Guest"+~~(1E3*Math.random()));L("color","#0000bd");var r={name:localStorage.name,color:localStorage.color},ab=function(){};console.log("%c nehhon %c POWER ","background: #00ffd4; color: #000; font-size:20px","background: #000; color: #00ffd4; font-size:20px");console.log("%c webmaster@nehhon.com ",
"background: #00ffd4; color: #000; font-size:20px");console.log("%c @nehhon ","background: #000; color: #00ffd4; font-size:20px");var k=function(e){return document.getElementById(e)};void 0===localStorage.fullscreen&&(localStorage.fullscreen=!0);L("favMusic","originalMusic");L("musicRange",75);L("soundRange",100);L("goldRes",5E3);L("foodRes",5E3);L("stoneRes",5E3);L("woodRes",5E3);L("nplayed",0);L("infinity","true");L("mapx",256);L("terrain",0);L("visibility",0);L("peons",3);L("freePop",1);L("maxPop",
200);L("zoomMult",70);L("scrollSpeed",50);L("menuOpacity",72);L("nightcycle",!0);L("terrainRND",0);L("visits",0);L("gameType",0);L("AIlevel",100);L("scale",100);L("shadows",!0);localStorage.visits++;console.log=ab;console.error=ab;console.warn=ab;console.info=ab;"tza.red"!==location.hostname&&(location.href="https://tza.red");window.addEventListener("error",function(e){jb(e.lineno+":"+e.colno+" "+e.message,"error")});var kb=function(e){e.parentNode.removeChild(e)},la=function(e,a,d,c){e=document.createElement(e);
a.appendChild(e);d&&(e.innerHTML=d);c&&(e.style.cssText=c);return e},Eb=function(e,a){k("notifybar")||(la("div",document.getElementsByTagName("main")[0]).id="notifybar");var d=k("notifybar"),c=document.createElement("div");c.innerHTML=e;a&&(c.style.background=a);d.appendChild(c);setTimeout(kb,11E3,c)},Uf=location;(function(){var e=!!window.opr||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),a="undefined"!==typeof InstallTrigger,d=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),
c=!!document.documentMode,b=!c&&!!window.StyleMedia,g=!!window.chrome&&!!window.chrome.webstore,f;e?f="Opera":a?f="Firefox":d?f="Safari":c?f="IE":b?f="Edge":g&&(f="Chrome");r.navLang=localStorage.language||navigator.language||navigator.userLanguage;e=r.navLang.substr(0,2);"es"==e?a=["Tzared","Juego de estrategia en tiempo real para navegadores web, juega solo o con amigos","tzared,jugar,multijugador,juego,online,navegador web,tzar"]:"it"==e?a=["Tzared","Gioco di strategia in tempo reale per browser web, giocare da soli o con gli amici",
"tzared,giocare,multigiocatore,gioco,online,navigatore,tzar,web"]:"pl"==e?a=["Tzared","Gra strategiczna w czasie rzeczywistym dla przegl\u0105darek internetowych, bawi\u0107 si\u0119 samotnie lub z przyjaci\u00f3\u0142mi","tzared,gra,multiplayer,online,tzar,przegl\u0105darka internetowa"]:"ru"==e?a=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0434\u043b\u044f \u0432\u0435\u0431-\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u0432, \u0438\u0433\u0440\u0430\u0442\u044c \u0432 \u043e\u0434\u0438\u043d\u043e\u0447\u043a\u0443 \u0438\u043b\u0438 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u044c\u0442\u0438\u043f\u043b\u0435\u0435\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u0435\u0440,\u043e\u0433\u043d\u0451\u043c \u0438 \u043c\u0435\u0447\u043e\u043c"]:"pt"==e?a=["Tzared","Jogo de estrat\u00e9gia em tempo real para navegadores da web, jogar sozinho ou com amigos","tzared,jogar,multiplayer,jogo,online,navegador web,tzar"]:"bg"==e?a=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0447\u0435\u0441\u043a\u0430 \u0438\u0433\u0440\u0430 \u0432 \u0440\u0435\u0430\u043b\u043d\u043e \u0432\u0440\u0435\u043c\u0435 \u0437\u0430 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0438, \u0438\u0433\u0440\u0430\u0439\u0442\u0435 \u0441\u0430\u043c\u0438 \u0438\u043b\u0438 \u0441 \u043f\u0440\u0438\u044f\u0442\u0435\u043b\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u0442\u0438\u043f\u043b\u0435\u0439\u044a\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u044a\u0440"]:"de"==e?a=["Tzared","Echtzeit-Strategiespiel f\u00fcr Webbrowser, alleine oder mit Freunden spielen","tzared,multiplayer,spiel,online,Webbrowser,tzar"]:"cz"==e?a=["Tzared","Strategick\u00e1 hra v re\u00e1ln\u00e9m \u010dase pro webov\u00e9 prohl\u00ed\u017ee\u010de, hr\u00e1t sama nebo s p\u0159\u00e1teli",
"tzared,play,multiplayer,hra,online,browser,tzar,web"]:"se"==e?a=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"]:(a=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"],e="en");document.getElementsByTagName("html")[0].lang=e;document.title=a[0];r.title=a[0];document.getElementsByTagName("meta").description=a[1];document.getElementsByTagName("meta").keywords=
a[2];a=new Date;a=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());r.versionInt=357;r.version="v"+r.versionInt/10;r.versionDate=a-1579546632194;localStorage.version!==r.version&&(localStorage.version=r.version,Eb("Updated to "+r.version));k("info").innerHTML="Work in progress - Beta "+r.version+" - Updated "+~~(r.versionDate/864E5)+" days ago";r.lang="en es it pt ru pl bg de cz".split(" ").indexOf(e);0>r.lang&&(r.lang=
0);r.langstr=e;r.team=0;r.race=0;r.navigator=f;r.mx=151;r.onlineID=null;r.temperature=0;r.cdn="nehhon/"})();var ke,Wc=function(e){e--;var a=new XMLHttpRequest;a.open("GET",r.cdn+r.langstr+".json",!0);a.onload=function(){m=JSON.parse(a.response);Z=[m.SP_SETUPMAP_RACE_1.split("|")[0],m.SP_SETUPMAP_RACE_2.split("|")[0],m.SP_SETUPMAP_RACE_3.split("|")[0],m.ORDERS_NAMES_E_COMMON.toLocaleUpperCase()];for(var d=["mult0",m.MAINSCR_MULTI.split("|")[0],"rnd0",m.MAINSCR_SINGLE.split("| ")[0],"load0",m.SINGLESCR_LOAD.split("| ")[1],
"editor0",m.MAPEDITOR,"settings0",m.MP_MPLAYER_SETTINGS,"about",m.ABOUT,"multSection",m.MAINSCR_MULTI.split("|")[0],"offlineSection",m.MAINSCR_SINGLE.split("|")[0],"returnmenu",m.CAMPAIGN_BACK,"savelocal",m.SAVE_GAME_CONTENT,"help",m.GUIDE],c=0,b=d.length;c<b;c+=2)k(d[c])&&(k(d[c]).innerHTML=d[c+1])};a.send()};Wc(r.lang);Wc.translated=!0;var A=console.log,Vf=function(){T("alert");xa()},jb=function(e,a,d,c){var b=k("alert");b||(Pa("alert"),b=k("alert"),A(c),b.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');
var g=k("alerttitle"),f=k("alerttext");k("alertok").onclick=Vf;b.style.display="block";g.innerHTML=a||m&&m.TZAREDIT_S2||"Warning";k("alertok").innerHTML=c||m&&m.DLG_BTNS_OK||"Ok";e&&(f.innerHTML=e);d?k("alertok").style.display="none":k("alertok").style.display="block";bb()},sa={size:512,load:0,xtra:[],common:1,xtraRes:[]},Xc=function(e){k("loadingtext").innerHTML=m.DOWNLOADING_GRAPHICS+" "+e+"%"};sa.check=function(){sa.load++;if(sa.load>=sa.images){if(Qa.updating)return Qa.updating();xe();Ia.check()}};
var Ja=function(e,a){this.address=e;this.size=a};Ja.prototype.viewU8=function(){return dc(this.address,this.size)};Ja.prototype.viewU32=function(){return new Uint32Array(ra.buffer,this.address,this.size)};Ja.prototype.viewF32=function(){return Yc(this.address,this.size)};Ja.prototype.viewI32=function(){return new Int32Array(ra.buffer,this.address,this.size)};var Qa=function(e){Qa.updating=e;k("loadingtext").innerHTML=m.DOWNLOADING_GRAPHICS;sa.images=3;e&&sa.images--;sa.load=0;p.downloadGra("true"==
localStorage.shadows);Xc.progress=0;Xc.total=0;Date.now();sa.check();k("loadingtext").innerHTML=m.DOWNLOADING_GRAPHICS;Qa.intvFunc()};Qa.intvFunc=function(){p.txtLoad()==sa.images-sa.load?(sa.load++,sa.check()):setTimeout(Qa.intvFunc,15)};var Zc=[{name:"Grass"},{name:"Trenkorian"},{name:"Desert"},{name:"Snow"},{name:"Summer"},{name:"Rareland"},{name:"Jungle"}],ye=function(){localStorage.update=1;window.caches&&caches.keys().then(function(e){e=$jscomp.makeIterator(e);for(var a=e.next();!a.done;a=e.next())caches.delete(a.value)});
location.reload(!0)};localStorage.lastVersion!=r.versionInt&&(localStorage.lastVersion=r.versionInt,ye());(function(){if(1==localStorage.update){delete localStorage.update;var e=indexedDB.deleteDatabase("emscripten_filesystem");e.onsuccess=function(a){A(a)};e=indexedDB.deleteDatabase("nh2019");e.onsuccess=function(a){A(a)}}else fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(a){return a.text().then(function(a){A(a);a!=r.versionInt&&ye()})})})();(function(){"serviceWorker"in navigator&&
(navigator.serviceWorker.register("sworker.js").then(function(e){},function(e){A(e)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)})})();var oa="GENERAL_DEFGAMENAME;GENERAL_GAMENAME;GENERAL_VERSION;GENERAL_NET_TITLE;GENERAL_CANCEL;GENERAL_OK;GENERAL_YES;GENERAL_NO;GENERAL_CLOSE;GENERAL_IGNORE;GENERAL_ABORT;GENERAL_YOUSURE;GENERAL_REFRESH;GENERAL_KICK;GENERAL_QLOAD;GENERAL_QSAVE;ADDS_MOREHOUSES;ADDS_AISEND;CHECK_INSERTCD;CHECK_INSERTCD2;CHECK_INSERTCD3;CHECK_NOCD;CHECK_BADEXE;ERR_CTFCANTSPAWN;ERR_DXFAILED;ERR_VMODE;ERR_OFFSCREEN;ERR_GPF;ERR_INCORRECTVER;ERR_GAMEFULL;ERR_BROWSEFAIL;ERR_NONET;ERR_SNDINIT;ERR_GAMECREATE;ERR_GAMELOAD;ERR_GAMELOAD2;ERR_DEMOVER;ERR_DEMORNDMAP;ERR_INVALIDCFG;ERR_INITMIDI;ERR_DSINIT;ERR_MCIINIT;ERR_BETACONNECT;ERR_SERVERCANCEL;ERR_SERVERKICK;ERR_ORDERROOM;ERR_MENUROOM;ERR_NETASYNC;ERR_NETASYNC2;ERR_NETASYNCBAD;ERR_NOTERRAIN;ERR_NOMAP;ERR_CLIENTSYNC;ERR_RULESLOAD;ERR_MAPWRONGVER;ERR_WRONGAI;ERR_WRONGOBJS;ERR_UNKNOWN;ERR_FATAL;ERR_NONFATAL;ERR_ERRORCODE;DEFMSG_MOVEDAVANCE;DEFMSG_MOVESNEAK;DEFMSG_ATTACK;DEFMSG_ATTACKTYPE;DEFMSG_ENTERHOLDER;DEFMSG_MINE;DEFMSG_BUILD;DEFMSG_REPAIR;DEFMSG_DIG;DEFMSG_CAPTURE;DEFMSG_CHOP;DEFMSG_ENTERSHIP;DEFMSG_FISHING;DEFMSG_PICKITEM;DEFMSG_PICKITEMINST;DEFMSG_GATHERRESITEMS;DEFMSG_TENDCOWS;DEFMSG_LEAVETRADE;DEFMSG_RETURNGOODS;DEFMSG_DUMMYTRAIN;DEFMSG_REMOVERALLYPOINT;DEFMSG_SETRALLYPOINT;DEFMSG_SETRALLYPOINTDA;DEFMSG_SETRALLYPOINTADV;DEFMSG_NOMAPTITLE;DEFMSG_NODECR;Q_QUIT_TITLE;Q_QUIT;Q_RESIGN;Q_DISCONNECT;MSG_CLIENT_QUIT;MSG_LOAD_OBJDEFS;MSG_LOAD_TERRAIN;MSG_LOAD_OBJECTS;MSG_LOAD_FINAL;MSG_LOAD_AI;MSG_LOAD_DONE;MSG_GAME_DESTROY;MSG_GAME_CREATE;MSG_GAME_RANDOM;MSG_GAME_RESTART;MSG_GAME_LOAD;MSG_GAME_LOAD_OBJ;MSG_GAME_INIT;MSG_RESADDED;MSG_NET_JOIN;MSG_NET_BROWSE;MSG_TREE;MSG_GAME_SPEED;MSG_GAME_SPEED_SLOWEST;MSG_GAME_SPEED_SLOW;MSG_GAME_SPEED_NORMAL;MSG_GAME_SPEED_FAST;MSG_GAME_SPEED_FASTEST;MSG_SYS_ERROR;MSG_SYS_TITLE;MSG_SYS_CONT;MSG_SYS_ABORT;MSG_SYS_YES;MSG_SYS_NO;MSG_SYS_IGNORE;MSG_DISCONNECT;VIEWMSG_POPLIMIT1;VIEWMSG_POPLIMIT2;VIEWMSG_NOTGOLD;VIEWMSG_NOTMANNA;VIEWMSG_NOTPOWER;VIEWMSG_MAGICGATEWAYCAP;VIEWMSG_QUICKSAVED;VIEWMSG_NOMPCHEAT;VIEWMSG_CHEATSENABLED;VIEWMSG_PLAYER_RESIGNED;VIEWMSG_PLAYER_DISCONECTED;VIEWMSG_PLAYER_DEFEATED;VIEWMSG_NEWQUEST;VIEWMSG_DEMO_END;VIEWMSG_NOTRES;VIEWMSG_GOLD;VIEWMSG_STONE;VIEWMSG_FOOD;VIEWMSG_WOOD;VIEWMSG_MANNA;VIEWMSG_SELL_ITEM;VIEWMSG_WAIT_PLAYERS;VIEWMSG_WAIT_RESPONSE;VIEWMSG_PLAYER_ENEMY;VIEWMSG_PLAYER_NEUTRAL;VIEWMSG_PLAYER_ALLY;VIEWMSG_PLAYER_WANT_ENEMY;VIEWMSG_PLAYER_WANT_NEUTRAL;VIEWMSG_PLAYER_WANT_ALLY;VIEWMSG_SPELL_LEARNED;VIEWMSG_PAUSE;NOTIFY_UNDER_ATTACK;NOTIFY_CAPTURED;NOTIFY_KILLED;NOTIFY_DESTROYED;NOTIFY_BUILT;NOTIFY_PRODUCED;NOTIFY_DISCOVERED;NOTIFY_UPGRADED;SELVIEW_UNITS;SELVIEW_BERSERKKINGDOM;MAINSCR_SINGLE;MAINSCR_MULTI;MAINSCR_PREF;MAINSCR_CREDITS;MAINSCR_QUIT;SINGLESCR_CAMPAIGN;SINGLESCR_CUSTOM;SINGLESCR_RANDOM;SINGLESCR_LOAD;SINGLESCR_BACK;SP_CHOOSEMAP_T_CUSTOMMAP;SP_CHOOSEMAP_T_MAP;SP_CHOOSEMAP_T_DESCRIPTION;SP_CHOOSEMAP_PLAY;SP_CHOOSEMAP_BACK;SP_SETUPMAP_T_NUM_PLAYERS;SP_SETUPMAP_T_GAME_TYPE;SP_SETUPMAP_T_VICT_COND;SP_SETUPMAP_T_SCORE_LIM;SP_SETUPMAP_T_TIME_LIM;SP_SETUPMAP_T_DIFF_LVL;SP_SETUPMAP_T_ST_RES;SP_SETUPMAP_T_MAP_DECR;SP_SETUPMAP_T_FOG;SP_SETUPMAP_T_EXPOLRE;SP_SETUPMAP_T_MAPDEF;SP_SETUPMAP_T_POPLIMIT;SP_SETUPMAP_BACK;SP_SETUPMAP_PLAY;SP_SETUPMAP_RACE_0;SP_SETUPMAP_RACE_1;SP_SETUPMAP_RACE_2;SP_SETUPMAP_RACE_3;SP_SETUPMAP_G_TYPE_0;SP_SETUPMAP_G_TYPE_1;SP_SETUPMAP_G_TYPE_2;SP_SETUPMAP_VCOND_0;SP_SETUPMAP_VCOND_1;SP_SETUPMAP_VCOND_2;SP_SETUPMAP_VCOND_3;SP_SETUPMAP_DIFFLVL_0;SP_SETUPMAP_DIFFLVL_1;SP_SETUPMAP_DIFFLVL_2;SP_SETUPMAP_RESURCS_0;SP_SETUPMAP_RESURCS_1;SP_SETUPMAP_RESURCS_2;SP_SETUPMAP_RESURCS_3;MP_SEARCH_T_PL_NAME;MP_SEARCH_T_IPX;MP_SEARCH_T_TCP;MP_SEARCH_T_IP;MP_SEARCH_T_LOBBY;MP_SEARCH_T_GAMES;MP_SEARCH_T_INFORM;MP_SEARCH_T_GAMENAME;MP_SEARCH_CREATE;MP_SEARCH_SEARCH;MP_SEARCH_JOIN;MP_SEARCH_BACK;MP_MPLAYER_PLAY;MP_MPLAYER_SETTINGS;MP_MPLAYER_DISCONNECT;MP_MPLAYER_RACE_0;MP_MPLAYER_RACE_1;MP_MPLAYER_RACE_2;MP_MPLAYER_RACE_3;MP_MPLAYER_NAME_0;MP_MPLAYER_NAME_1;MP_MPLAYER_NAME_2;MP_SETUPMAP_T_RANDOM;MP_SETUPMAP_T_CUSTOM;MP_SETUPMAP_T_CUSTOM_LIST;MP_SETUPMAP_T_MAP_DECR;MP_SETUPMAP_T_GAME_TYPE;MP_SETUPMAP_T_VICT_COND;MP_SETUPMAP_T_SCORE_LIM;MP_SETUPMAP_T_TIME_LIM;MP_SETUPMAP_T_DIFF_LVL;MP_SETUPMAP_T_ST_RES;MP_SETUPMAP_T_MAP_SIZE;MP_SETUPMAP_T_MAP_RES;MP_SETUPMAP_T_MAP_TYPE;MP_SETUPMAP_T_TERRAIN;MP_SETUPMAP_T_GSLOCATIONS;MP_SETUPMAP_T_ANIMALS;MP_SETUPMAP_T_RIVERS;MP_SETUPMAP_T_MITEMS;MP_SETUPMAP_T_CLIFFS;MP_SETUPMAP_T_FOG;MP_SETUPMAP_T_EXPOLRE;MP_SETUPMAP_T_WEATHER;MP_SETUPMAP_T_DAY;MP_SETUPMAP_T_POPLIMIT;MP_SETUPMAP_T_USEMAPSET;MP_SETUPMAP_T_GATEWAYS;MP_SETUPMAP_T_COMP;MP_SETUPMAP_T_OPEN;MP_SETUPMAP_T_DISABLE;MP_SETUPMAP_G_TYPE_0;MP_SETUPMAP_G_TYPE_1;MP_SETUPMAP_G_TYPE_2;MP_SETUPMAP_VCOND_0;MP_SETUPMAP_VCOND_1;MP_SETUPMAP_VCOND_2;MP_SETUPMAP_VCOND_3;MP_SETUPMAP_DIFFLVL_0;MP_SETUPMAP_DIFFLVL_1;MP_SETUPMAP_DIFFLVL_2;MP_SETUPMAP_RESURCS_0;MP_SETUPMAP_RESURCS_1;MP_SETUPMAP_RESURCS_2;MP_SETUPMAP_RESURCS_3;MP_SETUPMAP_CANCEL;MP_SETUPMAP_ACCEPT;MP_SETUPMAP_M_SIZE_0;MP_SETUPMAP_M_SIZE_1;MP_SETUPMAP_M_SIZE_2;MP_SETUPMAP_M_SIZE_3;MP_SETUPMAP_M_SIZE_4;MP_SETUPMAP_M_SIZE_5;MP_SETUPMAP_M_SIZE_6;MP_SETUPMAP_M_RES_0;MP_SETUPMAP_M_RES_1;MP_SETUPMAP_M_RES_2;MP_SETUPMAP_M_TYPE_0;MP_SETUPMAP_M_TYPE_1;MP_SETUPMAP_M_TYPE_2;MP_SETUPMAP_M_TYPE_3;MP_SETUPMAP_M_TYPE_4;MP_SETUPMAP_M_TYPE_5;MP_SETUPMAP_AI_ASSIST;GAME_SCR_MENU;GAME_SCR_DIPLOMACY;GAME_SCR_CHAT;DLG_BTNS_OK;DLG_BTNS_CANCEL;WND_QUESTS_CURQUEST;WND_QUESTS_CLOSE;WND_QUESTS_PAGE;WND_QUESTS_NONE;WND_MESSAGE_CLOSE;SP_SETUPRND_T_NUM_PLAYERS;SP_SETUPRND_T_GAME_TYPE;SP_SETUPRND_T_VICT_COND;SP_SETUPRND_T_SCORE_LIM;SP_SETUPRND_T_TIME_LIM;SP_SETUPRND_T_DIFF_LVL;SP_SETUPRND_T_ST_RES;SP_SETUPRND_T_FOG;SP_SETUPRND_T_EXPOLRE;SP_SETUPRND_T_MAP_SIZE;SP_SETUPRND_T_MAP_RES;SP_SETUPRND_T_MAP_TYPE;SP_SETUPRND_T_TERRAIN;SP_SETUPRND_T_GSLOCATIONS;SP_SETUPRND_T_ANIMALS;SP_SETUPRND_T_RIVERS;SP_SETUPRND_T_MITEMS;SP_SETUPRND_T_CLIFFS;SP_SETUPRND_T_POPLIMIT;SP_SETUPRND_T_GATEWAYS;SP_SETUPRND_BACK;SP_SETUPRND_PLAY;SP_SETUPRND_RACE_0;SP_SETUPRND_RACE_1;SP_SETUPRND_RACE_2;SP_SETUPRND_RACE_3;SP_SETUPRND_G_TYPE_0;SP_SETUPRND_G_TYPE_1;SP_SETUPRND_G_TYPE_2;SP_SETUPRND_VCOND_0;SP_SETUPRND_VCOND_1;SP_SETUPRND_VCOND_2;SP_SETUPRND_VCOND_3;SP_SETUPRND_DIFFLVL_0;SP_SETUPRND_DIFFLVL_1;SP_SETUPRND_DIFFLVL_2;SP_SETUPRND_RESURCS_0;SP_SETUPRND_RESURCS_1;SP_SETUPRND_RESURCS_2;SP_SETUPRND_RESURCS_3;SP_SETUPRND_M_SIZE_0;SP_SETUPRND_M_SIZE_1;SP_SETUPRND_M_SIZE_2;SP_SETUPRND_M_SIZE_3;SP_SETUPRND_M_SIZE_4;SP_SETUPRND_M_SIZE_5;SP_SETUPRND_M_SIZE_6;SP_SETUPRND_M_RES_0;SP_SETUPRND_M_RES_1;SP_SETUPRND_M_RES_2;SP_SETUPRND_M_TYPE_0;SP_SETUPRND_M_TYPE_1;SP_SETUPRND_M_TYPE_2;SP_SETUPRND_M_TYPE_3;SP_SETUPRND_M_TYPE_4;SP_SETUPRND_M_TYPE_5;OPTIONS_T_SOPT;OPTIONS_T_SVOL;OPTIONS_T_USP;OPTIONS_T_BS;OPTIONS_T_NS;OPTIONS_T_MOPT;OPTIONS_T_MV;OPTIONS_T_CD;OPTIONS_T_GOPT;OPTIONS_T_GS;OPTIONS_T_SS;OPTIONS_T_PD;OPTIONS_T_UINT;OPTIONS_T_HC;OPTIONS_T_ML;OPTIONS_T_WE;OPTIONS_T_DN;OPTIONS_OK;ENDGAMEDLG_QUIT;ENDGAMEDLG_LOAD;ENDGAMEDLG_SAVE;ENDGAMEDLG_NEXT;ENDGAMEDLG_STAT;ENDGAMEDLG_RESTART;ENDGAMEDLG_WIN1;ENDGAMEDLG_WIN2;ENDGAMEDLG_LOSE1;ENDGAMEDLG_LOSE2;PEONS_CHOP;PEONS_DIG;PEONS_MINE;PEONS_BUILD;PEONS_REPAIR;PEONS_TEND COWS;PEONS_EXPLORE;PEONS_CAPTURE;PEONS_ATTACK;PEONS_AI FAR BUILD;PEONS_GATHER RESOURCE ITEMS;PEONS_USE TRANSPORT;CHAT_T_CHAT;LOAD_T_LOAD;LOAD_TYPE_0;LOAD_TYPE_1;LOAD_TYPE_2;LOAD_LOAD;LOAD_DEL;LOAD_CANCEL;SAVE_T_SAVE;SAVE_NEW;SAVE_SAVE;SAVE_DEL;SAVE_CANCEL;CAMPAIGN_T_CAM;CAMPAIGN_T_DESCR;CAMPAIGN_T_EMISS;CAMPAIGN_T_EMISDES;CAMPAIGN_BACK;CAMPAIGN_PLAY;EDIT_T_GAMENAME;DIPLOMACY_T_TITLE;DIPLOMACY_TRIBUTE;DIPLOMACY_SHVICTORY;DIPLOMACY_ACCEPT;DIPLOMACY_CANCEL;TRIBUTE_T_TITLE;TRIBUTE_CANCEL;TRIBUTE_SEND;MENU_INST;MENU_LOAD;MENU_SAVE;MENU_OPTI;MENU_REST;MENU_QUIT;MENU_BACK;MENU_SURR;MENU_DISCONNECT;OBJECTS_ACADEMY;OBJECTS_ARCHER;OBJECTS_BALLISTA;OBJECTS_BARRACK;OBJECTS_BAT;OBJECTS_BEAR;OBJECTS_BIRD;OBJECTS_BLACKSMITH;OBJECTS_BRIDGE;OBJECTS_CARPET;OBJECTS_CASTLE;OBJECTS_CATAPULT;OBJECTS_CATHEDRAL;OBJECTS_CHARIOT;OBJECTS_CHURCH E;OBJECTS_CHURCH R;OBJECTS_CHURCH A;OBJECTS_COW;OBJECTS_CRUSADEANCHOR;OBJECTS_CRUSADER;OBJECTS_DRAGON;OBJECTS_DUMMY;OBJECTS_DWARF;OBJECTS_EAGLE;OBJECTS_ENICHAR;OBJECTS_FARM;OBJECTS_FIELD;OBJECTS_FISH;OBJECTS_FISHING_BOAT;OBJECTS_FISHPATCH;OBJECTS_FOOTMAN E;OBJECTS_FOOTMAN A;OBJECTS_FOOTMAN R;OBJECTS_GALLEON;OBJECTS_GATE_STONE;OBJECTS_GATE_WOOD;OBJECTS_GHOST;OBJECTS_GROUND_OBJECT;OBJECTS_GROUND_PATCH;OBJECTS_HARBOR;OBJECTS_HCATAPULT;OBJECTS_HEAVY_CAVALRY;OBJECTS_HORSE_ARCHER;OBJECTS_HORSE_SAMURAI;OBJECTS_HOUSE;OBJECTS_HULK;OBJECTS_ITEM;OBJECTS_ITEM_FLAG;OBJECTS_ITEM_HEALTH;OBJECTS_ITEM_MAGIC;OBJECTS_ITEM_PLUSPLUS;OBJECTS_ITEM_SCROLL;OBJECTS_ITEM_SOUL;OBJECTS_JIHAD_WARRIOR;OBJECTS_JINN;OBJECTS_KNIGHT;OBJECTS_LONGBOWMAN;OBJECTS_LUMBER;OBJECTS_MACEMAN E;OBJECTS_MACEMAN R;OBJECTS_MACEMAN A;OBJECTS_MAGE;OBJECTS_MAGETOWER;OBJECTS_MAGICWORKSHOP;OBJECTS_MARKET;OBJECTS_MONK;OBJECTS_MOSQUE;OBJECTS_NINJA;OBJECTS_ORK;OBJECTS_OUTPOST;OBJECTS_PEON;OBJECTS_PIKEMAN;OBJECTS_PRIEST;OBJECTS_RES_GOLD;OBJECTS_RES_STONE;OBJECTS_RESITEM;OBJECTS_RUIN;OBJECTS_SHAOLINN;OBJECTS_SKELETON;OBJECTS_SPY;OBJECTS_STABLE;OBJECTS_STORAGE;OBJECTS_TAVERN;OBJECTS_TCGUILD;OBJECTS_TOWER_STONE;OBJECTS_TOWER_STONE2;OBJECTS_TOWER_WOOD;OBJECTS_TOWER_WOOD2;OBJECTS_TOWER_ROCKET;OBJECTS_TRADER E;OBJECTS_TRADER R;OBJECTS_TROLL;OBJECTS_WALL_STONE;OBJECTS_WALL_WOOD;OBJECTS_WHIRLPOOL;OBJECTS_WORKSHOP;OBJECTS_XEBEC;OBJECTS_MAGICGATEWAY;OBJECTS_EVILCASTLE;ORDERS_NAMES_???;ORDERS_NAMES_FISHING_BOAT;ORDERS_NAMES_FISHING;ORDERS_NAMES_LOAN_RETURN;ORDERS_NAMES_LOAN;ORDERS_NAMES_LOAN_GOLD;ORDERS_NAMES_LOAN_STONE;ORDERS_NAMES_LOAN_IRON;ORDERS_NAMES_LOAN_FOOD;ORDERS_NAMES_LOAN_WOOD;ORDERS_NAMES_BRIBE;ORDERS_NAMES_REVEAL_SELF;ORDERS_NAMES_IMPERSONATE;ORDERS_NAMES_BECOME_JIHADW;ORDERS_NAMES_BECOME_PRIEST;ORDERS_NAMES_CLOAK;ORDERS_NAMES_UNCLOAK;ORDERS_NAMES_MURDER;ORDERS_NAMES_ITEM_USE;ORDERS_NAMES_ITEM_DROP;ORDERS_NAMES_ITEM_KILL;ORDERS_NAMES_ITEM_BERSERK;ORDERS_NAMES_MOVE;ORDERS_NAMES_REPAIR;ORDERS_NAMES_CAPTURE;ORDERS_NAMES_HARVEST;ORDERS_NAMES_ATTACK;ORDERS_NAMES_ATTACK_GROUND;ORDERS_NAMES_HOLD_STEADY;ORDERS_NAMES_SELECT_CRUSADERS;ORDERS_NAMES_STAND_GROUND;ORDERS_NAMES_ATTACK_TYPE;ORDERS_NAMES_EXORCISM;ORDERS_NAMES_PICK_ITEM;ORDERS_NAMES_GUARD;ORDERS_NAMES_PATROL;ORDERS_NAMES_GATEOPEN;ORDERS_NAMES_GATECLOSE;ORDERS_NAMES_GATE_SUBAI_ON;ORDERS_NAMES_GATE_SUBAI_OFF;ORDERS_NAMES_E_BARRACK;ORDERS_NAMES_DUMMY;ORDERS_NAMES_TCGUILD;ORDERS_NAMES_E_BLACKSMITH;ORDERS_NAMES_MAGETOWER;ORDERS_NAMES_WALL_STONE;ORDERS_NAMES_WALL_WOOD;ORDERS_NAMES_E_BUILD;ORDERS_NAMES_R_BUILD;ORDERS_NAMES_A_BUILD;ORDERS_NAMES_E_CASTLE;ORDERS_NAMES_MAGICWORKSHOP;ORDERS_NAMES_CATHEDRAL;ORDERS_NAMES_SHAOLINN;ORDERS_NAMES_MOSQUE;ORDERS_NAMES_E_CHURCH;ORDERS_NAMES_E_FARM;ORDERS_NAMES_E_FOOTMAN;ORDERS_NAMES_A_RHONIN;ORDERS_NAMES_R_JANISSARY;ORDERS_NAMES_ORK;ORDERS_NAMES_R_SATRAP;ORDERS_NAMES_R_FOOTMAN;ORDERS_NAMES_R_SPEARMAN;ORDERS_NAMES_JINN;ORDERS_NAMES_DWARF;ORDERS_NAMES_TROLL;ORDERS_NAMES_A_HORSEARCHER;ORDERS_NAMES_R_HORSEARCHER;ORDERS_NAMES_R_CAVALRY;ORDERS_NAMES_A_HORSESAMURAI;ORDERS_NAMES_E_ARCHER;ORDERS_NAMES_R_ARCHER;ORDERS_NAMES_A_ARCHER;ORDERS_NAMES_A_SAMURAI;ORDERS_NAMES_E_MAGE;ORDERS_NAMES_R_MAGE;ORDERS_NAMES_A_MAGE;ORDERS_NAMES_E_OUTPOST;ORDERS_NAMES_E_HARBOR;ORDERS_NAMES_E_LUMBER;ORDERS_NAMES_E_MARKET;ORDERS_NAMES_E_CARAVAN;ORDERS_NAMES_R_CARAVAN;ORDERS_NAMES_GATE_WOOD;ORDERS_NAMES_GATE_STONE;ORDERS_NAMES_FIELD;ORDERS_NAMES_E_PEON;ORDERS_NAMES_R_PEON;ORDERS_NAMES_A_PEON;ORDERS_NAMES_NINJA;ORDERS_NAMES_MONK;ORDERS_NAMES_E_MACEMAN;ORDERS_NAMES_E_PRIEST;ORDERS_NAMES_A_PRIEST;ORDERS_NAMES_R_PRIEST;ORDERS_NAMES_CHARIOT;ORDERS_NAMES_E_LONGBOWMAN;ORDERS_NAMES_E_KNIGHT;ORDERS_NAMES_E_STABLE;ORDERS_NAMES_STOP;ORDERS_NAMES_E_STORAGE;ORDERS_NAMES_E_TAVERN;ORDERS_NAMES_E_WORKSHOP;ORDERS_NAMES_EMERGE;ORDERS_NAMES_E_GALLEON;ORDERS_NAMES_E_HULK;ORDERS_NAMES_E_XEBEC;ORDERS_NAMES_BRIDGE;ORDERS_NAMES_E_ACADEMY;ORDERS_NAMES_E_TOWER_STONE;ORDERS_NAMES_E_TOWER_STONE2;ORDERS_NAMES_TOWER_ROCKET;ORDERS_NAMES_E_TOWER_WOOD;ORDERS_NAMES_E_TOWER_WOOD2;ORDERS_NAMES_VIEW_HEROES;ORDERS_NAMES_VIEW_SPYS;ORDERS_NAMES_VIEW_ITEMS;ORDERS_NAMES_E_HOUSE;ORDERS_NAMES_E_PIKEMAN;ORDERS_NAMES_E_SPY;ORDERS_NAMES_CATAPULT;ORDERS_NAMES_H_CATAPULT;ORDERS_NAMES_TO_WTOWER2;ORDERS_NAMES_TO_STOWER;ORDERS_NAMES_TO_STOWER2_1;ORDERS_NAMES_TO_STOWER2_2;ORDERS_NAMES_TO_SWALL;ORDERS_NAMES_TO_SGATE;ORDERS_NAMES_TE_ARROW_1;ORDERS_NAMES_TE_PLATEARMOR;ORDERS_NAMES_TE_FIELDS;ORDERS_NAMES_TE_LIVESTOCK;ORDERS_NAMES_TE_FEUDALISM;ORDERS_NAMES_TE_ARCHITECTURE;ORDERS_NAMES_TE_LONGBOW;ORDERS_NAMES_RAISEDEAD;ORDERS_NAMES_SPELL_HEAL;ORDERS_NAMES_SPELL_SPAWNDRAGON;ORDERS_NAMES_SPELL_RAISEEXP;ORDERS_NAMES_SPELL_FLAMEBOLT;ORDERS_NAMES_SPELL_BLESS;ORDERS_NAMES_SPELL_FREEZE;ORDERS_NAMES_SPELL_WHIRLPOOL;ORDERS_NAMES_SPELL_TURNTOSTONE;ORDERS_NAMES_SPELL_LIGHTNING;ORDERS_NAMES_SPELL_FIRERAIN;ORDERS_NAMES_SPELL_SPAWNBAT;ORDERS_NAMES_SPELL_SPAWNSTONEGOLEM;ORDERS_NAMES_SPELL_SPAWNCARPET;ORDERS_NAMES_SPELL_SPAWNJIN;ORDERS_NAMES_SPELL_MAGICVISION;ORDERS_NAMES_SPELL_RAISEDEAD;ORDERS_NAMES_SPELL_BERSERK;ORDERS_NAMES_SPELL_HYPNOTIZE;ORDERS_NAMES_SPELL_CLOAK;ORDERS_NAMES_UNLOAD;ORDERS_NAMES_TRADE;ORDERS_NAMES_BUILD_ITEM;ORDERS_NAMES_TRADE1;ORDERS_NAMES_TRADE_SHIP;ORDERS_NAMES_DIE;ORDERS_NAMES_DEFAULT;ORDERS_NAMES_MINE;ORDERS_NAMES_DIG;ORDERS_NAMES_CHOP;ORDERS_NAMES_SPELL;ORDERS_NAMES_PREACH_CRUSADE;ORDERS_NAMES_COW;ORDERS_NAMES_TO_SHIP_LEVEL2;ORDERS_NAMES_TO_SHIP_LEVEL3;ORDERS_NAMES_TO_SHIP_LEVEL4;ORDERS_NAMES_TO_SHIP_LEVEL5;ORDERS_NAMES_TO_SHIP_LEVEL6;ORDERS_NAMES_TO_CONVERTRES;ORDERS_NAMES_HOLDFIRE;ORDERS_NAMES_FIREATWILL;ORDERS_NAMES_EXPLORE;ORDERS_NAMES_BALLISTA;ORDERS_NAMES_TE_HALBERD;ORDERS_NAMES_TE_GOLDPLUS;ORDERS_NAMES_TE_STONEPLUS;ORDERS_NAMES_TE_WOODPLUS;ORDERS_NAMES_TE_LEARNING;ORDERS_NAMES_TE_TEMPERIRON;ORDERS_NAMES_TE_CROSSBOW;ORDERS_NAMES_TE_SCALEARMOR;ORDERS_NAMES_TE_CHAINMAIL;ORDERS_NAMES_TE_ENGINEERING;ORDERS_NAMES_TE_CANNONTOWER;ORDERS_NAMES_TE_HEROISM;ORDERS_NAMES_TE_NOBILITY;ORDERS_NAMES_TE_HONOR;ORDERS_NAMES_TE_WARFARE;ORDERS_NAMES_TE_TACTICS;ORDERS_NAMES_TE_MERCENARIES;ORDERS_NAMES_TE_HEROESQUEST;ORDERS_NAMES_TE_FAME;ORDERS_NAMES_TE_SIEGETACTICS;ORDERS_NAMES_TE_BODYBUILDING;ORDERS_NAMES_TE_FANATICISM;ORDERS_NAMES_TE_CRUSADE;ORDERS_NAMES_TE_ESPIONAGE;ORDERS_NAMES_TE_INQUISITION;ORDERS_NAMES_TE_HEALING;ORDERS_NAMES_TE_MEDICINE;ORDERS_NAMES_TE_TRADEROUTES;ORDERS_NAMES_TE_MAPMAKING;ORDERS_NAMES_TE_USURY;ORDERS_NAMES_TE_GAMBLING;ORDERS_NAMES_TE_SUPPLYSTORAGE;ORDERS_NAMES_TE_BRIBERY;ORDERS_NAMES_TE_BUDDHISM;ORDERS_NAMES_TE_TRADETAXES;ORDERS_NAMES_TE_BAT;ORDERS_NAMES_TE_STONEGOLEM;ORDERS_NAMES_TE_INVISIBILITY;ORDERS_NAMES_TE_LIGHTNING;ORDERS_NAMES_TE_FREEZE;ORDERS_NAMES_TE_BLESS;ORDERS_NAMES_TAVERN_MERC;ORDERS_NAMES_TAVERN_HERO;ORDERS_NAMES_MARKET_ITEMS;ORDERS_NAMES_MARKET_SELL;ORDERS_NAMES_TE_LANDINGTACTICS;ORDERS_NAMES_TE_COWPOACHING;ORDERS_NAMES_TE_SLAVERY;ORDERS_NAMES_TE_RIDINGHORSES;ORDERS_NAMES_TE_JANISSARY;ORDERS_NAMES_TE_JIHAD;ORDERS_NAMES_TE_MAGICCARPET;ORDERS_NAMES_TE_JIN;ORDERS_NAMES_TE_WITCHCRAFTS;ORDERS_NAMES_TE_RAINOFFIRE;ORDERS_NAMES_TE_MAGICVISION;ORDERS_NAMES_TE_NECROMANCY;ORDERS_NAMES_GAMBLE;ORDERS_NAMES_TE_HORSEMANSHIP;ORDERS_NAMES_TE_SCIMITAR;ORDERS_NAMES_TE_OREFLOATATION;ORDERS_NAMES_TE_JEWELRY;ORDERS_NAMES_TE_GREATWALL;ORDERS_NAMES_TE_BUDHISM;ORDERS_NAMES_TE_IRRIGATION;ORDERS_NAMES_TE_ARMOREDCHARIOT;ORDERS_NAMES_TE_BUSHIDO;ORDERS_NAMES_TE_SUNTZUBOOK;ORDERS_NAMES_TE_MEDITATION;ORDERS_NAMES_TE_PHILOSOPHY;ORDERS_NAMES_TE_KUNGFU;ORDERS_NAMES_TE_NINJAS;ORDERS_NAMES_TE_MASTERY;ORDERS_NAMES_TE_TOURNAMENTS;ORDERS_NAMES_TE_BANKING;ORDERS_NAMES_TE_CHEMISTRY;ORDERS_NAMES_TE_GUNPOWDER;ORDERS_NAMES_TE_ROCKETARROW;ORDERS_NAMES_TE_SEAFOOD;ORDERS_NAMES_TE_CONCENTRATION;ORDERS_NAMES_TE_BERSERK;ORDERS_NAMES_TE_WHIRLPOOL;ORDERS_NAMES_TE_DRAGON;ORDERS_NAMES_TE_TURNTOSTONE;ORDERS_NAMES_TE_FLAMEBOLT;ORDERS_NAMES_TE_ARTOFRIDING;ORDERS_NAMES_BUILD_ORC;ORDERS_NAMES_BUILD_DWARF;ORDERS_NAMES_BUILD_SKELETON;ORDERS_NAMES_BUILD_GHOST;ORDERS_NAMES_VIEW_QUESTS;ORDERS_NAMES_R_JIHAD_WARRIOR;ORDERS_NAMES_E_COMMON;ORDERS_NAMES_E_RARE;ORDERS_NAMES_E_GUILDS;ORDERS_NAMES_R_COMMON;ORDERS_NAMES_R_RARE;ORDERS_NAMES_R_GUILDS;ORDERS_NAMES_A_COMMON;ORDERS_NAMES_A_RARE;ORDERS_NAMES_A_GUILDS;ORDERS_NAMES_TR_TRADE;ORDERS_NAMES_TR_CANCEL;ORDERS_NAMES_TR_AMOUNT;ORDERS_NAMES_TR_SRCOBJ;ORDERS_NAMES_TR_SRCRES;ORDERS_NAMES_TR_DSTOBJ;ORDERS_NAMES_TR_DSTRES;ORDERS_NAMES_GM_RES;ORDERS_NAMES_GM_AMOUNT;ORDERS_NAMES_GM_PROP;ORDERS_NAMES_GM_GAMBLE;ORDERS_NAMES_GM_CANCEL;ORDERS_NAMES_BU_ITEM;ORDERS_NAMES_BU_AMOUNT;ORDERS_NAMES_BU_CANCEL;ORDERS_NAMES_BU_BUILD;ORDERS_NAMES_TR1_TRADE;ORDERS_NAMES_TR1_CANCEL;ORDERS_NAMES_TR1_AMOUNT1;ORDERS_NAMES_TR1_AMOUNT2;ORDERS_NAMES_TR1_SRCRES;ORDERS_NAMES_TR1_DSTRES;ORDERS_ADD_TE_SLAVERY;ORDERS_ADD_TE_STONEGOLEM;ORDERS_ADD_TE_FREEZE;ORDERS_ADD_TE_LIGHTNING;ORDERS_ADD_TE_INVISIBILITY;ORDERS_ADD_TE_BAT;ORDERS_ADD_TE_CRUSADE;ORDERS_ADD_TE_BLESS;ORDERS_ADD_TE_LONGBOW;ORDERS_ADD_TE_PLATEARMOR;ORDERS_ADD_TE_FIELDS;ORDERS_ADD_TE_LIVESTOCK;ORDERS_ADD_TE_FEUDALISM;ORDERS_ADD_TE_ARCHITECTURE;ORDERS_ADD_TE_LONGBOWMAN;ORDERS_ADD_TE_HALBERD;ORDERS_ADD_TE_GOLDPLUS;ORDERS_ADD_TE_STONEPLUS;ORDERS_ADD_TE_WOODPLUS;ORDERS_ADD_TE_LEARNING;ORDERS_ADD_TE_TEMPERIRON;ORDERS_ADD_TE_CROSSBOW;ORDERS_ADD_TE_SCALEARMOR;ORDERS_ADD_TE_CHAINMAIL;ORDERS_ADD_TE_ENGINEERING;ORDERS_ADD_TE_CANNONTOWER;ORDERS_ADD_TE_HEROISM;ORDERS_ADD_TE_NOBILITY;ORDERS_ADD_TE_HONOR;ORDERS_ADD_TE_WARFARE;ORDERS_ADD_TE_TACTICS;ORDERS_ADD_TE_MERCENARIES;ORDERS_ADD_TE_HEROESQUEST;ORDERS_ADD_TE_FAME;ORDERS_ADD_TE_SIEGETACTICS;ORDERS_ADD_TE_BODYBUILDING;ORDERS_ADD_TE_FANATICISM;ORDERS_ADD_TE_ESPIONAGE;ORDERS_ADD_TE_INQUISITION;ORDERS_ADD_TE_HEALING;ORDERS_ADD_TE_MEDICINE;ORDERS_ADD_TE_TRADETOUTES;ORDERS_ADD_TE_MAPMAKING;ORDERS_ADD_TE_PIRACY;ORDERS_ADD_TE_USURY;ORDERS_ADD_TE_SUPPLYSTORAGE;ORDERS_ADD_TE_BRIBERY;ORDERS_ADD_TE_BUDDHISM;ORDERS_ADD_TE_TRADETAXES;ORDERS_ADD_TE_LANDINGTACTICS;ORDERS_ADD_TE_BOARDINGRAM;ORDERS_ADD_TE_COWPOACHING;ORDERS_ADD_TE_RIDINGHORSES;ORDERS_ADD_TE_JANISSARY;ORDERS_ADD_TE_JIHAD;ORDERS_ADD_TE_MAGICCARPET;ORDERS_ADD_TE_JIN;ORDERS_ADD_TE_WITCHCRAFTS;ORDERS_ADD_TE_MAGICVISION;ORDERS_ADD_TE_NECROMANCY;ORDERS_ADD_TE_HORSEMANSHIP;ORDERS_ADD_TE_SCIMITAR;ORDERS_ADD_TE_OREFLOATATION;ORDERS_ADD_TE_JEWELRY;ORDERS_ADD_TE_GREATWALL;ORDERS_ADD_TE_BUDHISM;ORDERS_ADD_TE_IRRIGATION;ORDERS_ADD_TE_ARMOREDCHARIOT;ORDERS_ADD_TE_BUSHIDO;ORDERS_ADD_TE_SUNTZUBOOK;ORDERS_ADD_TE_MEDITATION;ORDERS_ADD_TE_PHILOSOPHY;ORDERS_ADD_TE_KUNGFU;ORDERS_ADD_TE_NINJAS;ORDERS_ADD_TE_MASTERY;ORDERS_ADD_TE_TOURNAMENTS;ORDERS_ADD_TE_BANKING;ORDERS_ADD_TE_CHEMISTRY;ORDERS_ADD_TE_GUNPOWDER;ORDERS_ADD_TE_ROCKETARROW;ORDERS_ADD_TE_SEAFOOD;ORDERS_ADD_TE_CONCENTRATION;ORDERS_ADD_TE_BERSERK;ORDERS_ADD_TE_WHIRLPOOL;ORDERS_ADD_TE_DRAGON;ORDERS_ADD_TE_TURNTOSTONE;ORDERS_ADD_TE_FLAMEBOLT;ORDERS_ADD_TE_ARTOFRIDING;ORDERS_ADD_TE_TRADEROUTES;ORDERS_ADD_TE_GAMBLE;SPELL_NAMES_SPELL_FIRERAIN;SPELL_NAMES_SPELL_LIGHTNING;SPELL_NAMES_SPELL_HEAL;SPELL_NAMES_SPELL_SPAWNCARPET;SPELL_NAMES_SPELL_SPAWNBAT;SPELL_NAMES_SPELL_BLESS;SPELL_NAMES_SPELL_FREEZE;SPELL_NAMES_SPELL_BERSERK;SPELL_NAMES_SPELL_SOULBIND;SPELL_NAMES_SPELL_CLOAK;SPELL_NAMES_SPELL_SPAWNSTONEGOLEM;SPELL_NAMES_SPELL_MAGICVISION;SPELL_NAMES_SPELL_RAISEDEAD;SPELL_NAMES_SPELL_TURNTOSTONE;SPELL_NAMES_SPELL_WHIRLPOOL;SPELL_NAMES_SPELL_SPAWNDRAGON;SPELL_NAMES_SPELL_FLAMEBOLT;SPELL_NAMES_SPELL_RAISEEXP;SPELL_NAMES_SPELL_SPAWNJIN;SPELL_NAMES_SPELL_CURSE;SPELL_NAMES_SPELL_HYPNOTIZE;IMAGES_FLAG_CAPTURE;IMAGES_ITEM_BOOK1;IMAGES_ITEM_BOOK2;IMAGES_ITEM_BOOK3;IMAGES_ITEM_BOW1;IMAGES_ITEM_BOW2;IMAGES_ITEM_BOW3;IMAGES_ITEM_FLAG;IMAGES_ITEM_FOOD;IMAGES_ITEM_GOLD;IMAGES_ITEM_IRON;IMAGES_ITEM_POTION1;IMAGES_ITEM_POTION2;IMAGES_ITEM_POTION3;IMAGES_ITEM_POTION4;IMAGES_ITEM_POTION5;IMAGES_ITEM_POTION6;IMAGES_ITEM_POTION7;IMAGES_ITEM_POTION8;IMAGES_ITEM_SCROLL1;IMAGES_ITEM_SHIELD1;IMAGES_ITEM_SHIELD2;IMAGES_ITEM_SHIELD3;IMAGES_ITEM_STONE;IMAGES_ITEM_SWORD;IMAGES_ITEM_SWORD1;IMAGES_ITEM_SWORD2;IMAGES_ITEM_SWORD3;IMAGES_ITEM_WOOD;TZAREDIT_S1;TZAREDIT_S2;HELP_???;HELP_SP_CAMPAIGN;HELP_SP_CUSTOM_MAP;HELP_SP_RANDOM_MAP;HELP_SP_LOAD_GAME;HELP_SP_BACK;HELP_CN_CAMPAIGNS;HELP_CN_CAMPAIGN_DESCRIPTION;HELP_CN_ENTRY_MISSONS;HELP_CN_ENTRY_MISSONS_DESCRIPTION;HELP_CN_BACK;HELP_CN_PLAY;HELP_CM_MAPS;HELP_CM_MAP_DECRIPTION;HELP_CM_PLAY;HELP_CM_BACK;HELP_RM_PLAYER_COLOR;HELP_RM_PLAYER_NAME;HELP_RM_PLAYER_CIVILIVIZATION;HELP_RM_PLAYER_TEAM;HELP_RM_NUMBER_OF_PLAYERS;HELP_RM_POP_LIMIT;HELP_RM_GAME_TYPE;HELP_RM_DIFFICULTY_LEVEL;HELP_RM_VICTORY_CONDITION;HELP_RM_STARTING_RESOURCES;HELP_RM_NO_FOG;HELP_RM_EXPLORE;HELP_RM_MAP_SIZE;HELP_RM_MAP_TYPE;HELP_RM_TERRAIN;HELP_RM_MAP_RESOURCES;HELP_RM_GUARDED_TOWN;HELP_RM_AMNIMALS;HELP_RM_MAGIC_ITEMS;HELP_RM_CLIFFS;HELP_RM_GATEWAYS;HELP_RM_PLAY;HELP_RM_BACK;HELP_RM_VALUE;HELP_LG_SELECT_GAME;HELP_LG_CHOOSE;HELP_LG_LOAD;HELP_LG_CANCEL;HELP_LG_DELETE;HELP_MP_PLAYER_NAME;HELP_MP_GAME_NAME;HELP_MP_IPX;HELP_MP_TCP/IP;HELP_MP_IP_ADDRESS;HELP_MP_CREATE;HELP_MP_SEARCH;HELP_MP_JOIN;HELP_MP_BACK;HELP_MP_GAMES_FOUND;HELP_MP_GAME_INFORMATION;HELP_MP_BETA;HELP_MPC_CHECK_BUTTON;HELP_MPC_PLAYER_COLOR;HELP_MPC_PLAYER_NAME;HELP_MPC_PLAYER_CIVILIVIZATION;HELP_MPC_PLAYER_TEAM;HELP_MPC_CHAT_BOX;HELP_MPC_CHAT_BOX_WRITE;HELP_MPC_SETTINGS;HELP_MPC_MAP;HELP_MPC_DISCONNECT;HELP_MPC_PLAY;HELP_MPS_RANDOM_MAP;HELP_MPS_CUSTOM_MAP;HELP_MPS_POP_LIMIT;HELP_MPS_GAME_TYPE;HELP_MPS_DIFFICULTY_LEVEL;HELP_MPS_VICTORY_CONDITION;HELP_MPS_STARTING_RESOURCES;HELP_MPS_MAP_SIZE;HELP_MPS_MAP_TYPE;HELP_MPS_TERRAIN;HELP_MPS_MAP_RESOURCES;HELP_MPS_TOWERS;HELP_MPS_AMNIMALS;HELP_MPS_MAGIC_ITEMS;HELP_MPS_CLIFFS;HELP_MPS_GATEWAYS;HELP_MPS_DAY_NIGTH;HELP_MPS_WEATHER;HELP_MPS_NO_FOG;HELP_MPS_EXPLORE;HELP_MPS_ACCEPT;HELP_MPS_CANCEL;HELP_MPS_MAPS_LIST;HELP_MPS_MAP_DECRIPTION;HELP_MPS_USE_MAP_SETTINGS;HELP_MPS_VALUE;HELP_SG_SAVE_GAME;HELP_SG_NEW;HELP_SG_SAVE;HELP_SG_DELETE;HELP_SG_CANCEL;HELP_SG_RESTART;HELP_SG_QUIT;HELP_SG_LIST;HELP_CH_BOX;HELP_CH_ALLIES;HELP_CH_ENEMIES;HELP_CH_ALL;HELP_CH_CUSTOM;HELP_CH_SELECT_PLAYER;HELP_CH_NAMES;HELP_CH_COLORS;HELP_D_ALLIES;HELP_D_ENEMIES;HELP_D_NEUTRAL;HELP_D_SHARED VISION;HELP_D_SHARED RESOURCES;HELP_D_SHARED UNIT CONTROL;HELP_D_SHARED_VICTORY;HELP_D_ACCEPT;HELP_D_CANCEL;HELP_D_TRIBUTE;HELP_T_AMOUNT;HELP_T_SEND;HELP_T_CANCEL;HELP_CM1_PLAYER_COLOR;HELP_CM1_PLAYER_NAME;HELP_CM1_PLAYER_CIVILIVIZATION;HELP_CM1_PLAYER_TEAM;HELP_CM1_NUMBER_OF_PLAYERS;HELP_CM1_POP_LIMIT;HELP_CM1_GAME_TYPE;HELP_CM1_DIFFICULTY_LEVEL;HELP_CM1_VICTORY_CONDITION;HELP_CM1_STARTING_RESOURCES;HELP_CM1_NO_FOG;HELP_CM1_EXPLORE;HELP_CM1_USE_MAP_SETTINGS;HELP_CM1_MAP_DECRIPTION;HELP_CM1_VALUE;HELP_CM1_BACK;HELP_CM1_PLAY;HELP_O_SOUND_VOLUME;HELP_O_CHK_VOLUME;HELP_O_UNIT_SPEECH;HELP_O_BUILDING_SOUND;HELP_O_NATURE_SOUND;HELP_O_GAME_SPEED;HELP_O_SCROLL_SPEED;HELP_O_PATH_DEPTH;HELP_O_DAY_NIGTH;HELP_O_WEATHER;HELP_O_MUSIC_VOLUME;HELP_O_CHK_MVOLUME;HELP_O_CD;HELP_O_H_CURS;HELP_O_MENU;HELP_O_OK;HELP_MPS_AI_ASSIST;HELP_MPS_SH_RES;HELP_MPS_TOWERS_POP;VM_LOC_SENT;VM_BOOKMARK_SET;VM_TIME_LIMIT_HIT;VM_TIME_LIMIT_REACHED;VM_SCORE_LIMIT_HIT;VM_SCORE_LIMIT_REACHED;VM_SAVING;VM_DISCON1;VM_DISCON2;TZAREDIT_DELETE;TZAREDIT_ANY;TZAREDIT_MILITARY_UNITS;TZAREDIT_DELAY;TZAREDIT_REMOVE;OBJECTS_MESSIAH;ERR_NOMAPS;ERR_FIRST;ERR_EXPLASYNC;ERR_OBJASYNC;ERR_BADKINGDOMSCRIPT;ORDERS_NAMES_TE_INVINSIBILITY;ORDERS_NAMES_TE_IRONPLUS;ORDERS_NAMES_TO_WALL_STONE;ORDERS_NAMES_TO_GATE_STONE;ORDERS_NAMES_VIEW_AI;ORDERS_NAMES_SET_AI_NONE;ORDERS_NAMES_SET_AI_FULL;ORDERS_NAMES_SET_AI_WAR;ORDERS_NAMES_SET_AI_ECO;CHOOSEAI_TITLE;CHOOSEAI_OK;CHOOSEAI_CANCEL;CHOOSEAI_DEFAULT;ENDGAMEDLG_HIDE;MISC_SELLITEM3;MISC_HERO3;MISC_KINGDOM3;MISC_QUICKSAVE3;MISC_AUTOSAVE3;MISC_NATURE3;MISC_RESCUE3;MISC_BUY3;MISC_PREVPAGE3;MISC_NEXTPAGE3;MISC_VIEW3;MISC_REQ3;MISC_INF3;MISC_HIRE3;MISC_RETLOAN3;MISC_GETLOAN3;MISC_WATOBJ3;MISC_RES3;MISC_TREES3;MISC_UNK3;MISC_RND3;MISC_UNKAUTHOR3;MISC_HEALTH3;MISC_EXP3;MISC_MANNA3;MISC_DEFENCE3;MISC_ATTACK3;MISC_SWORD3;MISC_SHIELD3;MISC_BOW3;MSG_GAME_CONNECT;MSG_GAME_SPEED_TURBO;MSG_AIFULL3;MSG_AIECO3;MSG_AIWAR3;MSG_AIOFF3;MSG_NET_JOIN_HEADOFF;MSG_GOLDREQ;MSG_GAME_SPEED2;ERR3_ERR_CONNECT;ERR3_RANKSLOST;ORDERS_NAMES_DESTROY;ORDERS_NAMES_ONLINEHELP;ORDERS_NAMES_NEXTIDLE;ORDERS_NAMES_BOOK_ITM;ORDERS_NAMES_POTION_ITM;ORDERS_NAMES_POWER_ITM;TZAREDIT_ANY_MAJOR_OBJECTS;DEFMSG_CAPTUREOWN;MP_SETUPMAP_SH_RES;MP_SETUPMAP_TOWERS_POP;VM_SENDRESULTS;VM_SENDRESULTS2;SYSTEM_LANGUAGE;DOWNLOADING_GRAPHICS;WEBAUDIO;CONNECTION_ERROR;DOWNLOAD_ALL;MAPEDITOR;TEAM;COLOUR;MAXHEALTH;PLAYING;WAITING;ADD;WATER;AUTOFULLSCREEN;FULLSCREEN;UP;DOWN;LANGUAGE;INITIAL_PEASANTS;ADD_AI;RACE;DATE;FREE_POP;ABOUT;PLAYED_TIME;ZOOMSPEED;CLICKJOIN;NO_GAMES_FOUND;SAVE_GAME_CONTENT;BUILDINGS;ITEMS;AUTHOR;GROUND;RND;CAPTUREMODE;PLAYERWON;CLEARMAP;RNDCASTLES".split(";"),
Ka,Q,Wa,Vb={},$c="ts1.mp3 ts2.mp3 ts3.mp3 ts4.mp3 ts5.mp3 ts6.mp3 ts7.mp3 ts8.mp3 ts9.mp3 ts10.mp3 sr1.mp3 sr2.mp3 sr3.mp3 sr4.mp3 sr5.mp3 sr6.mp3 sr7.mp3 sr8.mp3 sr9.mp3 sr10.mp3 o1.mp3 o2.mp3 o3.mp3 o4.mp3 o5.mp3 o6.mp3 o7.mp3 o8.mp3 o9.mp3 o10.mp3 INTRO.mp3 OUTRO.mp3 WIN1.mp3 WIN2.mp3 ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.WAV CAMEL2.WAV CARPETCMD.WAV CATAPULT.WAV CBEAR1.WAV CBEAR2.WAV CBEAR3.WAV CBEAR4.WAV COW1.WAV COW2.WAV COW3.WAV COW4.WAV DRAGON1.WAV DRAGON2.WAV FLY1.WAV FLY2.WAV FOOT1.WAV FOOT2.WAV FOOT3.WAV FOOT4.WAV FOOT5.WAV FOOT6.WAV FOOT7.WAV FOOT8.WAV GHOST1CMD.WAV GHOST2CMD.WAV GHOST3CMD.WAV GOLEMCMD.WAV H%20CMD%201.WAV H%20CMD%202.WAV H%20CMD%203.WAV H%20CMD%204.WAV HEAVY%20CATAPULT.WAV INF%20CMD%201.WAV INF%20CMD%202.WAV INF%20CMD%203.WAV INF%20CMD%204.WAV INF%20CMD%205.WAV MESSIAHCMD.WAV ORC%20CMD%201.WAV ORC%20CMD%202.WAV ORC%20CMD%203.WAV ORC%20CMD%204.WAV ORC%20CMD%205.WAV ORC%20CMD%206.WAV SHIP%20CMD%201.WAV SHIP%20CMD%202.WAV SKELETON1.WAV SKELETON2.WAV SHIP%20SELECT.WAV E_BARRACK1.WAV E_BLACKSMITH1.WAV FIRE1.WAV FIRE2.WAV FIRE3.WAV FIRE4.WAV FIRE5.WAV ROCKET.WAV".split(" "),
ad,Fb,Gb,ec=function(){if(!Ka){q.prototype.loadBuffer=function(a,b){var c=this;Wf(r.cdn+a,function(d){c.context.decodeAudioData(d).then(function(c){c&&z(c,a,b)})})};for(var e=0,a=$c.length;e<a;e++){var d=$c[e];Vb[d.split(".")[0].toLowerCase()]=d}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,Ka=new AudioContext,Fb=Ka.createGain(),Gb=Ka.createGain(),ad=new q(Ka,void 0,z),Fb.gain.value=parseInt(localStorage.musicRange)/100,Gb.gain.value=parseInt(localStorage.soundRange)/
100,Fb.connect(Ka.destination),Gb.connect(Ka.destination));Q=function(){if(!u.editor){Q.id++;k("musicSelect")&&(localStorage.favMusic=k("musicSelect").mversion.value);var a=Q.list[localStorage.favMusic];a&&Wa(a[~~(a.length*Math.random())],0,0,void 0,1,0,Q.id)}};Q.reset=function(){Q.stop();Q()};Q.stop=function(){Q.active&&(Q.active.stop(),clearTimeout(Q.intv))};Q.id=0;Q.list={originalMusic1:"o1 o2 o3 o4 o5 o6 o7 o8 o9 o10 outro".split(" "),originalMusic:"ts1 ts2 ts3 ts4 ts5 ts6 ts7 ts8 ts9 ts10".split(" "),
sharpRain:"sr1 sr2 sr3 sr4 sr5 sr6 sr7 sr8 sr9 sr10".split(" ")};Wa=function(a,b,d,e,f,h,k){if(ad){"string"!==typeof a&&(a=$c[a].split(".")[0].toLowerCase());var c=a;if((a=Vb[a])&&"loading"!==a&&!u.canceled){var g=-ca+(window.innerWidth-r.mx)/2,l=-ha+window.innerHeight/2;if(a.duration){if(u.started)if(64<u.now()-a.lastPlayed||!a.lastPlayed)a.lastPlayed=u.now();else return;if(!(!f&&"attack"!=c&&h&&600<Date.now()-h)){if(b){if(b=(-g/32+b)/7,d=(-l/32+d)/7,l=M,b*b+d*d>Math.pow(64,2))return!1}else l=d=
b=0;void 0!==e&&e!==r.kingdom||u.mute||(e=Ka.createBufferSource(),e.buffer=a,f?(e.connect(Fb),Q.active=e,Q.intv=setTimeout(Q,Math.floor(1E3*a.duration)+1E3)):(a=Ka.createPanner(),a.panningModel="HRTF",a.setPosition(b,d,l),a.refDistance=1,a.distanceModel="inverse",e.connect(a),a.connect(Gb)),e.start(0))}}else Vb[c]="loading",f={x:b,y:d,k:e,music:f,date:Date.now(),mid:k},ad.loadBuffer(a,f)}}}}},cb,ze=function(){return Date.now()-Hb+25*p.gcycle()},db=function(e){if(!(e&&u.online||db.bySystem&&e))if(0===
u.paused){u.paused=1;void 0!=cb&&clearInterval(cb);var a=u.now();u.pausedTime+=Date.now();e?jb("",m.VIEWMSG_PAUSE,0,m.GENERAL_CLOSE):db.bySystem=1;u.now=function(){return a}}else u.pausedTime-=Date.now(),u.paused=0,db.bySystem=0,e&&k("alert")&&T("alert"),cb=setInterval(Aa,Aa.speed),u.now=ze};db.bySystem=0;db.fast=!0;var Ae=function(e){e/=1E3;var a=~~(e/60)%60,d=~~(e/3600);e=~~(e%60);1===(e+"").length&&(e="0"+e);0!=d?(d+=":",10>a&&(a="0"+a)):d="";return d+a+":"+e},Hb=0,Be=0,Xf=function(){var e=this.value/
100;A(e);Aa.speed=25/(4*e+1);clearInterval(cb);cb=setInterval(Aa,Aa.speed)},Aa=function(){u.cycle=p.gcycle();Hb&&(Be+=Date.now()-Hb-Aa.speed);Hb=Date.now();var e=Date.now();p.movtablexe();u.cycle=p.gcycle();0===u.cycle%40&&Ce();bd+=Date.now()-e;0!==u.cycle%40||aa||(k("topinfo").innerHTML="<span>CPU:"+(bd/10).toFixed(2)+"%</span> <span>"+~~(cd/dd+.5)+"FPS</span> <span>"+Ae(u.now())+"</span>",cd=dd=bd=0);!ta.running&&Be>=Aa.speed&&Aa()};Aa.speed=25;var bd=0,dd=0,cd=0,De=-1,fc,gc,lb,hc,ua,ed,mb,ia,fd,
Ee,va,Fe,Ge,He,Ie,Je,Ke,Ib,nb=function(){k("mgitem").style.backgroundPositionY=-48*p.mwicon()+"px";k("mgamount").innerHTML=p.amount()},gd=function(e){p.EDbuild(e)},hd=function(e,a){var d=e.nextMenu,c=document.createElement("div");c.className="contD";for(var b=0;b<d.length;b++){var g=document.createElement("button"),f=d[b];f.parent=e;g.innerHTML=f.name;g.onclick=wa.adminClick;g.Dorigin=f;a.appendChild(g);f.nextMenu&&(f.container=c)}a.appendChild(c)};Element.prototype.hide=function(){this.style.display=
"none"};Element.prototype.show=function(){this.style.display="block"};var wa=function(e){var a=k(e.parent);hd(e,a,e)};wa.update=function(e,a){e.nextMenu=a;e.nextDiv.innerHTML="";hd(e,e.nextDiv)};wa.adminClick=function(){var e=this.Dorigin,a=e.parent;if(e.onclick)e.onclick(e.param1);wa.lastXtraShow&&a&&a.xtraShow!=wa.lastXtraShow&&D(wa.lastXtraShow);e.xtraShow&&(E(e.xtraShow),wa.lastXtraShow=e.xtraShow);e.lastClick&&e.lastClick.Dorigin&&e.lastClick.Dorigin.xtraShow&&(E(e.lastClick.Dorigin.xtraShow),
wa.lastXtraShow=e.lastClick.Dorigin.xtraShow);if(e.nextMenu){a.lastClick&&(a.lastClick.className="");a.lastClick=this;this.className="clickD";e.nextDiv||(a=document.createElement("div"),e.container.appendChild(a),hd(e,a),e.nextDiv=a);a=e.container.children;for(var d=0;d<a.length;a[d++].hide());e.nextDiv.show();e.nextDiv.getElementsByTagName("button")}wa.last=e};var Jb=function(){var e=p.myk();k("selectKingdom").innerHTML="";for(var a=0,d=p.nkingdom();a<d;a++){var c=a?da(pa(p.kname(a),17)):m.MISC_NATURE3,
b=id(p.krgb(a));k("selectKingdom").innerHTML+='<option style="background:'+b+'" value="'+a+'" '+(a==e&&"selected"||"")+">"+c+"</option>"}k("selectKingdom").onchange(1)},Yf=function(e){p.EDbrush0(e,!0)},eb=function(e,a){var d=" ("+eb.objs.length+")";eb.objs.put({name:"water"==Zf.arr[a]&&m.WATER+d||m.GROUND+d,onclick:Yf,param1:e})},Le=function(e){eb.objs.length=0;p.EDgetTerrainInfo();return eb.objs},jd,Pe=function(){if(aa){eb.objs=[];var e=function(a,c){for(var b=[],d=0,e=p.nfolen();d<e;d++){var f=
p.unitSearchValid(a,c,d);f&&b.put({name:m[oa[f]].toUpperCase(),onclick:gd,param1:d})}return b};k("content").innerHTML='<div id="mapeditorpanel">\n    <div id="mapeditorinfo">\n    </div>\n    </div>\n    <div id="mapeditorinfotop">\n    <button id="menueditor">'+m.GAME_SCR_MENU+'</button>\n    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>\n    <button style="display:none" id="rotatebutton"></button>\n    <button id="mapProps">'+m.MENU_OPTI+
'</button>\n    <button style="display:none" id="mapRules">'+m.rules+'</button>\n    <div id="brhSize" style="display:none"><span>Brush size: </span><input type="number" min="1" max="256" value="8" id="brushSize"/></div>\n    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>\n    <div id="EDrndtree" style="display:none"><button id="rndtrees">'+m.RND+'</button></div>\n    <div id="EDrndresgs" style="display:none"><button id="rndres">'+
m.RND+'</button></div>\n    <div id="EDterr" style="display:none"><span>'+m.MP_SETUPMAP_T_TERRAIN+': </span><select id="EDtrrsel">'+kd(1)+'</select></div>\n    <div id="EDterrRND" style="display:none"><span>'+m.MP_SETUPMAP_T_TERRAIN+': </span><select id="EDtrrRND"><option value="0">'+m.MP_SETUPMAP_M_TYPE_5+'</option>\n    <option value="1">'+m.MP_SETUPMAP_M_TYPE_4+'</option>\n    <option value="2">'+m.MP_SETUPMAP_M_TYPE_3+'</option>\n    <option value="3">'+m.MP_SETUPMAP_M_TYPE_2+'</option>\n    <option value="4">'+
m.MP_SETUPMAP_M_TYPE_1+'</option>\n    <option value="5">'+m.MP_SETUPMAP_M_TYPE_0+'</option></select> <button id="rndtrbutton">'+m.MP_SETUPMAP_T_RANDOM+'</button></div>\n    <div><span>Active kingdom: </span>\n    <select id="selectKingdom">\n    </select>\n    </div>\n    <div><button id="clearMap">'+m.CLEARMAP+'</button></div>\n    <div><button id="castleRND">'+m.RNDCASTLES+'</button></div>\n\n    </div>\n\n    <div id="minimap" style="box-shadow: 0px 0px 20px #000;position:absolute;top:31px;left:4px;z-index:75"></div>\n    <button id="playmapeditor">&#9654;</button>\n    ';
k("menueditor").onclick=Me;k("castleRND").onclick=function(){p.fullRNDmap(0)};k("clearMap").onclick=function(){p.fullRNDmap(1)};k("rndtrees").onclick=p.rndforest;k("rndres").onclick=p.rndRes;k("playmapeditor").onclick=$f;k("brushDensity").onchange=function(){p.EDbrushchd(parseInt(k("brushDensity").value))};k("brushSize").onchange=function(){p.EDbrushchs(parseInt(k("brushSize").value))};k("rndtrbutton").onclick=function(){p.randomTerrain(parseInt(k("EDtrrRND").value)+1);p.wtrcheck();ma.update=!0};
k("brushDensity").onchange();k("brushSize").onchange();k("selectKingdom").onchange=function(){p.cmyk(parseInt(this.value));var a=p.krgb(parseInt(this.value));this.style.background="rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+",0.6)"};k("EDtrrsel").onchange=function(){p.chterr(parseInt(this.value));k("EDtrrsel").innerHTML=m.MSG_GAME_LOAD;Qa(function(){p.EDbrushstop();ma.update=!0;p.adpterr();wa.update(jd,Le());k("EDtrrsel").innerHTML=kd(1)})};k("mapProps").onclick=function(){bb();if(!k("mapPropsWindow")){var a=
Pa("mapPropsWindow");a.className="fullwindow";var c=document.createElement("table");a.appendChild(c);c.style.marginBottom="40px";la("span",a,m.SP_SETUPRND_T_MAP_SIZE+": ");c=la("input",a);c.value=p.mapWidth();c.id="EDmapSize";c.type="number";c.min=0;c.onchange=0;c.style.width="130px";c.style.marginBottom="32px";var b=document.createElement("p");b.innerHTML=m.SP_CHOOSEMAP_T_MAP;c=document.createElement("input");c.value=m.MP_SETUPMAP_T_CUSTOM;c.id="mapName";c.type="text";a.appendChild(b);a.appendChild(c);
b=document.createElement("p");b.innerHTML=m.SP_CHOOSEMAP_T_DESCRIPTION;c=document.createElement("textarea");c.type="text";c.value="";c.id="mapDescription";a.appendChild(b);a.appendChild(c);b=document.createElement("p");b.innerHTML=m.AUTHOR;c=document.createElement("input");c.id="mapAuthor";c.value="";c.type="text";a.appendChild(b);a.appendChild(c);a.appendChild(document.createElement("p"));c=document.createElement("button");c.onclick=ag;c.innerHTML=m.GENERAL_CLOSE;c.style.cssText="font-size:28px;margin-top:30px";
a.appendChild(c)}X("mapPropsWindow");ld()};jd={name:m.MP_SETUPMAP_T_TERRAIN,nextMenu:eb.objs,xtraShow:["brhSize","EDterr","EDterrRND"]};new wa({nextMenu:[{name:m.SELVIEW_UNITS.toUpperCase(),nextMenu:[{name:Z[0],nextMenu:e(0,0)},{name:Z[1],nextMenu:e(1,0)},{name:Z[2],nextMenu:e(2,0)},{name:Z[3],nextMenu:e(3,0).concat(e(3,4))}]},{name:m.BUILDINGS.toUpperCase(),nextMenu:[{name:Z[0],nextMenu:e(0,1)},{name:Z[1],nextMenu:e(1,1)},{name:Z[2],nextMenu:e(2,1)},{name:Z[3],nextMenu:e(3,1)}]},{name:m.ITEMS.toUpperCase(),
nextMenu:e(3,2)},{name:m.MP_SETUPMAP_T_TERRAIN.toUpperCase(),nextMenu:[jd,{name:m.MISC_TREES3,nextMenu:[{name:m.MISC_TREES3,onclick:p.EDbrush0,param1:7}],xtraShow:["brhSize","brhDnst","EDrndtree"]},{name:m.MISC_RES3,nextMenu:[{name:m.OBJECTS_RES_GOLD,onclick:gd,param1:21},{name:m.OBJECTS_RES_STONE,onclick:gd,param1:22}],xtraShow:["EDrndresgs"]}]}],parent:"mapeditorinfo"})}else{k("content").innerHTML='<ul id="msgs1"></ul>\n    <div id="playersinfo"></div>\n    <div id="resources" style="display:block">\n    <div id="goldr"></div>\n    <div id="woodr"></div>\n    <div id="foodr"></div>\n    <div id="stoner"></div>\n    <div id="popr"></div>\n    <div id="resourcesbefore"></div>\n    <div id="gold"></div>\n    <div id="wood"></div>\n    <div id="food"></div>\n    <div id="stone"></div>\n    <div id="pop"></div>\n    <div id="temperature"></div>\n    </div>\n    <div id="enterwindow" class="displaynone">\n    <h2 id="sendMessageH2">'+
m.CHAT_T_CHAT+'</h2>\n    <input id="msginputGame" />\n    </div>\n    \n    <div id="msgButton"></div>\n    <div id="topinfo"></div>\n    <div id="bottominfo"></div>\n    \n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:99;"></div>\n\n    <div id="menu" style="display:block">\n    <div id="menubefore"></div>\n    <div id="menuafter"></div>\n    <button id="gameMenu">'+m.GAME_SCR_MENU+'</button>\n\n    <div id="daynighticon"></div>\n    <div id="icons20">\n    <div id="attackmenu" style="display:none"></div>\n    <div id="defencemenu" style="display:none"></div>\n    <div id="levelmenu" style="display:none"></div>\n    <div id="manamenu" style="display:none"></div>\n    <div id="manamenu1" style="display:none"></div>\n    </div>\n    <div id="progressvalue"></div>\n    <div id="kingdom"></div>\n    <div id="unitname" contenteditable="true"></div>\n    <progress id="progressone" style="display:none"></progress>\n    <progress id="progressmana" style="display:none" max="100"></progress>\n    <input id="unitSpeed" min="1" max="100" type="range"/>\n    <div id="navigation">\n    <button id="aleft"></button>\n    <button id="stock"></button>\n    <button id="aright"></button>\n    </div>\n    <div id="orders">\n    <button id="order1"><progress class="loadingunit" style="display:none"></progress></button>\n    <button id="order2"></button>\n    <button id="order3"></button>\n    <button id="order4"></button>\n    <button id="order5"></button>\n    <button id="order6"></button>\n    <button id="order7"></button>\n    <button id="order8"></button>\n    </div>\n    <div id="magicworkshopmenu" style="display:none">\n    <button id="mgbook"></button>\n    <button id="mgpotion"></button>\n    <button id="mgsword"></button>\n    <button id="mgamount"></button>\n    <button id="mgitem"></button>\n    <button id="mgdecline"></button>\n    <button id="mgaccept"></button>\n    <div id="mgbak"></div>\n    </div>\n    </div>';
Ib=k("msgs1");Ne();va={page:0,length:8,leftButton:k("aleft"),rightButton:k("aright"),stock:k("stock")};va.leftButton.onclick=function(){p.changePage(-1)};k("minimap");Fe=k("unitSpeed");Ge=k("gold");He=k("wood");Ie=k("food");Je=k("stone");Ke=k("daynighticon");va.rightButton.onclick=function(){p.changePage(1)};va.displayed=[];fc=k("attackmenu");gc=k("defencemenu");lb=k("levelmenu");hc=k("kingdom");ua=k("progressone");ed=k("unitname");mb=k("progressvalue");k("msgButton").onclick=Oe;k("mgbook").onclick=
function(){p.mwSelect(0);nb()};k("mgpotion").onclick=function(){p.mwSelect(1);nb()};k("mgsword").onclick=function(){p.mwSelect(2);nb()};k("mgdecline").onclick=function(){k("magicworkshopmenu").style.display="none"};k("mgitem").onmousedown=function(a){var c=1;a.button&&(c*=-1);p.mwMore(c);nb()};k("mgaccept").onclick=function(){k("magicworkshopmenu").style.display="none";p.createItems()};k("mgamount").onmousedown=function(a){var c=1;a.button&&(c=-1);p.mwamount(c);nb()};ia=[k("order1"),k("order2"),k("order3"),
k("order4"),k("order5"),k("order6"),k("order7"),k("order8")];fd=k("bottominfo");e=0;for(var a=ia.length;e<a;e++)ia[e].addEventListener("mousedown",bg),ia[e].addEventListener("mouseup",cg),ia[e].ordid=e,ia[e].addEventListener("mouseenter",dg),ia[e].addEventListener("mouseout",eg);k("stock").addEventListener("click",function(a){p.checkStock()});Ee={fish:{background:"0px -220px"},mana:{background:"0px -120px",progress:k("progressmana")},2:{background:"0px -240px"},milk:{background:"0px -280px"},0:{background:"0px -260px"},
3:{background:"0px -320px"},1:{background:"0px -340px"}};k("gameMenu").onclick=Me}k("minimap").addEventListener("mousedown",function(a){var c=p.mapWidth(),b=a.pageX-4,d=a.pageY-31;A(c,b,d);0===a.button?(document.addEventListener("mouseup",function n(a){ic=!1;document.removeEventListener("mouseup",n);document.removeEventListener("mousemove",jc)}),ic=!0,jc(a),document.addEventListener("mousemove",jc)):2===a.button&&(c=p.mapWidth(),b=32*~~(c*(a.pageX-4)/La),d=32*~~(c*(a.pageY-31)/Ba),A(b,d),p.mouseUp(b,
d,2,!0))})},kc=function(e,a,d,c,b,g,f,h,n,p,t,q,r,u){r=g?kc.last:k("guideTable").getElementsByTagName("tr")[r].getElementsByTagName("td")[q];var l="";g||(l+="<span>"+Z[q]+"</span>");l+="<div "+(g&&"class='spchild'"||"")+'>\n    <div class="prevIcon" style="background-position-y:'+48*b+'px"></div>\n    <ul>\n    <li class="guiTitle">'+m[oa[e]]+"</li>\n    "+(u&&'<li class="desc">'+m[oa[u]]+"</li>"||"")+"\n    <li><span>"+(m.RESOURCE_COST+":</span> ")+(h&&h+"<img src='nehhon/gold.gif'>"||"")+" "+(n&&
n+"<img src='nehhon/wood.gif'>"||"")+" "+(p&&p+"<img src='nehhon/food.gif'>"||"")+"  "+(t&&t+"<img src='nehhon/stone.gif'>"||"")+" </li>\n    ";f&&1!=f||(l+="\n    <li><span>"+m.MISC_HEALTH3+":</span> "+a+"</li>");f||(l+="\n    <li><span>"+m.MISC_ATTACK3+":</span> "+d+"</li>\n    <li><span>"+m.MISC_DEFENCE3+":</span> "+c+"</li>");e=la("div",r,l+"</ul>\n    </div>\n    ");g||(kc.last=e)},fg=function(e){bb();var a=la("button",document.body);a.className="closeButton2";a.onclick=function(){kb(e);kb(a);
xa();location.hash=""}},Qe=function(){if(!k("guide")){var e=Pa("guide");k("guide").innerHTML="<table style='border-spacing: 37px;'><tbody id='guideTable'></tbody></table>";for(var a="",d=0;15>d;d++)a+="<tr><td></td><td></td><td></td></tr>";k("guideTable").innerHTML=a;p.setupGuide();fg(e)}},dg=function(){p.mouseEnter(this.ordid)},eg=function(){va.stockActive&&Re(Se[0],1,1);fd.innerHTML=""},cg=function(e){p.executeOrder(this.ordid,e.button);this.style.transform="translate(0px,0px)"},bg=function(){this.style.transform=
"translate(2px,2px)"},ic,Te=function(){history.pushState("",document.title,window.location.pathname)},$a=function(){u.online=0;location.hash="";k("index").style.display="block";k("returnmenu").style.display="none";setTimeout(Te,200)},ya=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,
.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1],Ce=function(){if(aa||"false"===localStorage.nightcycle)d=new Float32Array([1,1,1,1]);else{var e=(.025*u.cycle/u.daylength*24+u.initialhour)%24,a=~~e;e-=a;Ke.style.backgroundPosition="0 -"+36*a+"px";var d=new Float32Array([ya[4*a],ya[4*a+1],ya[4*a+2],ya[4*a+3]]);a=(a+1)%24;d[0]+=(-d[0]+ya[4*a])*e;d[1]+=(-d[1]+ya[4*a+1])*e;d[2]+=(-d[2]+ya[4*a+2])*e;d[3]+=(-d[3]+ya[4*a+3])*e}a=d;h.useProgram(I);h.uniform4fv(Ue,a);h.useProgram(G);h.uniform4fv(Ve,a)},ca=
0,ha=0,fb=0,gb=0,ob=function(e,a){var d=window.innerWidth,c=window.innerHeight,b=p.mapWidth(),g=M*r.mx/32;e/=32;a/=32;var f=M*d/32,h=M*c/32,k=d/32*P,m=c/32*P,t=e+.5*(k-f),q=a+.5*(m-h);k<b&&m<b&&(t<-g?e=.5*-(k-f)-g:t+f>b&&(e=b-f-(k-f)/2),0>q?a=.5*-(m-h):q+h>b&&(a=b-h-(m-h)/2),f>b&&(M=b/(d/32),A(M)),h>b&&(M=b/(c/32),A(M)));ca=32*-e;ha=32*-a},jc=function(e){var a=p.mapWidth(),d=e.pageX-parseInt(k("minimap").style.left);e=e.pageY-parseInt(k("minimap").style.top);var c=k("tzar").width,b=k("tzar").height*
Ba/(32*a);d=~~(.5+(d-c*La/(32*a)*.5)*a/La);e=~~(.5+(e-.5*b)*a/Ba);ob(32*d,32*e);0==ic&&document.removeEventListener("mousemove",jc)},Oe=function(e){e&&!aa&&("displaynone"==k("enterwindow").className?(k("enterwindow").className="displayblock",k("msginputGame").focus(),pb.blocked=13):(md(),k("enterwindow").className="displaynone",pb.blocked=null));!0===e&&p.runKey(13,!0)},nd=0,od=0,pd=0,qd=0,pb={37:function(e){qd=e;fb=qd+pd},40:function(e){nd=-e;gb=nd+od},39:function(e){pd=-e;fb=qd+pd},38:function(e){od=
e;gb=nd+od},27:function(e){},13:Oe,19:function(e){},48:function(e){e&&(M=1,We({deltaY:0}))},219:function(e){e&&Xe(-1)},221:function(e){e&&Xe(1)},blocked:null};document.oncontextmenu=function(){return!1};var rd=function(){if(!aa){T("magicworkshopmenu");fc.style.display="none";gc.style.display="none";lb.style.display="none";ua.style.display="none";k("manamenu").style.display="none";k("manamenu1").style.display="none";k("progressmana").style.display="none";ed.innerHTML="";fc.innerHTML="";gc.innerHTML=
"";k("manamenu").innerHTML="";lb.innerHTML="";hc.innerHTML="";mb.innerHTML="";ua.value="";mb.maxLength="";Fe.style.display="none";for(var e=0;e<ia.length;ia[e++].innerHTML="");Ye()}},Se=[];Se.change=1;document.onkeydown=function(e){if(e.ctrlKey&&e.shiftKey)return!1;var a=!0;({116:1,115:1,123:1})[e.keyCode]&&(a=!1);return a};var gg=function(e){if(pb[e.keyCode])pb[e.keyCode](1);e.target!=k("msginputGame")&&p.runKey(e.keyCode,!0)},hg=function(e){if(pb[e.keyCode])pb[e.keyCode](0);A(e.keyCode,"up");e.target!=
k("msginputGame")&&p.runKey(e.keyCode,!1)},sd,td,ud,vd,Kb=!1,Lb=function(e,a){Lb.ilegal||(ca=ud-(sd-e)*M,ha=vd-(td-a)*M,ob(-ca,-ha),lc())},Ra=function(e){e=Math.sqrt(Math.pow(e[0].screenX-e[1].screenX,2)+Math.pow(e[0].screenY-e[1].screenY,2));A(e);Ra.dist||(Ra.dist=e,Ra.valor=M,Lb.ilegal=!0);Ze(Ra.valor-(e-Ra.dist)/Ra.dist)},ig=function(e){var a=e.touches[0].screenX;e=e.touches[0].screenY;ud=ca;vd=ha;sd=a;td=e},jg=function(e){if(2==e.touches.length)return Ra(e.touches);Lb(e.touches[0].screenX,e.touches[0].screenY)},
kg=function(e){Ra.dist=void 0;A(e);0==e.touches.length&&(Lb.ilegal=!1)},wd=function(e){return!("li"==e.target.localName||e.target==k("tzar")||e.target==k("resources")||e.target==k("playersinfo")||e.target==k("msgs1")||"span"==e.target.localName||e.target==k("resourcesbefore"))},lg=function(e){var a=window.innerWidth,d=window.innerHeight,c=e.pageX,b=e.pageY;if(!wd(e)){if(Kb)return Lb(c,b);p.mouseMove(e.pageX,e.pageY)}if(screen.height-10<=d){if(1.2===Math.abs(fb)||0===fb)fb=1.2*((10>c)-(c>a-10));if(1.2===
Math.abs(gb)||0===gb)gb=1.2*((10>b)-(b>d-10))}},mg=function(e){if(!wd(e))if(e.altKey&&e.pageX>r.mx){Kb=!0;var a=e.pageX;e=e.pageY;ud=ca;vd=ha;sd=a;td=e}else Kb=!1,p.mouseDown(e.pageX,e.pageY,e.button)},ng=function(e){if(!wd(e))if(Kb)Kb=!1;else return p.mouseUp(e.pageX,e.pageY,e.button)},$e=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){$e||($e=!0,xd())});var Re=function(e,a,d,c,b,g,f,h,n,q,t,r,w,B,z,D,E,G,H,y){T("manamenu");T("manamenu1");T("progressmana");b=m[oa[b]];
a&&d?(k("stock").className="",k("manamenu1").style.display="block",k("manamenu1").style.backgroundPosition="0px -80px",k("manamenu1").innerHTML=a):k("stock").className="blocked";1==g&&c&&(e=Math.floor(25*(c-u.cycle)/1E3),0<e&&(k("manamenu").style.display="block",k("manamenu").style.backgroundPosition="0px -200px",k("manamenu").innerHTML=e+"s"));hc.style.display="block";ed.innerHTML=b;f||0==g?(fc.innerHTML=f,X("attackmenu")):T("attackmenu");0==g||2==g&&h?(gc.innerHTML=h,X("defencemenu")):T("defencemenu");
q&&(k("manamenu").style.display="block",k("manamenu").innerHTML=n,27===t?(k("manamenu1").style.backgroundPosition="0px -280px",X("manamenu1"),k("manamenu1").innerHTML=n,k("manamenu").style.backgroundPosition="0px -240px",k("manamenu").innerHTML=r):(k("progressmana").value=~~(100*n/q),X("progressmana"),k("manamenu").style.backgroundPosition="0px -120px"));H&&(b=k("manamenu1"),A(G),74==t&&(G="fish"),b.style.display="block",b.style.backgroundPosition=Ee[G].background,b.innerHTML=H);lb.innerHTML=w;lb.style.display=
"block";0!==w||2!=g&&1!=g||(lb.style.display="none");hc.innerHTML=da(pa(p.empName(B),17));ua.style.display="block";-1===z?(ua.value=100,ua.max=100,mb.innerHTML=m.MISC_INF3):(ua.value=z,-1===D?(ua.max=100,ua.value=1):ua.max=D,mb.innerHTML=~~z+"/"+D)},og=function(e){return e.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,function(a){return"(LINK HIDDEN DUE TO SAFETY)"})},
af=function(e,a,d){e=m[oa[e]];d&&(e=yd(e,da(pa(a,d))));k("msgs1").innerHTML+="<li>"+e+"</li>";qb()},da=function(e){for(var a,d="",c=0;a=e[c++];)d+=String.fromCharCode(a);return d},lc=function(){};new Float32Array(8);var zd,Ad,Bd,Cd,bf,M=1;new Float32Array(12);var h,mc,Yc=function(e,a){return new Float32Array(ra.buffer,e,a)},pa=function(e,a){return new Uint16Array(ra.buffer,e,a)},dc=function(e,a){return new Uint8Array(ra.buffer,e,a)},Ye=function(){if(!aa){for(var e=va.displayed.length=0,a=va.length;e<
a;e++){var d=ia[e];d.className="blocked";d.style.backgroundPosition="48px 96px";d.innerHTML=""}va.rightButton.className="blocked";va.leftButton.className="blocked";va.stock.className="blocked";va.rightBlocked=1}},Ve,G,I,Ue,cf,nc,Dd,Ed,oc,Mb,Nb,Ob,pc,Fd,Gd,df,Pb=function(e,a){var d=4*bf,c=h.createBuffer();c.size=a;c.len=d;h.bindBuffer(h.ARRAY_BUFFER,c);h.enableVertexAttribArray(e);h.vertexAttribPointer(e,a,h.FLOAT,!1,0,0);h.bufferData(h.ARRAY_BUFFER,d*a,h.STATIC_DRAW);ba?qc.vertexAttribDivisorANGLE(e,
1):h.vertexAttribDivisor(e,1);return c};Pb.jump=4E3;var rc=function(e,a){var d=a+1E4;a*=4;d*=4;if(ba)h.bindBuffer(h.ARRAY_BUFFER,e),h.bufferData(h.ARRAY_BUFFER,d*e.size,h.STATIC_DRAW),p.resetGLbuffer();else{var c=h.createBuffer();h.bindBuffer(h.COPY_READ_BUFFER,e);h.bindBuffer(h.ARRAY_BUFFER,c);h.bufferData(h.ARRAY_BUFFER,a*e.size,h.STATIC_DRAW);h.copyBufferSubData(h.COPY_READ_BUFFER,h.ARRAY_BUFFER,0,0,a*e.size);h.bindBuffer(h.COPY_READ_BUFFER,c);h.bindBuffer(h.ARRAY_BUFFER,e);h.bufferData(h.ARRAY_BUFFER,
d*e.size,h.STATIC_DRAW);h.copyBufferSubData(h.COPY_READ_BUFFER,h.ARRAY_BUFFER,0,0,a*e.size);h.bindBuffer(h.COPY_READ_BUFFER,null);h.deleteBuffer(c)}},tc=function(){var e=dc(p.getColorTexture(),4*(p.nkingdom()+16));h.activeTexture(h.TEXTURE4);var a=h.createTexture();h.bindTexture(h.TEXTURE_2D,a);if(ba){for(var d=new Uint8Array(4*Math.pow(64,2)),c=0;c<d.length;c++)d[c]=e[c];h.texImage2D(h.TEXTURE_2D,0,h.RGBA,64,64,0,h.RGBA,h.UNSIGNED_BYTE,d)}else h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e.length/4,1,0,h.RGBA,
h.UNSIGNED_BYTE,e);sc();h.bindTexture(h.TEXTURE_2D,null);h.bindTexture(h.TEXTURE_2D,a);h.uniform1i(h.getUniformLocation(G,"colorArray"),4);h.activeTexture(h.TEXTURE2)},ba,R=function(e,a){if(!u.canceled){performance.now();ta.running||requestAnimationFrame(R);var d=R.fp1000,c=R.delta;e=R.now;var b=R.realnow,g=R.delta,f=e;R.frameCount++;e=a||Date.now()-Hb+25*u.cycle;R.now=e;c=(c+(e-f))/1E3;R.delta=c;a=b;b=Date.now();R.realnow=b;g=(g+(b-a))/1E3;R.realdelta=g;dd+=c;cd++;R.fp1000=d+c;if(0!=fb||0!=gb)a=
parseInt(localStorage.scrollSpeed)/100,ca+=fb*g*1280*M*a,ha+=gb*g*1280*M*a,ob(-ca,-ha);h.useProgram(G);lc();h.uniform1f(cf,e);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);pg(e);rb(Gd);e=p.getBufferID();Hd(e);qg(e);ma.update&&ma(1);ta.running&&(0<cb&&clearInterval(cb),k("tzar").toBlob(function(a){var b=ta.a;a=URL.createObjectURL(a);b.href=a;b.download=ta.i++ +".png";b.click();window.URL.revokeObjectURL(a);setTimeout(function(){setTimeout(Aa,9);R(0,25*u.cycle+16)},20)}));uc.stream&&uc.stream.getVideoTracks()[0].requestFrame();
h.finish()}},Id=function(e){e?Id.time=performance.now():A("c++",performance.now()-Id.time)},Hd=function(e){e&&(h.enable(h.BLEND),h.blendEquation(h.FUNC_ADD),h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),ba?qc.drawArraysInstancedANGLE(h.TRIANGLES,0,6,e):h.drawArraysInstanced(h.TRIANGLES,0,6,e),h.disable(h.BLEND))},qg=function(e){var a=p.mapWidth();h.uniform2f(nc,32*a,32*a);h.uniform2fv(Nb,[0,0]);h.uniform1f(mc,1);h.uniform1i(Mb,1);h.viewport(r.marx*P,P*(window.innerHeight-Ba-r.mary),La*P,Ba*P);Hd(e);
h.uniform1i(Mb,2);Hd(1);h.uniform1i(Mb,0);h.uniform2f(nc,h.canvas.width,h.canvas.height);h.uniform2fv(Nb,[ca,ha]);h.uniform1f(mc,P/M);h.viewport(0,0,h.canvas.width,h.canvas.height)},pg=function(e){e=Math.floor(e/100)%5;h.useProgram(I);rb(Fd);h.uniform1f(Dd,e);h.drawArrays(h.TRIANGLES,0,6);h.viewport(P*r.marx,P*(window.innerHeight-Ba-r.mary),P*La,P*Ba);h.uniform1i(oc,1);h.uniform2fv(Ob,[0,0]);h.uniform1f(pc,P*La/32/p.mapWidth());h.drawArrays(h.TRIANGLES,0,6);h.uniform1i(oc,0);h.uniform2f(Ed,h.canvas.width,
h.canvas.height);h.uniform2fv(Ob,[ca,ha]);h.uniform1f(pc,P/M);h.viewport(0,0,h.canvas.width,h.canvas.height);h.useProgram(G)},Jd=!1,Ze=function(e){var a=p.mapWidth(),d=window.innerHeight;e*(window.innerWidth-r.mx)/32>a||e*d/32>a||(A(!0),M=e,.08>M&&(M=.08),ob(-ca,-ha),p.setupZoom(M),ef())},We=function(e){Kd||!(e.clientX>r.menumx||ic)&&e.clientX||(e=Math.sign(e.deltaY)*parseFloat(localStorage.zoomMult)/1E3*M,Ze(e+M))},ef=function(){var e=window.innerWidth,a=window.innerHeight,d=-ca+.5*(e*P-M*e)+r.mx,
c=-ha+.5*(a*P-M*a);e*=M;a*=M;var b=sb.viewF32();b[0]=d;b[1]=c;b[2]=-999999999;b[3]=0;b[4]=0;ff();b[0]=e;b[1]=a;b[2]=0;b[3]=0;b[4]=0;gf()},hf,jf;lc=function(){var e=[ca,ha];if(ca!=hf||ha!=jf)hf=ca,jf=ha,p.setupTranslation(-ca,-ha),h.useProgram(I),h.uniform2fv(Ob,e),h.useProgram(G),h.uniform2fv(Nb,e),ef()};var sc=function(){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);
h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT)},Qb,rg=function(e){if(!Qb[e]){h.useProgram(G);var a=h.createTexture();h.activeTexture(h.TEXTURE6+e);Qb[e]=a;h.bindTexture(h.TEXTURE_2D,a);sc();h.texImage2D(h.TEXTURE_2D,0,vc,4096,4096,0,vc,h.UNSIGNED_BYTE,null);h.uniform1i(h.getUniformLocation(G,"img_common["+e+"]"),6+e);h.useProgram(I);h.uniform1i(h.getUniformLocation(I,"img_common["+e+"]"),6+e)}return Qb[e]},vc,P,wc=function(){var e=Math.round(window.innerWidth*P),a=Math.round(window.innerHeight*
P);h.canvas.width=e;h.canvas.height=a;p.canvasSize(e,a);h.useProgram(I);h.uniform2f(Ed,e,a);h.useProgram(G);h.uniform2f(nc,e,a);wc.changed=1;ob(-ca,-ha)},rb=function(e){if(ba)return xc.bindVertexArrayOES(e);h.bindVertexArray(e)},xc,qc,kf=function(){return ba?(xc||(xc=h.getExtension("OES_vertex_array_object")),xc.createVertexArrayOES()):h.createVertexArray()};Array.prototype.put=function(e){this[this.length]=e};Array.prototype.quit=function(e){e=this.indexOf(e);return-1<e?(this.splice(e,1),!0):!1};
Array.prototype.add=function(e){0>this.indexOf(e)&&(this[this.length]=e)};var u={},ff=function(){var e=sb.viewF32(),a=lf.viewF32();h.bindBuffer(h.ARRAY_BUFFER,Ad);h.bufferSubData(h.ARRAY_BUFFER,12*e[4],a)},gf=function(){var e=sb.viewF32(),a=yc.viewF32();h.bindBuffer(h.ARRAY_BUFFER,Cd);h.bufferSubData(h.ARRAY_BUFFER,16*e[4],a)},Z=["European","Arab","Asian"],yd=function(e,a,d){d&&(e=e.replace("%d",d));return e.replace("%s",a)};Wc.translated=!0;var tb=function(e){u.infinity=void 0;e="mapx goldRes woodRes foodRes stoneRes infinity terrain terrainRND peons freePop maxPop gameType AIlevel".split(" ");
var a=k("mapconfiguration")&&""!==k("mapconfiguration").innerHTML;k("mapconfiguration")||aa||mf();for(var d=0,c=e.length;d<c;d++){var b=e[d];if(a){var g=k(e[d]+"Value");g="checkbox"==g.type?1==g.checked&&1||0:parseInt(g.value);localStorage[b]=g;u[b]=g}else u[b]=parseInt(localStorage[b])}a&&(c=p.RNDobjexp(),e=(new Ja(p.shapoint(),c)).viewU32(),localStorage.rndObjs=e.join(","));u.daylength=2880;u.initialhour=12;u.infinity&&(u.goldRes=Math.pow(2,31)-1,u.foodRes=Math.pow(2,31)-1,u.woodRes=Math.pow(2,
31)-1,u.stoneRes=Math.pow(2,31)-1);u.mapy=u.mapx;u.gravity=580.9/9.8*9.8;u.name="";u.arje=316607;p.setupGame(u.peons,u.freePop,u.goldRes,u.woodRes,u.foodRes,u.stoneRes,u.water,u.terrain,u.visibility,u.gameType,u.mapx,u.arje,u.maxPop,u.terrainRND,u.AIlevel);return u},ta=function(){ta.arr=[];ta.running=!0;ta.a=document.createElement("a");ta.a.hide();ta.i=0};ta.one=function(){k("tzar").toBlob(function(e){var a=document.createElement("a");e=URL.createObjectURL(e);a.href=e;a.download="tzared.png";a.click();
window.URL.revokeObjectURL(e)})};ta.stop=function(){ta.running=!1};var uc=function(){var e=k("tzar").captureStream(0),a=new MediaRecorder(e,{audioBitsPerSecond:128E3,videoBitsPerSecond:25E6,mimeType:"video/webm;codecs=h264"});uc.stream=e;a.addEventListener("dataavailable",function(a){uc.stream=void 0;a=new Blob([a.data],{type:"video/webm"});a=URL.createObjectURL(a);A(a)});a.start();setTimeout(function(){a.stop()},4E3)},xe=function(){Ib&&(Ib.innerHTML="");k("loadingtext").innerHTML=m.MSG_GAME_LOAD;
r.kingdom||(r.kingdom=1);u.online&&(sg(m.MSG_GAME_CREATE),u.editor=0);p.mapWidth()?(u.mapx=p.mapWidth(),u.mapy=u.mapx):tb();u.pausedTime=0;u.canceled=0;ub=k("msgs1");u.online||(location.hash="");X("content");T("playermenu");T("index");u.cycle?u.deltaTime=25*u.cycle:(u.date=Date.now(),u.cycle=0,u.deltaTime=0);u.loadDate=Date.now();u.online||Te();u.now=ze;u.paused=0;u.pausedTime=0;u.zMax=96*u.mapy;db();performance.now();u.allow14=!0;u.temperature=25;var e=u.temperature;0===r.temperature&&(e+="&deg;C");
k("temperature")&&(k("temperature").innerHTML=e);M=1;p.preSetup(~~(1E4*Math.random()));ma(55);Ia.check();aa&&(Le(),Jb())},Ia=function(){D(["loading","playermenu","index"]);k("playersinfo")&&(k("playersinfo").innerHTML="");rd();window.addEventListener("keydown",gg);window.addEventListener("keyup",hg);window.addEventListener("mousemove",lg);window.addEventListener("touchstart",ig);window.addEventListener("touchmove",jg);window.addEventListener("touchend",kg);window.addEventListener("wheel",We,!1);window.addEventListener("mousedown",
mg);window.addEventListener("mouseup",ng);cc=performance.now()-cc;A("FULL: ",cc);u.online?p.plready():Ld();u.allow14=!1};Ia.check=function(){Ia.load++;Ia.load===Ia.target&&Ia()};Ia.target=2;var nf=function(){return r.gl?!1:(jb("You can't run WEBGL 2<br>More info <a href='http://webglreport.com/?v=2'>here</a>","Error"),$a(),!0)},xd=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():
e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},Pa=function(e){var a=document.createElement("div");a.id=e;document.body.appendChild(a);return a},of=function(){aa?(r.marx=0,r.mary=60,r.menumy=60,Ba=La=171,r.mx=171,r.menumx=171):(r.mx=151,Ba=La=128,r.menumx=151,r.menumy=0,r.marx=4,r.mary=31);p.stmenummx(r.mx);var e=k("minimap");e.style.width=La+"px";e.style.height=Ba+"px";e.style.left=r.marx+"px";e.style.top=r.mary+"px"},Rb=function(e){nf()||(Pe(),ec(),window.onbeforeunload=function(){return"Are you sure you want to quit?"},
cc=performance.now(),Ia.load=0,e&&"true"==localStorage.fullscreen&&xd(),of(),Pa("loading"),""==k("loading").innerHTML&&(k("loading").innerHTML='<p id="loadingtext"></p>\n<div>\n<div id=\'logo\' class="svgnehhon"></div>\n<span id="netral">NEHHON NETRAL-H3 ENGINE</span>\n</div>'),aa?p.setupEditor():p.mapWidth()||tb(),Qa())},La=128,Ba=128,fa=[];window.addEventListener("offline",function(e){Eb("Offline","#ff0000")});window.addEventListener("online",function(e){Eb("Online","#00ff00")});(function(){for(var e=
["returnmenu","index","Account","accountIframe"],a=0,d=e.length;a<d;k(e[a++]));})();var Md=!1,tg=function(){Md=!0;location.replace("#"+this.gameID+"Room");Nd(this.gameID)},Nd=function(e){fa=[];pf();A("connecting to",e,m.MSG_GAME_LOAD);k("game").style.display="block";k("gameName").innerHTML=m.MSG_GAME_LOAD;k("returnmenu").style.display="none";k("index").style.display="none";ub.innerHTML="";Sa=[];r.p2p?(ka.joinRoom(e,Gc),ec()):(ka||za(),za.func=function(){Nd(e)})},ug={6400900:".",28462225:"a",29052100:"b",
29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},qf=function(e){T("game");u.online=0;u.id=void 0;r.adminOK=!1;ka.leaveRoom();fa.length=0;$a();p.closeRoom();e.constructor==String&&jb(e)},Ne=function(){var e=localStorage.menuOpacity/100;k("menubefore").style.opacity=
e;k("menuafter").style.opacity=e;k("resourcesbefore").style.opacity=e},Me=function(){aa||p.pause0();k("playingMenu")||Pa("playingMenu");if(""==k("playingMenu").innerHTML){var e="";"true"===localStorage.nightcycle&&(e="checked");var a="";u.online||(a="<tr><td>"+m.OPTIONS_T_GS+' </td><td>\u00d71 <input type="range" id="gameSpeed" value="0"/> \u00d75</td></tr>');k("playingMenu").innerHTML='<div>\n<ul>\n<li id="backToGame">'+m.MENU_BACK+'</li>\n<li id="saveGame">'+m.ENDGAMEDLG_SAVE+'</li>\n<li id="fullscreenmenu">'+
m.FULLSCREEN+'</li>\n<li id="quitButton1">'+m.MENU_QUIT+"</li>\n</ul>\n<table>\n"+a+"\n<tr><td>"+m.ZOOMSPEED+' </td><td><input type="range" id="zoomRange" value="'+localStorage.zoomMult+'"/></td></tr>\n<tr><td>'+m.OPTIONS_T_SS+' </td><td><input type="range" id="scrollRange" value="'+localStorage.scrollSpeed+'"/></td></tr>\n<tr><td>'+m.MENU_OPACITY+' </td><td><input type="range" id="opacityRange" value="'+localStorage.menuOpacity+'"/></td></tr>\n<tr><td>'+m.MP_SETUPMAP_T_DAY+' </td><td><label class="container"><input id="daynightvalue" type="checkbox" '+
e+'><span class="checkmark"></span></label></td>\n</table>\n<div>\n<span>'+m.OPTIONS_T_MV+'</span><br/><input type="range" id="musicRange" value="'+localStorage.musicRange+'"/><br/><br/>\n<form id="musicSelect">\n<input type="radio" name="mversion" value="originalMusic" checked /> Original<br/>\n<input type="radio" name="mversion" value="sharpRain" /> Original - <a href="https://www.youtube.com/user/rainheart666787/featured" target="_blank" rel="noopener noreferrer">Sharp Rain</a> Version<br/>\n<input type="radio" name="mversion" value="originalMusic1" /> Original - Alternative One<br/>\n<input type="radio" name="mversion" value="mute" /> Mute\n</form>\n<br />\n<span>'+
m.OPTIONS_T_SVOL+'</span><br/><input type="range" id="soundRange" value="'+localStorage.soundRange+'"/><br/>\n</div>\n</div>\n';k("quitButton1").onclick=w;k("saveGame").onclick=vg;k("backToGame").onclick=function(){T("playingMenu");aa||p.resume0();xa()};k("daynightvalue").onchange=function(){localStorage.nightcycle=this.checked};k("fullscreenmenu").onclick=xd;k("musicRange").oninput=function(){Fb.gain.value=parseInt(k("musicRange").value)/100;localStorage.musicRange=k("musicRange").value};k("zoomRange").oninput=
function(){localStorage.zoomMult=k("zoomRange").value};k("gameSpeed")&&(k("gameSpeed").onchange=Xf);k("opacityRange").oninput=function(){localStorage.menuOpacity=k("opacityRange").value;Ne()};k("scrollRange").oninput=function(){localStorage.scrollSpeed=k("scrollRange").value};k("soundRange").oninput=function(){Gb.gain.value=parseInt(k("soundRange").value)/100;localStorage.soundRange=k("soundRange").value};localStorage.favMusic&&(k("musicSelect").mversion.value=localStorage.favMusic);e=k("musicSelect").getElementsByTagName("input");
a=0;for(var d=e.length;a<d;a++)e[a].onchange=Q.reset}u.demo&&T("saveGame")||X("saveGame");k("playingMenu").style.display="block";bb()},Sa,Pf=function(){location.reload()},rf=function(e){for(var a=0,d=fa.length;a<d;a++){var c=fa[a];if(c.id==e)return c}},ka,Yd=function(e){for(var a=0,d=0;d<e.length;d++)a+=e.charCodeAt(d)*d+(a&d);A(a,"id");return a%4294967295},za=function(){nf()||(r.name?(Tf(),ka=new SimpleWebRTC({localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,receiveMedia:{offerToReceiveAudio:0,
offerToReceiveVideo:0},url:"https://gthsolar1.herokuapp.com/"}),ka.on("channelMessage",function(e,a,d){a=p.tempointeradd(d.length);a=new Uint32Array(ra.buffer,a,d.length);for(var c=0;c<d.length;c++)a[c]=d[c];p.onldata(e.superID)}),ka.on("error",function(e){"full"==e&&($a(),Eb(m.ERR_GAMEFULL,"#ff0000"))}),ka.on("connectionReady",function(e){var a=ka.connection.connection;r.p2p=a;r.superID=Yd(a.id);p.setupOnlID(r.superID);a.username=r.name;a.color=r.color;a.on("getRooms",function(a){var c=a.date,b=
Object.keys(a),d=k("gameList");if(1<b.length){d.innerHTML="";for(var e=0,f=b.length;e<f;e++){var h=b[e],p=a[h];if("date"!=h){var t=p.len;if(t){var q=document.createElement("tr"),r="";r=p.playing?r+("<td><div class='redCircle'></div>"+m.PLAYING+"</td>"):r+("<td><div class='redCircle' style=\"background:rgba(0,255,0,.8); box-shadow:0px 0px 20px rgba(0,255,0,.8)\"></div>"+m.WAITING+"</td></td>");r+="<td>"+Ta(p.description)+"</td><td>"+~~((c-p.date)/6E4)+" min ago</td><td>"+Ta(t)+"/"+Ta(p.max)+"</td>";
q.innerHTML=r;q.gameID=h;p.playing||(q.onclick=tg);d.appendChild(q)}}}}else d.innerHTML="<tr><td>"+m.NO_GAMES_FOUND+"</td></tr>"});r.onlineID=e;za.func&&za.func()}),ka.on("createdPeer",function(e){u.started||Va(e)})):(void 0)(za))},wg=function(){ec();xa();pf();X("game");T("returnmenu");T("index");k("gameName").innerHTML=m.MSG_GAME_LOAD;ub.innerHTML="";fa=[];U();r.admin=1;r.room={description:k("gameFormName").value,max:parseInt(k("gameMax").value),public:!0};2>r.room.max&&(r.room.max=2);14<r.room.max&&
(r.room.max=14);localStorage.gameDescription=r.room.description;ka.createRoom(r.onlineID+"b",Gc);u.online=1;document.body.removeChild(k("gameForm"));Sa=[r.onlineID];r.adminOK=!0;tb();p.setupOnlTable(r.room.max+1);ib(p.onlADD(0,0,parseInt(localStorage.color.substr(1),16),r.superID,0),17,r.name);sf()},Zd=function(){ka||za();if(r.onlineID){bb();var e=localStorage.gameDescription||r.name+"'s room",a=document.createElement("div");a.id="gameForm";a.innerHTML="<div>\n<h2>"+m.OPTIONS_T_GOPT+"</h2>\n"+m.EDIT_T_GAMENAME+
': <input id=\'gameFormName\' type="text" spellcheck="false" value="'+e+'" maxlength="29" /><br />\n'+m.SP_SETUPMAP_T_NUM_PLAYERS+': <input id="gameMax" type="number" value="6" max="14" min="2"/><br />\n</div>';e=document.createElement("button");e.innerHTML=m.MSG_SYS_CONT;e.onclick=wg;a.children[0].appendChild(e);document.body.appendChild(a)}else setTimeout(function(){location.hash=""},200),za.func=Zd},vg=function(){var e=p.savegame(),a=Sb.viewI32(),d=dc(e,a[0]);a=a[1];A(d,e);e=new Blob([new Uint32Array([a]),
d],{type:"application/octet-binary"});e=URL.createObjectURL(e);d=document.createElement("a");document.body.appendChild(d);d.style="display: none";d.href=e;d.download="savegame.tzared";d.click()},xg=function(){if(fa.length){for(var e=document.getElementsByClassName("onlPlayer"),a=0;a<e.length;a++)kb(e[a]);tb();p.strOnl();r.p2p.emit("gameStarted")}},Ld=function(){xa();k("alert")&&T("alert");k("waitList")&&kb(k("waitList"));u.started=1;u.date=Date.now();db();aa||Q();p.startMovement();R()};Ld.fast=!0;
var tf=document.getElementsByTagName("main")[0],Kd=!1,xa=function(){Kd=!1;tf.style.cssText=""},bb=function(){Kd=!0;tf.style.cssText="filter:blur(14px);pointer-events:none"};var uf=function(){T("game");u.id=void 0;u.online=0;u.compressed=void 0;u.arje=void 0;ka.leaveRoom();fa.length=0;$a();r.admin=0;p.closeRoom()};var yg=function(e,a){if(null==k(e)){var d=document.createElement("div");d.innerHTML=a;d.id=e;k("playermenu").appendChild(d);return!0}return!1},pf=function(){yg("game",'<h2 id="gameName"></h2>\n<p id="onlineTopInfo"></p>\n<div id="multi21">\n<table class="players" >\n<tbody id="multiplayertable">\n</tbody>\n</table>\n<div id="chat">\n<ul id="msgs">\n</ul>\n<input id="msginput" type="text" autocomplete="off" />\n<input id="sendmsg" type="submit" value="" />\n</div>\n</div>\n<div id="showGameInfo"></div>\n<div id="buttons"></div>')?
(ub=k("msgs"),zc=k("msginput"),zc.addEventListener("keyup",function(e){13===e.keyCode&&md()}),k("sendmsg").onclick=md):(T("multi21"),k("showGameInfo").innerHTML="")},Gc=function(e){if((r.admin||e)&&!u.id)if(X("game"),X("multi21"),e=ka.roomName,e+="Room",A("login"),xa(),0!==ka.getPeers().length||r.admin){var a=r.room||NaN;A(a);u.id=e;u.online=1;U();r.admin&&(k("onlineTopInfo").innerHTML=' <button id="addAI" style="padding: 6px;">'+m.ADD_AI+'</button><span style="float:right;display:none">'+m.SP_SETUPMAP_T_NUM_PLAYERS+
'<input style="display:none"  id="nplayersO" min="2" type="number" max="14" value="'+r.room.max+'" /></span>',k("nplayersO").onchange=function(){var a=this.value;a<Sa.length&&(a=Sa.length);A(Sa.length,a);Sa.length!=a||fa.length||a++;a=parseInt(a);if(2>a||!a)a=2;14<a&&(a=14);a!==r.room.max&&r.p2p.emit("maxPlayers",a-(Sa.length-fa.length-1));this.value=r.room.max},k("addAI").onclick=function(){p.onlCount()<r.room.max&&2!=r.room.max&&(ib(p.onlADD(0,0,16777216*Math.random(),0,1),17,"AI"),r.p2p.emit("maxPlayers",
r.room.max-p.nAIs()),p.sndNfo())});k("copyButton")&&(k("copyButton").onclick=function(){k("onlineID").select();document.execCommand("Copy")},k("onlineID").value=location.origin+"/#"+u.id);k("gameName").innerHTML=Ta(a.description)||"Online Game";T("returnmenu");r.admin?(location.replace("#"+u.id),k("buttons").innerHTML='<button id="startbutton">'+m.MP_MPLAYER_PLAY+' \u25b6</button><button id="optionbutton">'+m.MENU_OPTI+'</button><button id="closebutton">'+m.GENERAL_CLOSE+'</button><br><input id="maploadOnline" type="file" /> <label style="display:none" for= "maploadOnline">'+
m.strcusMap+'</label> <button id="deleteCusMap">'+m.randomMap+"</button>",k("startbutton").onclick=xg,k("optionbutton").onclick=vf,k("closebutton").onclick=uf,k("maploadOnline").accept=".tzared",T("deleteCusMap")):(k("buttons").innerHTML='<button id="quitbutton">'+m.MSG_DISCONNECT+"</button>",k("quitbutton").onclick=qf)}else location.hash="",$a()},Wb=function(e){A("rem2");e=rf(e.id);A(e);if(e){var a=da(pa(p.empName(p.pidkingdom(e.superID)),17));Od(yd(m.VIEWMSG_PLAYER_DISCONECTED,a),0,5);fa.quit(e);
p.deletePlayer(e.superID);e.admin&&!u.started&&qf(m.ERR_SERVERCANCEL)}},wf=document.getElementsByClassName("ucolor"),xf=document.getElementsByClassName("username"),yf=document.getElementsByClassName("race"),Pd=document.getElementsByClassName("team"),Ca=function(e){if(r.admin&&"BUTTON"!=e.target.tagName){Ca.div&&(document.body.removeChild(Ca.div),Ca.div=void 0);var a=e.pageX;e=e.pageY;var d=this.i2;A(d);var c=document.createElement("div");c.style.top=e+"px";c.style.left=a+"px";c.className="onlPlayer";
Ca.div=c;A(this.peer,this.i2);if(this.peer.name)a=document.createElement("button"),a.onclick=function(){p.userKick(d);r.p2p.emit("maxPlayers",p.onlCount());document.body.removeChild(c);Ca.div=void 0},a.innerHTML=m.GENERAL_KICK,c.appendChild(a);else{var b=this.peer;a=document.createElement("button");a.onclick=function(){p.updown(d,-1);document.body.removeChild(c);Ca.div=void 0};a.innerHTML=m.UP;c.appendChild(a);a=document.createElement("button");a.onclick=function(){p.updown(d,1);document.body.removeChild(c);
Ca.div=void 0};a.innerHTML=m.DOWN;c.appendChild(a);r.onlineID!=b&&(a=document.createElement("button"),a.onclick=function(){A(22222,b);p.userKick(d);r.p2p.emit("maxPlayers",p.onlCount());document.body.removeChild(c);Ca.div=void 0},a.innerHTML=m.GENERAL_KICK,c.appendChild(a))}a=document.createElement("button");a.onclick=function(){document.body.removeChild(c);Ca.div=void 0};a.innerHTML=m.GENERAL_CLOSE;c.appendChild(a);document.body.appendChild(c)}},sf=function(){var e=k("multiplayertable"),a='<tr style="text-transform:uppercase"><td></td><td>'+
m.MP_SEARCH_T_PL_NAME+"</td><td>"+m.RACE+"</td><td>"+m.TEAM+"</td></tr>",d=Sa,c=p.nkingdom()-1||14;A("LENGTH",c);d&&c<d.length&&(c=d.length);for(d=0;d<c;d++)a+='<tr><td class="ucolor"></td><td class="username">'+m.MP_MPLAYER_NAME_2+'</td><td class="race"></td><td class="team"></td></tr>';6>c&&(a+='<tr style="height: '+(260-46*c)+'px"></tr>');e.innerHTML=a;k("multiplayertable").getElementsByTagName("tr");p.onlineKingdoms();k("msgs").style.height=e.clientHeight-87+"px"},Xb=ab,zg=function(){ec();document.body.removeChild(k("connectConfirm"));
var e=location.hash.substr(1);Nd(e.substr(0,e.length-4))},$d=function(){if(Md)Md=!1;else if(!r.admin){var e=document.createElement("div");document.body.appendChild(e);e.id="connectConfirm";e.innerHTML="<button>"+m.CLICKJOIN+"</button>";e.onclick=zg;za()}};window.onhashchange=hb;var ub,zc,Od=function(e,a,d,c){Wa("chat");d&&(a=p.gstarted()?Ib:ub,5!==d?(e=Ta(da(pa(e,c))),e=og(e),la("li",a,"<span>"+Ta(da(pa(d,17)))+" \u2014</span> "+e)):la("li",a,e),a.scrollTop=a.scrollHeight,p.gstarted()&&qb())};Od.fast=
!0;var qb=function(){11==k("msgs1").children.length&&k("msgs1").removeChild(k("msgs1").children[0]);1==k("msgs1").children.length&&(qb.intv=setInterval(Ag,16E3))},Ag=function(){k("msgs1").children[0]&&k("msgs1").removeChild(k("msgs1").children[0]);k("msgs1")&&0==k("msgs1").children.length&&clearInterval(qb.intv)},Ta=function(e){return String(e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},md=function(){if(u.started){var e=Ib;var a=k("msginputGame").value;k("msginputGame").value=
""}else e=ub,a=zc.value,zc.value="";""!==a&&(a=Ta(a),e.innerHTML+="<li><span>"+r.name+" \u2014</span> "+a+"</li>",ib(p.tempstradd(),1024,a),p.liveChat(a.length),e.scrollTop=e.scrollHeight,u.started&&qb())},zf=document.getElementsByClassName("ucolor1"),Bg=document.getElementsByClassName("username1"),Cg=document.getElementsByClassName("race1"),Dg=document.getElementsByClassName("team1"),Af=function(e){var a=1;2===e.button&&(a=-1);this.innerHTML=p.changeTeam(this.iteam,a)},Bf=function(e){var a=1;2===
e.button&&(a=-1);this.innerHTML=Z[p.changeRace(this.iteam,a)]},Cf=function(){this.svg&&(r.color=this.value,localStorage.color=this.value);this.parentElement.style.background=this.value;p.changeColor(this.iteam,parseInt(this.value.substr(1),16))},Eg=function(){p.randomKingdoms(1)},Fg=function(){p.randomKingdoms(-1)},Df=function(e,a,d,c,b,g,f){var h=id(c);e=da(pa(e,17));var l=k("multiplayertable").getElementsByTagName("tr"),m=g==r.superID,p=b+1;c=parseInt(h.substr(1),16);c=[c>>16&255,c>>8&255,c&255];
wf[b].style.background="rgb("+c[0]+","+c[1]+","+c[2]+")";xf[b].innerHTML=e;f&&(xf[b].style.color="#fff900");m||f&&r.admin?(Pd[b].innerHTML="",e=document.createElement("button"),e.onmousedown=Af,e.iteam=p,e.innerHTML=a,Pd[b].appendChild(e),f&&(e.style.color="#fff900"),e=document.createElement("button"),e.onmousedown=Bf,e.iteam=p,e.innerHTML=Z[d],yf[b].appendChild(e),f&&(e.style.color="#fff900"),a=document.createElement("input"),a.type="color",a.iteam=p,a.value=h,a.svg=!0,wf[b].appendChild(a),a.onchange=
Cf):(Pd[b].innerHTML=a,yf[b].innerHTML=Z[d]);r.admin&&!m&&(l[b+1].onclick=Ca,l[b+1].peer=g,l[b+1].i2=b+1)},Ef=function(){if(!r.name)return(void 0)(Ef);""===k("RandomMap").innerHTML&&(k("RandomMap").innerHTML="<h2>"+m.MP_SETUPMAP_T_RANDOM+'</h2><div>\n            <table class="players" id="oneplayertable">\n                <tbody id="oneplayertbody">\n                </tbody>\n            </table>\n            <button style="margin-left:40px" id="start2" class="start startButton">'+m.MP_MPLAYER_PLAY+
' \u25b6</button>\n            <button class="start optionsButton" id="start1" style="margin-left:12px;">'+m.MENU_OPTI+"</button>\n        </div>",k("start1").onclick=vf,k("start2").onclick=Rb);X("returnmenu");p.randomKingdoms()},Ff=function(e){e=e.target.result;var a=new Uint8Array(e,4);e=(new Uint32Array(e,0,1))[0];A(e,a);for(var d=a.length,c=p.readSavegame0(d),b=0;b<d;b++)K[c+b]=a[b];p.readSVG(4*e,d,!0);X("customMapcont");k("closeCustom").style.display="inline-table";k("custombody").innerHTML=
"";p.customMapTable()},Wf=function(e,a,d){var c=new XMLHttpRequest;c.open("GET",e,!0);c.responseType="arraybuffer";c.onload=function(b){b=b.target.response;Gg({url:e,buffer:b});a(b)};d&&(c.onprogress=d);c.send()},sg=function(e,a,d){try{"granted"!=Notification.permission&&Notification.requestPermission(function(a){});var c=new Notification(e,{icon:"nehhon/807.png",body:a,requireInteraction:!1});d||(d=5550);setTimeout(function(){c.close()},d)}catch(b){}},Gf=function(e){for(var a="",d=0,c=e.length;d<
c;d++)a+=ug[e[d]];return a};Uf[Gf([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]!==Gf([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])&&(A("edge chrome firefox - compt"),xe=ab);var ma=function(e){if(e){var a=p.mapWidth();e=Yc(p.configTerrain(55==e),a*a*4);if(ba)var d=Math.pow(2,Math.ceil(Math.log2(a)));performance.now();h.useProgram(I);ma.texture?(h.bindTexture(h.TEXTURE_2D,ma.texture),ba?(h.getExtension("OES_texture_float"),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,
a,a,0,h.RGBA,h.FLOAT,e)):h.texImage2D(h.TEXTURE_2D,0,h.RGBA32F,a,a,0,h.RGBA,h.FLOAT,e)):(h.activeTexture(h.TEXTURE1),ma.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,ma.texture),ba?(h.getExtension("OES_texture_float"),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,d,d,0,h.RGBA,h.FLOAT,null),h.texSubImage2D(h.TEXTURE_2D,0,0,0,a,a,h.RGBA,h.FLOAT,e)):h.texImage2D(h.TEXTURE_2D,0,h.RGBA32F,a,a,0,h.RGBA,h.FLOAT,e),sc(),h.uniform1i(h.getUniformLocation(I,"img_data"),1));h.useProgram(G);h.activeTexture(h.TEXTURE2);
performance.now();ma.update=!1}else ma.update=!0};ma.update=!1;var f="undefined"!==typeof f?f:{},Tb={},Ua;for(Ua in f)f.hasOwnProperty(Ua)&&(Tb[Ua]=f[Ua]);var Db=[],Vc="./this.program",Cb=function(e,a){throw a;},Bb=!1,Oa=!1,Ac=!1,Hg=!1,Hf=!1;Bb="object"===typeof window;Oa="function"===typeof importScripts;Ac=(Hg="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node)&&!Bb&&!Oa;Hf=!Bb&&!Ac&&!Oa;var Da="";if(Ac){Da="undefined/";var Qd,Rd;var Sd=function(e,
a){Qd||(Qd=require("fs"));Rd||(Rd=require("path"));e=Rd.normalize(e);e=Qd.readFileSync(e);return a?e:e.toString()};var Zb=function(e){e=Sd(e,!0);e.buffer||(e=new Uint8Array(e));Fc(e.buffer);return e};1<process.argv.length&&(Vc=process.argv[1].replace(/\\/g,"/"));Db=process.argv.slice(2);"undefined"!==typeof module&&(module.exports=f);process.on("uncaughtException",function(e){if(!(e instanceof Tc))throw e;});process.on("unhandledRejection",Ea);Cb=function(e){process.exit(e)};f.inspect=function(){return"[Emscripten Module object]"}}else if(Hf)"undefined"!=
typeof read&&(Sd=function(e){return read(e)}),Zb=function(e){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(e));e=read(e,"binary");Fc("object"===typeof e);return e},"undefined"!=typeof scriptArgs?Db=scriptArgs:"undefined"!=typeof arguments&&(Db=arguments),"function"===typeof quit&&(Cb=function(e){quit(e)}),"undefined"!==typeof print&&("undefined"===typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!==typeof printErr?printErr:print);else if(Bb||
Oa)Oa?Da=self.location.href:document.currentScript&&(Da=document.currentScript.src),Da=0!==Da.indexOf("blob:")?Da.substr(0,Da.lastIndexOf("/")+1):"",Sd=function(e){var a=new XMLHttpRequest;a.open("GET",e,!1);a.send(null);return a.responseText},Oa&&(Zb=function(e){var a=new XMLHttpRequest;a.open("GET",e,!1);a.responseType="arraybuffer";a.send(null);return new Uint8Array(a.response)});var ee=f.print||console.log.bind(console),Ga=f.printErr||console.warn.bind(console);for(Ua in Tb)Tb.hasOwnProperty(Ua)&&
(f[Ua]=Tb[Ua]);Tb=null;f.arguments&&(Db=f.arguments);f.thisProgram&&(Vc=f.thisProgram);f.quit&&(Cb=f.quit);var Ig={"f64-rem":function(e,a){return e%a},"debugger":function(){}},If=0,Ab;f.wasmBinary&&(Ab=f.wasmBinary);var Ya;f.noExitRuntime&&(Ya=f.noExitRuntime);"object"!==typeof WebAssembly&&Ga("no native wasm support detected");var ra,Jg=new WebAssembly.Table({initial:265,maximum:265,element:"anyfunc"}),Mc=!1,ae="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!==typeof TextDecoder&&
new TextDecoder("utf-16le");var Jc,K,V,Fa,H,Jf=f.TOTAL_MEMORY||57671680;if(ra=f.wasmMemory?f.wasmMemory:new WebAssembly.Memory({initial:Jf/65536}))var yb=ra.buffer;Jf=yb.byteLength;ce(yb);Fa[1043244]=9416080;var te=[],qe=[],Rf=[],se=[],Xa=0,Lc=null,zb=null;f.preloadedImages={};f.preloadedAudios={};var Na="a.out.wasm";fe(Na)||(Na=xb(Na));f.asm=function(){function e(a,c){f.asm=a.exports;Kc("wasm-instantiate")}function a(a){e(a.instance)}function d(a){return Qf().then(function(a){return WebAssembly.instantiate(a,
c)}).then(a,function(a){Ga("failed to asynchronously prepare wasm: "+a);Ea(a)})}var c={env:Td,wasi_unstable:Td,global:{NaN:NaN,Infinity:Infinity},"global.Math":Math,asm2wasm:Ig};de("wasm-instantiate");if(f.instantiateWasm)try{return f.instantiateWasm(c,e)}catch(b){return Ga("Module.instantiateWasm callback failed with error: "+b),!1}(function(){if(Ab||"function"!==typeof WebAssembly.instantiateStreaming||fe(Na)||"function"!==typeof fetch)return d(a);fetch(Na,{credentials:"same-origin"}).then(function(b){return WebAssembly.instantiateStreaming(b,
c).then(a,function(b){Ga("wasm streaming compile failed: "+b);Ga("falling back to ArrayBuffer instantiation");d(a)})})})();return{}};var na=[function(e){e!==De&&(De=e,document.body.style.cursor='url("'+r.cdn+"cursor"+e+'.gif"),auto')},function(){k("magicworkshopmenu").style.display="block";nb()},function(){Ye()},function(e,a,d,c,b){e=ia[e];e.style.backgroundPosition=48*b+"px "+48*a+"px";d&&(e.className="");0<c&&(e.innerHTML=c)},function(e){A("limit",e);rc(zd,e);rc(Ad,e);rc(Bd,e);rc(Cd,e)},function(e,
a){ob(Math.floor(e-k("tzar").width/2),Math.floor(a-k("tzar").height/2));lc()},function(){Qe()},function(e,a){setTimeout(p.removeAnim,e,a)},function(){gf()},function(){ff()},function(){var e=sb.viewF32(),a=yc.viewF32();h.bindBuffer(h.ARRAY_BUFFER,Bd);h.bufferSubData(h.ARRAY_BUFFER,16*e[4],a)},function(){var e=sb.viewF32(),a=yc.viewF32();h.bindBuffer(h.ARRAY_BUFFER,zd);h.bufferSubData(h.ARRAY_BUFFER,16*e[4],a)},function(e,a,d){a:{for(var c=0,b=fa.length;c<b;c++){var g=fa[c];if(g.superID===d){d=g;break a}}d=
void 0}e=new Uint32Array(ra.buffer,e,a);d&&d.sendDirectly("channelMessage","nehhof",e)},function(e,a,d,c,b,g,f){Df(e,a,d,c,b,g,f)},function(){tb()},function(e,a,d,c,b,g){Df(e,a,d,c,b,g)},function(){sf()},function(e,a,d){af(e,a,d)},function(){k("playersinfo").innerHTML=""},function(e,a,d,c,b,g){e=da(pa(e,17));k("playersinfo").innerHTML+='<span style="'+(g&&"text-decoration: line-through;color:#ff0000"||"")+'">'+e+'</span><span style="display:none">'+a+"</span><div class='playercolor' style='background:rgb("+
d+","+c+","+b+")'></div><span class='ping'></span><br>"},function(e,a,d){Od(e,0,a,d)},function(e){A(e);r.superID==e?(jb(m.ERR_SERVERKICK),uf()):(e=rf(e))&&e.end()},function(){X("returnmenu");k("oneplayertbody").innerHTML='<tr><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">-</button></td><td>'+m.RACE.toUpperCase()+"</td><td>"+m.TEAM.toUpperCase()+"</td></tr>";for(var e=0,a=p.nkingdom()-1;e<a;e++)k("oneplayertbody").innerHTML+='<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>';
k("addPlayer").onclick=Eg;k("removePlayer").onclick=Fg},function(e,a,d,c,b){for(c=c.toString(16);6>c.length;)c="0"+c;c="#"+c;zf[b].style.background=c;Bg[b].innerHTML=da(pa(e,20));e=Dg[b].getElementsByTagName("button")[0];e.iteam=b+1;e.onmousedown=Af;e.innerHTML=a;a=Cg[b].getElementsByTagName("button")[0];a.iteam=b+1;a.onmousedown=Bf;a.innerHTML=Z[d];d=document.createElement("input");d.type="color";d.iteam=b+1;d.value=c;d.svg=0==b;zf[b].appendChild(d);d.onchange=Cf},function(e,a){e&&(va.leftButton.className=
"");8*(e+1)<a&&(va.rightButton.className="")},function(e){if(k("progressvalue")){var a=k("progressvalue").innerHTML.split("/");a.length&&(k("progressone").value-=e,k("progressvalue").innerHTML=a[0]-e+"/"+a[1])}},function(e){af(e)},function(e,a,d){Wa(e,a,d)},function(e,a){e=yd(m[oa[e]],m[oa[a]]);k("msgs1").innerHTML+="<li>"+e+"</li>";qb()},function(e,a,d,c){aa||(e==Math.pow(2,31)-1&&(e="***"),a==Math.pow(2,31)-1&&(a="***"),d==Math.pow(2,31)-1&&(d="***"),c==Math.pow(2,31)-1&&(c="***"),Ge.innerHTML=
e,He.innerHTML=a,Ie.innerHTML=d,Je.innerHTML=c)},function(e,a){aa||(k("pop").innerHTML=e+"/"+a)},function(){tc()},function(e,a,d,c,b,g){var f=k("rndtable"),h=document.createElement("tr");f.appendChild(h);f=document.createElement("td");var n=document.createElement("select"),q=n;n.innerHTML='<option value="0">'+Z[0]+'</option><option value="1">'+Z[1]+'</option><option value="2">'+Z[2]+'</option><option value="3">'+Z[3]+"</option>";n.value=e;f.appendChild(n);h.appendChild(f);f=document.createElement("td");
n=document.createElement("select");n.innerHTML=Bc[e];n.value=a;n.rndid=g;n.onchange=Kg;q.types=n;q.onchange=Lg;f.appendChild(n);h.appendChild(f);f=document.createElement("td");n=document.createElement("input");n.value=d;n.onchange=Mg;n.type="number";n.rndid=g;f.appendChild(n);h.appendChild(f);f=document.createElement("td");e=document.createElement("label");e.className="container";a=document.createElement("input");a.type="checkbox";a.rndid=g;a.checked=c;a.onchange=Ng;c=document.createElement("span");
c.className="checkmark";e.appendChild(a);e.appendChild(c);f.appendChild(e);h.appendChild(f);c="<option value='"+(Math.pow(2,31)-1)+"'>Capturable</option>";f=0;for(e=p.nkingdom();f<e;f++)a=f?da(pa(p.empName(f),17)):m.MISC_NATURE3,c+='<option value="'+f+'">'+a+"</option>";f=document.createElement("td");n=document.createElement("select");n.innerHTML=c;n.rndid=g;n.value=b;n.onchange=Og;f.appendChild(n);h.appendChild(f);f=document.createElement("td");b=document.createElement("button");b.className="closeIcon";
b.onclick=Pg;b.rndid=g;f.appendChild(b);h.appendChild(f)},function(e){Wa(e)},function(e,a,d,c,b,g,f,h,k,m,p,q,r){kc(e,a,d,c,b,0,g,f,h,k,m,p,q,r)},function(e,a,d,c,b,g,f,h,k,m,p,q,r){kc(e,a,d,c,b,1,g,f,h,k,m,p,q,r)},function(e,a,d,c,b,g,f,h,n,p,q){f=c;h=[m.MP_SETUPMAP_M_TYPE_5,m.MP_SETUPMAP_M_TYPE_4,m.MP_SETUPMAP_M_TYPE_3,m.MP_SETUPMAP_M_TYPE_2,m.MP_SETUPMAP_M_TYPE_1,m.MP_SETUPMAP_M_TYPE_0];if(k("showGameInfo")){c="<table><tbody>";e==Math.pow(2,31)-1&&(e="***");a==Math.pow(2,31)-1&&(a="***");d==Math.pow(2,
31)-1&&(d="***");f==Math.pow(2,31)-1&&(f="***");b=[m.VIEWMSG_GOLD,e,m.MP_SETUPMAP_T_MAP_SIZE,n,m.VIEWMSG_WOOD,a,m.MP_SETUPMAP_T_TERRAIN,g,m.VIEWMSG_FOOD,d,m.INITIAL_PEASANTS,p,m.VIEWMSG_STONE,f,m.MP_SETUPMAP_T_MAP_TYPE,h[b],m.FREE_POP,q];g=b.length;for(n=0;n<g;n+=2)n%4||(n&&(c+="</tr>"),c+="<tr>"),c+="<td>"+b[n]+":</td><td>"+b[n+1]+"</td>";c+="</tbody></table>";k("showGameInfo").innerHTML=c}},function(){Pa("waitList");k("waitList").style.cssText="\n    position: fixed;\n    z-index: 90;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background: url(nehhon/text.png);\n    border: solid;\n    border-image: url(nehhon/border.gif) 23 repeat;\n    border-width: 23px;\n    padding: 45px;\n    "},
function(e,a,d,c){console.log(e,a,d,c)},function(){Ld()},function(){if(k("waitList")){var e=Sb.viewU32(),a=p.nkingdom();k("waitList").innerHTML="";for(var d="<h1>"+m.VIEWMSG_WAIT_PLAYERS+'</h1>\n    <table style="margin-top:37px;font-size:21px"><tbody>',c=1;c<a;c++)if(e[3*c]){var b=p.empName(c);b=da(pa(b,17));d+="<tr><td>"+b+" - "+e[3*c+1]+"%</td></tr>"}k("waitList").innerHTML+=d+"</tbody></table>"}},function(){Rb()},function(){ld()},function(){Jb();tc()},function(){ld();Jb();tc()},function(){rd()},
function(e){Id(e)},function(e,a){vc=h.RGB;var d=performance.now();Qb||(Qb=[]);var c=dc(p.crtStxt(),e),b=Math.floor(a/16777216);A(e,a);A(Math.floor(a/16777216*100)+"%");e=a/4096%4096;a=c.length/12288;var g=0;do{var f=a-g;4096<=e+f&&(f=4096-e);h.bindTexture(h.TEXTURE_2D,rg(b));var k=new Uint8Array(c.buffer,c.byteOffset+12288*g,12288*f);h.texSubImage2D(h.TEXTURE_2D,0,0,e,4096,f,vc,h.UNSIGNED_BYTE,k);g+=f;e=0;b++}while(g<a);h.activeTexture(h.TEXTURE2);A("gl",performance.now()-d)},function(e,a,d,c){jb(a&&
m[oa[a]],m[oa[e]],c,m[oa[d]])},function(e,a,d,c,b,g){k("custombody").innerHTML+="<tr>\n<td style='background:rgb("+c+","+b+","+g+')\' class="ucolor1"></td>\n<td class="username1">'+da(pa(e,20))+'</td>\n<td style="display:none" class="race1">'+d+'</td>\n<td class="team1">'+a+"</td></tr>"},function(e,a){eb(e,a)},function(e,a,d){ua.value=a;ua.max=d;mb.innerHTML=a+"/"+d;ua.style.display="block";k("kingdom").innerHTML=e+" "+m.SELVIEW_UNITS},function(e,a,d,c,b,g,f,h,k,m,p,q,r,u,w,z,A,D,E,y){Re(e,a,d,c,
b,g,f,h,k,m,p,q,r,u,w,z,A,D,E,y)},function(e,a,d,c,b,g,f,h,k){Qg(e,a,d,c,b,g,f,h,k)},function(){ma.update=!0},function(e,a,d,c,b,g,f,h){var l="";g&&(l+="<span>"+m[oa[g]]+"</span>");f&&(l+="<span>"+m[oa[f]]+"</span>");if(h){l+='<span class="red">'+m.MISC_REQ3+": ";g=p.shapoint();g=new Int32Array(ra.buffer,g,h);for(f=0;f<h;f++)l+=m[oa[g[f]]],f+1<h&&(l+=", ");l+="</span>"}l+="<span>";e&&(l+=e+"<img class='resource' src='nehhon/gold.gif' /> ");a&&(l+=a+"<img class='resource' src='nehhon/wood.gif' /> ");
d&&(l+=d+"<img class='resource' src='nehhon/food.gif' /> ");c&&(l+=c+"<img class='resource' src='nehhon/stone.gif' /> ");l+="</span>";b&&(l+="<span class='shotcut'>"+String.fromCharCode(b).toUpperCase()+"</span>");fd.innerHTML=l},function(e){Xc(e)},function(){h.getError()===h.CONTEXT_LOST_WEBGL&&(h=k("tzar").getContext("webgl2",{antialias:!1,alpha:!1}),A("restored"));if(!Jd){var e=ba?"precision highp float;\nattribute vec3 a_position;\nattribute vec4 a_texCoord;\nattribute vec4 a_physic;\nattribute vec4 a_margins;\nattribute float a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D u_image1;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\n\nuniform float zMax;\nvarying highp vec2 vTextureCoord;\nvarying vec4 v_kcolor;\nvarying float width;\nvarying float rColor;\nvarying float oy;\n\n\nfloat delayr(float pos){\nhighp vec2 xy = vec2(mod(pos,128.0) ,   floor(pos/128.0) )/128.0;\nreturn (texture2D(delay, xy).r);\n}\n\n\nvoid main() {\n    const highp float TSIZE=4096.0;\n    float t;\n    highp float jump=0.0;\n\n    highp vec2 txtcord;\n    txtcord.y=floor(a_texCoord.x);\n    txtcord.x=a_texCoord.x-txtcord.y;\n    txtcord.y/=TSIZE;\n\n    vec2 sizes = vec2(a_margins[0],a_margins[1]);\n    float pack=floor(a_texCoord[3]);\n\n\n    float frames=floor((pack)/65536.0);\n    float fps=mod(pack,65536.0);\n\n    if(frames>100.0) {\n        if(frames<200.0) rColor=1.0; else rColor=2.0;\n        frames-=100.0;\n    }\n\n\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=floor(t * fps*0.001);         \n}else{\n\n    //fps=12.0;\n    //jump=floor(t * fps*0.001);  \n\n\n\n    float index=floor(fps-100.0);\n\n    float spt= mod(t,delayr(frames-1.0+index));\n    bool stop=false;\n        for(int i=0;i<55;i++){\n        if(!stop){\n        jump=float(i);\n        if(jump<frames) \n        if(delayr(jump+index)>spt)\n        stop=true;\n        }\n        }\n\n}\n\njump=mod(jump,frames);\ntxtcord.x+=jump*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n}\n\n\n    vec2 mxy=vec2(0.0);\n    oy=txtcord.y*TSIZE;\n\n    \n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n        tsizes=vec2(64.0);\n    }\n    width=tsizes.x;\n\n    if(a_step==1.0||a_step==3.0){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2.0||a_step==3.0){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n\tfloat z=a_position.z;\n\n\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\n    if(miniMap<2) mxy*=0.0;\n\t}\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n\n    mxy.y+=physicY;\n\n\nif(miniMap!=0){\n\tz=0.0;\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\n}\n\n\n\n   gl_Position = vec4(((a_position.xy+mxy) / u_resolution * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\n\nvec4 outColor=texture2D(colorArray,vec2(a_texCoord.z/64.0,0));\n//outColor=vec4(1.0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n":
"#version 300 es\nprecision highp float;\n       \nin vec3 a_position;\nin vec4 a_texCoord;\nin vec4 a_physic;\nin vec4 a_margins;\nin uint a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\n\nuniform float zMax;\nout highp vec2 vTextureCoord;\nout vec4 v_kcolor;\nout float oy;\nout float width;\nflat out int rColor;\n\nvec4 superArray(in highp int position) {\n     return vec4(0.0);\n}\n\nvoid main() {\nfloat t;\nconst highp float TSIZE=4096.0;\n\nhighp vec2 txtcord;\ntxtcord.y=floor(a_texCoord.x);\ntxtcord.x=a_texCoord.x-txtcord.y;\ntxtcord.y/=TSIZE;\n\nvec2 sizes = vec2(a_margins[0],a_margins[1]);\nint pack=int(floor(a_texCoord[3]));\n\nint frames=(pack>>16)&0xffff;\nfloat fps=float(pack&0xffff);\n\n\nif(frames>100) {\nif(frames<200) rColor=1; else rColor=2;\nframes-=100;\n}\n\nint jump=0;\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=int(floor(t * fps*0.001));         \n}else{\n\n\nint index=int(floor(fps-100.0));\n\nfloat spt= mod(t,texelFetch(delay, ivec2(frames-1+index, 0), 0).r);\n\nfor(jump=0;jump<frames;jump++)\nif(texelFetch(delay, ivec2(jump+index, 0), 0).r>spt){ \nbreak;\n}\n\n\n\n\n}\n\njump=(jump%frames);\n\n\ntxtcord.x+=float(jump)*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n\n\n\n}\n\nvec2 mxy=vec2(0.0);\n\n    if(miniMap==3){\n        mxy=sizes/2.0;\n        sizes=vec2(a_margins[3]*32.0);\n        mxy+=-sizes;\n        sizes=sizes*2.0+1.0;\n    }\n\n    oy=txtcord.y*TSIZE;\n\n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n         tsizes=vec2(64.0);\n    }\n    width=tsizes.x;\n\n    if(a_step==1u||a_step==3u){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2u||a_step==3u){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n\n\tfloat z=a_position.z;\n\n\n    \n\nif(miniMap==3&&sizes==vec2(0.0)){\n    mxy=vec2(0.0);\n}\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\nif(miniMap!=2) mxy*=0.0;\n\t}\n\n\n\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n    mxy.y+=physicY;\n\n\nif(miniMap!=0){\n\tz=0.0;\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\n}\n\n\n   gl_Position = vec4(((a_position.xy+mxy) / u_resolution * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\nvec4 outColor=texelFetch(colorArray, ivec2(a_texCoord.z, 0), 0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n";
var a=h.createShader(h.VERTEX_SHADER);h.shaderSource(a,e);h.compileShader(a);var d=ba?"precision highp float;\n\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nvarying vec4 v_kcolor;\nvarying highp vec2 vTextureCoord;\nvarying float width;\nvarying float oy;\nvarying float rColor;\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture2D(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture2D(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture2D(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture2D(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture2D(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture2D(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture2D(img_common[6], coords);\n}\n\n\nvoid main() {\n    const highp float TSIZE=4096.0;\n\n\nif(miniMap==0){\n\n\n    float dy=floor(vTextureCoord.y*4096.0-oy);\n    highp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/4096.0,oy/4096.0);\n    txtCoords.y+=floor(txtCoords.x)/4096.0;\n    \n    vec4 color=tcmm(txtCoords);\n    if(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\n    if(rColor==2.0) color.a=(color.r+color.g+color.b)/2.5;\n    if(color.a<0.1) discard;\n\nif(rColor==1.0 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)&&v4no(color,95)&&v4no(color,96)&&v4no(color,98)\n&&v4no(color,101)&&v4no(color,103)&&v4no(color,107)&&v4no(color,108)\n&&v4no(color,109)&&v4no(color,118)&&v4no(color,121)&&v4no(color,124)\n&&v4no(color,134)&&v4no(color,135)&&v4no(color,139)&&v4no(color,148)\n&&v4no(color,150)&&v4no(color,151)&&v4no(color,156)&&v4no(color,163)\n&&v4no(color,164)&&v4no(color,165)&&v4no(color,166)&&v4no(color,167)\n&&v4no(color,173)&&v4no(color,177)&&v4no(color,180)&&v4no(color,183)\n&&v4no(color,185)&&v4no(color,186)&&v4no(color,195)&&v4no(color,196)\n&&v4no(color,198)&&v4no(color,200)&&v4no(color,203)&&v4no(color,210)\n&&v4no(color,214)&&v4no(color,215)&&v4no(color,223)&&v4no(color,225)\n&&v4no(color,230)&&v4no(color,231)&&v4no(color,241)&&v4no(color,251)\n&&v4no(color,252)&&v4no(color,253)&&v4no(color,254)){\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0) color*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n\n\n\n\n\n//vec4 light=vec4(1.0);\n\ngl_FragColor=color*u_ambient;\n}else{\n\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\ngl_FragColor=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\ngl_FragColor=v_kcolor;\n}\n\n}":
"#version 300 es\nprecision highp float;\n\n\nuniform vec2 u_translation;\nuniform sampler2D fogMap;\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nuniform float mx;\nuniform float mapSize;\nuniform float zoom;\n\nin vec4 v_kcolor;\nin highp vec2 vTextureCoord;\nin float width;\nin float oy;\nflat in int rColor;\nout vec4 COLOR;\n\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture(img_common[6], coords);\n}\n\n\n\nvoid main() {\nconst highp float TSIZE=4096.0;\n\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\nif(miniMap!=0){\n//xy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\n//vec4 fog=texture(fogMap,vec2(xy.x,-xy.y)/(mapSize*32.0));\n\n\n\nif(miniMap==0){\n\n\nfloat dy=floor(vTextureCoord.y*4096.0-oy);\nhighp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/4096.0,oy/4096.0);\ntxtCoords.y+=floor(txtCoords.x)/4096.0;\n\nvec4 color=tcmm(txtCoords);\nif(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\nif(rColor==2) color.a=(color.r+color.g+color.b)/2.5;\nif(color.a<0.1) discard;\n\n\nif(rColor==1 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)&&v4no(color,95)&&v4no(color,96)&&v4no(color,98)\n&&v4no(color,101)&&v4no(color,103)&&v4no(color,107)&&v4no(color,108)\n&&v4no(color,109)&&v4no(color,118)&&v4no(color,121)&&v4no(color,124)\n&&v4no(color,134)&&v4no(color,135)&&v4no(color,139)&&v4no(color,148)\n&&v4no(color,150)&&v4no(color,151)&&v4no(color,156)&&v4no(color,163)\n&&v4no(color,164)&&v4no(color,165)&&v4no(color,166)&&v4no(color,167)\n&&v4no(color,173)&&v4no(color,177)&&v4no(color,180)&&v4no(color,183)\n&&v4no(color,185)&&v4no(color,186)&&v4no(color,195)&&v4no(color,196)\n&&v4no(color,198)&&v4no(color,200)&&v4no(color,203)&&v4no(color,210)\n&&v4no(color,214)&&v4no(color,215)&&v4no(color,223)&&v4no(color,225)\n&&v4no(color,230)&&v4no(color,231)&&v4no(color,241)&&v4no(color,251)\n&&v4no(color,252)&&v4no(color,253)&&v4no(color,254))\n{\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0)\n{\ncolor*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n}\n\n\n\n\n\n\n//light = texture(fogMap, gl_FragCoord.xy/u_resolution)/u_ambient+vec4(1.0,1.0,1.0,0.0)*u_ambient;\n\nCOLOR=color*u_ambient;\n}else if(miniMap<3){\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\nCOLOR=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\nCOLOR=v_kcolor;\n}else{\n\nCOLOR=vec4(1.0);\n    \n}\n\n}";
e=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(e,d);h.compileShader(e);G=h.createProgram();h.attachShader(G,a);h.attachShader(G,e);h.linkProgram(G);h.useProgram(G);(a=h.getShaderInfoLog(a))&&console.log("Shader compiler log1: "+a);(a=h.getShaderInfoLog(e))&&console.log("Shader compiler log1: "+a);e=ba?"precision highp float;\nattribute vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}":
"#version 300 es\nprecision highp float;\nin vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}";a=h.createShader(h.VERTEX_SHADER);h.shaderSource(a,e);h.compileShader(a);d=ba?"precision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform vec2 u_translation;\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n#define TSIZE 4096.0;\n\nuniform sampler2D u_image1;\n\nhighp vec2 oneD2D(highp float xy,float sum){\n    float fl=floor(xy);\n    float x=xy-fl+sum/TSIZE;\n    float y=(fl+floor(x))/TSIZE;\n    return vec2(x, y);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture2D(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture2D(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture2D(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture2D(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture2D(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture2D(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture2D(img_common[6], coords);\n    }\nvoid main() {\nvec4 color;\n\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0) discard;\n\nvec4 coords=texture2D(img_data,xy/(mapSize*32.0));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,1.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nfloat wids=floor(coords[3]);\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=floor(wids/65536.0)*32.0;\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x+xym32.y*w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=mod(floor(wids/256.0),256.0);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=mod(wids,256.0);\n}\n\n\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,1.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n    w=512.0;\n    xym32.x+=w*w*u_fps;\n}\ncolor=tcmm(oneD2D(tid,xym32.x+xym32.y*w));  \n\n}\n\nif(miniMap==0) color*=u_ambient;\n\n\ngl_FragColor=color;\n}":
"#version 300 es\nprecision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform vec2 u_translation;\n\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nout vec4 COLOR;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n\n#define TSIZE 4096.0\n\nvec2 oneD2D(highp float xy,float sum){\n    float fl=floor(xy);\n    float x=xy-fl+sum/TSIZE;\n    float y=(fl+floor(x))/TSIZE;\n    return vec2(x, y);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture(img_common[6], coords);\n    }\n\nvoid main() {\nvec4 color;\n\n\nvec2 xy = vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\n//vec4 fog=texture(fogMap,vec2(xy.x,-xy.y)/(mapSize*32.0));\n\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0) discard;\n\nvec4 coords=texture(img_data,xy/(mapSize*32.0));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,1.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nint wids=int(floor(coords[3]));\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=float((wids>>16)&0xff)*32.0;\n\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x+xym32.y*w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=float((wids>>8)&0xff);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=float(wids&0xff);\n}\n\n\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,1.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n     w=512.0;\n     xym32.x+=w*w*u_fps;\n}\n\ncolor=tcmm(oneD2D(tid,xym32.x+xym32.y*w));  \n\n}\n\nif(miniMap==0) color*=u_ambient;\n\n\n//\nCOLOR=color;\n}";
e=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(e,d);h.compileShader(e);I=h.createProgram();h.attachShader(I,a);h.attachShader(I,e);h.linkProgram(I);(a=h.getShaderInfoLog(a))&&console.log("Shader1 compiler log T: "+a);(a=h.getShaderInfoLog(e))&&console.log("Shader compiler log T: "+a)}a=h.getAttribLocation(G,"a_position");e=h.getAttribLocation(G,"a_texCoord");var c=h.getAttribLocation(G,"a_step");d=h.getAttribLocation(G,"a_physic");var b=h.getAttribLocation(G,"a_margins");h.useProgram(I);var g=
h.getUniformLocation(I,"minimapMargin");Ob=h.getUniformLocation(I,"u_translation");Ed=h.getUniformLocation(I,"u_resolution");Dd=h.getUniformLocation(I,"u_fps");Ue=h.getUniformLocation(I,"u_ambient");pc=h.getUniformLocation(I,"zoom");h.getUniformLocation(I,"mx");h.getUniformLocation(I,"borderCoords");h.getUniformLocation(I,"waterBorder");oc=h.getUniformLocation(I,"miniMap");P=parseInt(localStorage.scale)/100;h.uniform1i(oc,0);h.uniform2fv(Ob,[0,0]);h.uniform1f(Dd,-1);h.uniform1f(pc,P);h.uniform1f(h.getUniformLocation(I,
"mx"),0);ba?h.uniform1f(h.getUniformLocation(I,"mapSize"),Math.pow(2,Math.ceil(Math.log2(p.mapWidth())))):h.uniform1f(h.getUniformLocation(I,"mapSize"),p.mapWidth());aa?h.uniform2fv(g,[0*P,-60*P]):h.uniform2fv(g,[-4*P,-31*P]);g=h.getAttribLocation(I,"a_position");Fd=kf();rb(Fd);var f=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,f);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),h.STATIC_DRAW);h.enableVertexAttribArray(g);h.vertexAttribPointer(g,2,h.FLOAT,!1,0,0);rb(null);
h.useProgram(G);h.bindBuffer(h.ARRAY_BUFFER,null);Gd=kf();rb(Gd);df=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,df);h.enableVertexAttribArray(c);ba?(qc=h.getExtension("ANGLE_instanced_arrays"),h.vertexAttribPointer(c,1,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),h.STATIC_DRAW),qc.vertexAttribDivisorANGLE(c,0)):(h.vertexAttribIPointer(c,1,h.UNSIGNED_BYTE,0,0),h.bufferData(h.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),h.STATIC_DRAW),h.vertexAttribDivisor(c,0));c=p.mapWidth();
bf=Math.floor(c*c/2);zd=Pb(e,4);Ad=Pb(a,3);Bd=Pb(d,4);Cd=Pb(b,4);rb(null);nc=h.getUniformLocation(G,"u_resolution");Ve=h.getUniformLocation(G,"u_ambient");Nb=h.getUniformLocation(G,"u_translation");mc=h.getUniformLocation(G,"zoom");cf=h.getUniformLocation(G,"now");Mb=h.getUniformLocation(G,"miniMap");h.uniform1f(h.getUniformLocation(G,"zMax"),u.zMax);h.uniform1i(Mb,0);h.useProgram(G);a=Yc(p.sharedDelayID(),1323);u.daylength||(u.daylength=2880);u.initialhour||(u.initialhour=12);e=0;for(d=ya.length;e<
d;e++).55>ya[e]&&(ya[e]=.55);Ce();h.uniform1f(h.getUniformLocation(G,"mapSize"),p.mapWidth());h.uniform1f(h.getUniformLocation(G,"mx"),-r.mx*P);h.uniform1f(mc,P);h.uniform2fv(Nb,[0,0]);wc.changed=0;window.addEventListener("resize",wc,!1);wc();h.blendEquation(h.FUNC_ADD);h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA);h.disable(h.DITHER);h.disable(h.BLEND);performance.now();if(!Jd){tc();h.activeTexture(h.TEXTURE0);d=h.createTexture();h.bindTexture(h.TEXTURE_2D,d);if(ba){h.getExtension("OES_texture_float");
b=new Float32Array(65536);for(e=0;e<b.length;e++)b[4*e]=a[e];h.texImage2D(h.TEXTURE_2D,0,h.RGBA,128,128,0,h.RGBA,h.FLOAT,b)}else h.texImage2D(h.TEXTURE_2D,0,h.R16F,a.length,1,0,h.RED,h.FLOAT,a);sc();h.bindTexture(h.TEXTURE_2D,null);h.bindTexture(h.TEXTURE_2D,d);h.uniform1i(h.getUniformLocation(G,"delay"),0);h.activeTexture(h.TEXTURE2)}h.activeTexture(h.TEXTURE2);p.setupGL(P);h.enable(h.DEPTH_TEST);h.depthFunc(h.LEQUAL);R.fp1000=1E3;R.delta=0;R.now=0;R.frameCount=0;h.bindTexture(h.TEXTURE_2D,void 0);
Jd=sa.setup=!0},function(e,a,d,c,b,g,f,h,m){d=da(pa(d,17));a=id(a);var l=k("edpltbl").getElementsByTagName("input"),n=8*e;l[n].onchange=Rg;l[n+1].onchange=Sg;l[n+2].oninput=Cc;l[n+3].oninput=Cc;l[n+4].oninput=Cc;l[n+5].oninput=Cc;l[n].value=a;l[n+1].value=d;l[n+2].value=2147483647==b?"\u221e":b;l[n+3].value=2147483647==g?"\u221e":g;l[n+4].value=2147483647==f?"\u221e":f;l[n+5].value=2147483647==h?"\u221e":h;l[n+6].value=c;l[n+7].value=m;l[n+2].res=0;l[n+3].res=1;l[n+4].res=2;l[n+5].res=3;l[n+6].onchange=
Tg;l[n+6].checked=c;l[n+7].onchange=Ug;l[n].team=e+1;l[n+1].team=e+1;l[n+2].team=e+1;l[n+3].team=e+1;l[n+4].team=e+1;l[n+5].team=e+1;l[n+6].team=e+1;l[n+7].team=e+1}];qe.push({func:function(){Vg()}});var qa={buffers:[null,[],[]],printChar:function(e,a){var d=qa.buffers[e];0===a||10===a?((1===e?ee:Ga)(Xd(d,0)),d.length=0):d.push(a)},varargs:0,get:function(e){qa.varargs+=4;return Fa[qa.varargs-4>>2]},getStr:function(){return ea(qa.get())},get64:function(){var e=qa.get();qa.get();return e},getZero:function(){qa.get()}},
J={xhrs:[],setu64:function(e,a){H[e>>2]=a;H[e+4>>2]=a/4294967296|0},openDatabase:function(e,a,d,c){try{var b=indexedDB.open(e,a)}catch(g){return c(g)}b.onupgradeneeded=function(a){a=a.target.result;a.objectStoreNames.contains("FILES")&&a.deleteObjectStore("FILES");a.createObjectStore("FILES")};b.onsuccess=function(a){d(a.target.result)};b.onerror=function(a){c(a)}},staticInit:function(){var e="undefined"===typeof ENVIRONMENT_IS_FETCH_WORKER;J.openDatabase("emscripten_filesystem",1,function(a){J.dbInstance=
a;e&&Kc("library_fetch_init")},function(){J.dbInstance=!1;e&&Kc("library_fetch_init")});"undefined"!==typeof ENVIRONMENT_IS_FETCH_WORKER&&ENVIRONMENT_IS_FETCH_WORKER||de("library_fetch_init")}};me=Ac?function(){var e=process.hrtime();return 1E3*e[0]+e[1]/1E6}:"undefined"!==typeof dateNow?dateNow:"object"===typeof performance&&performance&&"function"===typeof performance.now?function(){return performance.now()}:Date.now;J.staticInit();var Td={___cxa_uncaught_exceptions:function(){return Wg.uncaught_exceptions},
___gxx_personality_v0:function(){},___wasi_fd_write:function(){return je.apply(null,arguments)},__emscripten_fetch_cache_data:Sc,__emscripten_fetch_delete_cached_data:pe,__emscripten_fetch_free:function(e){delete J.xhrs[e-1]},__emscripten_fetch_load_cached_data:oe,__emscripten_fetch_xhr:$b,__emscripten_get_fetch_work_queue:function(){return 4173168},__memory_base:1024,__table_base:0,_emscripten_asm_const_i:function(e){return na[e]()},_emscripten_asm_const_idddd:function(e,a,d,c,b){return na[e](a,
d,c,b)},_emscripten_asm_const_ii:function(e,a){return na[e](a)},_emscripten_asm_const_iii:function(e,a,d){return na[e](a,d)},_emscripten_asm_const_iiii:function(e,a,d,c){return na[e](a,d,c)},_emscripten_asm_const_iiiii:function(e,a,d,c,b){return na[e](a,d,c,b)},_emscripten_asm_const_iiiiii:function(e,a,d,c,b,g){return na[e](a,d,c,b,g)},_emscripten_asm_const_iiiiiii:function(e,a,d,c,b,g,f){return na[e](a,d,c,b,g,f)},_emscripten_asm_const_iiiiiiii:function(e,a,d,c,b,g,f,h){return na[e](a,d,c,b,g,f,
h)},_emscripten_asm_const_iiiiiiiii:function(e,a,d,c,b,g,f,h,k){return na[e](a,d,c,b,g,f,h,k)},_emscripten_asm_const_iiiiiiiiii:function(e,a,d,c,b,g,f,h,k,m){return na[e](a,d,c,b,g,f,h,k,m)},_emscripten_asm_const_iiiiiiiiiiii:function(e,a,d,c,b,g,f,h,k,m,p,q){return na[e](a,d,c,b,g,f,h,k,m,p,q)},_emscripten_asm_const_iiiiiiiiiiiiii:function(e,a,d,c,b,g,f,h,k,m,p,q,r,u){return na[e](a,d,c,b,g,f,h,k,m,p,q,r,u)},_emscripten_asm_const_iiiiiiiiiiiiiiiiiiiii:function(e,a,d,c,b,g,f,h,k,m,p,q,r,u,w,z,A,D,
E,y,G){return na[e](a,d,c,b,g,f,h,k,m,p,q,r,u,w,z,A,D,E,y,G)},_emscripten_get_heap_size:le,_emscripten_get_now:me,_emscripten_is_main_browser_thread:function(){return!Oa},_emscripten_is_main_runtime_thread:function(){Ga("missing function: emscripten_is_main_runtime_thread");Ea(-1)},_emscripten_memcpy_big:function(e,a,d){K.set(K.subarray(a,a+d),e)},_emscripten_resize_heap:function(e){var a=le();if(2147418112<e)return!1;for(a=Math.max(a,16777216);a<e;)a=536870912>=a?Ub(2*a,65536):Math.min(Ub((3*a+2147483648)/
4,65536),2147418112);return ne(a)?!0:!1},_emscripten_start_fetch:function(e,a,d,c,b){"undefined"!==typeof Ya&&(Ya=!0);var g=e+112,f=ea(g),h=H[g+36>>2],k=H[g+40>>2],m=H[g+44>>2],p=H[g+48>>2],q=H[g+52>>2],r=!!(q&4),u=!!(q&32);q=!!(q&16);var w=function(b,c,d){h?vb(h,b):a&&a(b)},z=function(a,b,d){m?vb(m,a):c&&c(a)},A=function(a,b,c){k?vb(k,a):d&&d(a)},D=function(a,c,d){p?vb(p,a):b&&b(a)},E=function(a,b,c){$b(a,w,A,z,D)},y=function(b,c,d){Sc(J.dbInstance,b,c.response,function(b,c,d){h?vb(h,b):a&&a(b)},
function(b,c,d){h?vb(h,b):a&&a(b)})},G=function(a,b,c){$b(a,y,A,z,D)};if(!(q&&"EM_IDB_STORE"!==f&&"EM_IDB_DELETE"!==f||J.dbInstance))return A(e,0,"IndexedDB is not open"),0;if("EM_IDB_STORE"===f)f=H[g+84>>2],Sc(J.dbInstance,e,K.slice(f,f+H[g+88>>2]),w,A);else if("EM_IDB_DELETE"===f)pe(J.dbInstance,e,w,A);else if(q){if(u)return 0;$b(e,r?y:w,A,z,D)}else oe(J.dbInstance,e,w,u?A:r?G:E);return e},_fd_write:je,abort:Ea,abortOnCannotGrowMemory:function(e){Ea("OOM")},demangle:function(e){return e},demangleAll:he,
emscripten_realloc_buffer:ne,flush_NO_FILESYSTEM:function(){var e=f._fflush;e&&e(0);e=qa.buffers;e[1].length&&qa.printChar(1,10);e[2].length&&qa.printChar(2,10)},getTempRet0:function(){return If},jsStackTrace:ie,memory:ra,setTempRet0:function(e){If=e},stackTrace:function(){var e=ie();f.extraStackTrace&&(e+="\n"+f.extraStackTrace());return he(e)},table:Jg,tempDoublePtr:4173184},Kf=f.asm({},Td,yb);f.asm=Kf;var Vg=f.__GLOBAL__sub_I_nh_cpp=function(){return f.asm.__GLOBAL__sub_I_nh_cpp.apply(null,arguments)};
f.__Z10EDbrushchdi=function(){return f.asm.__Z10EDbrushchdi.apply(null,arguments)};f.__Z10EDbrushchsi=function(){return f.asm.__Z10EDbrushchsi.apply(null,arguments)};f.__Z10Uint8Arrayj=function(){return f.asm.__Z10Uint8Arrayj.apply(null,arguments)};f.__Z10canvasSizejj=function(){return f.asm.__Z10canvasSizejj.apply(null,arguments)};f.__Z10changePagei=function(){return f.asm.__Z10changePagei.apply(null,arguments)};f.__Z10changeRaceji=function(){return f.asm.__Z10changeRaceji.apply(null,arguments)};
f.__Z10changeTeamji=function(){return f.asm.__Z10changeTeamji.apply(null,arguments)};f.__Z10checkStockv=function(){return f.asm.__Z10checkStockv.apply(null,arguments)};f.__Z10fullRNDmapb=function(){return f.asm.__Z10fullRNDmapb.apply(null,arguments)};f.__Z10getTerrainv=function(){return f.asm.__Z10getTerrainv.apply(null,arguments)};f.__Z10mouseEnterj=function(){return f.asm.__Z10mouseEnterj.apply(null,arguments)};f.__Z10movtablexev=function(){return f.asm.__Z10movtablexev.apply(null,arguments)};f.__Z10nameSharedPjS_j=
function(){return f.asm.__Z10nameSharedPjS_j.apply(null,arguments)};f.__Z10pidkingdomj=function(){return f.asm.__Z10pidkingdomj.apply(null,arguments)};f.__Z10removeAnimjj=function(){return f.asm.__Z10removeAnimjj.apply(null,arguments)};f.__Z10searchUnitth=function(){return f.asm.__Z10searchUnitth.apply(null,arguments)};f.__Z10setupGuidev=function(){return f.asm.__Z10setupGuidev.apply(null,arguments)};f.__Z10setupOnlIDj=function(){return f.asm.__Z10setupOnlIDj.apply(null,arguments)};f.__Z10stprndobjsj=
function(){return f.asm.__Z10stprndobjsj.apply(null,arguments)};f.__Z10tempstraddv=function(){return f.asm.__Z10tempstraddv.apply(null,arguments)};f.__Z10touchStartjj=function(){return f.asm.__Z10touchStartjj.apply(null,arguments)};f.__Z10unitActionj=function(){return f.asm.__Z10unitActionj.apply(null,arguments)};f.__Z10userConfigj=function(){return f.asm.__Z10userConfigj.apply(null,arguments)};f.__Z11EDbrushstopv=function(){return f.asm.__Z11EDbrushstopv.apply(null,arguments)};f.__Z11EDchangeResjjj=
function(){return f.asm.__Z11EDchangeResjjj.apply(null,arguments)};f.__Z11Uint16Arrayj=function(){return f.asm.__Z11Uint16Arrayj.apply(null,arguments)};f.__Z11Uint32Arrayj=function(){return f.asm.__Z11Uint32Arrayj.apply(null,arguments)};f.__Z11changeColorjj=function(){return f.asm.__Z11changeColorjj.apply(null,arguments)};f.__Z11createItemsv=function(){return f.asm.__Z11createItemsv.apply(null,arguments)};f.__Z11downloadGrav=function(){return f.asm.__Z11downloadGrav.apply(null,arguments)};f.__Z11getBufferIDv=
function(){return f.asm.__Z11getBufferIDv.apply(null,arguments)};f.__Z11movtableADDjjjj=function(){return f.asm.__Z11movtableADDjjjj.apply(null,arguments)};f.__Z11setupEditorv=function(){return f.asm.__Z11setupEditorv.apply(null,arguments)};f.__Z11setupRandomi=function(){return f.asm.__Z11setupRandomi.apply(null,arguments)};f.__Z11showrndobjsv=function(){return f.asm.__Z11showrndobjsv.apply(null,arguments)};f.__Z11sstextStartj=function(){return f.asm.__Z11sstextStartj.apply(null,arguments)};f.__Z11synchroHashv=
function(){return f.asm.__Z11synchroHashv.apply(null,arguments)};f.__Z12EDchangeNamej=function(){return f.asm.__Z12EDchangeNamej.apply(null,arguments)};f.__Z12EDchangeTeamjj=function(){return f.asm.__Z12EDchangeTeamjj.apply(null,arguments)};f.__Z12bufferMarginfffjf=function(){return f.asm.__Z12bufferMarginfffjf.apply(null,arguments)};f.__Z12deletePlayerjb=function(){return f.asm.__Z12deletePlayerjb.apply(null,arguments)};f.__Z12executeOrderjj=function(){return f.asm.__Z12executeOrderjj.apply(null,
arguments)};f.__Z12plymapeditorv=function(){return f.asm.__Z12plymapeditorv.apply(null,arguments)};f.__Z12setupKingdomjjjjhbjjj=function(){return f.asm.__Z12setupKingdomjjjjhbjjj.apply(null,arguments)};f.__Z12setupVersionjbb=function(){return f.asm.__Z12setupVersionjbb.apply(null,arguments)};f.__Z12unitObjetivej=function(){return f.asm.__Z12unitObjetivej.apply(null,arguments)};f.__Z13EDchangeColorjj=function(){return f.asm.__Z13EDchangeColorjj.apply(null,arguments)};f.__Z13configTerrainv=function(){return f.asm.__Z13configTerrainv.apply(null,
arguments)};f.__Z13randomTerrainj=function(){return f.asm.__Z13randomTerrainj.apply(null,arguments)};f.__Z13readSavegame0j=function(){return f.asm.__Z13readSavegame0j.apply(null,arguments)};f.__Z13resetGLbufferv=function(){return f.asm.__Z13resetGLbufferv.apply(null,arguments)};f.__Z13setupOnlTablej=function(){return f.asm.__Z13setupOnlTablej.apply(null,arguments)};f.__Z13sharedDelayIDv=function(){return f.asm.__Z13sharedDelayIDv.apply(null,arguments)};f.__Z13sharedFloatIDv=function(){return f.asm.__Z13sharedFloatIDv.apply(null,
arguments)};f.__Z13startMovementv=function(){return f.asm.__Z13startMovementv.apply(null,arguments)};f.__Z13tempointeraddj=function(){return f.asm.__Z13tempointeraddj.apply(null,arguments)};f.__Z13updateRNDtypejj=function(){return f.asm.__Z13updateRNDtypejj.apply(null,arguments)};f.__Z14customMapTablev=function(){return f.asm.__Z14customMapTablev.apply(null,arguments)};f.__Z14editorKingdomsv=function(){return f.asm.__Z14editorKingdomsv.apply(null,arguments)};f.__Z14finishSavegamev=function(){return f.asm.__Z14finishSavegamev.apply(null,
arguments)};f.__Z14onlineKingdomsv=function(){return f.asm.__Z14onlineKingdomsv.apply(null,arguments)};f.__Z14randomKingdomsi=function(){return f.asm.__Z14randomKingdomsi.apply(null,arguments)};f.__Z14setupResourcesjjjjt=function(){return f.asm.__Z14setupResourcesjjjjt.apply(null,arguments)};f.__Z15configRandomMapv=function(){return f.asm.__Z15configRandomMapv.apply(null,arguments)};f.__Z15getColorTexturev=function(){return f.asm.__Z15getColorTexturev.apply(null,arguments)};f.__Z15setupOnlineGamePjS_j=
function(){return f.asm.__Z15setupOnlineGamePjS_j.apply(null,arguments)};f.__Z15unitSearchValidjjj=function(){return f.asm.__Z15unitSearchValidjjj.apply(null,arguments)};f.__Z15updateRNDnumberjj=function(){return f.asm.__Z15updateRNDnumberjj.apply(null,arguments)};f.__Z16EDgetTerrainInfov=function(){return f.asm.__Z16EDgetTerrainInfov.apply(null,arguments)};f.__Z16addEditorKingdomj=function(){return f.asm.__Z16addEditorKingdomj.apply(null,arguments)};f.__Z16delEditorKingdomj=function(){return f.asm.__Z16delEditorKingdomj.apply(null,
arguments)};f.__Z16setupTranslationjj=function(){return f.asm.__Z16setupTranslationjj.apply(null,arguments)};f.__Z16updateRNDeach256jj=function(){return f.asm.__Z16updateRNDeach256jj.apply(null,arguments)};f.__Z16updateRNDkingdomjj=function(){return f.asm.__Z16updateRNDkingdomjj.apply(null,arguments)};f.__Z3mykv=function(){return f.asm.__Z3mykv.apply(null,arguments)};f.__Z3rndi=function(){return f.asm.__Z3rndi.apply(null,arguments)};f.__Z4cmykj=function(){return f.asm.__Z4cmykj.apply(null,arguments)};
f.__Z4krgbj=function(){return f.asm.__Z4krgbj.apply(null,arguments)};f.__Z4nAIsv=function(){return f.asm.__Z4nAIsv.apply(null,arguments)};f.__Z4testjj=function(){return f.asm.__Z4testjj.apply(null,arguments)};f.__Z5empXYv=function(){return f.asm.__Z5empXYv.apply(null,arguments)};f.__Z5knValjjj=function(){return f.asm.__Z5knValjjj.apply(null,arguments)};f.__Z5knamej=function(){return f.asm.__Z5knamej.apply(null,arguments)};f.__Z5nhlenv=function(){return f.asm.__Z5nhlenv.apply(null,arguments)};f.__Z5test2jj=
function(){return f.asm.__Z5test2jj.apply(null,arguments)};f.__Z5test3jj=function(){return f.asm.__Z5test3jj.apply(null,arguments)};f.__Z6amountv=function(){return f.asm.__Z6amountv.apply(null,arguments)};f.__Z6chterrj=function(){return f.asm.__Z6chterrj.apply(null,arguments)};f.__Z6dbgspdj=function(){return f.asm.__Z6dbgspdj.apply(null,arguments)};f.__Z6equalkj=function(){return f.asm.__Z6equalkj.apply(null,arguments)};f.__Z6gcyclev=function(){return f.asm.__Z6gcyclev.apply(null,arguments)};f.__Z6mapLocv=
function(){return f.asm.__Z6mapLocv.apply(null,arguments)};f.__Z6mwMorei=function(){return f.asm.__Z6mwMorei.apply(null,arguments)};f.__Z6mwiconv=function(){return f.asm.__Z6mwiconv.apply(null,arguments)};f.__Z6naddssj=function(){return f.asm.__Z6naddssj.apply(null,arguments)};f.__Z6nfolenv=function(){return f.asm.__Z6nfolenv.apply(null,arguments)};f.__Z6nhcompv=function(){return f.asm.__Z6nhcompv.apply(null,arguments)};f.__Z6onlADDjjjjb=function(){return f.asm.__Z6onlADDjjjjb.apply(null,arguments)};
f.__Z6pause0v=function(){return f.asm.__Z6pause0v.apply(null,arguments)};f.__Z6prelddv=function(){return f.asm.__Z6prelddv.apply(null,arguments)};f.__Z6rndResv=function(){return f.asm.__Z6rndResv.apply(null,arguments)};f.__Z6runKeyjb=function(){return f.asm.__Z6runKeyjb.apply(null,arguments)};f.__Z6sndNfov=function(){return f.asm.__Z6sndNfov.apply(null,arguments)};f.__Z6strOnlv=function(){return f.asm.__Z6strOnlv.apply(null,arguments)};f.__Z6trraddv=function(){return f.asm.__Z6trraddv.apply(null,
arguments)};f.__Z6unitXFj=function(){return f.asm.__Z6unitXFj.apply(null,arguments)};f.__Z6unitYFj=function(){return f.asm.__Z6unitYFj.apply(null,arguments)};f.__Z6updownji=function(){return f.asm.__Z6updownji.apply(null,arguments)};f.__Z7EDbuildj=function(){return f.asm.__Z7EDbuildj.apply(null,arguments)};f.__Z7adpterrv=function(){return f.asm.__Z7adpterrv.apply(null,arguments)};f.__Z7crtStxtv=function(){return f.asm.__Z7crtStxtv.apply(null,arguments)};f.__Z7delTexsv=function(){return f.asm.__Z7delTexsv.apply(null,
arguments)};f.__Z7empNamej=function(){return f.asm.__Z7empNamej.apply(null,arguments)};f.__Z7getPagev=function(){return f.asm.__Z7getPagev.apply(null,arguments)};f.__Z7knAIValjj=function(){return f.asm.__Z7knAIValjj.apply(null,arguments)};f.__Z7mouseUpiijb=function(){return f.asm.__Z7mouseUpiijb.apply(null,arguments)};f.__Z7nh19addj=function(){return f.asm.__Z7nh19addj.apply(null,arguments)};f.__Z7onldataj=function(){return f.asm.__Z7onldataj.apply(null,arguments)};f.__Z7plreadyv=function(){return f.asm.__Z7plreadyv.apply(null,
arguments)};f.__Z7readSUPP18emscripten_fetch_t=function(){return f.asm.__Z7readSUPP18emscripten_fetch_t.apply(null,arguments)};f.__Z7readSVGmmb=function(){return f.asm.__Z7readSVGmmb.apply(null,arguments)};f.__Z7resume0v=function(){return f.asm.__Z7resume0v.apply(null,arguments)};f.__Z7setupGLf=function(){return f.asm.__Z7setupGLf.apply(null,arguments)};f.__Z7ss1textiiiiiiiii=function(){return f.asm.__Z7ss1textiiiiiiiii.apply(null,arguments)};f.__Z7svpropsjjjjjjj=function(){return f.asm.__Z7svpropsjjjjjjj.apply(null,
arguments)};f.__Z7txtLoadv=function(){return f.asm.__Z7txtLoadv.apply(null,arguments)};f.__Z8EDbrush0ib=function(){return f.asm.__Z8EDbrush0ib.apply(null,arguments)};f.__Z8gstartedv=function(){return f.asm.__Z8gstartedv.apply(null,arguments)};f.__Z8liveChatj=function(){return f.asm.__Z8liveChatj.apply(null,arguments)};f.__Z8mapWidthv=function(){return f.asm.__Z8mapWidthv.apply(null,arguments)};f.__Z8mnameaddv=function(){return f.asm.__Z8mnameaddv.apply(null,arguments)};f.__Z8mwSelectj=function(){return f.asm.__Z8mwSelectj.apply(null,
arguments)};f.__Z8mwamounti=function(){return f.asm.__Z8mwamounti.apply(null,arguments)};f.__Z8nkingdomv=function(){return f.asm.__Z8nkingdomv.apply(null,arguments)};f.__Z8onlCountv=function(){return f.asm.__Z8onlCountv.apply(null,arguments)};f.__Z8preSetupj=function(){return f.asm.__Z8preSetupj.apply(null,arguments)};f.__Z8savegamev=function(){return f.asm.__Z8savegamev.apply(null,arguments)};f.__Z8shapointv=function(){return f.asm.__Z8shapointv.apply(null,arguments)};f.__Z8superLenv=function(){return f.asm.__Z8superLenv.apply(null,
arguments)};f.__Z8touchEndjj=function(){return f.asm.__Z8touchEndjj.apply(null,arguments)};f.__Z8userKickj=function(){return f.asm.__Z8userKickj.apply(null,arguments)};f.__Z8wtrcheckv=function(){return f.asm.__Z8wtrcheckv.apply(null,arguments)};f.__Z9RNDdeletej=function(){return f.asm.__Z9RNDdeletej.apply(null,arguments)};f.__Z9RNDobjexpv=function(){return f.asm.__Z9RNDobjexpv.apply(null,arguments)};f.__Z9addRNDobjv=function(){return f.asm.__Z9addRNDobjv.apply(null,arguments)};f.__Z9boolArrayt=function(){return f.asm.__Z9boolArrayt.apply(null,
arguments)};f.__Z9chmapsizei=function(){return f.asm.__Z9chmapsizei.apply(null,arguments)};f.__Z9closeRoomv=function(){return f.asm.__Z9closeRoomv.apply(null,arguments)};f.__Z9createMapi=function(){return f.asm.__Z9createMapi.apply(null,arguments)};f.__Z9getordersj=function(){return f.asm.__Z9getordersj.apply(null,arguments)};f.__Z9ginfonamejj=function(){return f.asm.__Z9ginfonamejj.apply(null,arguments)};f.__Z9mouseDowniij=function(){return f.asm.__Z9mouseDowniij.apply(null,arguments)};f.__Z9mouseMoveii=
function(){return f.asm.__Z9mouseMoveii.apply(null,arguments)};f.__Z9onLimits2ii=function(){return f.asm.__Z9onLimits2ii.apply(null,arguments)};f.__Z9rndforestv=function(){return f.asm.__Z9rndforestv.apply(null,arguments)};f.__Z9setupGamejjjjjjjjjjjjjjj=function(){return f.asm.__Z9setupGamejjjjjjjjjjjjjjj.apply(null,arguments)};f.__Z9setupOdinj=function(){return f.asm.__Z9setupOdinj.apply(null,arguments)};f.__Z9setupZoomf=function(){return f.asm.__Z9setupZoomf.apply(null,arguments)};f.__Z9shareNamej=
function(){return f.asm.__Z9shareNamej.apply(null,arguments)};f.__Z9stmenummxi=function(){return f.asm.__Z9stmenummxi.apply(null,arguments)};f.__Z9touchMovejj=function(){return f.asm.__Z9touchMovejj.apply(null,arguments)};var Wg=f.__ZSt18uncaught_exceptionv=function(){return f.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)};f.___cxa_can_catch=function(){return f.asm.___cxa_can_catch.apply(null,arguments)};f.___cxa_is_pointer_type=function(){return f.asm.___cxa_is_pointer_type.apply(null,arguments)};
f.___errno_location=function(){return f.asm.___errno_location.apply(null,arguments)};f._emscripten_get_sbrk_ptr=function(){return f.asm._emscripten_get_sbrk_ptr.apply(null,arguments)};f._emscripten_replace_memory=function(){return f.asm._emscripten_replace_memory.apply(null,arguments)};f._free=function(){return f.asm._free.apply(null,arguments)};f._llvm_bswap_i32=function(){return f.asm._llvm_bswap_i32.apply(null,arguments)};f._main=function(){return f.asm._main.apply(null,arguments)};var Rc=f._malloc=
function(){return f.asm._malloc.apply(null,arguments)};f._memcpy=function(){return f.asm._memcpy.apply(null,arguments)};f._memset=function(){return f.asm._memset.apply(null,arguments)};f.establishStackSpace=function(){return f.asm.establishStackSpace.apply(null,arguments)};var be=f.stackAlloc=function(){return f.asm.stackAlloc.apply(null,arguments)};f.stackRestore=function(){return f.asm.stackRestore.apply(null,arguments)};f.stackSave=function(){return f.asm.stackSave.apply(null,arguments)};f.dynCall_ii=
function(){return f.asm.dynCall_ii.apply(null,arguments)};f.dynCall_iidiiii=function(){return f.asm.dynCall_iidiiii.apply(null,arguments)};f.dynCall_iii=function(){return f.asm.dynCall_iii.apply(null,arguments)};f.dynCall_iiii=function(){return f.asm.dynCall_iiii.apply(null,arguments)};f.dynCall_iiiii=function(){return f.asm.dynCall_iiiii.apply(null,arguments)};f.dynCall_jiji=function(){return f.asm.dynCall_jiji.apply(null,arguments)};f.dynCall_v=function(){return f.asm.dynCall_v.apply(null,arguments)};
var vb=f.dynCall_vi=function(){return f.asm.dynCall_vi.apply(null,arguments)};f.dynCall_vii=function(){return f.asm.dynCall_vii.apply(null,arguments)};f.dynCall_viii=function(){return f.asm.dynCall_viii.apply(null,arguments)};f.dynCall_viiii=function(){return f.asm.dynCall_viiii.apply(null,arguments)};f.dynCall_viiiii=function(){return f.asm.dynCall_viiiii.apply(null,arguments)};f.dynCall_viiiiii=function(){return f.asm.dynCall_viiiiii.apply(null,arguments)};f.asm=Kf;var bc;zb=function a(){bc||Uc();
bc||(zb=a)};f.run=Uc;if(f.preInit)for("function"==typeof f.preInit&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();var re=!0;f.noInitialRun&&(re=!1);Ya=!0;Uc();var Hc=!1,p={};Xb=ab;var m,Sb,lf,yc,sb,Ud=function(){Hc=!0;for(var a=f,d=Object.keys(a),c=d.length,b="inspector71017 newUnit radar falseunit synchroHash rnd setupRandom randomTerrain unitMovement test setupInfo setupKingdom shapoint Uint16Array setupTech setupRequirements boolArray AIobjetive test2 searchUnit killUnit investigateTech AIprocess setupResources unitWorking movtablexe test3 unitParameter setupGL bufferColor getBufferID setupIMGinfo executeOrder shiftONOFF IMGdata Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove gManaMax setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms changeTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen rdnh19 crtStxt configTerrain delTexs gName touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeAI EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer".split(" "),
g=0,l=b.length;g<l;g++)for(var m=b[g],n=0;n<c;n++){var q=d[n];if("__"==q.substr(0,2)&&-1<q.indexOf(m)){p[b[g]]=a[q];break}}Sb=new Ja(p.shapoint(),4096);sb=new Ja(p.sharedFloatID(),5);lf=new Ja(p.sharedFloatID(),3);yc=new Ja(p.sharedFloatID(),4);ib(p.userConfig(parseInt(localStorage.color.substr(1),16)),17,r.name||"Guest");p.setupVersion(r.versionInt,!1,!!window.indexedDB);a={antialias:!1,alpha:!1,depth:!0};localStorage.webgl&&"2"!=localStorage.webgl||(h=k("tzar").getContext("webgl2",a));h||(h=k("tzar").getContext("webgl",
a),ba=!0);r.gl=h;Ud.waiting&&Rb();Xb()},ib=function(a,d,c){a=pa(a,d);for(var b=0;b<d;b++)a[b]=c.charCodeAt(b)};Ud.waiting=!1;f.postRun=[Ud];if(window.indexedDB){var Dc=window.indexedDB.open("nh2019",r.versionInt),Y;Dc.onsuccess=function(a){Y=Dc.result;Xg("basic",function(a){})};Dc.onupgradeneeded=function(a){Y=Dc.result;A(Y);try{Y.objectStoreNames.contains("basic")&&Y.deleteObjectStore("basic"),Y.objectStoreNames.contains("maps")||Y.createObjectStore("maps",{keyPath:"id",autoIncrement:!0}),Y.objectStoreNames.contains("mapsBlobs")||
Y.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),Y.objectStoreNames.contains("basic")||Y.createObjectStore("basic",{keyPath:"url"})}catch(d){console.error(d)}}}var Gg=function(a){Y&&(Y.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){})},Xg=function(a,d){if(Y){var c=Y.transaction([a],"readonly");if(c.objectStore(a).getAllKeys)a=c.objectStore(a).getAllKeys();else return d({target:{result:[]}});a.onsuccess=d}else d({target:{result:[]}})},Yg=function(a){a=
a.target.result;var d=a.length;if(d){var c=k("mapcache");c.innerHTML='<tr style="font-size:23px"><td>Name</td><td>Date</td><td>'+m.PLAYED_TIME+"</td></tr>";for(--d;-1<d;d--){var b=a[d],g=document.createElement("tr");g.cid=b.id;var f=new Date(b.date),h=f.getHours(),n="0"+f.getMinutes();f.getSeconds();var p=f.getDate(),q=f.getMonth()+1;f=f.getFullYear();h=h+":"+n.substr(-2)+" &nbsp; &nbsp;"+p+"/"+q+"/"+f;g.onclick=Vd;g.innerHTML="<td>"+(b.name||"savegame")+"</td><td>"+h+"</td><td>"+Ae(b.played)+"</td>";
c.appendChild(g)}A(a)}},Vd=function(){var a=this.cid;Y.transaction(["mapsBlobs"],"readwrite").objectStore("mapsBlobs").get(a).onsuccess=Vd.step2};Vd.step2=function(a){a=a.target.result;var d=new FileReader;d.onload=Ff;d.readAsArrayBuffer(a)};var aa=!1;var Lf=function(a){aa=!0;Rb(a)};var Qg=function(a,d,c,b,g,f,h,n,q){bb();var l=document.createElement("div"),r=document.createElement("div");l.id="unitProps";b="<table>\n    <tr><td>"+(m[oa[q]]+"</td><td></td></tr>\n    <tr><td>"+m.MISC_HEALTH3+' </td><td><input id="EEDhealth" type="number" value="'+
b+'" /></td></tr>\n    <tr><td>'+m.MAXHEALTH+'</td> <td><input id="EEDmhealth" type="number" value="'+g+'" /></td></tr>\n');if(c)if(2==c){if(d||a)b+="\n<tr><td>"+m.MISC_ATTACK3+'</td><td><input id="EEDattack" type="number" value="'+d+'" /></td></tr>\n<tr><td>'+m.MISC_DEFENCE3+'</td> <td><input id="EEDdefence" type="number" value="'+a+'" /></td></tr>\n'}else h&&(b+="<tr><td>"+m.MISC_KINGDOM3+' </td><td><select id="selectKingdom2">'+k("selectKingdom").innerHTML+"</select></td></tr>");else b+="\n<tr><td>"+
m.MISC_ATTACK3+'</td><td><input id="EEDattack" type="number" value="'+d+'" /></td></tr>\n<tr><td>'+m.MISC_DEFENCE3+'</td> <td><input id="EEDdefence" type="number" value="'+a+'" /></td></tr>\n<tr><td>'+m.VIEWMSG_MANNA+' <td><input id="EEDmana" type="number" value="'+f+'" /></td></tr>\n<tr><td>'+m.MISC_KINGDOM3+' </td><td><select id="selectKingdom2">'+k("selectKingdom").innerHTML+"</select></td></tr>\n";r.innerHTML=b+"</table>";a=document.createElement("button");a.innerHTML=m.SAVE_SAVE;a.onclick=function(){p.svprops(k("EEDattack")&&
parseInt(k("EEDattack").value),k("EEDdefence")&&parseInt(k("EEDdefence").value),parseInt(k("EEDhealth").value),parseInt(k("EEDmhealth").value),k("EEDmana")&&parseInt(k("EEDmana").value),n,k("selectKingdom2")&&parseInt(k("selectKingdom2").value));document.body.removeChild(k("unitProps"));xa()};r.appendChild(a);l.appendChild(r);document.body.appendChild(l);k("selectKingdom2")&&(k("selectKingdom2").value=h)},T=function(a){k(a).style.display="none"},X=function(a){k(a).style.display="block"},Xe=function(a){u.editor&&
(a=parseInt(k("brushSize").value)+a,a>k("brushSize").max?k("brushSize").value=k("brushSize").max:1>a?k("brushSize").value=1:k("brushSize").value=a)},ag=function(){A(this);this.parentElement.style.display="none";xa();var a=parseInt(k("EDmapSize").value);a!=p.mapWidth()&&(h.useProgram(I),h.uniform1f(h.getUniformLocation(I,"mapSize"),a),h.useProgram(G),h.uniform1f(h.getUniformLocation(G,"mapSize"),a),h.uniform1f(h.getUniformLocation(G,"zMax"),96*a),p.chmapsize(a),ma())},id=function(a){for(a=a.toString(16);6>
a.length;)a="0"+a;return"#"+a},Zg=function(){p.delEditorKingdom(this.team)},$g=function(){var a=this.team,d=Pa("mapPropsXtra");d.className="fullwindow";la("span",d,m.SP_SETUPRND_T_POPLIMIT);var c=la("input",d);c.type="number";c.onchange=function(){this.value=p.knVal(a,4,parseInt(this.value)+1)};c.value=p.knVal(a,4);la("br",d);p.knAIVal(a)&&(la("span",d,m.SP_SETUPRND_T_DIFF_LVL),c=la("input",d),c.type="number",c.onchange=function(){A(this.value);this.value=p.knAIVal(a,parseInt(this.value)+1)},c.value=
p.knAIVal(a),c.max=100,c.min=0);d=la("div",d);d.style.cssText="text-align:center";c=la("button",d,m.EQUALVALS,"display:block;margin:14px;");c.onclick=function(){return p.equalk(a)};c=la("button",d,m.GENERAL_CLOSE,"margin-top:30px");c.onclick=function(){return kb(k("mapPropsXtra"))}},ld=function(){var a=k("mapPropsWindow").getElementsByTagName("table")[0];a.id="edpltbl";a.innerHTML="";a.innerHTML+='<tr style="text-transform:uppercase;"><td>'+m.COLOUR+"</td><td>"+m.MP_SEARCH_T_PL_NAME+"</td><td>"+m.VIEWMSG_GOLD+
"</td><td>"+m.VIEWMSG_WOOD+"</td><td>"+m.VIEWMSG_FOOD+"</td><td>"+m.VIEWMSG_STONE+"</td><td>"+m.MP_SETUPMAP_T_COMP+"</td><td>"+m.TEAM+"</td></tr>";for(var d=1,c=p.nkingdom();d<c;d++)a.innerHTML+='\n<tr><td><input type="color"/></td><td><input type="text"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><label class="container">\n  <input type="checkbox">\n  <span class="checkmark"></span>\n</label></td>\n<td><input type="number" min="0"></td>\n<td><button id="EDmore'+
d+'" class="morei">...</button></td>\n<td><button id="EDel'+d+'" class="closeIcon"></button></td></tr>';a.innerHTML+="<tr><td><button id='editorAdd'>+</button></td></tr>";d=1;for(c=p.nkingdom();d<c;d++)a=k("EDel"+d),a.team=d,a.onclick=Zg,a=k("EDmore"+d),a.team=d,a.onclick=$g;k("editorAdd").onclick=function(){p.addEditorKingdom(1)};p.editorKingdoms()},Cc=function(){parseInt(this.value)?p.EDchangeRes(this.team,parseInt(this.value),this.res):(this.value="\u221e",p.EDchangeRes(this.team,Math.pow(2,31)-
1,this.res))},Rg=function(){p.EDchangeColor(this.team,parseInt(this.value.substr(1),16));Jb()},Sg=function(){var a=17;this.value.length<a&&(a=this.value.length);for(var d=Sb.viewU32(),c=0;17>c;c++)d[c]=0;for(c=0;c<a;c++)d[c]=this.value.charCodeAt(c);p.EDchangeName(this.team);Jb()},Tg=function(){p.knAIVal(this.team,100*this.checked+1)},Ug=function(){p.EDchangeTeam(this.team,parseInt(this.value))},Lg=function(){this.types.innerHTML=Bc[this.value];this.types.value=""},Kg=function(){p.updateRNDtype(this.rndid,
this.value)},Og=function(){p.updateRNDkingdom(this.rndid,this.value)},Mg=function(){p.updateRNDnumber(this.rndid,this.value)},Ng=function(){p.updateRNDeach256(this.rndid,this.checked)},Pg=function(){p.RNDdelete(this.rndid);Ec()},ah=function(){p.addRNDobj();Ec()},Ec=function(){k("rndtable").innerHTML='<tr style="height: 57px"><td>Type</td><td>Object</td><td>Amount</td><td>Each 256\u00b2</td><td>'+m.MISC_KINGDOM3+"</td><td></td></tr>";p.showrndobjs();var a=document.createElement("tr"),d=document.createElement("td"),
c=document.createElement("button");c.innerHTML=m.ADD;c.onclick=ah;c.style.cssText="background: rgba(255,255,255,0.1);font-size: 15px;margin-top: 22px;";d.appendChild(c);a.appendChild(d);k("rndtable").appendChild(a)},bh=function(a,d){for(var c=0;c<a.length;c++)k(a[c]).style.cssText=d},Ma=function(){var a=parseInt(this.min),d=parseInt(this.max),c=parseInt(this.value);c>d?this.value=this.max:c<a&&(this.value=this.min)},kd=function(a){for(var d="",c=0,b=Zc.length;c<b;c++){var g=Zc[c];var f=a?c==p.getTerrain()?
"selected":"":c==localStorage.terrain?"selected":"";d+='<option value="'+c+'" '+f+">"+g.name+"</option>"}return d},Bc,$f=function(){confirm('You will play as "'+da(pa(p.empName(p.myk()),17))+'", do you want continue? (CAUTION: IF YOU WANT SAVE CURRENT CUSTOM MAP, DO IT BEFORE ACCEPTING)')&&(aa=!1,Pe(),rd(),of(),h.useProgram(I),h.uniform1f(h.getUniformLocation(I,"mx"),0),h.uniform2fv(h.getUniformLocation(I,"minimapMargin"),[-4,-31]),h.useProgram(G),h.uniform1f(h.getUniformLocation(G,"mx"),-r.mx),p.plymapeditor())},
mf=function(){var a=0;if(localStorage.rndObjs){var d=localStorage.rndObjs.split(",");a=d.length;for(var c=Sb.viewU32(),b=0;b<a;c[b]=d[b++]);}p.stprndobjs(a)},vf=function(){k("mapconfiguration")||Pa("mapconfiguration");X("mapconfiguration");k("mapconfiguration").className="fullwindow";bb();if(""==k("mapconfiguration").innerHTML){mf();Bc=["","","",""];for(var a=0;4>a;a++){for(var d="",c=0,b=p.nfolen();c<b;c++){var g=p.ginfoname(c,a);g&&(d+='<option value="'+c+'">'+m[oa[g]].toUpperCase()+"</option>")}Bc[a]=
d}a="";1==localStorage.infinity&&(a="checked");k("mapconfiguration").innerHTML='<button id="closeButton1" class="closeIcon"></button>\n\n<table>\n<tbody>\n<tr><td>'+m.MP_SETUPMAP_T_MAP_SIZE+'</td><td><input id="mapxValue" type="number" value="'+localStorage.mapx+'" step="32" min="96" max="2048" /></td></tr>\n<tr><td>'+m.MP_SETUPMAP_T_TERRAIN+'</td><td><select name="terrain" id="terrainValue">'+kd()+'</select></td><td><img id="terrainPreview"/></td></tr>\n<tr><td>'+m.MP_SETUPMAP_T_MAP_TYPE+'</td><td>\n<select name="terrain" id="terrainRNDValue">\n<option value="0">'+
m.MP_SETUPMAP_M_TYPE_5+'</option>\n<option value="1">'+m.MP_SETUPMAP_M_TYPE_4+'</option>\n<option value="2">'+m.MP_SETUPMAP_M_TYPE_3+'</option>\n<option value="3">'+m.MP_SETUPMAP_M_TYPE_2+'</option>\n<option value="4">'+m.MP_SETUPMAP_M_TYPE_1+'</option>\n<option value="5">'+m.MP_SETUPMAP_M_TYPE_0+"</option>\n</select></td></tr>\n<tr><td>"+m.SP_SETUPMAP_T_GAME_TYPE+'</td><td>\n<select id="gameTypeValue">\n<option value="0" selected>'+m.MP_SETUPMAP_G_TYPE_0.split("|")[0]+'</option>\n<option value="1">'+
m.CAPTUREMODE+"</option>\n</select></td></tr>\n<tr><td>"+m.SP_SETUPRND_T_DIFF_LVL+'</td><td><input id="AIlevelValue" type="number" value="'+localStorage.AIlevel+'" min="15" max="100" /></td></tr>\n<tr><td><hr></td></tr>\n</tbody>\n<tbody id="config2">\n<tr><td>'+m.MP_SETUPMAP_T_ST_RES+"</td></tr>\n<tr><td><hr></td></tr>\n<tr><td>"+m.MISC_INF3+'</td><td><label class="container">\n  <input id="infinityValue" type="checkbox" '+a+'>\n  <span class="checkmark"></span>\n</label></td></tr>\n<tr><td>'+m.VIEWMSG_GOLD+
'</td><td><input id="goldResValue" type="number" value="'+localStorage.goldRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+m.VIEWMSG_WOOD+'</td><td><input id="woodResValue" type="number" value="'+localStorage.woodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+m.VIEWMSG_FOOD+'</td><td><input id="foodResValue" type="number" value="'+localStorage.foodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+m.VIEWMSG_STONE+'</td><td><input id="stoneResValue" type="number" value="'+
localStorage.stoneRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td><hr></td></tr>\n\n</td>\n</tr>\n<tr><td>'+m.INITIAL_PEASANTS+'</td><td><input type="number" value="'+localStorage.peons+'" id="peonsValue" min="0" max="100"/></td></tr>\n<tr><td>'+m.FREE_POP+'</td><td><input type="number" value="'+localStorage.freePop+'" id="freePopValue" min="0" /></td></tr>\n<tr><td>'+m.SP_SETUPMAP_T_POPLIMIT+'</td><td><input type="number" value="'+localStorage.maxPop+'" id="maxPopValue" min="100" max="50000" /></td></tr>\n</tbody>\n</table>\n<hr style="margin: 25px">\n<table>\n<tbody id="rndtable"></tbody>\n<table>\n';
k("terrainValue").onchange=function(){A(this.value,k("terrainValue").value);k("terrainPreview").src=r.cdn+Zc[this.value].name.toLocaleLowerCase()+".png"};k("terrainValue").onchange();k("gameTypeValue").onclick=function(){var a=parseInt(this.value);0==a?(k("rndtable").className="",k("config2").className=""):1==a&&(k("rndtable").className="hidetable",k("config2").className="hidetable")};k("gameTypeValue").value=localStorage.gameType;k("gameTypeValue").onclick();Ec();k("terrainRNDValue").value=localStorage.terrainRND;
k("maxPopValue").onchange=Ma;k("peonsValue").onchange=Ma;k("freePopValue").onchange=Ma;k("mapxValue").onchange=Ma;k("goldResValue").onchange=Ma;k("woodResValue").onchange=Ma;k("foodResValue").onchange=Ma;k("stoneResValue").onchange=Ma;k("AIlevelValue").onchange=Ma;bh(["goldResValue","woodResValue","foodResValue","stoneResValue"],"width: 158px");k("infinityValue").onchange=function(){var a=this.checked;k("goldResValue").disabled=a;k("stoneResValue").disabled=a;k("woodResValue").disabled=a;k("foodResValue").disabled=
a};k("infinityValue").onchange();k("closeButton1").onclick=function(){u.online&&tb();k("mapconfiguration").style.display="none";xa()}}else Ec()};k("returnmenu").onclick=$a;var Mf=function(){A(this,this.checked);localStorage[this.localProp]=this.checked},Nf=function(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.localProp&&(a=Ta(a));r[this.localProp]=a;localStorage[this.localProp]=a;ib(p.userConfig(parseInt(localStorage.color.substr(1),16)),17,localStorage.name)},Ic=
{Multiplayer:wb,RandomMap:Ef,MapEditor:Lf,CustomMap:function(){""==k("CustomMap").innerHTML?(k("CustomMap").innerHTML="<h2>"+m.SINGLESCR_LOAD.split("| ")[0]+'</h2>\n<input id="mapload" type="file" />\n<label for="mapload" id="maploadlabel">Choose a file</label>\n<table id="mapcache"></table>\n<div id="customMapcont" style="display:none">\n<table class="players" id="customaptable">\n<tbody id="custombody">\n</tbody>\n</table>\n<button style="margin-left:40px" id="startCustom" class="start startButton">'+
m.MP_MPLAYER_PLAY+'</button>\n<button style = "margin-left:40px" id="editCustom" class="start"> '+m.MAPEDITOR+'</button>\n<button style="margin-left:40px" id="closeCustom" class="start">'+m.GENERAL_CLOSE+"</button>\n</div>",k("closeCustom").onclick=function(){T("customMapcont");k("maploadlabel").style.display="inline-block";k("mapcache").style.display="table"},k("startCustom").onclick=function(){T("customMapcont");k("closeCustom").onclick();Rb()},k("editCustom").onclick=Lf,k("mapload").accept=".tzared",
k("mapload").onchange=function(a){a=k("mapload").files[0];A(a);a.name.split(".");var d=new FileReader;d.onload=Ff;d.readAsArrayBuffer(a)}):T("customMapcont");X("returnmenu");Y&&(Y.transaction(["maps"],"readwrite").objectStore("maps").getAll().onsuccess=Yg)},Settings:function(){var a=k("Settings");if(""==a.innerHTML){var d=document.createElement("h2");d.innerHTML=m.MP_MPLAYER_SETTINGS;a.appendChild(d);d=document.createElement("div");var c=document.createElement("span");c.innerHTML=m.COLOUR;d.appendChild(c);
var b=document.createElement("input");b.type="color";b.value=r.color;b.onchange=Nf;b.localProp="color";b.style.backgroundColor=r.color;d.appendChild(b);c=document.createElement("span");c.innerHTML=m.MP_SEARCH_T_PL_NAME;d.appendChild(c);b=document.createElement("input");b.type="text";b.value=String(r.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');b.onchange=Nf;b.localProp="name";b.spellcheck=!1;d.appendChild(b);c=document.createElement("span");c.innerHTML=m.LANGUAGE;d.appendChild(c);
c=document.createElement("select");c.innerHTML='<option value="en">English</option>\n<option value="es">Espa\u00f1ol</option>\n<option value="it">Italiano</option>\n<option value="pt">Portugu\u00eas</option>\n<option value="pl">Polski</option>\n<option value="cz">\u010ce\u0161tina</option>\n<option value="de">Deutsch</option>\n<option value="ru">\u0420\u0443\u0441\u0441\u043a\u0438\u0439</option>\n<option value="bg">\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438</option>\n<option value="se">Svenska (beta)</option>\n';
c.value=r.langstr;c.onchange=function(){localStorage.language=this.value;location.href=""};d.appendChild(c);c=document.createElement("span");c.innerHTML=m.AUTOFULLSCREEN;d.appendChild(c);var g=document.createElement("label");g.className="container";c=document.createElement("span");c.className="checkmark";b=document.createElement("input");b.type="checkbox";var f="true"==localStorage.fullscreen?!0:!1;b.checked=f;b.onchange=Mf;b.localProp="fullscreen";g.appendChild(b);g.appendChild(c);d.appendChild(g);
c=document.createElement("span");c.innerHTML="GPU";d.appendChild(c);c.style.marginTop="65px";c=document.createElement("select");c.innerHTML='<option value="1">WebGL 1</option>\n<option value="2">WebGL 2 (recommended)</option>\n';c.value=ba?1:2;c.onchange=function(){localStorage.webgl=this.value;location.href=""};d.appendChild(c);la("span",d,m.SHADOWS);g=document.createElement("label");g.className="container";c=document.createElement("span");c.className="checkmark";b=document.createElement("input");
b.type="checkbox";f="true"==localStorage.shadows;b.checked=f;b.onchange=Mf;b.localProp="shadows";g.appendChild(b);g.appendChild(c);d.appendChild(g);a.appendChild(d)}X("returnmenu")},About:function(){var a=k("About");""==a.innerHTML&&(a.innerHTML='<div style="text-align:center;    user-select: text;"><div class="svgnehhon" style="background-repeat: no-repeat;height:342px;background-position: center;"></div>\nFully programmed by Donov<p>\n<p>Graphics, sound and game logic by Haemimont</p>\n<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url" target="_blank"><img src="nehhon/donate.gif" /></a><p>\nContact:</p>\n<a href=\'mailto:webmaster@nehhon.com\' target="_blank">webmaster@nehhon.com</a> <br> <a href="https://twitter.com/TzaredGame" target="_blank">@TzaredGame</a>\n<hr>\n<p style="margin-bottom:40px;">Special thanks to:</p>\n<div>\n<a href="https://www.crazygames.com/c/io" target="_blank">CRAZYGAMES.COM</a>\n<p>\n<img style="max-width:422px" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODc0LjMgMzkzLjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDg3NC4zIDM5My43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6I0ZGRkZGRjt9LnN0MXtmaWxsOiNGMzgwMjA7fS5zdDJ7ZmlsbDojRkFBRTQwO308L3N0eWxlPjxnPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03OTAuNiwyNzEuOWMtMy40LDAtNi4xLTIuNy02LjEtNi4xYzAtMy4zLDIuNy02LjEsNi4xLTYuMWMzLjMsMCw2LjEsMi43LDYuMSw2LjFDNzk2LjcsMjY5LjEsNzkzLjksMjcxLjksNzkwLjYsMjcxLjkgTTc5MC42LDI2MC45Yy0yLjcsMC00LjksMi4yLTQuOSw0LjljMCwyLjcsMi4yLDQuOSw0LjksNC45YzIuNywwLDQuOS0yLjIsNC45LTQuOUM3OTUuNSwyNjMuMSw3OTMuMywyNjAuOSw3OTAuNiwyNjAuOSBNNzkzLjcsMjY5aC0xLjRsLTEuMi0yLjNoLTEuNnYyLjNoLTEuM3YtNi43aDMuMmMxLjQsMCwyLjMsMC45LDIuMywyLjJjMCwxLTAuNiwxLjctMS40LDJMNzkzLjcsMjY5eiBNNzkxLjMsMjY1LjVjMC41LDAsMS0wLjMsMS0xYzAtMC44LTAuNC0xLTEtMWgtMnYyTDc5MS4zLDI2NS41TDc5MS4zLDI2NS41eiIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTU1LjEsMjU5LjEgMTcwLjcsMjU5LjEgMTcwLjcsMzAxLjYgMTk3LjgsMzAxLjYgMTk3LjgsMzE1LjIgMTU1LjEsMzE1LjIgIi8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTIxMy45LDI4Ny4zdi0wLjJjMC0xNi4xLDEzLTI5LjIsMzAuMy0yOS4yczMwLjEsMTIuOSwzMC4xLDI5djAuMmMwLDE2LjEtMTMsMjkuMi0zMC4zLDI5LjJDMjI2LjcsMzE2LjMsMjEzLjksMzAzLjQsMjEzLjksMjg3LjMgTTI1OC41LDI4Ny4zdi0wLjJjMC04LjEtNS44LTE1LjEtMTQuNC0xNS4xYy04LjUsMC0xNC4yLDYuOS0xNC4yLDE1djAuMmMwLDguMSw1LjgsMTUuMSwxNC4zLDE1LjFDMjUyLjgsMzAyLjMsMjU4LjUsMjk1LjQsMjU4LjUsMjg3LjMiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjkzLjQsMjkwLjZ2LTMxLjVoMTUuOHYzMS4yYzAsOC4xLDQuMSwxMS45LDEwLjMsMTEuOXMxMC4zLTMuNywxMC4zLTExLjV2LTMxLjZoMTUuOHYzMS4xYzAsMTguMS0xMC4zLDI2LTI2LjMsMjZDMzAzLjQsMzE2LjIsMjkzLjQsMzA4LjIsMjkzLjQsMjkwLjYiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzY5LjQsMjU5LjFIMzkxYzIwLDAsMzEuNywxMS41LDMxLjcsMjcuN3YwLjJjMCwxNi4yLTExLjgsMjguMi0zMiwyOC4yaC0yMS4zTDM2OS40LDI1OS4xTDM2OS40LDI1OS4xeiBNMzkxLjMsMzAxLjRjOS4zLDAsMTUuNS01LjEsMTUuNS0xNC4ydi0wLjJjMC05LTYuMi0xNC4yLTE1LjUtMTQuMkgzODV2MjguNUgzOTEuM3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjQ0NS4zLDI1OS4xIDQ5MC4yLDI1OS4xIDQ5MC4yLDI3Mi43IDQ2MC44LDI3Mi43IDQ2MC44LDI4Mi4zIDQ4Ny40LDI4Mi4zIDQ4Ny40LDI5NS4yIDQ2MC44LDI5NS4yIDQ2MC44LDMxNS4yIDQ0NS4zLDMxNS4yICIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNTExLjgsMjU5LjEgNTI3LjMsMjU5LjEgNTI3LjMsMzAxLjYgNTU0LjUsMzAxLjYgNTU0LjUsMzE1LjIgNTExLjgsMzE1LjIgIi8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTU5NS4xLDI1OC43aDE1bDIzLjksNTYuNWgtMTYuN2wtNC4xLTEwaC0yMS42bC00LDEwaC0xNi4zTDU5NS4xLDI1OC43eiBNNjA4LjgsMjkzLjFsLTYuMi0xNS45bC02LjMsMTUuOUg2MDguOHoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjU0LDI1OS4xaDI2LjVjOC42LDAsMTQuNSwyLjIsMTguMyw2LjFjMy4zLDMuMiw1LDcuNSw1LDEzLjF2MC4yYzAsOC42LTQuNiwxNC4zLTExLjUsMTcuMmwxMy40LDE5LjZoLTE4bC0xMS4zLTE3aC02Ljh2MTdINjU0TDY1NCwyNTkuMUw2NTQsMjU5LjF6IE02NzkuOCwyODZjNS4zLDAsOC4zLTIuNiw4LjMtNi42di0wLjJjMC00LjQtMy4yLTYuNi04LjQtNi42aC0xMC4yVjI4Nkw2NzkuOCwyODZMNjc5LjgsMjg2eiIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzI2LjIsMjU5LjEgNzcxLjMsMjU5LjEgNzcxLjMsMjcyLjMgNzQxLjYsMjcyLjMgNzQxLjYsMjgwLjggNzY4LjUsMjgwLjggNzY4LjUsMjkzLjEgNzQxLjYsMjkzLjEgNzQxLjYsMzAyIDc3MS43LDMwMiA3NzEuNywzMTUuMiA3MjYuMiwzMTUuMiAiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTIxLjEsMjkzLjljLTIuMiw0LjktNi44LDguNC0xMi44LDguNGMtOC41LDAtMTQuMy03LjEtMTQuMy0xNS4xVjI4N2MwLTguMSw1LjctMTUsMTQuMi0xNWM2LjQsMCwxMS4zLDMuOSwxMy4zLDkuM2gxNi40Yy0yLjYtMTMuNC0xNC40LTIzLjMtMjkuNi0yMy4zYy0xNy4zLDAtMzAuMywxMy4xLTMwLjMsMjkuMnYwLjJjMCwxNi4xLDEyLjgsMjksMzAuMSwyOWMxNC44LDAsMjYuNC05LjYsMjkuNC0yMi40TDEyMS4xLDI5My45TDEyMS4xLDI5My45eiIvPjxnPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzUyLjksMTY5LjYgNzEwLDE0NSA3MDIuNiwxNDEuOCA1MjcuMSwxNDMgNTI3LjEsMjMyLjEgNzUyLjksMjMyLjEgIi8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTY3NC44LDIyMy45YzIuMS03LjIsMS4zLTEzLjgtMi4yLTE4LjdjLTMuMi00LjUtOC42LTcuMS0xNS4xLTcuNGwtMTIzLjEtMS42Yy0wLjgsMC0xLjUtMC40LTEuOS0xYy0wLjQtMC42LTAuNS0xLjQtMC4zLTIuMmMwLjQtMS4yLDEuNi0yLjEsMi45LTIuMmwxMjQuMi0xLjZjMTQuNy0wLjcsMzAuNy0xMi42LDM2LjMtMjcuMmw3LjEtMTguNWMwLjMtMC44LDAuNC0xLjYsMC4yLTIuNGMtOC0zNi4yLTQwLjMtNjMuMi03OC45LTYzLjJjLTM1LjYsMC02NS44LDIzLTc2LjYsNTQuOWMtNy01LjItMTUuOS04LTI1LjUtNy4xYy0xNy4xLDEuNy0zMC44LDE1LjQtMzIuNSwzMi41Yy0wLjQsNC40LTAuMSw4LjcsMC45LDEyLjdjLTI3LjksMC44LTUwLjIsMjMuNi01MC4yLDUxLjdjMCwyLjUsMC4yLDUsMC41LDcuNWMwLjIsMS4yLDEuMiwyLjEsMi40LDIuMWwyMjcuMiwwYzEuMywwLDIuNS0wLjksMi45LTIuMkw2NzQuOCwyMjMuOXoiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNNzE0LDE0NC44Yy0xLjEsMC0yLjMsMC0zLjQsMC4xYy0wLjgsMC0xLjUsMC42LTEuOCwxLjRsLTQuOCwxNi43Yy0yLjEsNy4yLTEuMywxMy44LDIuMiwxOC43YzMuMiw0LjUsOC42LDcuMSwxNS4xLDcuNGwyNi4yLDEuNmMwLjgsMCwxLjUsMC40LDEuOSwxYzAuNCwwLjYsMC41LDEuNSwwLjMsMi4yYy0wLjQsMS4yLTEuNiwyLjEtMi45LDIuMmwtMjcuMywxLjZjLTE0LjgsMC43LTMwLjcsMTIuNi0zNi4zLDI3LjJsLTIsNS4xYy0wLjQsMSwwLjMsMiwxLjQsMmg5My44YzEuMSwwLDIuMS0wLjcsMi40LTEuOGMxLjYtNS44LDIuNS0xMS45LDIuNS0xOC4yQzc4MS4zLDE3NSw3NTEuMSwxNDQuOCw3MTQsMTQ0LjgiLz48L2c+PC9nPjwvc3ZnPg==" alt="cloudflare">\n<p>\n&\n<p>\nPenetrenko, Remi Sluz, Edgaras, Hekas\n\n</div>\n</div>');
X("returnmenu")},Guide:Qe};k("about").onclick=function(){location.hash="About"};k("discord").onclick=function(){window.open("https://discord.gg/ndxJHxT","_blank")};k("help").onclick=function(){location.hash="#Guide"};k("mult0").onclick=function(){location.hash="Multiplayer"};k("rnd0").onclick=function(){location.hash="RandomMap"};k("load0").onclick=function(){location.hash="CustomMap"};k("editor0").onclick=function(){location.hash="MapEditor"};k("settings0").onclick=function(){location.hash="Settings"};
hb();(function(){var a=document.getElementsByTagName("head")[0],d=document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href="b.css";d.media="all";a.appendChild(d)})();(function(a,d,c,b,f,h,k){a.GoogleAnalyticsObject=f;a[f]=a[f]||function(){(a[f].q=a[f].q||[]).push(arguments)};a[f].l=1*new Date;h=d.createElement(c);k=d.getElementsByTagName(c)[0];h.async=1;h.src=b;k.parentNode.insertBefore(h,k)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create",
"UA-105062193-1","auto");ga("send","pageview");var Of=function(a){this.arr=a};Of.prototype.index=function(a){return this.arr.indexOf(a)};localStorage.lastVersion=r.versionInt;var Zf=new Of("move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha".split(" "))})();
